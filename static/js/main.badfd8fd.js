/*! For license information please see main.badfd8fd.js.LICENSE.txt */
(()=>{var e={813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,I(S);else{var t=r(c);null!==t&&F(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(A),A=-1),f=!0;var a=p;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!D());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&F(w,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,M=!1,E=null,A=-1,T=5,C=-1;function D(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(M=!1,E=null)}}else M=!1}if("function"===typeof x)_=function(){x(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,k=R.port2;R.port1.onmessage=N,_=function(){k.postMessage(null)}}else _=function(){v(N,0)};function I(e){E=e,M||(M=!0,_())}function F(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(y(A),A=-1):g=!0,F(w,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,I(S))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},784:(e,t,n)=>{"use strict";e.exports=n(813)},695:e=>{function t(e,t,n){var r,i,a,o,s;function l(){var u=Date.now()-o;u<t&&u>=0?r=setTimeout(l,t-u):(r=null,n||(s=e.apply(a,i),a=i=null))}null==t&&(t=100);var u=function(){a=this,i=arguments,o=Date.now();var u=n&&!r;return r||(r=setTimeout(l,t)),u&&(s=e.apply(a,i),a=i=null),s};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(s=e.apply(a,i),a=i=null,clearTimeout(r),r=null)},u}t.debounce=t,e.exports=t},147:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n={"{":"\\{","}":"\\}","\\":"\\textbackslash{}","#":"\\#",$:"\\$","%":"\\%","&":"\\&","^":"\\textasciicircum{}",_:"\\_","~":"\\textasciitilde{}"},r={"\u2013":"\\--","\u2014":"\\---"," ":"~","\t":"\\qquad{}","\r\n":"\\newline{}","\n":"\\newline{}"},i=function(e,n){return t({},e,n)};e.exports=function(e){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.preserveFormatting,s=void 0!==o&&o,l=a.escapeMapFn,u=void 0===l?i:l,c=String(e),h="",d=u(t({},n),s?t({},r):{}),p=Object.keys(d),f=function(){var e=!1;p.forEach((function(t,n){e||c.length>=t.length&&c.slice(0,t.length)===t&&(h+=d[p[n]],c=c.slice(t.length,c.length),e=!0)})),e||(h+=c.slice(0,1),c=c.slice(1,c.length))};c;)f();return h}},939:e=>{e.exports=function e(t,n){"use strict";var r,i,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},h=c(t).replace(o,"")||"",d=c(n).replace(o,"")||"",p=h.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(h.match(l),16)||1!==p.length&&h.match(s)&&Date.parse(h),g=parseInt(d.match(l),16)||m&&d.match(s)&&Date.parse(d)||null;if(g){if(m<g)return-1;if(m>g)return 1}for(var v=0,y=Math.max(p.length,f.length);v<y;v++){if(r=!(p[v]||"").match(u)&&parseFloat(p[v])||p[v]||0,i=!(f[v]||"").match(u)&&parseFloat(f[v])||f[v]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!==typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),k=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var O,B=Object.assign;function L(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?L(e):""}function H(e){switch(e.tag){case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case S:return"Portal";case E:return"Profiler";case M:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function K(e,t){J(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ae(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,_e=null,Me=null;function Ee(e){if(e=xi(e)){if("function"!==typeof Se)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),Se(e.stateNode,e.type,t))}}function Ae(e){_e?Me?Me.push(e):Me=[e]:_e=e}function Te(){if(_e){var e=_e,t=Me;if(Me=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==_e||null!==Me)&&(De(),Te())}}function ke(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ie=!1;if(c)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(ce){Ie=!1}function Pe(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Oe=!1,Be=null,Le=!1,ze=null,Ue={onError:function(e){Oe=!0,Be=e}};function He(e,t,n,r,i,a,o,s,l){Oe=!1,Be=null,Pe.apply(Ue,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return je(i),e;if(o===r)return je(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Je=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,St,_t,Mt,Et,At=!1,Tt=[],Ct=null,Dt=null,Nt=null,Rt=new Map,kt=new Map,It=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Lt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function zt(e,t,n){Lt(e)&&n.delete(t)}function Ut(){At=!1,null!==Ct&&Lt(Ct)&&(Ct=null),null!==Dt&&Lt(Dt)&&(Dt=null),null!==Nt&&Lt(Nt)&&(Nt=null),Rt.forEach(zt),kt.forEach(zt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function qt(e){function t(t){return Ht(t,e)}if(0<Tt.length){Ht(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ht(Ct,e),null!==Dt&&Ht(Dt,e),null!==Nt&&Ht(Nt,e),Rt.forEach(t),kt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Bt(n),null===n.blockedOn&&It.shift()}var Vt=b.ReactCurrentBatchConfig,jt=!0;function Gt(e,t,n,r){var i=xt,a=Vt.transition;Vt.transition=null;try{xt=1,Xt(e,t,n,r)}finally{xt=i,Vt.transition=a}}function Wt(e,t,n,r){var i=xt,a=Vt.transition;Vt.transition=null;try{xt=4,Xt(e,t,n,r)}finally{xt=i,Vt.transition=a}}function Xt(e,t,n,r){if(jt){var i=$t(e,t,n,r);if(null===i)jr(e,t,r,Yt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Ot(Dt,e,t,n,r,i),!0;case"mouseover":return Nt=Ot(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Ot(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,kt.set(a,Ot(kt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ft.indexOf(e)){for(;null!==i;){var a=xi(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&jr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else jr(e,t,r,null,n)}}var Yt=null;function $t(e,t,n,r){if(Yt=null,null!==(e=yi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Kt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Kt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=B({},un,{view:0,detail:0}),dn=an(hn),pn=B({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(B({},pn,{dataTransfer:0})),gn=an(B({},hn,{relatedTarget:0})),vn=an(B({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=B({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=an(yn),bn=an(B({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function En(){return Mn}var An=B({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(An),Cn=an(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(B({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(B({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=B({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kn=an(Rn),In=[9,13,27,32],Fn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var On=c&&"TextEvent"in window&&!Pn,Bn=c&&(!Fn||Pn&&8<Pn&&11>=Pn),Ln=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ae(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Xn=null;function Yn(e){Lr(e,0)}function $n(e){if(X(bi(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Kn;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Kn=Qn}else Kn=!1;Jn=Kn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Xn=Wn=null)}function nr(e){if("value"===e.propertyName&&$n(Xn)){var t=[];Gn(t,Xn,e,we(e)),Re(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Xn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Mr={};function Er(e){if(_r[e])return _r[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mr)return _r[e]=n[t];return e}c&&(Mr=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Ar=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Dr=Er("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){Nr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Rr.length;Ir++){var Fr=Rr[Ir];kr(Fr.toLowerCase(),"on"+(Fr[0].toUpperCase()+Fr.slice(1)))}kr(Ar,"onAnimationEnd"),kr(Tr,"onAnimationIteration"),kr(Cr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(Dr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(He.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var c=Be;Oe=!1,Be=null,Le||(Le=!0,ze=c)}}(r,t,void 0,e),e.currentTarget=null}function Lr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Br(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Br(i,s,u),a=l}}}if(Le)throw e=ze,Le=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Hr]){e[Hr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Ur("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Zt(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Dn;break;case Ar:case Tr:case Cr:l=vn;break;case Dr:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=kn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=ke(f,d))&&c.push(Gr(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[fi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=qe(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?s:bi(l),p=null==u?s:bi(u),(s=new c(m,f+"leave",l,n,i)).target=h,s.relatedTarget=p,m=null,yi(i)===r&&((c=new c(d,f+"enter",u,n,i)).target=p,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,f=0,p=c=l;p;p=Xr(p))f++;for(p=0,m=d;m;m=Xr(m))p++;for(;0<f-p;)c=Xr(c),f--;for(;0<p-f;)d=Xr(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xr(c),d=Xr(d)}c=null}else c=null;null!==l&&Yr(o,s,l,c,!1),null!==u&&null!==h&&Yr(o,h,u,c,!0)}if("select"===(l=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Zn;else if(jn(s))if(Jn)g=or;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ar);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?bi(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Fn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qn?Un(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Bn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==x?"onCompositionEnd"===x&&qn&&(y=en()):(Kt="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(v=Wr(r,x)).length&&(x=new bn(x,e,null,n,i),o.push({event:x,listeners:v}),y?x.data=y:null!==(y=Hn(n))&&(x.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(zn=!0,Ln);case"textInput":return(e=t.data)===Ln&&zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Fn&&Un(e,t)?(e=en(),Qt=Kt=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Lr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=ke(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=ke(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=ke(n,a))&&o.unshift(Gr(n,l,s)):i||null!=(l=ke(n,a))&&o.push(Gr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Zr,"")}function Kr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[pi]||null}var Si=[],_i=-1;function Mi(e){return{current:e}}function Ei(e){0>_i||(e.current=Si[_i],Si[_i]=null,_i--)}function Ai(e,t){_i++,Si[_i]=e.current,e.current=t}var Ti={},Ci=Mi(Ti),Di=Mi(!1),Ni=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ki(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){Ei(Di),Ei(Ci)}function Fi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ai(Ci,t),Ai(Di,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return B({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ai(Ci,e),Ai(Di,Di.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Di),Ei(Ci),Ai(Ci,e)):Ei(Di),Ai(Di,n)}var Li=null,zi=!1,Ui=!1;function Hi(e){null===Li?Li=[e]:Li.push(e)}function qi(){if(!Ui&&null!==Li){Ui=!0;var e=0,t=xt;try{var n=Li;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Li=null,zi=!1}catch(i){throw null!==Li&&(Li=Li.slice(e+1)),Xe(Qe,qi),i}finally{xt=t,Ui=!1}}return null}var Vi=[],ji=0,Gi=null,Wi=0,Xi=[],Yi=0,$i=null,Zi=1,Ji="";function Ki(e,t){Vi[ji++]=Wi,Vi[ji++]=Gi,Gi=e,Wi=t}function Qi(e,t,n){Xi[Yi++]=Zi,Xi[Yi++]=Ji,Xi[Yi++]=$i,$i=e;var r=Zi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Zi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Zi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Ki(e,1),Qi(e,1,0))}function ta(e){for(;e===Gi;)Gi=Vi[--ji],Vi[ji]=null,Wi=Vi[--ji],Vi[ji]=null;for(;e===$i;)$i=Xi[--Yi],Xi[Yi]=null,Ji=Xi[--Yi],Xi[Yi]=null,Zi=Xi[--Yi],Xi[Yi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Ru(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Zi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ru(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ui(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=b.ReactCurrentBatchConfig;function ga(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===_?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===k&&ya(a)===t.type)?((r=i(t,n.props)).ref=ga(e,t,n),r.return=e,r):((r=Fu(n.type,n.key,n.props,null,e.mode,r)).ref=ga(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Pu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fu(t.type,t.key,t.props,null,e.mode,n)).ref=ga(e,null,t),n.return=e,n;case S:return(t=Lu(t,e.mode,n)).return=e,t;case k:return d(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Pu(t,e.mode,n,null)).return=e,t;va(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case S:return n.key===i?c(e,t,n,r):null;case k:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:h(e,t,n,r,null);va(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);va(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,h=g}if(m===s.length)return n(i,h),ia&&Ki(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return ia&&Ki(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(g=f(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ki(i,m),u}function g(i,s,l,u){var c=P(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=p(i,m,y.value,u);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(i,m),s=o(x,s,g),null===h?c=x:h.sibling=x,h=x,m=v}if(y.done)return n(i,m),ia&&Ki(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return ia&&Ki(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ki(i,g),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===_){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===k&&ya(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=ga(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===_?((a=Pu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Fu(o.type,o.key,o.props,null,r.mode,l)).ref=ga(r,a,o),l.return=r,r=l)}return s(r);case S:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Lu(o,r.mode,l)).return=r,r=a}return s(r);case k:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(P(o))return g(r,a,o,l);va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Bu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var ba=xa(!0),wa=xa(!1),Sa=Mi(null),_a=null,Ma=null,Ea=null;function Aa(){Ea=Ma=_a=null}function Ta(e){var t=Sa.current;Ei(Sa),e._currentValue=t}function Ca(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Da(e,t){_a=e,Ea=Ma=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Na(e){var t=e._currentValue;if(Ea!==e)if(e={context:e,memoizedValue:t,next:null},null===Ma){if(null===_a)throw Error(a(308));Ma=e,_a.dependencies={lanes:0,firstContext:e}}else Ma=Ma.next=e;return t}var Ra=null;function ka(e){null===Ra?Ra=[e]:Ra.push(e)}function Ia(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,ka(t)):(n.next=i.next,i.next=n),t.interleaved=n,Fa(e,r)}function Fa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Fa(e,n)}return null===(i=r.interleaved)?(t.next=t,ka(r)):(t.next=i.next,i.next=t),r.interleaved=t,Fa(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qa(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=B({},h,d);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=h):c=c.next=p,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=o,e.lanes=o,e.memoizedState=h}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja={},Ga=Mi(ja),Wa=Mi(ja),Xa=Mi(ja);function Ya(e){if(e===ja)throw Error(a(174));return e}function $a(e,t){switch(Ai(Xa,t),Ai(Wa,e),Ai(Ga,ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ga),Ai(Ga,t)}function Za(){Ei(Ga),Ei(Wa),Ei(Xa)}function Ja(e){Ya(Xa.current);var t=Ya(Ga.current),n=le(t,e.type);t!==n&&(Ai(Wa,e),Ai(Ga,n))}function Ka(e){Wa.current===e&&(Ei(Ga),Ei(Wa))}var Qa=Mi(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,io=b.ReactCurrentBatchConfig,ao=0,oo=null,so=null,lo=null,uo=!1,co=!1,ho=0,po=0;function fo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function go(e,t,n,r,i,o){if(ao=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?Qo:es,e=n(r,i),co){o=0;do{if(co=!1,ho=0,25<=o)throw Error(a(301));o+=1,lo=so=null,t.updateQueue=null,ro.current=ts,e=n(r,i)}while(co)}if(ro.current=Ko,t=null!==so&&null!==so.next,ao=0,lo=so=oo=null,uo=!1,t)throw Error(a(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function xo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((ao&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,oo.lanes|=h,Ol|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,oo.lanes|=o,Ol|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _o(){}function Mo(e,t){var n=oo,r=xo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,Oo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,Ro(9,Ao.bind(null,n,r,i,t),void 0,null),null===Dl)throw Error(a(349));0!==(30&ao)||Eo(n,t,i)}return i}function Eo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Do(e)}function To(e,t,n){return n((function(){Co(t)&&Do(e)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Do(e){var t=Fa(e,1);null!==t&&nu(t,e,1,-1)}function No(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function Ro(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ko(){return xo().memoizedState}function Io(e,t,n,r){var i=yo();oo.flags|=e,i.memoizedState=Ro(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ro(t,n,a,r))}oo.flags|=e,i.memoizedState=Ro(1|t,n,a,r)}function Po(e,t){return Io(8390656,8,e,t)}function Oo(e,t){return Fo(2048,8,e,t)}function Bo(e,t){return Fo(4,2,e,t)}function Lo(e,t){return Fo(4,4,e,t)}function zo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,zo.bind(null,t,e),n)}function Ho(){}function qo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jo(e,t,n){return 0===(21&ao)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),oo.lanes|=n,Ol|=n,e.baseState=!0),t)}function Go(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=io.transition;io.transition={};try{e(!1),t()}finally{xt=n,io.transition=r}}function Wo(){return xo().memoizedState}function Xo(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))Zo(t,n);else if(null!==(n=Ia(e,t,n,r))){nu(n,e,r,eu()),Jo(n,t,r)}}function Yo(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))Zo(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,ka(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ia(e,t,i,r))&&(nu(n,e,r,i=eu()),Jo(n,t,r))}}function $o(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Zo(e,t){co=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Ko={readContext:Na,useCallback:fo,useContext:fo,useEffect:fo,useImperativeHandle:fo,useInsertionEffect:fo,useLayoutEffect:fo,useMemo:fo,useReducer:fo,useRef:fo,useState:fo,useDebugValue:fo,useDeferredValue:fo,useTransition:fo,useMutableSource:fo,useSyncExternalStore:fo,useId:fo,unstable_isNewReconciler:!1},Qo={readContext:Na,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Na,useEffect:Po,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Io(4194308,4,zo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=yo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:No,useDebugValue:Ho,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Go.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,i=yo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Dl)throw Error(a(349));0!==(30&ao)||Eo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Po(To.bind(null,r,o,e),[e]),r.flags|=2048,Ro(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Dl.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Zi&~(1<<32-ot(Zi)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Na,useCallback:qo,useContext:Na,useEffect:Oo,useImperativeHandle:Uo,useInsertionEffect:Bo,useLayoutEffect:Lo,useMemo:Vo,useReducer:wo,useRef:ko,useState:function(){return wo(bo)},useDebugValue:Ho,useDeferredValue:function(e){return jo(xo(),so.memoizedState,e)},useTransition:function(){return[wo(bo)[0],xo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Mo,useId:Wo,unstable_isNewReconciler:!1},ts={readContext:Na,useCallback:qo,useContext:Na,useEffect:Oo,useImperativeHandle:Uo,useInsertionEffect:Bo,useLayoutEffect:Lo,useMemo:Vo,useReducer:So,useRef:ko,useState:function(){return So(bo)},useDebugValue:Ho,useDeferredValue:function(e){var t=xo();return null===so?t.memoizedState=e:jo(t,so.memoizedState,e)},useTransition:function(){return[So(bo)[0],xo().memoizedState]},useMutableSource:_o,useSyncExternalStore:Mo,useId:Wo,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=La(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,i))&&(nu(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=La(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,i))&&(nu(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=La(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=za(e,i,r))&&(nu(t,e,r,n),Ua(t,e,r))}};function as(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function os(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Na(a):(i=ki(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Na(a):(a=ki(t)?Ni:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(rs(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),qa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=La(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,Gl=r),hs(0,t)},n}function fs(e,t,n){(n=La(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Eu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=La(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=b.ReactCurrentOwner,xs=!1;function bs(e,t,n,r){t.child=null===e?wa(t,null,n,r):ba(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Da(t,i),r=go(e,t,n,r,a,i),n=vo(),null===e||xs?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function Ss(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||ku(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_s(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return js(e,t,i)}return t.flags|=1,(e=Iu(a,r)).ref=t.ref,e.return=t,t.child=e}function _s(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,js(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return As(e,t,n,r,i)}function Ms(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Il,kl),kl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Il,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ai(Il,kl),kl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ai(Il,kl),kl|=r;return bs(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function As(e,t,n,r,i){var a=ki(n)?Ni:Ci.current;return a=Ri(t,a),Da(t,i),n=go(e,t,n,r,a,i),r=vo(),null===e||xs?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,js(e,t,i))}function Ts(e,t,n,r,i){if(ki(n)){var a=!0;Oi(t)}else a=!1;if(Da(t,i),null===t.stateNode)Vs(e,t),os(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Na(u):u=Ri(t,u=ki(n)?Ni:Ci.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,o,r,u),Pa=!1;var d=t.memoizedState;o.state=d,qa(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Di.current||Pa?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=Pa||as(t,n,s,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ba(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Na(l):l=Ri(t,l=ki(n)?Ni:Ci.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,o,r,l),Pa=!1,d=t.memoizedState,o.state=d,qa(t,r,o,i);var f=t.memoizedState;s!==h||d!==f||Di.current||Pa?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(u=Pa||as(t,n,u,r,d,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Cs(e,t,n,r,a,i)}function Cs(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Bi(t,n,!1),js(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Ds(e){var t=e.stateNode;t.pendingContext?Fi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fi(0,t.context,!1),$a(e,t.containerInfo)}function Ns(e,t,n,r,i){return pa(),fa(i),t.flags|=256,bs(e,t,n,r),t.child}var Rs,ks,Is,Fs,Ps={dehydrated:null,treeContext:null,retryLane:0};function Os(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,i=t.pendingProps,o=Qa.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ai(Qa,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Ou(l,i,0,null),e=Pu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Os(n),t.memoizedState=Ps,e):Ls(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,zs(e,t,s,r=cs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Ou({mode:"visible",children:r.children},i,0,null),(o=Pu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&ba(t,e.child,null,s),t.child.memoizedState=Os(s),t.memoizedState=Ps,o);if(0===(1&t.mode))return zs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,t,s,r=cs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Dl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Fa(e,i),nu(r,e,i,-1))}return mu(),zs(e,t,s,r=cs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Xi[Yi++]=Zi,Xi[Yi++]=Ji,Xi[Yi++]=$i,Zi=e.id,Ji=e.overflow,$i=t),t=Ls(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Iu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Iu(r,s):(s=Pu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Os(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ps,i}return e=(s=e.child).sibling,i=Iu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ls(e,t){return(t=Ou({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){return null!==r&&fa(r),ba(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Us(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ca(e.return,t,n)}function Hs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=Qa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,n,t);else if(19===e.tag)Us(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ai(Qa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===eo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hs(t,!0,n,null,a);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function js(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return ki(t.type)&&Ii(),Ws(t),null;case 3:return r=t.stateNode,Za(),Ei(Di),Ei(Ci),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),ks(e,t),Ws(t),null;case 5:Ka(t);var i=Ya(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ws(t),null}if(e=Ya(Ga.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Z(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ie(r,o),zr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Kr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":W(r),Q(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Rs(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)zr(Pr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Z(e,r),i=$(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&zr("scroll",e):null!=c&&x(e,o,c,l))}switch(n){case"input":W(e),Q(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Fs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Xa.current),Ya(Ga.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Kr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ws(t),null;case 13:if(Ei(Qa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),pa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else pa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===Fl&&(Fl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return Za(),ks(e,t),null===e&&qr(t.stateNode.containerInfo),Ws(t),null;case 10:return Ta(t.type._context),Ws(t),null;case 19:if(Ei(Qa),null===(o=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Gs(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,Gs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ai(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Ws(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Gs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=Qa.current,Ai(Qa,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&kl)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ys(e,t){switch(ta(t),t.tag){case 1:return ki(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Za(),Ei(Di),Ei(Ci),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Ka(t),null;case 13:if(Ei(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Qa),null;case 4:return Za(),null;case 10:return Ta(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Rs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ks=function(){},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ga.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Fs=function(e,t,n,r){n!==r&&(t.flags|=4)};var $s=!1,Zs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Qs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Mu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Mu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Zs||Qs(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),qt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Zs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Zs&&(Qs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Mu(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Zs=(r=Zs)||null!==n.memoizedState,dl(e,t,n),Zs=r):dl(e,t,n);break;default:dl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));pl(o,s,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Mu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Mu(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Mu(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Qs(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Mu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),xe(l,s);var c=xe(l,o);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):x(i,h,d,c)}switch(l){case"input":K(i,o);break;case"textarea":ae(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[pi]=o}catch(g){Mu(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Mu(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Mu(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Hl=Je())),4&r&&fl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Zs=(c=Zs)||h,ml(t,e),Zs=c):ml(t,e),vl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Ks=e,h=e.child;null!==h;){for(d=Ks=h;null!==Ks;){switch(f=(p=Ks).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Mu(r,n,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,Ks=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Mu(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Mu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Mu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ks=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var i=Ks,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$s;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Zs;s=$s;var u=Zs;if($s=o,(Zs=l)&&!u)for(Ks=i;null!==Ks;)l=(o=Ks).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Ks=l):Sl(i);for(;null!==a;)Ks=a,xl(a,t,n),a=a.sibling;Ks=i,$s=s,Zs=u}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ks=a):bl(e)}}function bl(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zs||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(a(163))}Zs||512&t.flags&&il(t)}catch(p){Mu(t,t.return,p)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function wl(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function Sl(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Mu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Mu(t,i,l)}}var a=t.return;try{il(t)}catch(l){Mu(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Mu(t,o,l)}}}catch(l){Mu(t,t.return,l)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var _l,Ml=Math.ceil,El=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Cl=0,Dl=null,Nl=null,Rl=0,kl=0,Il=Mi(0),Fl=0,Pl=null,Ol=0,Bl=0,Ll=0,zl=null,Ul=null,Hl=0,ql=1/0,Vl=null,jl=!1,Gl=null,Wl=null,Xl=!1,Yl=null,$l=0,Zl=0,Jl=null,Kl=-1,Ql=0;function eu(){return 0!==(6&Cl)?Je():-1!==Kl?Kl:Kl=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Rl?Rl&-Rl:null!==ma.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nu(e,t,n,r){if(50<Zl)throw Zl=0,Jl=null,Error(a(185));vt(e,n,r),0!==(2&Cl)&&e===Dl||(e===Dl&&(0===(2&Cl)&&(Bl|=n),4===Fl&&su(e,Rl)),ru(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(ql=Je()+500,zi&&qi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=pt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Dl?Rl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){zi=!0,Hi(e)}(lu.bind(null,e)):Hi(lu.bind(null,e)),oi((function(){0===(6&Cl)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Du(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Kl=-1,Ql=0,0!==(6&Cl))throw Error(a(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=dt(e,e===Dl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Cl;Cl|=2;var o=fu();for(Dl===e&&Rl===t||(Vl=null,ql=Je()+500,du(e,t));;)try{yu();break}catch(l){pu(e,l)}Aa(),El.current=o,Cl=i,null!==Nl?t=0:(Dl=null,Rl=0,t=Fl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=au(e,i))),1===t)throw n=Pl,du(e,0),su(e,r),ru(e,Je()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=ft(e))&&(r=o,t=au(e,o))),1===t))throw n=Pl,du(e,0),su(e,r),ru(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,Ul,Vl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Hl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,Ul,Vl),t);break}wu(e,Ul,Vl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ml(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,Ul,Vl),r);break}wu(e,Ul,Vl);break;default:throw Error(a(329))}}}return ru(e,Je()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=gu(e,t))&&(t=Ul,Ul=n,null!==t&&ou(t)),e}function ou(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function su(e,t){for(t&=~Ll,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Cl))throw Error(a(327));Su();var t=dt(e,0);if(0===(1&t))return ru(e,Je()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Pl,du(e,0),su(e,t),ru(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,Ul,Vl),ru(e,Je()),null}function uu(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(ql=Je()+500,zi&&qi())}}function cu(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&Su();var t=Cl;Cl|=1;var n=Tl.transition,r=xt;try{if(Tl.transition=null,xt=1,e)return e()}finally{xt=r,Tl.transition=n,0===(6&(Cl=t))&&qi()}}function hu(){kl=Il.current,Ei(Il)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:Za(),Ei(Di),Ei(Ci),no();break;case 5:Ka(r);break;case 4:Za();break;case 13:case 19:Ei(Qa);break;case 10:Ta(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Dl=e,Nl=e=Iu(e.current,null),Rl=kl=t,Fl=0,Pl=null,Ll=Bl=Ol=0,Ul=zl=null,null!==Ra){for(t=0;t<Ra.length;t++)if(null!==(r=(n=Ra[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ra=null}return e}function pu(e,t){for(;;){var n=Nl;try{if(Aa(),ro.current=Ko,uo){for(var r=oo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(ao=0,lo=so=oo=null,co=!1,ho=0,Al.current=null,null===n||null===n.return){Fl=1,Pl=t,Nl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Rl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,vs(f,s,l,0,t),1&f.mode&&ms(o,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(o,c,t),mu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),fa(us(u,l));break e}}o=u=us(u,l),4!==Fl&&(Fl=2),null===zl?zl=[o]:zl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ha(o,ps(0,u,t));break e;case 1:l=u;var y=o.type,x=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Wl||!Wl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t,Ha(o,fs(o,l,t));break e}}o=o.return}while(null!==o)}bu(n)}catch(b){t=b,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function fu(){var e=El.current;return El.current=Ko,null===e?Ko:e}function mu(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Dl||0===(268435455&Ol)&&0===(268435455&Bl)||su(Dl,Rl)}function gu(e,t){var n=Cl;Cl|=2;var r=fu();for(Dl===e&&Rl===t||(Vl=null,du(e,t));;)try{vu();break}catch(i){pu(e,i)}if(Aa(),Cl=n,El.current=r,null!==Nl)throw Error(a(261));return Dl=null,Rl=0,Fl}function vu(){for(;null!==Nl;)xu(Nl)}function yu(){for(;null!==Nl&&!$e();)xu(Nl)}function xu(e){var t=_l(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?bu(e):Nl=t,Al.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xs(n,t,kl)))return void(Nl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Fl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Fl&&(Fl=5)}function wu(e,t,n){var r=xt,i=Tl.transition;try{Tl.transition=null,xt=1,function(e,t,n,r){do{Su()}while(null!==Yl);if(0!==(6&Cl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Dl&&(Nl=Dl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Du(tt,(function(){return Su(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var s=xt;xt=1;var l=Cl;Cl|=4,Al.current=null,function(e,t){if(ei=jt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++c===i&&(l=s),p===o&&++h===r&&(u=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},jt=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Mu(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),jt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ze(),Cl=l,xt=s,Tl.transition=o}else e.current=n;if(Xl&&(Xl=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Wl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,e=Gl,Gl=null,e;0!==(1&$l)&&0!==e.tag&&Su(),o=e.pendingLanes,0!==(1&o)?e===Jl?Zl++:(Zl=0,Jl=e):Zl=0,qi()}(e,t,n,r)}finally{Tl.transition=i,xt=r}return null}function Su(){if(null!==Yl){var e=bt($l),t=Tl.transition,n=xt;try{if(Tl.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Cl))throw Error(a(331));var i=Cl;for(Cl|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!==(16&Ks.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ks=c;null!==Ks;){var h=Ks;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ks=d;else for(;null!==Ks;){var p=(h=Ks).sibling,f=h.return;if(al(h),h===c){Ks=null;break}if(null!==p){p.return=f,Ks=p;break}Ks=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ks=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ks=y;break e}Ks=o.return}}var x=e.current;for(Ks=x;null!==Ks;){var b=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Ks=b;else e:for(s=x;null!==Ks;){if(0!==(2048&(l=Ks).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Mu(l,l.return,S)}if(l===s){Ks=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ks=w;break e}Ks=l.return}}if(Cl=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{xt=n,Tl.transition=t}}return!1}function _u(e,t,n){e=za(e,t=ps(0,t=us(n,t),1),1),t=eu(),null!==e&&(vt(e,1,t),ru(e,t))}function Mu(e,t,n){if(3===e.tag)_u(e,e,n);else for(;null!==t;){if(3===t.tag){_u(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=za(t,e=fs(t,e=us(n,e),1),1),e=eu(),null!==t&&(vt(t,1,e),ru(t,e));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Dl===e&&(Rl&n)===n&&(4===Fl||3===Fl&&(130023424&Rl)===Rl&&500>Je()-Hl?du(e,0):Ll|=n),ru(e,t)}function Au(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Fa(e,t))&&(vt(e,t,n),ru(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Au(e,n)}function Du(e,t){return Xe(e,t)}function Nu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ru(e,t,n,r){return new Nu(e,t,n,r)}function ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Ru(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)ku(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case _:return Pu(n.children,i,o,t);case M:s=8,i|=8;break;case E:return(e=Ru(12,n,t,2|i)).elementType=E,e.lanes=o,e;case D:return(e=Ru(13,n,t,i)).elementType=D,e.lanes=o,e;case N:return(e=Ru(19,n,t,i)).elementType=N,e.lanes=o,e;case I:return Ou(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case C:s=11;break e;case R:s=14;break e;case k:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ru(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pu(e,t,n,r){return(e=Ru(7,e,r,t)).lanes=n,e}function Ou(e,t,n,r){return(e=Ru(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Ru(6,e,null,t)).lanes=n,e}function Lu(e,t,n){return(t=Ru(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,i,a,o,s,l){return e=new zu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ru(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Hu(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ki(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(ki(n))return Pi(e,n,t)}return t}function qu(e,t,n,r,i,a,o,s,l){return(e=Uu(n,r,!0,e,0,a,0,s,l)).context=Hu(null),n=e.current,(a=La(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,i),e.current.lanes=i,vt(e,i,r),ru(e,r),e}function Vu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=Hu(n),null===t.context?t.context=n:t.pendingContext=n,(t=La(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(i,t,o))&&(nu(e,i,o,a),Ua(e,i,o)),o}function ju(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ds(t),pa();break;case 5:Ja(t);break;case 1:ki(t.type)&&Oi(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ai(Sa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ai(Qa,1&Qa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ai(Qa,1&Qa.current),null!==(e=js(e,t,n))?e.sibling:null);Ai(Qa,1&Qa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(Qa,Qa.current),r)break;return null;case 22:case 23:return t.lanes=0,Ms(e,t,n)}return js(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Da(t,n),i=go(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ki(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Cs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return ku(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ns(r,e),i){case 0:t=As(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,ns(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Ds(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ba(e,t),qa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ns(e,t,r,n,i=us(Error(a(423)),t));break e}if(r!==i){t=Ns(e,t,r,n,i=us(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=wa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=js(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Ja(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Bs(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ba(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ai(Sa,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Di.current){t=js(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=La(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ca(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ca(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Da(t,n),r=r(i=Na(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),Ss(e,t,r,i=ns(r.type,i),n);case 15:return _s(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Vs(e,t),t.tag=1,ki(r)?(e=!0,Oi(t)):e=!1,Da(t,n),os(t,r,i),ls(t,r,i,n),Cs(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ms(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function $u(e){this._internalRoot=e}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ku(){}function Qu(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=ju(o);s.call(e)}}Vu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=ju(o);a.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Ku);return e._reactRootContainer=o,e[fi]=o.current,qr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=ju(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",Ku);return e._reactRootContainer=l,e[fi]=l.current,qr(8===e.nodeType?e.parentNode:e),cu((function(){Vu(t,l,n,r)})),l}(n,t,e,i,r);return ju(o)}$u.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vu(e,t,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Vu(null,e,null,null)})),t[fi]=null}},$u.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Je()),0===(6&Cl)&&(ql=Je()+500,qi()))}break;case 13:cu((function(){var t=Fa(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Wu(e,1)}},St=function(e){if(13===e.tag){var t=Fa(e,134217728);if(null!==t)nu(t,e,134217728,eu());Wu(e,134217728)}},_t=function(e){if(13===e.tag){var t=tu(e),n=Fa(e,t);if(null!==n)nu(n,e,t,eu());Wu(e,t)}},Mt=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},Se=function(e,t,n){switch(t){case"input":if(K(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));X(r),K(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uu,De=cu;var ec={usingClientEntryPoint:!1,Events:[xi,bi,wi,Ae,Te,uu]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zu(e))throw Error(a(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(a(200));return Qu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,s),e[fi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $u(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(a(200));return Qu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){Qu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},302:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},958:(e,t,n)=>{e.exports=function(e){var t={},r=n(43),i=n(513),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var w=Symbol.iterator;function S(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=w&&e[w]||e["@@iterator"])?e:null}function _(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:_(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return _(e(t))}catch(n){}}return null}function M(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function E(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function A(e){if(E(e)!==e)throw Error(o(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=E(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return A(i),e;if(a===r)return A(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function C(e){return null!==(e=T(e))?D(e):null}function D(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=D(e);if(null!==t)return t;e=e.sibling}return null}function N(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=N(e);if(null!==t)return t}e=e.sibling}return null}var R,k=Array.isArray,I=e.getPublicInstance,F=e.getRootHostContext,P=e.getChildHostContext,O=e.prepareForCommit,B=e.resetAfterCommit,L=e.createInstance,z=e.appendInitialChild,U=e.finalizeInitialChildren,H=e.prepareUpdate,q=e.shouldSetTextContent,V=e.createTextInstance,j=e.scheduleTimeout,G=e.cancelTimeout,W=e.noTimeout,X=e.isPrimaryRenderer,Y=e.supportsMutation,$=e.supportsPersistence,Z=e.supportsHydration,J=e.getInstanceFromNode,K=e.preparePortalMount,Q=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ue=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,pe=e.commitTextUpdate,fe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,xe=e.removeChildFromContainer,be=e.resetTextContent,we=e.hideInstance,Se=e.hideTextInstance,_e=e.unhideInstance,Me=e.unhideTextInstance,Ee=e.clearContainer,Ae=e.cloneInstance,Te=e.createContainerChildSet,Ce=e.appendChildToContainerChildSet,De=e.finalizeContainerChildren,Ne=e.replaceContainerChildren,Re=e.cloneHiddenInstance,ke=e.cloneHiddenTextInstance,Ie=e.canHydrateInstance,Fe=e.canHydrateTextInstance,Pe=e.canHydrateSuspenseInstance,Oe=e.isSuspenseInstancePending,Be=e.isSuspenseInstanceFallback,Le=e.registerSuspenseInstanceRetry,ze=e.getNextHydratableSibling,Ue=e.getFirstHydratableChild,He=e.getFirstHydratableChildWithinContainer,qe=e.getFirstHydratableChildWithinSuspenseInstance,Ve=e.hydrateInstance,je=e.hydrateTextInstance,Ge=e.hydrateSuspenseInstance,We=e.getNextHydratableInstanceAfterSuspenseInstance,Xe=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,$e=e.clearSuspenseBoundary,Ze=e.clearSuspenseBoundaryFromContainer,Je=e.shouldDeleteUnhydratedTailInstances,Ke=e.didNotMatchHydratedContainerTextInstance,Qe=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],at=-1;function ot(e){return{current:e}}function st(e){0>at||(e.current=it[at],it[at]=null,at--)}function lt(e,t){at++,it[at]=e.current,e.current=t}var ut={},ct=ot(ut),ht=ot(!1),dt=ut;function pt(e,t){var n=e.type.contextTypes;if(!n)return ut;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ft(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){st(ht),st(ct)}function gt(e,t,n){if(ct.current!==ut)throw Error(o(168));lt(ct,t),lt(ht,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,M(e)||"Unknown",i));return a({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ut,dt=ct.current,lt(ct,e),lt(ht,ht.current),!0}function xt(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=vt(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,st(ht),st(ct),lt(ct,e)):st(ht),lt(ht,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(wt(e)/St|0)|0},wt=Math.log,St=Math.LN2;var _t=64,Mt=4194304;function Et(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function At(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=Et(s):0!==(a&=o)&&(r=Et(a))}else 0!==(o=n&~i)?r=Et(o):0!==a&&(r=Et(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-bt(t)),r|=e[n],t&=~i;return r}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ct(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Dt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function It(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ft=i.unstable_scheduleCallback,Pt=i.unstable_cancelCallback,Ot=i.unstable_shouldYield,Bt=i.unstable_requestPaint,Lt=i.unstable_now,zt=i.unstable_ImmediatePriority,Ut=i.unstable_UserBlockingPriority,Ht=i.unstable_NormalPriority,qt=i.unstable_IdlePriority,Vt=null,jt=null;var Gt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wt=null,Xt=!1,Yt=!1;function $t(e){null===Wt?Wt=[e]:Wt.push(e)}function Zt(){if(!Yt&&null!==Wt){Yt=!0;var e=0,t=kt;try{var n=Wt;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Wt=null,Xt=!1}catch(i){throw null!==Wt&&(Wt=Wt.slice(e+1)),Ft(zt,Zt),i}finally{kt=t,Yt=!1}}return null}var Jt=s.ReactCurrentBatchConfig;function Kt(e,t){if(Gt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Gt(e[i],t[i]))return!1}return!0}function Qt(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function sn(e,t,n){X?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),X?e._currentValue=t:e._currentValue2=t}function un(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Oi=!0),e.firstContext=null)}function hn(e){var t=X?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,pn=!1;function fn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ya&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function xn(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,r){var i=e.updateQueue;pn=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var h=e.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===l?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(s=0,h=c=u=null,l=o;;){var p=l.lane,f=l.eventTime;if((r&p)===p){null!==h&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(p=t,f=n,g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(f,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(f,d,p):m)||void 0===p)break e;d=a({},d,p);break e;case 2:pn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(p=i.effects)?i.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(c=h=f,u=d):h=h.next=f,s|=p;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(p=l).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}if(null===h&&(u=d),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);to|=s,e.lanes=s,e.memoizedState=d}}function wn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Sn=(new r.Component).refs;function _n(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Mn={isMounted:function(e){return!!(e=e._reactInternals)&&E(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wo(),i=So(e),a=gn(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),vn(e,a),null!==(t=_o(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wo(),i=So(e),a=gn(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),vn(e,a),null!==(t=_o(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wo(),r=So(e),i=gn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),vn(e,i),null!==(t=_o(e,r,n))&&yn(t,e,r)}};function En(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Kt(n,r)||!Kt(i,a))}function An(e,t,n){var r=!1,i=ut,a=t.contextType;return"object"===typeof a&&null!==a?a=hn(a):(i=ft(t)?dt:ct.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?pt(e,i):ut),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Mn,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Mn.enqueueReplaceState(t,t.state,null)}function Cn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Sn,fn(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=hn(a):(a=ft(t)?dt:ct.current,i.context=pt(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(_n(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Mn.enqueueReplaceState(i,i.state,null),bn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var Dn=[],Nn=0,Rn=null,kn=0,In=[],Fn=0,Pn=null,On=1,Bn="";function Ln(e,t){Dn[Nn++]=kn,Dn[Nn++]=Rn,Rn=e,kn=t}function zn(e,t,n){In[Fn++]=On,In[Fn++]=Bn,In[Fn++]=Pn,Pn=e;var r=On;e=Bn;var i=32-bt(r)-1;r&=~(1<<i),n+=1;var a=32-bt(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,On=1<<32-bt(t)+i|n<<i|r,Bn=a+e}else On=1<<a|n<<i|r,Bn=e}function Un(e){null!==e.return&&(Ln(e,1),zn(e,1,0))}function Hn(e){for(;e===Rn;)Rn=Dn[--Nn],Dn[Nn]=null,kn=Dn[--Nn],Dn[Nn]=null;for(;e===Pn;)Pn=In[--Fn],In[Fn]=null,Bn=In[--Fn],In[Fn]=null,On=In[--Fn],In[Fn]=null}var qn=null,Vn=null,jn=!1,Gn=!1,Wn=null;function Xn(e,t){var n=Ko(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Ie(t,e.type,e.pendingProps))&&(e.stateNode=t,qn=e,Vn=Ue(t),!0);case 6:return null!==(t=Fe(t,e.pendingProps))&&(e.stateNode=t,qn=e,Vn=null,!0);case 13:if(null!==(t=Pe(t))){var n=null!==Pn?{id:On,overflow:Bn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ko(18,null,null,0)).stateNode=t,n.return=e,e.child=n,qn=e,Vn=null,!0}return!1;default:return!1}}function $n(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Zn(e){if(jn){var t=Vn;if(t){var n=t;if(!Yn(e,t)){if($n(e))throw Error(o(418));t=ze(n);var r=qn;t&&Yn(e,t)?Xn(r,n):(e.flags=-4097&e.flags|2,jn=!1,qn=e)}}else{if($n(e))throw Error(o(418));e.flags=-4097&e.flags|2,jn=!1,qn=e}}}function Jn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;qn=e}function Kn(e){if(!Z||e!==qn)return!1;if(!jn)return Jn(e),jn=!0,!1;if(3!==e.tag&&(5!==e.tag||Je(e.type)&&!q(e.type,e.memoizedProps))){var t=Vn;if(t){if($n(e)){for(e=Vn;e;)e=ze(e);throw Error(o(418))}for(;t;)Xn(e,t),t=ze(t)}}if(Jn(e),13===e.tag){if(!Z)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Vn=We(e)}else Vn=qn?ze(e.stateNode):null;return!0}function Qn(){Z&&(Vn=qn=null,Gn=jn=!1)}function er(e){null===Wn?Wn=[e]:Wn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Sn&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var a=n.type;return a===c?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===x&&rr(a)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=as(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=ns(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case u:return(t=as(t,e.mode,n)).return=e,t;case x:return m(e,(0,t._init)(t._payload),n)}if(k(t)||S(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:h(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(e,t,n,r):null;case u:return n.key===i?p(e,t,n,r):null;case x:return g(e,t,(i=n._init)(n._payload),r)}if(k(n)||S(n))return null!==i?null:f(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return v(e,t,n,(0,r._init)(r._payload),i)}if(k(r)||S(r))return f(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,o,s,l){for(var u=null,c=null,h=o,d=o=0,p=null;null!==h&&d<s.length;d++){h.index>d?(p=h,h=null):p=h.sibling;var f=g(i,h,s[d],l);if(null===f){null===h&&(h=p);break}e&&h&&null===f.alternate&&t(i,h),o=a(f,o,d),null===c?u=f:c.sibling=f,c=f,h=p}if(d===s.length)return n(i,h),jn&&Ln(i,d),u;if(null===h){for(;d<s.length;d++)null!==(h=m(i,s[d],l))&&(o=a(h,o,d),null===c?u=h:c.sibling=h,c=h);return jn&&Ln(i,d),u}for(h=r(i,h);d<s.length;d++)null!==(p=v(h,i,d,s[d],l))&&(e&&null!==p.alternate&&h.delete(null===p.key?d:p.key),o=a(p,o,d),null===c?u=p:c.sibling=p,c=p);return e&&h.forEach((function(e){return t(i,e)})),jn&&Ln(i,d),u}function b(i,s,l,u){var c=S(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,d=s,p=s=0,f=null,y=l.next();null!==d&&!y.done;p++,y=l.next()){d.index>p?(f=d,d=null):f=d.sibling;var x=g(i,d,y.value,u);if(null===x){null===d&&(d=f);break}e&&d&&null===x.alternate&&t(i,d),s=a(x,s,p),null===h?c=x:h.sibling=x,h=x,d=f}if(y.done)return n(i,d),jn&&Ln(i,p),c;if(null===d){for(;!y.done;p++,y=l.next())null!==(y=m(i,y.value,u))&&(s=a(y,s,p),null===h?c=y:h.sibling=y,h=y);return jn&&Ln(i,p),c}for(d=r(i,d);!y.done;p++,y=l.next())null!==(y=v(d,i,p,y.value,u))&&(e&&null!==y.alternate&&d.delete(null===y.key?p:y.key),s=a(y,s,p),null===h?c=y:h.sibling=y,h=y);return e&&d.forEach((function(e){return t(i,e)})),jn&&Ln(i,p),c}return function e(r,a,o,h){if("object"===typeof o&&null!==o&&o.type===c&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case l:e:{for(var d=o.key,p=a;null!==p;){if(p.key===d){if((d=o.type)===c){if(7===p.tag){n(r,p.sibling),(a=i(p,o.props.children)).return=r,r=a;break e}}else if(p.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===x&&rr(d)===p.type){n(r,p.sibling),(a=i(p,o.props)).ref=tr(r,p,o),a.return=r,r=a;break e}n(r,p);break}t(r,p),p=p.sibling}o.type===c?((a=ns(o.props.children,r.mode,h,o.key)).return=r,r=a):((h=ts(o.type,o.key,o.props,null,r.mode,h)).ref=tr(r,a,o),h.return=r,r=h)}return s(r);case u:e:{for(p=o.key;null!==a;){if(a.key===p){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=as(o,r.mode,h)).return=r,r=a}return s(r);case x:return e(r,a,(p=o._init)(o._payload),h)}if(k(o))return y(r,a,o,h);if(S(o))return b(r,a,o,h);nr(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=is(o,r.mode,h)).return=r,r=a),s(r)):n(r,a)}}var ar=ir(!0),or=ir(!1),sr={},lr=ot(sr),ur=ot(sr),cr=ot(sr);function hr(e){if(e===sr)throw Error(o(174));return e}function dr(e,t){lt(cr,t),lt(ur,e),lt(lr,sr),e=F(t),st(lr),lt(lr,e)}function pr(){st(lr),st(ur),st(cr)}function fr(e){var t=hr(cr.current),n=hr(lr.current);n!==(t=P(n,e.type,t))&&(lt(ur,e),lt(lr,t))}function mr(e){ur.current===e&&(st(lr),st(ur))}var gr=ot(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Oe(n)||Be(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function xr(){for(var e=0;e<yr.length;e++){var t=yr[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var br=s.ReactCurrentDispatcher,wr=s.ReactCurrentBatchConfig,Sr=0,_r=null,Mr=null,Er=null,Ar=!1,Tr=!1,Cr=0,Dr=0;function Nr(){throw Error(o(321))}function Rr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function kr(e,t,n,r,i,a){if(Sr=a,_r=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,br.current=null===e||null===e.memoizedState?fi:mi,e=n(r,i),Tr){a=0;do{if(Tr=!1,Cr=0,25<=a)throw Error(o(301));a+=1,Er=Mr=null,t.updateQueue=null,br.current=gi,e=n(r,i)}while(Tr)}if(br.current=pi,t=null!==Mr&&null!==Mr.next,Sr=0,Er=Mr=_r=null,Ar=!1,t)throw Error(o(300));return e}function Ir(){var e=0!==Cr;return Cr=0,e}function Fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Er?_r.memoizedState=Er=e:Er=Er.next=e,Er}function Pr(){if(null===Mr){var e=_r.alternate;e=null!==e?e.memoizedState:null}else e=Mr.next;var t=null===Er?_r.memoizedState:Er.next;if(null!==t)Er=t,Mr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Mr=e).memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},null===Er?_r.memoizedState=Er=e:Er=Er.next=e}return Er}function Or(e,t){return"function"===typeof t?t(e):t}function Br(e){var t=Pr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Mr,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var h=c.lane;if((Sr&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,_r.lanes|=h,to|=h}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,Gt(r,t.memoizedState)||(Oi=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,_r.lanes|=a,to|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Lr(e){var t=Pr(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);Gt(a,t.memoizedState)||(Oi=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function zr(){}function Ur(e,t){var n=_r,r=Pr(),i=t(),a=!Gt(r.memoizedState,i);if(a&&(r.memoizedState=i,Oi=!0),r=r.queue,Jr(Vr.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Er&&1&Er.memoizedState.tag){if(n.flags|=2048,Wr(9,qr.bind(null,n,r,i,t),void 0,null),null===Ya)throw Error(o(349));0!==(30&Sr)||Hr(n,t,i)}return i}function Hr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_r.updateQueue)?(t={lastEffect:null,stores:null},_r.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function qr(e,t,n,r){t.value=n,t.getSnapshot=r,jr(t)&&_o(e,1,-1)}function Vr(e,t,n){return n((function(){jr(t)&&_o(e,1,-1)}))}function jr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch(r){return!0}}function Gr(e){var t=Fr();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,_r,e),[t.memoizedState,e]}function Wr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=_r.updateQueue)?(t={lastEffect:null,stores:null},_r.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Xr(){return Pr().memoizedState}function Yr(e,t,n,r){var i=Fr();_r.flags|=e,i.memoizedState=Wr(1|t,n,void 0,void 0===r?null:r)}function $r(e,t,n,r){var i=Pr();r=void 0===r?null:r;var a=void 0;if(null!==Mr){var o=Mr.memoizedState;if(a=o.destroy,null!==r&&Rr(r,o.deps))return void(i.memoizedState=Wr(t,n,a,r))}_r.flags|=e,i.memoizedState=Wr(1|t,n,a,r)}function Zr(e,t){return Yr(8390656,8,e,t)}function Jr(e,t){return $r(2048,8,e,t)}function Kr(e,t){return $r(4,2,e,t)}function Qr(e,t){return $r(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,$r(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=Pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Rr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=Pr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Rr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ai(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=wr.transition;wr.transition={};try{e(!1),t()}finally{kt=n,wr.transition=r}}function oi(){return Pr().memoizedState}function si(e,t,n){var r=So(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ui(e)?ci(t,n):(hi(e,t,n),null!==(e=_o(e,r,n=wo()))&&di(e,t,r))}function li(e,t,n){var r=So(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ui(e))ci(t,i);else{hi(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,Gt(s,o))return}catch(l){}null!==(e=_o(e,r,n=wo()))&&di(e,t,r)}}function ui(e){var t=e.alternate;return e===_r||null!==t&&t===_r}function ci(e,t){Tr=Ar=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hi(e,t,n){null!==Ya&&0!==(1&e.mode)&&0===(2&Xa)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function di(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var pi={readContext:hn,useCallback:Nr,useContext:Nr,useEffect:Nr,useImperativeHandle:Nr,useInsertionEffect:Nr,useLayoutEffect:Nr,useMemo:Nr,useReducer:Nr,useRef:Nr,useState:Nr,useDebugValue:Nr,useDeferredValue:Nr,useTransition:Nr,useMutableSource:Nr,useSyncExternalStore:Nr,useId:Nr,unstable_isNewReconciler:!1},fi={readContext:hn,useCallback:function(e,t){return Fr().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Zr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yr(4,2,e,t)},useMemo:function(e,t){var n=Fr();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fr();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,_r,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fr().memoizedState=e},useState:Gr,useDebugValue:ni,useDeferredValue:function(e){var t=Gr(e),n=t[0],r=t[1];return Zr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){var e=Gr(!1),t=e[0];return e=ai.bind(null,e[1]),Fr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_r,i=Fr();if(jn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ya)throw Error(o(349));0!==(30&Sr)||Hr(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Zr(Vr.bind(null,r,a,e),[e]),r.flags|=2048,Wr(9,qr.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Fr(),t=Ya.identifierPrefix;if(jn){var n=Bn;t=":"+t+"R"+(n=(On&~(1<<32-bt(On)-1)).toString(32)+n),0<(n=Cr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Dr++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Br,useRef:Xr,useState:function(){return Br(Or)},useDebugValue:ni,useDeferredValue:function(e){var t=Br(Or),n=t[0],r=t[1];return Jr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Br(Or)[0],Pr().memoizedState]},useMutableSource:zr,useSyncExternalStore:Ur,useId:oi,unstable_isNewReconciler:!1},gi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Jr,useImperativeHandle:ti,useInsertionEffect:Kr,useLayoutEffect:Qr,useMemo:ii,useReducer:Lr,useRef:Xr,useState:function(){return Lr(Or)},useDebugValue:ni,useDeferredValue:function(e){var t=Lr(Or),n=t[0],r=t[1];return Jr((function(){var t=wr.transition;wr.transition={};try{r(e)}finally{wr.transition=t}}),[e]),n},useTransition:function(){return[Lr(Or)[0],Pr().memoizedState]},useMutableSource:zr,useSyncExternalStore:Ur,useId:oi,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=Qt(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var xi,bi,wi,Si,_i="function"===typeof WeakMap?WeakMap:Map;function Mi(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){co||(co=!0,ho=r),yi(0,t)},n}function Ei(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===po?po=new Set([this]):po.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ai(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new _i;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Wo.bind(null,e,t,n),t.then(e,e))}function Ti(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ci(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Di(e){e.flags|=4}function Ni(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)xi=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)z(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},bi=function(){},wi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=hr(lr.current);n=H(a,n,e,r,i,o),(t.updateQueue=n)&&Di(t)}},Si=function(e,t,n,r){n!==r&&Di(t)};else if($){xi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Re(a,i.type,i.memoizedProps,i)),z(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=ke(a,i.memoizedProps,i)),z(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),xi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Ri=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var a=i.stateNode;n&&r&&(a=Re(a,i.type,i.memoizedProps,i)),Ce(e,a)}else if(6===i.tag)a=i.stateNode,n&&r&&(a=ke(a,i.memoizedProps,i)),Ce(e,a);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(a=i.child)&&(a.return=i),Ri(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};bi=function(e,t){var n=t.stateNode;if(!Ni(e,t)){e=n.containerInfo;var r=Te(e);Ri(r,t,!1,!1),n.pendingChildren=r,Di(t),De(e,r)}},wi=function(e,t,n,r,i){var a=e.stateNode,o=e.memoizedProps;if((e=Ni(e,t))&&o===r)t.stateNode=a;else{var s=t.stateNode,l=hr(lr.current),u=null;o!==r&&(u=H(s,n,o,r,i,l)),e&&null===u?t.stateNode=a:(a=Ae(a,u,n,o,r,t,e,s),U(a,n,r,i,l)&&Di(t),t.stateNode=a,e?Di(t):xi(a,t,!1,!1))}},Si=function(e,t,n,r){n!==r?(e=hr(cr.current),n=hr(lr.current),t.stateNode=V(r,e,n,t),Di(t)):t.stateNode=e.stateNode}}else bi=function(){},wi=function(){},Si=function(){};function ki(e,t){if(!jn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ii(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Fi(e,t,n){var r=t.pendingProps;switch(Hn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ii(t),null;case 1:case 17:return ft(t.type)&&mt(),Ii(t),null;case 3:return r=t.stateNode,pr(),st(ht),st(ct),xr(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Kn(t)?Di(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Wn&&(Co(Wn),Wn=null))),bi(e,t),Ii(t),null;case 5:mr(t),n=hr(cr.current);var i=t.type;if(null!==e&&null!=t.stateNode)wi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ii(t),null}if(e=hr(lr.current),Kn(t)){if(!Z)throw Error(o(175));e=Ve(t.stateNode,t.type,t.memoizedProps,n,e,t,!Gn),t.updateQueue=e,null!==e&&Di(t)}else{var a=L(i,r,n,e,t);xi(a,t,!1,!1),t.stateNode=a,U(a,i,r,n,e)&&Di(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ii(t),null;case 6:if(e&&null!=t.stateNode)Si(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=hr(cr.current),n=hr(lr.current),Kn(t)){if(!Z)throw Error(o(176));if(e=t.stateNode,r=t.memoizedProps,(n=je(e,r,t,!Gn))&&null!==(i=qn))switch(a=0!==(1&i.mode),i.tag){case 3:Ke(i.stateNode.containerInfo,e,r,a);break;case 5:Qe(i.type,i.memoizedProps,i.stateNode,e,r,a)}n&&Di(t)}else t.stateNode=V(r,e,n,t)}return Ii(t),null;case 13:if(st(gr),r=t.memoizedState,jn&&null!==Vn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Vn;e;)e=ze(e);return Qn(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Kn(t),null===e){if(!r)throw Error(o(318));if(!Z)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));Ge(e,t)}else Qn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Ii(t),null}return null!==Wn&&(Co(Wn),Wn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Kn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gr.current)?0===Qa&&(Qa=3):Oo())),null!==t.updateQueue&&(t.flags|=4),Ii(t),null);case 4:return pr(),bi(e,t),null===e&&K(t.stateNode.containerInfo),Ii(t),null;case 10:return ln(t.type._context),Ii(t),null;case 19:if(st(gr),null===(i=t.memoizedState))return Ii(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)ki(i,!1);else{if(0!==Qa||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=vr(e))){for(t.flags|=128,ki(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&Lt()>so&&(t.flags|=128,r=!0,ki(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(a))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),ki(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!jn)return Ii(t),null}else 2*Lt()-i.renderingStartTime>so&&1073741824!==n&&(t.flags|=128,r=!0,ki(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Lt(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Ii(t),null);case 22:case 23:return ko(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ja)&&(Ii(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):Ii(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Pi=s.ReactCurrentOwner,Oi=!1;function Bi(e,t,n,r){t.child=null===e?or(t,null,n,r):ar(t,e.child,n,r)}function Li(e,t,n,r,i){n=n.render;var a=t.ref;return cn(t,i),r=kr(e,t,n,r,a,i),n=Ir(),null===e||Oi?(jn&&n&&Un(t),t.flags|=1,Bi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function zi(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Qo(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ui(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Kt)(o,r)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,(e=es(a,r)).ref=t.ref,e.return=t,t.child=e}function Ui(e,t,n,r,i){if(null!==e&&Kt(e.memoizedProps,r)&&e.ref===t.ref){if(Oi=!1,0===(e.lanes&i))return t.lanes=e.lanes,ia(e,t,i);0!==(131072&e.flags)&&(Oi=!0)}return Vi(e,t,n,r,i)}function Hi(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Ka,Ja),Ja|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Ka,Ja),Ja|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,lt(Ka,Ja),Ja|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,lt(Ka,Ja),Ja|=r;return Bi(e,t,i,n),t.child}function qi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vi(e,t,n,r,i){var a=ft(n)?dt:ct.current;return a=pt(t,a),cn(t,i),n=kr(e,t,n,r,a,i),r=Ir(),null===e||Oi?(jn&&r&&Un(t),t.flags|=1,Bi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ia(e,t,i))}function ji(e,t,n,r,i){if(ft(n)){var a=!0;yt(t)}else a=!1;if(cn(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),An(t,n,r),Cn(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=hn(u):u=pt(t,u=ft(n)?dt:ct.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Tn(t,o,r,u),pn=!1;var d=t.memoizedState;o.state=d,bn(t,r,o,i),l=t.memoizedState,s!==r||d!==l||ht.current||pn?("function"===typeof c&&(_n(t,n,c,r),l=t.memoizedState),(s=pn||En(t,n,s,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,mn(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:en(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=pt(t,l=ft(n)?dt:ct.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Tn(t,o,r,l),pn=!1,d=t.memoizedState,o.state=d,bn(t,r,o,i);var f=t.memoizedState;s!==h||d!==f||ht.current||pn?("function"===typeof p&&(_n(t,n,p,r),f=t.memoizedState),(u=pn||En(t,n,u,r,d,f,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Gi(e,t,n,r,a,i)}function Gi(e,t,n,r,i,a){qi(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&xt(t,n,!1),ia(e,t,a);r=t.stateNode,Pi.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=ar(t,e.child,null,a),t.child=ar(t,null,s,a)):Bi(e,t,s,a),t.memoizedState=r.state,i&&xt(t,n,!0),t.child}function Wi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),dr(e,t.containerInfo)}function Xi(e,t,n,r,i){return Qn(),er(i),t.flags|=256,Bi(e,t,n,r),t.child}var Yi={dehydrated:null,treeContext:null,retryLane:0};function $i(e){return{baseLanes:e,cachePool:null}}function Zi(e,t,n){var r,i=t.pendingProps,a=gr.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),lt(gr,1&a),null===e)return Zn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Be(e)?t.lanes=8:t.lanes=1073741824,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=a):s=rs(a,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=$i(n),t.memoizedState=Yi,e):Ji(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=rs({mode:"visible",children:i.children},a,0,null),(s=ns(s,a,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ar(t,e.child,null,n),t.child.memoizedState=$i(n),t.memoizedState=Yi,s);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Be(r))t=ea(e,t,n,Error(o(419)));else if(i=0!==(n&e.childLanes),Oi||i){if(null!==(i=Ya)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==a.retryLane&&(a.retryLane=i,_o(e,i,-1))}Oo(),t=ea(e,t,n,Error(o(421)))}else Oe(r)?(t.flags|=128,t.child=e.child,t=Yo.bind(null,e),Le(r,t),t=null):(n=a.treeContext,Z&&(Vn=qe(r),qn=t,jn=!0,Wn=null,Gn=!1,null!==n&&(In[Fn++]=On,In[Fn++]=Bn,In[Fn++]=Pn,On=n.id,Bn=n.overflow,Pn=t)),(t=Ji(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=Qi(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?$i(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=Qi(e,t,i.children,i.fallback,n),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?$i(n):{baseLanes:a.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Yi,i):(n=Ki(e,t,i.children,n),t.memoizedState=null,n)}function Ji(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Qi(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=es(o,r):(r=ns(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ea(e,t,n,r){return null!==r&&er(r),ar(t,e.child,null,n),(e=Ji(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),un(e.return,t,n)}function na(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ra(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Bi(e,t,r.children,n),0!==(2&(r=gr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),na(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ia(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Hn(t),t.tag){case 1:return ft(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return pr(),st(ht),st(ct),xr(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mr(t),null;case 13:if(st(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));Qn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(gr),null;case 4:return pr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return ko(),null;default:return null}}var oa=!1,sa=!1,la="function"===typeof WeakSet?WeakSet:Set,ua=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Go(e,t,r)}else n.current=null}function ha(e,t,n){try{n()}catch(r){Go(e,t,r)}}var da=!1;function pa(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ha(t,n,a)}i=i.next}while(i!==r)}}function fa(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ma(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=I(n);else e=n;"function"===typeof t?t(e):t.current=e}}function ga(e,t,n){if(jt&&"function"===typeof jt.onCommitFiberUnmount)try{jt.onCommitFiberUnmount(Vt,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ha(t,n,a),r=r.next}while(r!==e)}break;case 1:if(ca(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Go(t,n,o)}break;case 5:ca(t,n);break;case 4:Y?Ma(e,t,n):$&&$&&(t=t.stateNode.containerInfo,n=Te(t),Ne(t,n))}}function va(e,t,n){for(var r=t;;)if(ga(e,r,n),null===r.child||Y&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function ya(e){var t=e.alternate;null!==t&&(e.alternate=null,ya(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xa(e){return 5===e.tag||3===e.tag||4===e.tag}function ba(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function wa(e){if(Y){e:{for(var t=e.return;null!==t;){if(xa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),_a(e,n=ba(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,Sa(e,n=ba(e),t);break;default:throw Error(o(161))}}}function Sa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(Sa(e,t,n),e=e.sibling;null!==e;)Sa(e,t,n),e=e.sibling}function _a(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(_a(e,t,n),e=e.sibling;null!==e;)_a(e,t,n),e=e.sibling}function Ma(e,t,n){for(var r,i,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag)va(e,a,n),i?xe(r,a.stateNode):ye(r,a.stateNode);else if(18===a.tag)i?Ze(r,a.stateNode):$e(r,a.stateNode);else if(4===a.tag){if(null!==a.child){r=a.stateNode.containerInfo,i=!0,a.child.return=a,a=a.child;continue}}else if(ga(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function Ea(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return pa(3,t,t.return),fa(3,t),void pa(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&me(n,a,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void pe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Z&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo));case 13:case 19:return void Aa(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return pa(3,t,t.return),fa(3,t),void pa(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Aa(t);case 3:Z&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo)}e:if($){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ne(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function Aa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new la),t.forEach((function(t){var r=$o.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ta(e,t,n){ua=e,Ca(e,t,n)}function Ca(e,t,n){for(var r=0!==(1&e.mode);null!==ua;){var i=ua,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||oa;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||sa;s=oa;var u=sa;if(oa=o,(sa=l)&&!u)for(ua=i;null!==ua;)l=(o=ua).child,22===o.tag&&null!==o.memoizedState?Ra(i):null!==l?(l.return=o,ua=l):Ra(i);for(;null!==a;)ua=a,Ca(a,t,n),a=a.sibling;ua=i,oa=s,sa=u}Da(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,ua=a):Da(e)}}function Da(e){for(;null!==ua;){var t=ua;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:sa||fa(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!sa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&wn(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=I(t.child.stateNode);break;case 1:n=t.child.stateNode}wn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&fe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var h=c.dehydrated;null!==h&&Ye(h)}}}break;default:throw Error(o(163))}sa||512&t.flags&&ma(t)}catch(d){Go(t,t.return,d)}}if(t===e){ua=null;break}if(null!==(n=t.sibling)){n.return=t.return,ua=n;break}ua=t.return}}function Na(e){for(;null!==ua;){var t=ua;if(t===e){ua=null;break}var n=t.sibling;if(null!==n){n.return=t.return,ua=n;break}ua=t.return}}function Ra(e){for(;null!==ua;){var t=ua;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{fa(4,t)}catch(l){Go(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Go(t,i,l)}}var a=t.return;try{ma(t)}catch(l){Go(t,a,l)}break;case 5:var o=t.return;try{ma(t)}catch(l){Go(t,o,l)}}}catch(l){Go(t,t.return,l)}if(t===e){ua=null;break}var s=t.sibling;if(null!==s){s.return=t.return,ua=s;break}ua=t.return}}var ka=0,Ia=1,Fa=2,Pa=3,Oa=4;if("function"===typeof Symbol&&Symbol.for){var Ba=Symbol.for;ka=Ba("selector.component"),Ia=Ba("selector.has_pseudo_class"),Fa=Ba("selector.role"),Pa=Ba("selector.test_id"),Oa=Ba("selector.text")}function La(e){var t=J(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ie(e)))throw Error(o(362));return e.stateNode.current}function za(e,t){switch(t.$$typeof){case ka:if(e.type===t.value)return!0;break;case Ia:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],a=t[i];if(5!==r.tag||!se(r)){for(;null!=a&&za(r,a);)a=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case Fa:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Oa:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case Pa:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ua(e){switch(e.$$typeof){case ka:return"<"+(_(e.value)||"Unknown")+">";case Ia:return":has("+(Ua(e)||"")+")";case Fa:return'[role="'+e.value+'"]';case Oa:return'"'+e.value+'"';case Pa:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Ha(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],a=e[r++],o=t[a];if(5!==i.tag||!se(i)){for(;null!=o&&za(i,o);)o=t[++a];if(a===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,a),i=i.sibling}}return n}function qa(e,t){if(!re)throw Error(o(363));e=Ha(e=La(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Va=Math.ceil,ja=s.ReactCurrentDispatcher,Ga=s.ReactCurrentOwner,Wa=s.ReactCurrentBatchConfig,Xa=0,Ya=null,$a=null,Za=0,Ja=0,Ka=ot(0),Qa=0,eo=null,to=0,no=0,ro=0,io=null,ao=null,oo=0,so=1/0;function lo(){so=Lt()+500}var uo,co=!1,ho=null,po=null,fo=!1,mo=null,go=0,vo=0,yo=null,xo=-1,bo=0;function wo(){return 0!==(6&Xa)?Lt():-1!==xo?xo:xo=Lt()}function So(e){return 0===(1&e.mode)?1:0!==(2&Xa)&&0!==Za?Za&-Za:null!==Jt.transition?(0===bo&&(e=_t,0===(4194240&(_t<<=1))&&(_t=64),bo=e),bo):0!==(e=kt)?e:Q()}function _o(e,t,n){if(50<vo)throw vo=0,yo=null,Error(o(185));var r=Mo(e,t);return null===r?null:(Nt(r,t,n),0!==(2&Xa)&&r===Ya||(r===Ya&&(0===(2&Xa)&&(no|=t),4===Qa&&Do(r,Za)),Eo(r,n),1===t&&0===Xa&&0===(1&e.mode)&&(lo(),Xt&&Zt())),r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Eo(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-bt(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=Tt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=At(e,e===Ya?Za:0);if(0===r)null!==n&&Pt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Pt(n),1===t)0===e.tag?function(e){Xt=!0,$t(e)}(No.bind(null,e)):$t(No.bind(null,e)),te?ne((function(){0===Xa&&Zt()})):Ft(zt,Zt),n=null;else{switch(It(r)){case 1:n=zt;break;case 4:n=Ut;break;case 16:default:n=Ht;break;case 536870912:n=qt}n=Zo(n,Ao.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ao(e,t){if(xo=-1,bo=0,0!==(6&Xa))throw Error(o(327));var n=e.callbackNode;if(Vo()&&e.callbackNode!==n)return null;var r=At(e,e===Ya?Za:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Bo(e,r);else{t=r;var i=Xa;Xa|=2;var a=Po();for(Ya===e&&Za===t||(lo(),Io(e,t));;)try{zo();break}catch(l){Fo(e,l)}on(),ja.current=a,Xa=i,null!==$a?t=0:(Ya=null,Za=0,t=Qa)}if(0!==t){if(2===t&&(0!==(i=Ct(e))&&(r=i,t=To(e,i))),1===t)throw n=eo,Io(e,0),Do(e,r),Eo(e,Lt()),n;if(6===t)Do(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Gt(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Bo(e,r))&&(0!==(a=Ct(e))&&(r=a,t=To(e,a))),1===t))throw n=eo,Io(e,0),Do(e,r),Eo(e,Lt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:qo(e,ao);break;case 3:if(Do(e,r),(130023424&r)===r&&10<(t=oo+500-Lt())){if(0!==At(e,0))break;if(((i=e.suspendedLanes)&r)!==r){wo(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=j(qo.bind(null,e,ao),t);break}qo(e,ao);break;case 4:if(Do(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-bt(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Lt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Va(r/1960))-r)){e.timeoutHandle=j(qo.bind(null,e,ao),r);break}qo(e,ao);break;default:throw Error(o(329))}}}return Eo(e,Lt()),e.callbackNode===n?Ao.bind(null,e):null}function To(e,t){var n=io;return e.current.memoizedState.isDehydrated&&(Io(e,t).flags|=256),2!==(e=Bo(e,t))&&(t=ao,ao=n,null!==t&&Co(t)),e}function Co(e){null===ao?ao=e:ao.push.apply(ao,e)}function Do(e,t){for(t&=~ro,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function No(e){if(0!==(6&Xa))throw Error(o(327));Vo();var t=At(e,0);if(0===(1&t))return Eo(e,Lt()),null;var n=Bo(e,t);if(0!==e.tag&&2===n){var r=Ct(e);0!==r&&(t=r,n=To(e,r))}if(1===n)throw n=eo,Io(e,0),Do(e,t),Eo(e,Lt()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qo(e,ao),Eo(e,Lt()),null}function Ro(e){null!==mo&&0===mo.tag&&0===(6&Xa)&&Vo();var t=Xa;Xa|=1;var n=Wa.transition,r=kt;try{if(Wa.transition=null,kt=1,e)return e()}finally{kt=r,Wa.transition=n,0===(6&(Xa=t))&&Zt()}}function ko(){Ja=Ka.current,st(Ka)}function Io(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==W&&(e.timeoutHandle=W,G(n)),null!==$a)for(n=$a.return;null!==n;){var r=n;switch(Hn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mt();break;case 3:pr(),st(ht),st(ct),xr();break;case 5:mr(r);break;case 4:pr();break;case 13:case 19:st(gr);break;case 10:ln(r.type._context);break;case 22:case 23:ko()}n=n.return}if(Ya=e,$a=e=es(e.current,null),Za=Ja=t,Qa=0,eo=null,ro=no=to=0,ao=io=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(r=(n=dn[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}dn=null}return e}function Fo(e,t){for(;;){var n=$a;try{if(on(),br.current=pi,Ar){for(var r=_r.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Ar=!1}if(Sr=0,Er=Mr=_r=null,Tr=!1,Cr=0,Ga.current=null,null===n||null===n.return){Qa=1,eo=t,$a=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Za,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Ti(s);if(null!==f){f.flags&=-257,Ci(f,s,l,0,t),1&f.mode&&Ai(a,c,t),u=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){Ai(a,c,t),Oo();break e}u=Error(o(426))}else if(jn&&1&l.mode){var v=Ti(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ci(v,s,l,0,t),er(u);break e}}a=u,4!==Qa&&(Qa=2),null===io?io=[a]:io.push(a),u=vi(u,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Mi(0,u,t));break e;case 1:a=u;var y=l.type,x=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===po||!po.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Ei(l,a,t));break e}}l=l.return}while(null!==l)}Ho(n)}catch(b){t=b,$a===n&&null!==n&&($a=n=n.return);continue}break}}function Po(){var e=ja.current;return ja.current=pi,null===e?pi:e}function Oo(){0!==Qa&&3!==Qa&&2!==Qa||(Qa=4),null===Ya||0===(268435455&to)&&0===(268435455&no)||Do(Ya,Za)}function Bo(e,t){var n=Xa;Xa|=2;var r=Po();for(Ya===e&&Za===t||Io(e,t);;)try{Lo();break}catch(i){Fo(e,i)}if(on(),Xa=n,ja.current=r,null!==$a)throw Error(o(261));return Ya=null,Za=0,Qa}function Lo(){for(;null!==$a;)Uo($a)}function zo(){for(;null!==$a&&!Ot();)Uo($a)}function Uo(e){var t=uo(e.alternate,e,Ja);e.memoizedProps=e.pendingProps,null===t?Ho(e):$a=t,Ga.current=null}function Ho(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Fi(n,t,Ja)))return void($a=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void($a=n);if(null===e)return Qa=6,void($a=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void($a=t);$a=t=e}while(null!==t);0===Qa&&(Qa=5)}function qo(e,t){var n=kt,r=Wa.transition;try{Wa.transition=null,kt=1,function(e,t,n){do{Vo()}while(null!==mo);if(0!==(6&Xa))throw Error(o(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-bt(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,a),e===Ya&&($a=Ya=null,Za=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||fo||(fo=!0,Zo(Ht,(function(){return Vo(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Wa.transition,Wa.transition=null;var s=kt;kt=1;var l=Xa;Xa|=4,Ga.current=null,function(e,t){for(O(e.containerInfo),ua=t;null!==ua;)if(t=(e=ua).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,ua=t;else for(;null!==ua;){e=ua;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,a=e.stateNode,s=a.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);a.__reactInternalSnapshotBeforeUpdate=s}break;case 3:Y&&Ee(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(l){Go(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,ua=t;break}ua=e.return}n=da,da=!1}(e,r),function(e,t){for(ua=t;null!==ua;){var n=(t=ua).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e;Y?Ma(a,i,t):va(a,i,t);var o=i.alternate;null!==o&&(o.return=null),i.return=null}catch(w){Go(i,t,w)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,ua=n;else for(;null!==ua;){t=ua;try{var s=t.flags;if(32&s&&Y&&be(t.stateNode),512&s){var l=t.alternate;if(null!==l){var u=l.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(oo=Lt())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,p=null!==d&&null!==d.memoizedState;if(n=t,Y)e:if(r=n,i=h,a=null,Y)for(var f=r;;){if(5===f.tag){if(null===a){a=f;var m=f.stateNode;i?we(m):_e(f.stateNode,f.memoizedProps)}}else if(6===f.tag){if(null===a){var g=f.stateNode;i?Se(g):Me(g,f.memoizedProps)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===r)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===r)break;for(;null===f.sibling;){if(null===f.return||f.return===r)break e;a===f&&(a=null),f=f.return}a===f&&(a=null),f.sibling.return=f.return,f=f.sibling}if(h&&!p&&0!==(1&n.mode)){ua=n;for(var v=n.child;null!==v;){for(n=ua=v;null!==ua;){var y=(r=ua).child;switch(r.tag){case 0:case 11:case 14:case 15:pa(4,r,r.return);break;case 1:ca(r,r.return);var x=r.stateNode;if("function"===typeof x.componentWillUnmount){var b=r.return;try{x.props=r.memoizedProps,x.state=r.memoizedState,x.componentWillUnmount()}catch(w){Go(r,b,w)}}break;case 5:ca(r,r.return);break;case 22:if(null!==r.memoizedState){Na(n);continue}}null!==y?(y.return=r,ua=y):Na(n)}v=v.sibling}}}switch(4102&s){case 2:wa(t),t.flags&=-3;break;case 6:wa(t),t.flags&=-3,Ea(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Ea(t.alternate,t);break;case 4:Ea(t.alternate,t)}}catch(w){Go(t,t.return,w)}if(null!==(n=t.sibling)){n.return=t.return,ua=n;break}ua=t.return}}}(e,r),B(e.containerInfo),e.current=r,Ta(r,e,i),Bt(),Xa=l,kt=s,Wa.transition=a}else e.current=r;if(fo&&(fo=!1,mo=e,go=i),a=e.pendingLanes,0===a&&(po=null),function(e){if(jt&&"function"===typeof jt.onCommitFiberRoot)try{jt.onCommitFiberRoot(Vt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Eo(e,Lt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(co)throw co=!1,e=ho,ho=null,e;0!==(1&go)&&0!==e.tag&&Vo(),a=e.pendingLanes,0!==(1&a)?e===yo?vo++:(vo=0,yo=e):vo=0,Zt()}(e,t,n)}finally{Wa.transition=r,kt=n}return null}function Vo(){if(null!==mo){var e=It(go),t=Wa.transition,n=kt;try{if(Wa.transition=null,kt=16>e?16:e,null===mo)var r=!1;else{if(e=mo,mo=null,go=0,0!==(6&Xa))throw Error(o(331));var i=Xa;for(Xa|=4,ua=e.current;null!==ua;){var a=ua,s=a.child;if(0!==(16&ua.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(ua=c;null!==ua;){var h=ua;switch(h.tag){case 0:case 11:case 15:pa(8,h,a)}var d=h.child;if(null!==d)d.return=h,ua=d;else for(;null!==ua;){var p=(h=ua).sibling,f=h.return;if(ya(h),h===c){ua=null;break}if(null!==p){p.return=f,ua=p;break}ua=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}ua=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,ua=s;else e:for(;null!==ua;){if(0!==(2048&(a=ua).flags))switch(a.tag){case 0:case 11:case 15:pa(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,ua=y;break e}ua=a.return}}var x=e.current;for(ua=x;null!==ua;){var b=(s=ua).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,ua=b;else e:for(s=x;null!==ua;){if(0!==(2048&(l=ua).flags))try{switch(l.tag){case 0:case 11:case 15:fa(9,l)}}catch(S){Go(l,l.return,S)}if(l===s){ua=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,ua=w;break e}ua=l.return}}if(Xa=i,Zt(),jt&&"function"===typeof jt.onPostCommitFiberRoot)try{jt.onPostCommitFiberRoot(Vt,e)}catch(S){}r=!0}return r}finally{kt=n,Wa.transition=t}}return!1}function jo(e,t,n){vn(e,t=Mi(0,t=vi(n,t),1)),t=wo(),null!==(e=Mo(e,1))&&(Nt(e,1,t),Eo(e,t))}function Go(e,t,n){if(3===e.tag)jo(e,e,n);else for(;null!==t;){if(3===t.tag){jo(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===po||!po.has(r))){vn(t,e=Ei(t,e=vi(n,e),1)),e=wo(),null!==(t=Mo(t,1))&&(Nt(t,1,e),Eo(t,e));break}}t=t.return}}function Wo(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=wo(),e.pingedLanes|=e.suspendedLanes&n,Ya===e&&(Za&n)===n&&(4===Qa||3===Qa&&(130023424&Za)===Za&&500>Lt()-oo?Io(e,0):ro|=n),Eo(e,t)}function Xo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Mt,0===(130023424&(Mt<<=1))&&(Mt=4194304)));var n=wo();null!==(e=Mo(e,t))&&(Nt(e,t,n),Eo(e,n))}function Yo(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Xo(e,n)}function $o(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Xo(e,n)}function Zo(e,t){return Ft(e,t)}function Jo(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ko(e,t,n,r){return new Jo(e,t,n,r)}function Qo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Ko(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Qo(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case c:return ns(n.children,i,a,t);case h:s=8,i|=8;break;case d:return(e=Ko(12,n,t,2|i)).elementType=d,e.lanes=a,e;case g:return(e=Ko(13,n,t,i)).elementType=g,e.lanes=a,e;case v:return(e=Ko(19,n,t,i)).elementType=v,e.lanes=a,e;case b:return rs(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:s=10;break e;case f:s=9;break e;case m:s=11;break e;case y:s=14;break e;case x:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ko(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function ns(e,t,n,r){return(e=Ko(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Ko(22,e,r,t)).elementType=b,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Ko(6,e,null,t)).lanes=n,e}function as(e,t,n){return(t=Ko(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function os(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dt(0),this.expirationTimes=Dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.identifierPrefix=r,this.onRecoverableError=i,Z&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,a,o,s,l){return e=new os(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ko(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},fn(a),e}function ls(e){if(!e)return ut;e:{if(E(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(ft(n))return vt(e,n,t)}return t}function us(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=C(t))?null:e.stateNode}function cs(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function hs(e,t){cs(e,t),(e=e.alternate)&&cs(e,t)}function ds(e){return null===(e=C(e))?null:e.stateNode}function ps(){return null}return uo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Oi=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Oi=!1,function(e,t,n){switch(t.tag){case 3:Wi(t),Qn();break;case 5:fr(t);break;case 1:ft(t.type)&&yt(t);break;case 4:dr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Zi(e,t,n):(lt(gr,1&gr.current),null!==(e=ia(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ra(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,Hi(e,t,n)}return ia(e,t,n)}(e,t,n);Oi=0!==(131072&e.flags)}else Oi=!1,jn&&0!==(1048576&t.flags)&&zn(t,kn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=pt(t,ct.current);cn(t,n),i=kr(null,t,r,e,i,n);var a=Ir();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ft(r)?(a=!0,yt(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,fn(t),i.updater=Mn,t.stateNode=i,i._reactInternals=t,Cn(t,r,e,n),t=Gi(null,t,r,!0,a,n)):(t.tag=0,jn&&a&&Un(t),Bi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Qo(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Vi(null,t,r,e,n);break e;case 1:t=ji(null,t,r,e,n);break e;case 11:t=Li(null,t,r,e,n);break e;case 14:t=zi(null,t,r,en(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Vi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,ji(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Wi(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,mn(e,t),bn(t,r,null,n);var s=t.memoizedState;if(r=s.element,Z&&a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Xi(e,t,r,n,i=Error(o(423)));break e}if(r!==i){t=Xi(e,t,r,n,i=Error(o(424)));break e}for(Z&&(Vn=He(t.stateNode.containerInfo),qn=t,jn=!0,Wn=null,Gn=!1),n=or(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Qn(),r===i){t=ia(e,t,n);break e}Bi(e,t,r,n)}t=t.child}return t;case 5:return fr(t),null===e&&Zn(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,q(r,i)?s=null:null!==a&&q(r,a)&&(t.flags|=32),qi(e,t),Bi(e,t,s,n),t.child;case 6:return null===e&&Zn(t),null;case 13:return Zi(e,t,n);case 4:return dr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ar(t,null,r,n):Bi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Li(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Bi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,sn(0,r,s=i.value),null!==a)if(Gt(a.value,s)){if(a.children===i.children&&!ht.current){t=ia(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=gn(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),un(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),un(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Bi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cn(t,n),r=r(i=hn(i)),t.flags|=1,Bi(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),zi(e,t,r,i=en(r.type,i),n);case 15:return Ui(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ft(r)?(e=!0,yt(t)):e=!1,cn(t,n),An(t,r,i),Cn(t,r,i,n),Gi(null,t,r,!0,e,n);case 19:return ra(e,t,n);case 22:return Hi(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(_o(e,134217728,wo()),hs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=wo(),n=So(e);_o(e,n,t),hs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Et(t.pendingLanes);0!==n&&(Rt(t,1|n),Eo(t,Lt()),0===(6&Xa)&&(lo(),Zt()))}break;case 13:var r=wo();Ro((function(){return _o(e,1,r)})),hs(e,1)}},t.batchedUpdates=function(e,t){var n=Xa;Xa|=1;try{return e(t)}finally{0===(Xa=n)&&(lo(),Xt&&Zt())}},t.createComponentSelector=function(e){return{$$typeof:ka,value:e}},t.createContainer=function(e,t,n,r,i,a,o){return ss(e,t,!1,null,0,r,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Ia,value:e}},t.createHydrationContainer=function(e,t,n,r,i,a,o,s,l){return(e=ss(n,r,!0,e,0,a,0,s,l)).context=ls(null),n=e.current,(a=gn(r=wo(),i=So(n))).callback=void 0!==t&&null!==t?t:null,vn(n,a),e.current.lanes=i,Nt(e,i,r),Eo(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Fa,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Pa,value:e}},t.createTextSelector=function(e){return{$$typeof:Oa,value:e}},t.deferredUpdates=function(e){var t=kt,n=Wa.transition;try{return Wa.transition=null,kt=16,e()}finally{kt=t,Wa.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var a=kt,o=Wa.transition;try{return Wa.transition=null,kt=1,e(t,n,r,i)}finally{kt=a,Wa.transition=o,0===Xa&&lo()}},t.findAllNodes=qa,t.findBoundingRects=function(e,t){if(!re)throw Error(o(363));t=qa(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,a=n.y,s=a+n.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,h=c+u.width,d=u.y,p=d+u.height;if(r>=c&&a>=d&&i<=h&&s<=p){e.splice(t,1);break}if(!(r!==c||n.width!==u.width||p<a||d>s)){d>a&&(u.height+=d-a,u.y=a),p<s&&(u.height=s-d),e.splice(t,1);break}if(!(a!==d||n.height!==u.height||h<r||c>i)){c>r&&(u.width+=c-r,u.x=r),h<i&&(u.width=i-c),e.splice(t,1);break}}return e},t.findHostInstance=us,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?N(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return us(e)},t.flushControlled=function(e){var t=Xa;Xa|=1;var n=Wa.transition,r=kt;try{Wa.transition=null,kt=1,e()}finally{kt=r,Wa.transition=n,0===(Xa=t)&&(lo(),Zt())}},t.flushPassiveEffects=Vo,t.flushSync=Ro,t.focusWithin=function(e,t){if(!re)throw Error(o(363));for(t=Ha(e=La(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ue(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return kt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(o(363));var n=0,r=[];e=[La(e),0];for(var i=0;i<e.length;){var a=e[i++],s=e[i++],l=t[s];if((5!==a.tag||!se(a))&&(za(a,l)&&(r.push(Ua(l)),++s>n&&(n=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ua(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?I(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:e.findFiberByHostInstance||ps,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Vt=t.inject(e),jt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(o(363));e=qa(e,t);var i=ce(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,a=wo(),o=So(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=_o(i,o,a))&&yn(e,i,o),o},t}},205:(e,t,n)=>{"use strict";e.exports=n(302)},16:(e,t,n)=>{"use strict";e.exports=n(958)},62:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,I(S);else{var t=r(c);null!==t&&F(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(A),A=-1),f=!0;var a=p;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!D());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&F(w,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,M=!1,E=null,A=-1,T=5,C=-1;function D(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(M=!1,E=null)}}else M=!1}if("function"===typeof x)_=function(){x(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,k=R.port2;R.port1.onmessage=N,_=function(){k.postMessage(null)}}else _=function(){v(N,0)};function I(e){E=e,M||(M=!0,_())}function F(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(y(A),A=-1):g=!0,F(w,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,I(S))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},513:(e,t,n)=>{"use strict";e.exports=n(62)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,_={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!M.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:_.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+C(l,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",w(e))for(var u=0;u<e.length;u++){var c=a+C(s=e[u],u);l+=D(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=D(s=s.value,t,i,c=a+C(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k={current:null},I={transition:null},F={ReactCurrentDispatcher:k,ReactCurrentBatchConfig:I,ReactCurrentOwner:_};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=x,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)S.call(t,u)&&!M.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return k.current.useCallback(e,t)},t.useContext=function(e){return k.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return k.current.useDeferredValue(e)},t.useEffect=function(e,t){return k.current.useEffect(e,t)},t.useId=function(){return k.current.useId()},t.useImperativeHandle=function(e,t,n){return k.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.current.useMemo(e,t)},t.useReducer=function(e,t,n){return k.current.useReducer(e,t,n)},t.useRef=function(e){return k.current.useRef(e)},t.useState=function(e){return k.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,b(e),!m)if(null!==r(u))m=!0,I(S);else{var t=r(c);null!==t&&F(w,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,y(A),A=-1),f=!0;var a=p;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!D());){var o=d.callback;if("function"===typeof o){d.callback=null,p=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&F(w,h.startTime-n),l=!1}return l}finally{d=null,p=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,M=!1,E=null,A=-1,T=5,C=-1;function D(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?_():(M=!1,E=null)}}else M=!1}if("function"===typeof x)_=function(){x(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,k=R.port2;R.port1.onmessage=N,_=function(){k.postMessage(null)}}else _=function(){v(N,0)};function I(e){E=e,M||(M=!0,_())}function F(e,n){A=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(y(A),A=-1):g=!0,F(w,a-o))):(e.sortIndex=s,n(u,e),m||f||(m=!0,I(S))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},334:(e,t,n)=>{var r=n(359),i=n(66),a=n(635),o=n(538),s=n(288),l=n(262),u=n(430);u.alea=r,u.xor128=i,u.xorwow=a,u.xorshift7=o,u.xor4096=s,u.tychei=l,e.exports=u},359:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function s(e,t){var n=new a(e),r=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.alea=s}(0,e=n.nmd(e),n.amdD)},262:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.tychei=s}(0,e=n.nmd(e),n.amdD)},66:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor128=s}(0,e=n.nmd(e),n.amdD)},288:function(e,t,n){var r;!function(e,i){function a(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,a=t.i;return t.w=r=r+1640531527|0,n=i[a+34&127],e=i[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,i,a,o,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=o,e.X=s,e.i=i}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.X&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xor4096=s}(0,e=n.nmd(e),n.amdD)},538:function(e,t,n){var r;!function(e,i){function a(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function s(e,t){null==e&&(e=+new Date);var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&(r.x&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorshift7=s}(0,e=n.nmd(e),n.amdD)},635:function(e,t,n){var r;!function(e,i){function a(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function s(e,t){var n=new a(e),r=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&o(r,n),i.state=function(){return o(n,{})}),i}i&&i.exports?i.exports=s:n.amdD&&n.amdO?void 0===(r=function(){return s}.call(t,n,t,i))||(i.exports=r):this.xorwow=s}(0,e=n.nmd(e),n.amdD)},430:function(e,t,n){var r;!function(i,a,o){var s,l=256,u=o.pow(l,6),c=o.pow(2,52),h=2*c,d=255;function p(e,t,n){var r=[],d=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(a)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),y(e)}catch(r){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,y(a)]}}():e,3),r),p=new f(r),x=function(){for(var e=p.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=p.g(1);for(;e>=h;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|p.g(4)},x.quick=function(){return p.g(4)/4294967296},x.double=x,v(y(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&m(r,p),e.state=function(){return m(p,{})}),n?(o.random=e,t):e})(x,d,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);i<l;)o[i]=i++;for(i=0;i<l;i++)o[i]=o[a=d&a+e[i%n]+(t=o[i])],o[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,o=r.S;e--;)t=o[i=d&i+1],n=n*l+o[d&(o[i]=o[a=d&a+t])+(o[a]=t)];return r.i=i,r.j=a,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(g(e[n],t-1))}catch(a){}return r.length?r:"string"==i?e:e+"\0"}function v(e,t){for(var n,r=e+"",i=0;i<r.length;)t[d&i]=d&(n^=19*t[d&i])+r.charCodeAt(i++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(v(o.random(),a),e.exports){e.exports=p;try{s=n(996)}catch(x){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}("undefined"!==typeof self?self:this,[],Math)},996:()=>{},422:function(e){e.exports=function(){"use strict";function e(){return!0}function t(){return!1}function n(){}const r="Argument is not a typed-function.";function i(){function a(e){return"object"===typeof e&&null!==e&&e.constructor===Object}const o=[{name:"number",test:function(e){return"number"===typeof e}},{name:"string",test:function(e){return"string"===typeof e}},{name:"boolean",test:function(e){return"boolean"===typeof e}},{name:"Function",test:function(e){return"function"===typeof e}},{name:"Array",test:Array.isArray},{name:"Date",test:function(e){return e instanceof Date}},{name:"RegExp",test:function(e){return e instanceof RegExp}},{name:"Object",test:a},{name:"null",test:function(e){return null===e}},{name:"undefined",test:function(e){return void 0===e}}],s={name:"any",test:e,isAny:!0};let l,u,c=0,h={createCount:0};function d(e){const t=l.get(e);if(t)return t;let n='Unknown type "'+e+'"';const r=e.toLowerCase();let i;for(i of u)if(i.toLowerCase()===r){n+='. Did you mean "'+i+'" ?';break}throw new TypeError(n)}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"any";const n=t?d(t).index:u.length,r=[];for(let a=0;a<e.length;++a){if(!e[a]||"string"!==typeof e[a].name||"function"!==typeof e[a].test)throw new TypeError("Object with properties {name: string, test: function} expected");const t=e[a].name;if(l.has(t))throw new TypeError('Duplicate type name "'+t+'"');r.push(t),l.set(t,{name:t,test:e[a].test,isAny:e[a].isAny,index:n+a,conversionsTo:[]})}const i=u.slice(n);u=u.slice(0,n).concat(r).concat(i);for(let a=n+r.length;a<u.length;++a)l.get(u[a]).index=a}function f(){l=new Map,u=[],c=0,p([s],!1)}function m(){let e;for(e of u)l.get(e).conversionsTo=[];c=0}function g(e){const t=u.filter((t=>{const n=l.get(t);return!n.isAny&&n.test(e)}));return t.length?t:["any"]}function v(e){return e&&"function"===typeof e&&"_typedFunctionData"in e}function y(e,t,n){if(!v(e))throw new TypeError(r);const i=n&&n.exact,a=E(Array.isArray(t)?t.join(","):t),o=w(a);if(!i||o in e.signatures){const t=e._typedFunctionData.signatureMap.get(o);if(t)return t}const s=a.length;let l,u;if(i){let t;for(t in l=[],e.signatures)l.push(e._typedFunctionData.signatureMap.get(t))}else l=e._typedFunctionData.signatures;for(let r=0;r<s;++r){const e=a[r],t=[];let n;for(n of l){const i=D(n.params,r);if(i&&(!e.restParam||i.restParam)){if(!i.hasAny){const t=M(i);if(e.types.some((e=>!t.has(e.name))))continue}t.push(n)}}if(l=t,0===l.length)break}for(u of l)if(u.params.length<=s)return u;throw new TypeError("Signature not found (signature: "+(e.name||"unnamed")+"("+w(a,", ")+"))")}function x(e,t,n){return y(e,t,n).implementation}function b(e,t){const n=d(t);if(n.test(e))return e;const r=n.conversionsTo;if(0===r.length)throw new Error("There are no conversions to "+t+" defined.");for(let i=0;i<r.length;i++)if(d(r[i].from).test(e))return r[i].convert(e);throw new Error("Cannot convert "+e+" to "+t)}function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e.map((e=>e.name)).join(t)}function S(e){const t=0===e.indexOf("..."),n=(t?e.length>3?e.slice(3):"any":e).split("|").map((e=>d(e.trim())));let r=!1,i=t?"...":"";return{types:n.map((function(e){return r=e.isAny||r,i+=e.name+"|",{name:e.name,typeIndex:e.index,test:e.test,isAny:e.isAny,conversion:null,conversionIndex:-1}})),name:i.slice(0,-1),hasAny:r,hasConversion:!1,restParam:t}}function _(e){const t=L(e.types.map((e=>e.name)));let n=e.hasAny,r=e.name;const i=t.map((function(e){const t=d(e.from);return n=t.isAny||n,r+="|"+e.from,{name:e.from,typeIndex:t.index,test:t.test,isAny:t.isAny,conversion:e,conversionIndex:e.index}}));return{types:e.types.concat(i),name:r,hasAny:n,hasConversion:i.length>0,restParam:e.restParam}}function M(e){return e.typeSet||(e.typeSet=new Set,e.types.forEach((t=>e.typeSet.add(t.name)))),e.typeSet}function E(e){const t=[];if("string"!==typeof e)throw new TypeError("Signatures must be strings");const n=e.trim();if(""===n)return t;const r=n.split(",");for(let i=0;i<r.length;++i){const e=S(r[i].trim());if(e.restParam&&i!==r.length-1)throw new SyntaxError('Unexpected rest parameter "'+r[i]+'": only allowed for the last parameter');if(0===e.types.length)return null;t.push(e)}return t}function A(e){const t=Z(e);return!!t&&t.restParam}function T(t){if(t&&0!==t.types.length){if(1===t.types.length)return d(t.types[0].name).test;if(2===t.types.length){const e=d(t.types[0].name).test,n=d(t.types[1].name).test;return function(t){return e(t)||n(t)}}{const e=t.types.map((function(e){return d(e.name).test}));return function(t){for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1}}}return e}function C(e){let t,n,r;if(A(e)){t=$(e).map(T);const n=t.length,r=T(Z(e)),i=function(e){for(let t=n;t<e.length;t++)if(!r(e[t]))return!1;return!0};return function(e){for(let n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return i(e)&&e.length>=n+1}}return 0===e.length?function(e){return 0===e.length}:1===e.length?(n=T(e[0]),function(e){return n(e[0])&&1===e.length}):2===e.length?(n=T(e[0]),r=T(e[1]),function(e){return n(e[0])&&r(e[1])&&2===e.length}):(t=e.map(T),function(e){for(let n=0;n<t.length;n++)if(!t[n](e[n]))return!1;return e.length===t.length})}function D(e,t){return t<e.length?e[t]:A(e)?Z(e):null}function N(e,t){const n=D(e,t);return n?M(n):new Set}function R(e){return null===e.conversion||void 0===e.conversion}function k(e,t){const n=new Set;return e.forEach((e=>{const r=N(e.params,t);let i;for(i of r)n.add(i)})),n.has("any")?["any"]:Array.from(n)}function I(e,t,n){let r,i;const a=e||"unnamed";let o,s=n;for(o=0;o<t.length;o++){const e=[];if(s.forEach((n=>{const r=T(D(n.params,o));(o<n.params.length||A(n.params))&&r(t[o])&&e.push(n)})),0===e.length){if(i=k(s,o),i.length>0){const e=g(t[o]);return r=new TypeError("Unexpected type of argument in function "+a+" (expected: "+i.join(" or ")+", actual: "+e.join(" | ")+", index: "+o+")"),r.data={category:"wrongType",fn:a,index:o,actual:e,expected:i},r}}else s=e}const l=s.map((function(e){return A(e.params)?1/0:e.params.length}));if(t.length<Math.min.apply(null,l))return i=k(s,o),r=new TypeError("Too few arguments in function "+a+" (expected: "+i.join(" or ")+", index: "+t.length+")"),r.data={category:"tooFewArgs",fn:a,index:t.length,expected:i},r;const u=Math.max.apply(null,l);if(t.length>u)return r=new TypeError("Too many arguments in function "+a+" (expected: "+u+", actual: "+t.length+")"),r.data={category:"tooManyArgs",fn:a,index:t.length,expectedLength:u},r;const c=[];for(let h=0;h<t.length;++h)c.push(g(t[h]).join("|"));return r=new TypeError('Arguments of type "'+c.join(", ")+'" do not match any of the defined signatures of function '+a+"."),r.data={category:"mismatch",actual:c},r}function F(e){let t=u.length+1;for(let n=0;n<e.types.length;n++)R(e.types[n])&&(t=Math.min(t,e.types[n].typeIndex));return t}function P(e){let t=c+1;for(let n=0;n<e.types.length;n++)R(e.types[n])||(t=Math.min(t,e.types[n].conversionIndex));return t}function O(e,t){if(e.hasAny){if(!t.hasAny)return 1}else if(t.hasAny)return-1;if(e.restParam){if(!t.restParam)return 1}else if(t.restParam)return-1;if(e.hasConversion){if(!t.hasConversion)return 1}else if(t.hasConversion)return-1;const n=F(e)-F(t);if(n<0)return-1;if(n>0)return 1;const r=P(e)-P(t);return r<0?-1:r>0?1:0}function B(e,t){const n=e.params,r=t.params,i=Z(n),a=Z(r),o=A(n),s=A(r);if(o&&i.hasAny){if(!s||!a.hasAny)return 1}else if(s&&a.hasAny)return-1;let l,u=0,c=0;for(l of n)l.hasAny&&++u,l.hasConversion&&++c;let h=0,d=0;for(l of r)l.hasAny&&++h,l.hasConversion&&++d;if(u!==h)return u-h;if(o&&i.hasConversion){if(!s||!a.hasConversion)return 1}else if(s&&a.hasConversion)return-1;if(c!==d)return c-d;if(o){if(!s)return 1}else if(s)return-1;const p=(n.length-r.length)*(o?-1:1);if(0!==p)return p;const f=[];let m,g=0;for(let v=0;v<n.length;++v){const e=O(n[v],r[v]);f.push(e),g+=e}if(0!==g)return g;for(m of f)if(0!==m)return m;return 0}function L(e){if(0===e.length)return[];const t=e.map(d);e.length>1&&t.sort(((e,t)=>e.index-t.index));let n=t[0].conversionsTo;if(1===e.length)return n;n=n.concat([]);const r=new Set(e);for(let i=1;i<t.length;++i){let e;for(e of t[i].conversionsTo)r.has(e.from)||(n.push(e),r.add(e.from))}return n}function z(e,t){let n=t;if(e.some((e=>e.hasConversion))){const r=A(e),i=e.map(U);n=function(){const e=[],n=r?arguments.length-1:arguments.length;for(let t=0;t<n;t++)e[t]=i[t](arguments[t]);return r&&(e[n]=arguments[n].map(i[n])),t.apply(this,e)}}let r=n;if(A(e)){const t=e.length-1;r=function(){return n.apply(this,J(arguments,0,t).concat([J(arguments,t)]))}}return r}function U(e){let t,n,r,i;const a=[],o=[];switch(e.types.forEach((function(e){e.conversion&&(a.push(d(e.conversion.from).test),o.push(e.conversion.convert))})),o.length){case 0:return function(e){return e};case 1:return t=a[0],r=o[0],function(e){return t(e)?r(e):e};case 2:return t=a[0],n=a[1],r=o[0],i=o[1],function(e){return t(e)?r(e):n(e)?i(e):e};default:return function(e){for(let t=0;t<o.length;t++)if(a[t](e))return o[t](e);return e}}}function H(e){function t(e,n,r){if(n<e.length){const i=e[n];let a=[];if(i.restParam){const e=i.types.filter(R);e.length<i.types.length&&a.push({types:e,name:"..."+e.map((e=>e.name)).join("|"),hasAny:e.some((e=>e.isAny)),hasConversion:!1,restParam:!0}),a.push(i)}else a=i.types.map((function(e){return{types:[e],name:e.name,hasAny:e.isAny,hasConversion:e.conversion,restParam:!1}}));return Q(a,(function(i){return t(e,n+1,r.concat([i]))}))}return[r]}return t(e,0,[])}function q(e,t){const n=Math.max(e.length,t.length);for(let s=0;s<n;s++){const n=N(e,s),r=N(t,s);let i,a=!1;for(i of r)if(n.has(i)){a=!0;break}if(!a)return!1}const r=e.length,i=t.length,a=A(e),o=A(t);return a?o?r===i:i>=r:o?r>=i:r===i}function V(e){return e.map((e=>ie(e)?ne(e.referToSelf.callback):re(e)?te(e.referTo.references,e.referTo.callback):e))}function j(e,t,n){const r=[];let i;for(i of e){let e=n[i];if("number"!==typeof e)throw new TypeError('No definition for referenced signature "'+i+'"');if(e=t[e],"function"!==typeof e)return!1;r.push(e)}return r}function G(e,t,n){const r=V(e),i=new Array(r.length).fill(!1);let a=!0;for(;a;){a=!1;let e=!0;for(let o=0;o<r.length;++o){if(i[o])continue;const s=r[o];if(ie(s))r[o]=s.referToSelf.callback(n),r[o].referToSelf=s.referToSelf,i[o]=!0,e=!1;else if(re(s)){const n=j(s.referTo.references,r,t);n?(r[o]=s.referTo.callback.apply(this,n),r[o].referTo=s.referTo,i[o]=!0,e=!1):a=!0}}if(e&&a)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return r}function W(e){const t=/\bthis(\(|\.signatures\b)/;Object.keys(e).forEach((n=>{const r=e[n];if(t.test(r.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")}))}function X(e,r){if(h.createCount++,0===Object.keys(r).length)throw new SyntaxError("No signatures provided");h.warnAgainstDeprecatedThis&&W(r);const i=[],a=[],o={},s=[];let l;for(l in r){if(!Object.prototype.hasOwnProperty.call(r,l))continue;const e=E(l);if(!e)continue;i.forEach((function(t){if(q(t,e))throw new TypeError('Conflicting signatures "'+w(t)+'" and "'+w(e)+'".')})),i.push(e);const t=a.length;a.push(r[l]);const n=e.map(_);let u;for(u of H(n)){const e=w(u);s.push({params:u,name:e,fn:t}),u.every((e=>!e.hasConversion))&&(o[e]=t)}}s.sort(B);const u=G(a,o,le);let c;for(c in o)Object.prototype.hasOwnProperty.call(o,c)&&(o[c]=u[o[c]]);const d=[],p=new Map;for(c of s)p.has(c.name)||(c.fn=u[c.fn],d.push(c),p.set(c.name,c));const f=d[0]&&d[0].params.length<=2&&!A(d[0].params),m=d[1]&&d[1].params.length<=2&&!A(d[1].params),g=d[2]&&d[2].params.length<=2&&!A(d[2].params),v=d[3]&&d[3].params.length<=2&&!A(d[3].params),y=d[4]&&d[4].params.length<=2&&!A(d[4].params),x=d[5]&&d[5].params.length<=2&&!A(d[5].params),b=f&&m&&g&&v&&y&&x;for(let t=0;t<d.length;++t)d[t].test=C(d[t].params);const S=f?T(d[0].params[0]):t,M=m?T(d[1].params[0]):t,D=g?T(d[2].params[0]):t,N=v?T(d[3].params[0]):t,R=y?T(d[4].params[0]):t,k=x?T(d[5].params[0]):t,I=f?T(d[0].params[1]):t,F=m?T(d[1].params[1]):t,P=g?T(d[2].params[1]):t,O=v?T(d[3].params[1]):t,L=y?T(d[4].params[1]):t,U=x?T(d[5].params[1]):t;for(let t=0;t<d.length;++t)d[t].implementation=z(d[t].params,d[t].fn);const V=f?d[0].implementation:n,j=m?d[1].implementation:n,X=g?d[2].implementation:n,Y=v?d[3].implementation:n,$=y?d[4].implementation:n,Z=x?d[5].implementation:n,J=f?d[0].params.length:-1,K=m?d[1].params.length:-1,Q=g?d[2].params.length:-1,ee=v?d[3].params.length:-1,te=y?d[4].params.length:-1,ne=x?d[5].params.length:-1,re=b?6:0,ie=d.length,ae=d.map((e=>e.test)),oe=d.map((e=>e.implementation)),se=function(){for(let e=re;e<ie;e++)if(ae[e](arguments))return oe[e].apply(this,arguments);return h.onMismatch(e,arguments,d)};function le(e,t){return arguments.length===J&&S(e)&&I(t)?V.apply(this,arguments):arguments.length===K&&M(e)&&F(t)?j.apply(this,arguments):arguments.length===Q&&D(e)&&P(t)?X.apply(this,arguments):arguments.length===ee&&N(e)&&O(t)?Y.apply(this,arguments):arguments.length===te&&R(e)&&L(t)?$.apply(this,arguments):arguments.length===ne&&k(e)&&U(t)?Z.apply(this,arguments):se.apply(this,arguments)}try{Object.defineProperty(le,"name",{value:e})}catch(ue){}return le.signatures=o,le._typedFunctionData={signatures:d,signatureMap:p},le}function Y(e,t,n){throw I(e,t,n)}function $(e){return J(e,0,e.length-1)}function Z(e){return e[e.length-1]}function J(e,t,n){return Array.prototype.slice.call(e,t,n)}function K(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return e[n]}function Q(e,t){return Array.prototype.concat.apply([],e.map(t))}function ee(){const e=$(arguments).map((e=>w(E(e)))),t=Z(arguments);if("function"!==typeof t)throw new TypeError("Callback function expected as last argument");return te(e,t)}function te(e,t){return{referTo:{references:e,callback:t}}}function ne(e){if("function"!==typeof e)throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:e}}}function re(e){return e&&"object"===typeof e.referTo&&Array.isArray(e.referTo.references)&&"function"===typeof e.referTo.callback}function ie(e){return e&&"object"===typeof e.referToSelf&&"function"===typeof e.referToSelf.callback}function ae(e,t){if(!e)return t;if(t&&t!==e){const n=new Error("Function names do not match (expected: "+e+", actual: "+t+")");throw n.data={actual:t,expected:e},n}return e}function oe(e){let t;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(v(e[n])||"string"===typeof e[n].signature)&&(t=ae(t,e[n].name));return t}function se(e,t){let n;for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(n in e&&t[n]!==e[n]){const r=new Error('Signature "'+n+'" is defined twice');throw r.data={signature:n,sourceFunction:t[n],destFunction:e[n]},r}e[n]=t[n]}}f(),p(o);const le=h;function ue(e){if(!e||"string"!==typeof e.from||"string"!==typeof e.to||"function"!==typeof e.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(e.to===e.from)throw new SyntaxError('Illegal to define conversion from "'+e.from+'" to itself.')}return h=function(e){const t="string"===typeof e;let n=t?e:"";const r={};for(let i=t?1:0;i<arguments.length;++i){const e=arguments[i];let o,s={};if("function"===typeof e?(o=e.name,"string"===typeof e.signature?s[e.signature]=e:v(e)&&(s=e.signatures)):a(e)&&(s=e,t||(o=oe(e))),0===Object.keys(s).length){const t=new TypeError("Argument to 'typed' at index "+i+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw t.data={index:i,argument:e},t}t||(n=ae(n,o)),se(r,s)}return X(n||"",r)},h.create=i,h.createCount=le.createCount,h.onMismatch=Y,h.throwMismatchError=Y,h.createError=I,h.clear=f,h.clearConversions=m,h.addTypes=p,h._findType=d,h.referTo=ee,h.referToSelf=ne,h.convert=b,h.findSignature=y,h.find=x,h.isTypedFunction=v,h.warnAgainstDeprecatedThis=!0,h.addType=function(e,t){let n="any";!1!==t&&l.has("Object")&&(n="Object"),h.addTypes([e],n)},h.addConversion=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{override:!1};ue(e);const n=d(e.to),r=n.conversionsTo.find((t=>t.from===e.from));if(r){if(!t||!t.override)throw new Error('There is already a conversion from "'+e.from+'" to "'+n.name+'"');h.removeConversion({from:r.from,to:e.to,convert:r.convert})}n.conversionsTo.push({from:e.from,convert:e.convert,index:c++})},h.addConversions=function(e,t){e.forEach((e=>h.addConversion(e,t)))},h.removeConversion=function(e){ue(e);const t=d(e.to),n=K(t.conversionsTo,(t=>t.from===e.from));if(!n)throw new Error("Attempt to remove nonexistent conversion from "+e.from+" to "+e.to);if(n.convert!==e.convert)throw new Error("Conversion to remove does not match existing conversion");const r=t.conversionsTo.indexOf(n);t.conversionsTo.splice(r,1)},h.resolve=function(e,t){if(!v(e))throw new TypeError(r);const n=e._typedFunctionData.signatures;for(let r=0;r<n.length;++r)if(n[r].test(t))return n[r];return null},h}return i()}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".d66eefc2.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="simultionfinalwaves:";n.l=(r,i,a,o)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/FinalWavesSimulation/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunksimultionfinalwaves=self.webpackChunksimultionfinalwaves||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>ta,AddEquation:()=>bi,AddOperation:()=>Zi,AdditiveAnimationBlendMode:()=>Uo,AdditiveBlending:()=>gi,AgXToneMapping:()=>ra,AlphaFormat:()=>La,AlwaysCompare:()=>Ms,AlwaysDepth:()=>Hi,AlwaysStencilFunc:()=>gs,AmbientLight:()=>Am,AnimationAction:()=>gg,AnimationClip:()=>$f,AnimationLoader:()=>im,AnimationMixer:()=>yg,AnimationObjectGroup:()=>mg,AnimationUtils:()=>Of,ArcCurve:()=>Zd,ArrayCamera:()=>Wm,ArrowHelper:()=>hv,AttachedBindMode:()=>aa,Audio:()=>eg,AudioAnalyser:()=>og,AudioContext:()=>Um,AudioListener:()=>Qm,AudioLoader:()=>Hm,AxesHelper:()=>dv,BackSide:()=>di,BasicDepthPacking:()=>jo,BasicShadowMap:()=>si,BatchedMesh:()=>yd,Bone:()=>Fh,BooleanKeyframeTrack:()=>qf,Box2:()=>kg,Box3:()=>Nl,Box3Helper:()=>ov,BoxGeometry:()=>Lc,BoxHelper:()=>av,BufferAttribute:()=>sc,BufferGeometry:()=>Mc,BufferGeometryLoader:()=>Im,ByteType:()=>Ta,Cache:()=>Jf,Camera:()=>jc,CameraHelper:()=>nv,CanvasTexture:()=>Wd,CapsuleGeometry:()=>vp,CatmullRomCurve3:()=>np,CineonToneMapping:()=>ea,CircleGeometry:()=>yp,ClampToEdgeWrapping:()=>fa,Clock:()=>Xm,Color:()=>$u,ColorKeyframeTrack:()=>Vf,ColorManagement:()=>ul,CompressedArrayTexture:()=>jd,CompressedCubeTexture:()=>Gd,CompressedTexture:()=>Vd,CompressedTextureLoader:()=>am,ConeGeometry:()=>bp,ConstantAlphaFactor:()=>Li,ConstantColorFactor:()=>Oi,Controls:()=>fv,CubeCamera:()=>Zc,CubeReflectionMapping:()=>la,CubeRefractionMapping:()=>ua,CubeTexture:()=>Jc,CubeTextureLoader:()=>sm,CubeUVReflectionMapping:()=>da,CubicBezierCurve:()=>op,CubicBezierCurve3:()=>sp,CubicInterpolant:()=>Lf,CullFaceBack:()=>ii,CullFaceFront:()=>ai,CullFaceFrontBack:()=>oi,CullFaceNone:()=>ri,Curve:()=>Yd,CurvePath:()=>fp,CustomBlending:()=>xi,CustomToneMapping:()=>na,CylinderGeometry:()=>xp,Cylindrical:()=>Dg,Data3DTexture:()=>Ml,DataArrayTexture:()=>Sl,DataTexture:()=>Ph,DataTextureLoader:()=>lm,DataUtils:()=>ic,DecrementStencilOp:()=>as,DecrementWrapStencilOp:()=>ss,DefaultLoadingManager:()=>Qf,DepthFormat:()=>Va,DepthStencilFormat:()=>ja,DepthTexture:()=>Xd,DetachedBindMode:()=>oa,DirectionalLight:()=>Em,DirectionalLightHelper:()=>Qg,DiscreteInterpolant:()=>Uf,DodecahedronGeometry:()=>Sp,DoubleSide:()=>pi,DstAlphaFactor:()=>Ri,DstColorFactor:()=>Ii,DynamicCopyUsage:()=>ks,DynamicDrawUsage:()=>As,DynamicReadUsage:()=>Ds,EdgesGeometry:()=>Tp,EllipseCurve:()=>$d,EqualCompare:()=>xs,EqualDepth:()=>ji,EqualStencilFunc:()=>hs,EquirectangularReflectionMapping:()=>ca,EquirectangularRefractionMapping:()=>ha,Euler:()=>pu,EventDispatcher:()=>Ls,ExtrudeGeometry:()=>rf,FileLoader:()=>rm,Float16BufferAttribute:()=>mc,Float32BufferAttribute:()=>gc,FloatType:()=>ka,Fog:()=>eh,FogExp2:()=>Qc,FramebufferTexture:()=>qd,FrontSide:()=>hi,Frustum:()=>ed,GLBufferAttribute:()=>_g,GLSL1:()=>Fs,GLSL3:()=>Ps,GreaterCompare:()=>ws,GreaterDepth:()=>Wi,GreaterEqualCompare:()=>_s,GreaterEqualDepth:()=>Gi,GreaterEqualStencilFunc:()=>ms,GreaterStencilFunc:()=>ps,GridHelper:()=>Yg,Group:()=>Ud,HalfFloatType:()=>Ia,HemisphereLight:()=>hm,HemisphereLightHelper:()=>Xg,IcosahedronGeometry:()=>of,ImageBitmapLoader:()=>Lm,ImageLoader:()=>om,ImageUtils:()=>pl,IncrementStencilOp:()=>is,IncrementWrapStencilOp:()=>os,InstancedBufferAttribute:()=>zh,InstancedBufferGeometry:()=>km,InstancedInterleavedBuffer:()=>Sg,InstancedMesh:()=>Xh,Int16BufferAttribute:()=>hc,Int32BufferAttribute:()=>pc,Int8BufferAttribute:()=>lc,IntType:()=>Na,InterleavedBuffer:()=>nh,InterleavedBufferAttribute:()=>ih,Interpolant:()=>Bf,InterpolateDiscrete:()=>Io,InterpolateLinear:()=>Fo,InterpolateSmooth:()=>Po,InvertStencilOp:()=>ls,KeepStencilOp:()=>ns,KeyframeTrack:()=>Hf,LOD:()=>_h,LatheGeometry:()=>gp,Layers:()=>fu,LessCompare:()=>ys,LessDepth:()=>qi,LessEqualCompare:()=>bs,LessEqualDepth:()=>Vi,LessEqualStencilFunc:()=>ds,LessStencilFunc:()=>cs,Light:()=>cm,LightProbe:()=>Dm,Line:()=>Td,Line3:()=>Pg,LineBasicMaterial:()=>xd,LineCurve:()=>lp,LineCurve3:()=>up,LineDashedMaterial:()=>Nf,LineLoop:()=>kd,LineSegments:()=>Rd,LinearFilter:()=>wa,LinearInterpolant:()=>zf,LinearMipMapLinearFilter:()=>Ea,LinearMipMapNearestFilter:()=>_a,LinearMipmapLinearFilter:()=>Ma,LinearMipmapNearestFilter:()=>Sa,LinearSRGBColorSpace:()=>Ko,LinearToneMapping:()=>Ki,LinearTransfer:()=>Qo,Loader:()=>em,LoaderUtils:()=>Rm,LoadingManager:()=>Kf,LoopOnce:()=>No,LoopPingPong:()=>ko,LoopRepeat:()=>Ro,LuminanceAlphaFormat:()=>qa,LuminanceFormat:()=>Ha,MOUSE:()=>ti,Material:()=>Ku,MaterialLoader:()=>Nm,MathUtils:()=>$s,Matrix2:()=>Ng,Matrix3:()=>Js,Matrix4:()=>ru,MaxEquation:()=>Mi,Mesh:()=>Oc,MeshBasicMaterial:()=>Qu,MeshDepthMaterial:()=>Tf,MeshDistanceMaterial:()=>Cf,MeshLambertMaterial:()=>Af,MeshMatcapMaterial:()=>Df,MeshNormalMaterial:()=>Ef,MeshPhongMaterial:()=>_f,MeshPhysicalMaterial:()=>Sf,MeshStandardMaterial:()=>wf,MeshToonMaterial:()=>Mf,MinEquation:()=>_i,MirroredRepeatWrapping:()=>ma,MixOperation:()=>$i,MultiplyBlending:()=>yi,MultiplyOperation:()=>Yi,NearestFilter:()=>ga,NearestMipMapLinearFilter:()=>ba,NearestMipMapNearestFilter:()=>ya,NearestMipmapLinearFilter:()=>xa,NearestMipmapNearestFilter:()=>va,NeutralToneMapping:()=>ia,NeverCompare:()=>vs,NeverDepth:()=>Ui,NeverStencilFunc:()=>us,NoBlending:()=>fi,NoColorSpace:()=>Zo,NoToneMapping:()=>Ji,NormalAnimationBlendMode:()=>zo,NormalBlending:()=>mi,NotEqualCompare:()=>Ss,NotEqualDepth:()=>Xi,NotEqualStencilFunc:()=>fs,NumberKeyframeTrack:()=>jf,Object3D:()=>Nu,ObjectLoader:()=>Fm,ObjectSpaceNormalMap:()=>$o,OctahedronGeometry:()=>sf,OneFactor:()=>Ai,OneMinusConstantAlphaFactor:()=>zi,OneMinusConstantColorFactor:()=>Bi,OneMinusDstAlphaFactor:()=>ki,OneMinusDstColorFactor:()=>Fi,OneMinusSrcAlphaFactor:()=>Ni,OneMinusSrcColorFactor:()=>Ci,OrthographicCamera:()=>_m,PCFShadowMap:()=>li,PCFSoftShadowMap:()=>ui,PMREMGenerator:()=>Vv,Path:()=>mp,PerspectiveCamera:()=>Yc,Plane:()=>Jh,PlaneGeometry:()=>lf,PlaneHelper:()=>sv,PointLight:()=>Sm,PointLightHelper:()=>Vg,Points:()=>Ld,PointsMaterial:()=>Id,PolarGridHelper:()=>$g,PolyhedronGeometry:()=>wp,PositionalAudio:()=>ag,PropertyBinding:()=>fg,PropertyMixer:()=>sg,QuadraticBezierCurve:()=>cp,QuadraticBezierCurve3:()=>hp,Quaternion:()=>Al,QuaternionKeyframeTrack:()=>Wf,QuaternionLinearInterpolant:()=>Gf,RED_GREEN_RGTC2_Format:()=>Co,RED_RGTC1_Format:()=>Ao,REVISION:()=>ei,RGBADepthPacking:()=>Go,RGBAFormat:()=>Ua,RGBAIntegerFormat:()=>Za,RGBA_ASTC_10x10_Format:()=>bo,RGBA_ASTC_10x5_Format:()=>vo,RGBA_ASTC_10x6_Format:()=>yo,RGBA_ASTC_10x8_Format:()=>xo,RGBA_ASTC_12x10_Format:()=>wo,RGBA_ASTC_12x12_Format:()=>So,RGBA_ASTC_4x4_Format:()=>lo,RGBA_ASTC_5x4_Format:()=>uo,RGBA_ASTC_5x5_Format:()=>co,RGBA_ASTC_6x5_Format:()=>ho,RGBA_ASTC_6x6_Format:()=>po,RGBA_ASTC_8x5_Format:()=>fo,RGBA_ASTC_8x6_Format:()=>mo,RGBA_ASTC_8x8_Format:()=>go,RGBA_BPTC_Format:()=>_o,RGBA_ETC2_EAC_Format:()=>so,RGBA_PVRTC_2BPPV1_Format:()=>io,RGBA_PVRTC_4BPPV1_Format:()=>ro,RGBA_S3TC_DXT1_Format:()=>Ka,RGBA_S3TC_DXT3_Format:()=>Qa,RGBA_S3TC_DXT5_Format:()=>eo,RGBDepthPacking:()=>Wo,RGBFormat:()=>za,RGBIntegerFormat:()=>$a,RGB_BPTC_SIGNED_Format:()=>Mo,RGB_BPTC_UNSIGNED_Format:()=>Eo,RGB_ETC1_Format:()=>ao,RGB_ETC2_Format:()=>oo,RGB_PVRTC_2BPPV1_Format:()=>no,RGB_PVRTC_4BPPV1_Format:()=>to,RGB_S3TC_DXT1_Format:()=>Ja,RGDepthPacking:()=>Xo,RGFormat:()=>Xa,RGIntegerFormat:()=>Ya,RawShaderMaterial:()=>bf,Ray:()=>nu,Raycaster:()=>Eg,RectAreaLight:()=>Tm,RedFormat:()=>Ga,RedIntegerFormat:()=>Wa,ReinhardToneMapping:()=>Qi,RenderTarget:()=>bl,RepeatWrapping:()=>pa,ReplaceStencilOp:()=>rs,ReverseSubtractEquation:()=>Si,RingGeometry:()=>uf,SIGNED_RED_GREEN_RGTC2_Format:()=>Do,SIGNED_RED_RGTC1_Format:()=>To,SRGBColorSpace:()=>Jo,SRGBTransfer:()=>es,Scene:()=>th,ShaderChunk:()=>bv,ShaderLib:()=>Sv,ShaderMaterial:()=>Vc,ShadowMaterial:()=>xf,Shape:()=>Cp,ShapeGeometry:()=>cf,ShapePath:()=>pv,ShapeUtils:()=>ef,ShortType:()=>Ca,Skeleton:()=>Lh,SkeletonHelper:()=>Hg,SkinnedMesh:()=>Ih,Source:()=>ml,Sphere:()=>Yl,SphereGeometry:()=>hf,Spherical:()=>Cg,SphericalHarmonics3:()=>Cm,SplineCurve:()=>dp,SpotLight:()=>vm,SpotLightHelper:()=>Bg,Sprite:()=>xh,SpriteMaterial:()=>ah,SrcAlphaFactor:()=>Di,SrcAlphaSaturateFactor:()=>Pi,SrcColorFactor:()=>Ti,StaticCopyUsage:()=>Rs,StaticDrawUsage:()=>Es,StaticReadUsage:()=>Cs,StereoCamera:()=>Gm,StreamCopyUsage:()=>Is,StreamDrawUsage:()=>Ts,StreamReadUsage:()=>Ns,StringKeyframeTrack:()=>Xf,SubtractEquation:()=>wi,SubtractiveBlending:()=>vi,TOUCH:()=>ni,TangentSpaceNormalMap:()=>Yo,TetrahedronGeometry:()=>df,Texture:()=>yl,TextureLoader:()=>um,TextureUtils:()=>gv,TorusGeometry:()=>pf,TorusKnotGeometry:()=>ff,Triangle:()=>ju,TriangleFanDrawMode:()=>Vo,TriangleStripDrawMode:()=>qo,TrianglesDrawMode:()=>Ho,TubeGeometry:()=>mf,UVMapping:()=>sa,Uint16BufferAttribute:()=>dc,Uint32BufferAttribute:()=>fc,Uint8BufferAttribute:()=>uc,Uint8ClampedBufferAttribute:()=>cc,Uniform:()=>xg,UniformsGroup:()=>wg,UniformsLib:()=>wv,UniformsUtils:()=>qc,UnsignedByteType:()=>Aa,UnsignedInt248Type:()=>Oa,UnsignedInt5999Type:()=>Ba,UnsignedIntType:()=>Ra,UnsignedShort4444Type:()=>Fa,UnsignedShort5551Type:()=>Pa,UnsignedShortType:()=>Da,VSMShadowMap:()=>ci,Vector2:()=>Zs,Vector3:()=>Tl,Vector4:()=>xl,VectorKeyframeTrack:()=>Yf,VideoTexture:()=>Hd,WebGL3DRenderTarget:()=>El,WebGLArrayRenderTarget:()=>_l,WebGLCoordinateSystem:()=>Os,WebGLCubeRenderTarget:()=>Kc,WebGLMultipleRenderTargets:()=>vv,WebGLRenderTarget:()=>wl,WebGLRenderer:()=>tb,WebGLUtils:()=>Wx,WebGPUCoordinateSystem:()=>Bs,WireframeGeometry:()=>gf,WrapAroundEnding:()=>Lo,ZeroCurvatureEnding:()=>Oo,ZeroFactor:()=>Ei,ZeroSlopeEnding:()=>Bo,ZeroStencilOp:()=>ts,createCanvasElement:()=>rl});var t=n(43),r=n(391);class i{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new i(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class a{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new a(t,i.range(this,e))}}class o{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n,r,i="KaTeX parse error: "+e,a=t&&t.loc;if(a&&a.start<=a.end){var s=a.lexer.input;n=a.start,r=a.end,n===s.length?i+=" at end of input: ":i+=" at position "+(n+1)+": ";var l=s.slice(n,r).replace(/[^]/g,"$&\u0332");i+=(n>15?"\u2026"+s.slice(n-15,n):s.slice(0,n))+l+(r+15<s.length?s.slice(r,r+15)+"\u2026":s.slice(r))}var u=new Error(i);return u.name="ParseError",u.__proto__=o.prototype,u.position=n,null!=n&&null!=r&&(u.length=r-n),u.rawMessage=e,u}}o.prototype.__proto__=Error.prototype;var s=/([A-Z])/g,l={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},u=/[&><"']/g;var c=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},h={contains:function(e,t){return-1!==e.indexOf(t)},deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(u,(e=>l[e]))},hyphenate:function(e){return e.replace(s,"-$1").toLowerCase()},getBaseElem:c,isCharacterBox:function(e){var t=c(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"!==t[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"}},d={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>"Infinity"===e?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function p(e){if(e.default)return e.default;var t=e.type,n=Array.isArray(t)?t[0]:t;if("string"!==typeof n)return n.enum[0];switch(n){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class f{constructor(e){for(var t in this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},d)if(d.hasOwnProperty(t)){var n=d[t];this[t]=void 0!==e[t]?n.processor?n.processor(e[t]):e[t]:p(n)}}reportNonstrict(e,t,n){var r=this.strict;if("function"===typeof r&&(r=r(e,t,n)),r&&"ignore"!==r){if(!0===r||"error"===r)throw new o("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",n);"warn"===r?"undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+t+" ["+e+"]")}}useStrictBehavior(e,t,n){var r=this.strict;if("function"===typeof r)try{r=r(e,t,n)}catch(Fw){r="error"}return!(!r||"ignore"===r)&&(!0===r||"error"===r||("warn"===r?("undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),!1):("undefined"!==typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+t+" ["+e+"]"),!1)))}isTrusted(e){if(e.url&&!e.protocol){var t=h.protocolFromUrl(e.url);if(null==t)return!1;e.protocol=t}var n="function"===typeof this.trust?this.trust(e):this.trust;return Boolean(n)}}class m{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return g[v[this.id]]}sub(){return g[y[this.id]]}fracNum(){return g[x[this.id]]}fracDen(){return g[b[this.id]]}cramp(){return g[w[this.id]]}text(){return g[S[this.id]]}isTight(){return this.size>=2}}var g=[new m(0,0,!1),new m(1,0,!0),new m(2,1,!1),new m(3,1,!0),new m(4,2,!1),new m(5,2,!0),new m(6,3,!1),new m(7,3,!0)],v=[4,5,4,5,6,7,6,7],y=[5,5,5,5,7,7,7,7],x=[2,3,4,5,6,7,6,7],b=[3,3,5,5,7,7,7,7],w=[1,1,3,3,5,5,7,7],S=[0,1,2,3,2,3,2,3],_={DISPLAY:g[0],TEXT:g[2],SCRIPT:g[4],SCRIPTSCRIPT:g[6]},M=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];var E=[];function A(e){for(var t=0;t<E.length;t+=2)if(e>=E[t]&&e<=E[t+1])return!0;return!1}M.forEach((e=>e.blocks.forEach((e=>E.push(...e)))));var T=80,C={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};class D{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return h.contains(this.classes,e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map((e=>e.toText())).join("")}}var N={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},R={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},k={"\xc5":"A","\xd0":"D","\xde":"o","\xe5":"a","\xf0":"d","\xfe":"o","\u0410":"A","\u0411":"B","\u0412":"B","\u0413":"F","\u0414":"A","\u0415":"E","\u0416":"K","\u0417":"3","\u0418":"N","\u0419":"N","\u041a":"K","\u041b":"N","\u041c":"M","\u041d":"H","\u041e":"O","\u041f":"N","\u0420":"P","\u0421":"C","\u0422":"T","\u0423":"y","\u0424":"O","\u0425":"X","\u0426":"U","\u0427":"h","\u0428":"W","\u0429":"W","\u042a":"B","\u042b":"X","\u042c":"B","\u042d":"3","\u042e":"X","\u042f":"R","\u0430":"a","\u0431":"b","\u0432":"a","\u0433":"r","\u0434":"y","\u0435":"e","\u0436":"m","\u0437":"e","\u0438":"n","\u0439":"n","\u043a":"n","\u043b":"n","\u043c":"m","\u043d":"n","\u043e":"o","\u043f":"n","\u0440":"p","\u0441":"c","\u0442":"o","\u0443":"y","\u0444":"b","\u0445":"x","\u0446":"n","\u0447":"n","\u0448":"w","\u0449":"w","\u044a":"a","\u044b":"m","\u044c":"a","\u044d":"e","\u044e":"m","\u044f":"r"};function I(e,t,n){if(!N[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),i=N[t][r];if(!i&&e[0]in k&&(r=k[e[0]].charCodeAt(0),i=N[t][r]),i||"text"!==n||A(r)&&(i=N[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var F={};var P=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],O=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],B=function(e,t){return t.size<2?e:P[e-1][t.size-1]};class L{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||L.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=O[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new L(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:B(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:O[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=B(L.BASESIZE,e);return this.size===t&&this.textSize===L.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==L.BASESIZE?["sizing","reset-size"+this.size,"size"+L.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!F[t=e>=5?0:e>=3?1:2]){var n=F[t]={cssEmPerMu:R.quad[t]/18};for(var r in R)R.hasOwnProperty(r)&&(n[r]=R[r][t])}return F[t]}(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}L.BASESIZE=6;var z={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},U={ex:!0,em:!0,mu:!0},H=function(e){return"string"!==typeof e&&(e=e.unit),e in z||e in U||"ex"===e},q=function(e,t){var n;if(e.unit in z)n=z[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)n=t.fontMetrics().cssEmPerMu;else{var r;if(r=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)n=r.fontMetrics().xHeight;else{if("em"!==e.unit)throw new o("Invalid unit: '"+e.unit+"'");n=r.fontMetrics().quad}r!==t&&(n*=r.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},V=function(e){return+e.toFixed(4)+"em"},j=function(e){return e.filter((e=>e)).join(" ")},G=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},W=function(e){var t=document.createElement(e);for(var n in t.className=j(this.classes),this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},X=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+h.escape(j(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=h.hyphenate(r)+":"+this.style[r]+";");for(var i in n&&(t+=' style="'+h.escape(n)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(t+=" "+i+'="'+h.escape(this.attributes[i])+'"');t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">"};class Y{constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,G.call(this,e,n,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return h.contains(this.classes,e)}toNode(){return W.call(this,"span")}toMarkup(){return X.call(this,"span")}}class ${constructor(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,G.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return h.contains(this.classes,e)}toNode(){return W.call(this,"a")}toMarkup(){return X.call(this,"a")}}class Z{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return h.contains(this.classes,e)}toNode(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+h.escape(this.src)+'" alt="'+h.escape(this.alt)+'"',t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=h.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+h.escape(t)+'"'),e+="'/>"}}var J={"\xee":"\u0131\u0302","\xef":"\u0131\u0308","\xed":"\u0131\u0301","\xec":"\u0131\u0300"};class K{constructor(e,t,n,r,i,a,o,s){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=a||0,this.classes=o||[],this.style=s||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<M.length;t++)for(var n=M[t],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(e>=i[0]&&e<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[\xee\xef\xed\xec]/.test(this.text)&&(this.text=J[this.text])}hasClass(e){return h.contains(this.classes,e)}toNode(){var e=document.createTextNode(this.text),t=null;for(var n in this.italic>0&&((t=document.createElement("span")).style.marginRight=V(this.italic)),this.classes.length>0&&((t=t||document.createElement("span")).className=j(this.classes)),this.style)this.style.hasOwnProperty(n)&&((t=t||document.createElement("span")).style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=h.escape(j(this.classes)),t+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=h.hyphenate(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+h.escape(n)+'"');var i=h.escape(this.text);return e?(t+=">",t+=i,t+="</span>"):i}}class Q{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+h.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>"}}class ee{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",C[this.pathName]),e}toMarkup(){return this.alternate?'<path d="'+h.escape(this.alternate)+'"/>':'<path d="'+h.escape(C[this.pathName])+'"/>'}}class te{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+h.escape(this.attributes[t])+'"');return e+="/>"}}function ne(e){if(e instanceof K)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var re={bin:1,close:1,inner:1,open:1,punct:1,rel:1},ie={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},ae={math:{},text:{}};function oe(e,t,n,r,i,a){ae[e][i]={font:t,group:n,replace:r},a&&r&&(ae[e][r]=ae[e][i])}var se="math",le="text",ue="main",ce="ams",he="accent-token",de="bin",pe="close",fe="inner",me="mathord",ge="op-token",ve="open",ye="punct",xe="rel",be="spacing",we="textord";oe(se,ue,xe,"\u2261","\\equiv",!0),oe(se,ue,xe,"\u227a","\\prec",!0),oe(se,ue,xe,"\u227b","\\succ",!0),oe(se,ue,xe,"\u223c","\\sim",!0),oe(se,ue,xe,"\u22a5","\\perp"),oe(se,ue,xe,"\u2aaf","\\preceq",!0),oe(se,ue,xe,"\u2ab0","\\succeq",!0),oe(se,ue,xe,"\u2243","\\simeq",!0),oe(se,ue,xe,"\u2223","\\mid",!0),oe(se,ue,xe,"\u226a","\\ll",!0),oe(se,ue,xe,"\u226b","\\gg",!0),oe(se,ue,xe,"\u224d","\\asymp",!0),oe(se,ue,xe,"\u2225","\\parallel"),oe(se,ue,xe,"\u22c8","\\bowtie",!0),oe(se,ue,xe,"\u2323","\\smile",!0),oe(se,ue,xe,"\u2291","\\sqsubseteq",!0),oe(se,ue,xe,"\u2292","\\sqsupseteq",!0),oe(se,ue,xe,"\u2250","\\doteq",!0),oe(se,ue,xe,"\u2322","\\frown",!0),oe(se,ue,xe,"\u220b","\\ni",!0),oe(se,ue,xe,"\u221d","\\propto",!0),oe(se,ue,xe,"\u22a2","\\vdash",!0),oe(se,ue,xe,"\u22a3","\\dashv",!0),oe(se,ue,xe,"\u220b","\\owns"),oe(se,ue,ye,".","\\ldotp"),oe(se,ue,ye,"\u22c5","\\cdotp"),oe(se,ue,we,"#","\\#"),oe(le,ue,we,"#","\\#"),oe(se,ue,we,"&","\\&"),oe(le,ue,we,"&","\\&"),oe(se,ue,we,"\u2135","\\aleph",!0),oe(se,ue,we,"\u2200","\\forall",!0),oe(se,ue,we,"\u210f","\\hbar",!0),oe(se,ue,we,"\u2203","\\exists",!0),oe(se,ue,we,"\u2207","\\nabla",!0),oe(se,ue,we,"\u266d","\\flat",!0),oe(se,ue,we,"\u2113","\\ell",!0),oe(se,ue,we,"\u266e","\\natural",!0),oe(se,ue,we,"\u2663","\\clubsuit",!0),oe(se,ue,we,"\u2118","\\wp",!0),oe(se,ue,we,"\u266f","\\sharp",!0),oe(se,ue,we,"\u2662","\\diamondsuit",!0),oe(se,ue,we,"\u211c","\\Re",!0),oe(se,ue,we,"\u2661","\\heartsuit",!0),oe(se,ue,we,"\u2111","\\Im",!0),oe(se,ue,we,"\u2660","\\spadesuit",!0),oe(se,ue,we,"\xa7","\\S",!0),oe(le,ue,we,"\xa7","\\S"),oe(se,ue,we,"\xb6","\\P",!0),oe(le,ue,we,"\xb6","\\P"),oe(se,ue,we,"\u2020","\\dag"),oe(le,ue,we,"\u2020","\\dag"),oe(le,ue,we,"\u2020","\\textdagger"),oe(se,ue,we,"\u2021","\\ddag"),oe(le,ue,we,"\u2021","\\ddag"),oe(le,ue,we,"\u2021","\\textdaggerdbl"),oe(se,ue,pe,"\u23b1","\\rmoustache",!0),oe(se,ue,ve,"\u23b0","\\lmoustache",!0),oe(se,ue,pe,"\u27ef","\\rgroup",!0),oe(se,ue,ve,"\u27ee","\\lgroup",!0),oe(se,ue,de,"\u2213","\\mp",!0),oe(se,ue,de,"\u2296","\\ominus",!0),oe(se,ue,de,"\u228e","\\uplus",!0),oe(se,ue,de,"\u2293","\\sqcap",!0),oe(se,ue,de,"\u2217","\\ast"),oe(se,ue,de,"\u2294","\\sqcup",!0),oe(se,ue,de,"\u25ef","\\bigcirc",!0),oe(se,ue,de,"\u2219","\\bullet",!0),oe(se,ue,de,"\u2021","\\ddagger"),oe(se,ue,de,"\u2240","\\wr",!0),oe(se,ue,de,"\u2a3f","\\amalg"),oe(se,ue,de,"&","\\And"),oe(se,ue,xe,"\u27f5","\\longleftarrow",!0),oe(se,ue,xe,"\u21d0","\\Leftarrow",!0),oe(se,ue,xe,"\u27f8","\\Longleftarrow",!0),oe(se,ue,xe,"\u27f6","\\longrightarrow",!0),oe(se,ue,xe,"\u21d2","\\Rightarrow",!0),oe(se,ue,xe,"\u27f9","\\Longrightarrow",!0),oe(se,ue,xe,"\u2194","\\leftrightarrow",!0),oe(se,ue,xe,"\u27f7","\\longleftrightarrow",!0),oe(se,ue,xe,"\u21d4","\\Leftrightarrow",!0),oe(se,ue,xe,"\u27fa","\\Longleftrightarrow",!0),oe(se,ue,xe,"\u21a6","\\mapsto",!0),oe(se,ue,xe,"\u27fc","\\longmapsto",!0),oe(se,ue,xe,"\u2197","\\nearrow",!0),oe(se,ue,xe,"\u21a9","\\hookleftarrow",!0),oe(se,ue,xe,"\u21aa","\\hookrightarrow",!0),oe(se,ue,xe,"\u2198","\\searrow",!0),oe(se,ue,xe,"\u21bc","\\leftharpoonup",!0),oe(se,ue,xe,"\u21c0","\\rightharpoonup",!0),oe(se,ue,xe,"\u2199","\\swarrow",!0),oe(se,ue,xe,"\u21bd","\\leftharpoondown",!0),oe(se,ue,xe,"\u21c1","\\rightharpoondown",!0),oe(se,ue,xe,"\u2196","\\nwarrow",!0),oe(se,ue,xe,"\u21cc","\\rightleftharpoons",!0),oe(se,ce,xe,"\u226e","\\nless",!0),oe(se,ce,xe,"\ue010","\\@nleqslant"),oe(se,ce,xe,"\ue011","\\@nleqq"),oe(se,ce,xe,"\u2a87","\\lneq",!0),oe(se,ce,xe,"\u2268","\\lneqq",!0),oe(se,ce,xe,"\ue00c","\\@lvertneqq"),oe(se,ce,xe,"\u22e6","\\lnsim",!0),oe(se,ce,xe,"\u2a89","\\lnapprox",!0),oe(se,ce,xe,"\u2280","\\nprec",!0),oe(se,ce,xe,"\u22e0","\\npreceq",!0),oe(se,ce,xe,"\u22e8","\\precnsim",!0),oe(se,ce,xe,"\u2ab9","\\precnapprox",!0),oe(se,ce,xe,"\u2241","\\nsim",!0),oe(se,ce,xe,"\ue006","\\@nshortmid"),oe(se,ce,xe,"\u2224","\\nmid",!0),oe(se,ce,xe,"\u22ac","\\nvdash",!0),oe(se,ce,xe,"\u22ad","\\nvDash",!0),oe(se,ce,xe,"\u22ea","\\ntriangleleft"),oe(se,ce,xe,"\u22ec","\\ntrianglelefteq",!0),oe(se,ce,xe,"\u228a","\\subsetneq",!0),oe(se,ce,xe,"\ue01a","\\@varsubsetneq"),oe(se,ce,xe,"\u2acb","\\subsetneqq",!0),oe(se,ce,xe,"\ue017","\\@varsubsetneqq"),oe(se,ce,xe,"\u226f","\\ngtr",!0),oe(se,ce,xe,"\ue00f","\\@ngeqslant"),oe(se,ce,xe,"\ue00e","\\@ngeqq"),oe(se,ce,xe,"\u2a88","\\gneq",!0),oe(se,ce,xe,"\u2269","\\gneqq",!0),oe(se,ce,xe,"\ue00d","\\@gvertneqq"),oe(se,ce,xe,"\u22e7","\\gnsim",!0),oe(se,ce,xe,"\u2a8a","\\gnapprox",!0),oe(se,ce,xe,"\u2281","\\nsucc",!0),oe(se,ce,xe,"\u22e1","\\nsucceq",!0),oe(se,ce,xe,"\u22e9","\\succnsim",!0),oe(se,ce,xe,"\u2aba","\\succnapprox",!0),oe(se,ce,xe,"\u2246","\\ncong",!0),oe(se,ce,xe,"\ue007","\\@nshortparallel"),oe(se,ce,xe,"\u2226","\\nparallel",!0),oe(se,ce,xe,"\u22af","\\nVDash",!0),oe(se,ce,xe,"\u22eb","\\ntriangleright"),oe(se,ce,xe,"\u22ed","\\ntrianglerighteq",!0),oe(se,ce,xe,"\ue018","\\@nsupseteqq"),oe(se,ce,xe,"\u228b","\\supsetneq",!0),oe(se,ce,xe,"\ue01b","\\@varsupsetneq"),oe(se,ce,xe,"\u2acc","\\supsetneqq",!0),oe(se,ce,xe,"\ue019","\\@varsupsetneqq"),oe(se,ce,xe,"\u22ae","\\nVdash",!0),oe(se,ce,xe,"\u2ab5","\\precneqq",!0),oe(se,ce,xe,"\u2ab6","\\succneqq",!0),oe(se,ce,xe,"\ue016","\\@nsubseteqq"),oe(se,ce,de,"\u22b4","\\unlhd"),oe(se,ce,de,"\u22b5","\\unrhd"),oe(se,ce,xe,"\u219a","\\nleftarrow",!0),oe(se,ce,xe,"\u219b","\\nrightarrow",!0),oe(se,ce,xe,"\u21cd","\\nLeftarrow",!0),oe(se,ce,xe,"\u21cf","\\nRightarrow",!0),oe(se,ce,xe,"\u21ae","\\nleftrightarrow",!0),oe(se,ce,xe,"\u21ce","\\nLeftrightarrow",!0),oe(se,ce,xe,"\u25b3","\\vartriangle"),oe(se,ce,we,"\u210f","\\hslash"),oe(se,ce,we,"\u25bd","\\triangledown"),oe(se,ce,we,"\u25ca","\\lozenge"),oe(se,ce,we,"\u24c8","\\circledS"),oe(se,ce,we,"\xae","\\circledR"),oe(le,ce,we,"\xae","\\circledR"),oe(se,ce,we,"\u2221","\\measuredangle",!0),oe(se,ce,we,"\u2204","\\nexists"),oe(se,ce,we,"\u2127","\\mho"),oe(se,ce,we,"\u2132","\\Finv",!0),oe(se,ce,we,"\u2141","\\Game",!0),oe(se,ce,we,"\u2035","\\backprime"),oe(se,ce,we,"\u25b2","\\blacktriangle"),oe(se,ce,we,"\u25bc","\\blacktriangledown"),oe(se,ce,we,"\u25a0","\\blacksquare"),oe(se,ce,we,"\u29eb","\\blacklozenge"),oe(se,ce,we,"\u2605","\\bigstar"),oe(se,ce,we,"\u2222","\\sphericalangle",!0),oe(se,ce,we,"\u2201","\\complement",!0),oe(se,ce,we,"\xf0","\\eth",!0),oe(le,ue,we,"\xf0","\xf0"),oe(se,ce,we,"\u2571","\\diagup"),oe(se,ce,we,"\u2572","\\diagdown"),oe(se,ce,we,"\u25a1","\\square"),oe(se,ce,we,"\u25a1","\\Box"),oe(se,ce,we,"\u25ca","\\Diamond"),oe(se,ce,we,"\xa5","\\yen",!0),oe(le,ce,we,"\xa5","\\yen",!0),oe(se,ce,we,"\u2713","\\checkmark",!0),oe(le,ce,we,"\u2713","\\checkmark"),oe(se,ce,we,"\u2136","\\beth",!0),oe(se,ce,we,"\u2138","\\daleth",!0),oe(se,ce,we,"\u2137","\\gimel",!0),oe(se,ce,we,"\u03dd","\\digamma",!0),oe(se,ce,we,"\u03f0","\\varkappa"),oe(se,ce,ve,"\u250c","\\@ulcorner",!0),oe(se,ce,pe,"\u2510","\\@urcorner",!0),oe(se,ce,ve,"\u2514","\\@llcorner",!0),oe(se,ce,pe,"\u2518","\\@lrcorner",!0),oe(se,ce,xe,"\u2266","\\leqq",!0),oe(se,ce,xe,"\u2a7d","\\leqslant",!0),oe(se,ce,xe,"\u2a95","\\eqslantless",!0),oe(se,ce,xe,"\u2272","\\lesssim",!0),oe(se,ce,xe,"\u2a85","\\lessapprox",!0),oe(se,ce,xe,"\u224a","\\approxeq",!0),oe(se,ce,de,"\u22d6","\\lessdot"),oe(se,ce,xe,"\u22d8","\\lll",!0),oe(se,ce,xe,"\u2276","\\lessgtr",!0),oe(se,ce,xe,"\u22da","\\lesseqgtr",!0),oe(se,ce,xe,"\u2a8b","\\lesseqqgtr",!0),oe(se,ce,xe,"\u2251","\\doteqdot"),oe(se,ce,xe,"\u2253","\\risingdotseq",!0),oe(se,ce,xe,"\u2252","\\fallingdotseq",!0),oe(se,ce,xe,"\u223d","\\backsim",!0),oe(se,ce,xe,"\u22cd","\\backsimeq",!0),oe(se,ce,xe,"\u2ac5","\\subseteqq",!0),oe(se,ce,xe,"\u22d0","\\Subset",!0),oe(se,ce,xe,"\u228f","\\sqsubset",!0),oe(se,ce,xe,"\u227c","\\preccurlyeq",!0),oe(se,ce,xe,"\u22de","\\curlyeqprec",!0),oe(se,ce,xe,"\u227e","\\precsim",!0),oe(se,ce,xe,"\u2ab7","\\precapprox",!0),oe(se,ce,xe,"\u22b2","\\vartriangleleft"),oe(se,ce,xe,"\u22b4","\\trianglelefteq"),oe(se,ce,xe,"\u22a8","\\vDash",!0),oe(se,ce,xe,"\u22aa","\\Vvdash",!0),oe(se,ce,xe,"\u2323","\\smallsmile"),oe(se,ce,xe,"\u2322","\\smallfrown"),oe(se,ce,xe,"\u224f","\\bumpeq",!0),oe(se,ce,xe,"\u224e","\\Bumpeq",!0),oe(se,ce,xe,"\u2267","\\geqq",!0),oe(se,ce,xe,"\u2a7e","\\geqslant",!0),oe(se,ce,xe,"\u2a96","\\eqslantgtr",!0),oe(se,ce,xe,"\u2273","\\gtrsim",!0),oe(se,ce,xe,"\u2a86","\\gtrapprox",!0),oe(se,ce,de,"\u22d7","\\gtrdot"),oe(se,ce,xe,"\u22d9","\\ggg",!0),oe(se,ce,xe,"\u2277","\\gtrless",!0),oe(se,ce,xe,"\u22db","\\gtreqless",!0),oe(se,ce,xe,"\u2a8c","\\gtreqqless",!0),oe(se,ce,xe,"\u2256","\\eqcirc",!0),oe(se,ce,xe,"\u2257","\\circeq",!0),oe(se,ce,xe,"\u225c","\\triangleq",!0),oe(se,ce,xe,"\u223c","\\thicksim"),oe(se,ce,xe,"\u2248","\\thickapprox"),oe(se,ce,xe,"\u2ac6","\\supseteqq",!0),oe(se,ce,xe,"\u22d1","\\Supset",!0),oe(se,ce,xe,"\u2290","\\sqsupset",!0),oe(se,ce,xe,"\u227d","\\succcurlyeq",!0),oe(se,ce,xe,"\u22df","\\curlyeqsucc",!0),oe(se,ce,xe,"\u227f","\\succsim",!0),oe(se,ce,xe,"\u2ab8","\\succapprox",!0),oe(se,ce,xe,"\u22b3","\\vartriangleright"),oe(se,ce,xe,"\u22b5","\\trianglerighteq"),oe(se,ce,xe,"\u22a9","\\Vdash",!0),oe(se,ce,xe,"\u2223","\\shortmid"),oe(se,ce,xe,"\u2225","\\shortparallel"),oe(se,ce,xe,"\u226c","\\between",!0),oe(se,ce,xe,"\u22d4","\\pitchfork",!0),oe(se,ce,xe,"\u221d","\\varpropto"),oe(se,ce,xe,"\u25c0","\\blacktriangleleft"),oe(se,ce,xe,"\u2234","\\therefore",!0),oe(se,ce,xe,"\u220d","\\backepsilon"),oe(se,ce,xe,"\u25b6","\\blacktriangleright"),oe(se,ce,xe,"\u2235","\\because",!0),oe(se,ce,xe,"\u22d8","\\llless"),oe(se,ce,xe,"\u22d9","\\gggtr"),oe(se,ce,de,"\u22b2","\\lhd"),oe(se,ce,de,"\u22b3","\\rhd"),oe(se,ce,xe,"\u2242","\\eqsim",!0),oe(se,ue,xe,"\u22c8","\\Join"),oe(se,ce,xe,"\u2251","\\Doteq",!0),oe(se,ce,de,"\u2214","\\dotplus",!0),oe(se,ce,de,"\u2216","\\smallsetminus"),oe(se,ce,de,"\u22d2","\\Cap",!0),oe(se,ce,de,"\u22d3","\\Cup",!0),oe(se,ce,de,"\u2a5e","\\doublebarwedge",!0),oe(se,ce,de,"\u229f","\\boxminus",!0),oe(se,ce,de,"\u229e","\\boxplus",!0),oe(se,ce,de,"\u22c7","\\divideontimes",!0),oe(se,ce,de,"\u22c9","\\ltimes",!0),oe(se,ce,de,"\u22ca","\\rtimes",!0),oe(se,ce,de,"\u22cb","\\leftthreetimes",!0),oe(se,ce,de,"\u22cc","\\rightthreetimes",!0),oe(se,ce,de,"\u22cf","\\curlywedge",!0),oe(se,ce,de,"\u22ce","\\curlyvee",!0),oe(se,ce,de,"\u229d","\\circleddash",!0),oe(se,ce,de,"\u229b","\\circledast",!0),oe(se,ce,de,"\u22c5","\\centerdot"),oe(se,ce,de,"\u22ba","\\intercal",!0),oe(se,ce,de,"\u22d2","\\doublecap"),oe(se,ce,de,"\u22d3","\\doublecup"),oe(se,ce,de,"\u22a0","\\boxtimes",!0),oe(se,ce,xe,"\u21e2","\\dashrightarrow",!0),oe(se,ce,xe,"\u21e0","\\dashleftarrow",!0),oe(se,ce,xe,"\u21c7","\\leftleftarrows",!0),oe(se,ce,xe,"\u21c6","\\leftrightarrows",!0),oe(se,ce,xe,"\u21da","\\Lleftarrow",!0),oe(se,ce,xe,"\u219e","\\twoheadleftarrow",!0),oe(se,ce,xe,"\u21a2","\\leftarrowtail",!0),oe(se,ce,xe,"\u21ab","\\looparrowleft",!0),oe(se,ce,xe,"\u21cb","\\leftrightharpoons",!0),oe(se,ce,xe,"\u21b6","\\curvearrowleft",!0),oe(se,ce,xe,"\u21ba","\\circlearrowleft",!0),oe(se,ce,xe,"\u21b0","\\Lsh",!0),oe(se,ce,xe,"\u21c8","\\upuparrows",!0),oe(se,ce,xe,"\u21bf","\\upharpoonleft",!0),oe(se,ce,xe,"\u21c3","\\downharpoonleft",!0),oe(se,ue,xe,"\u22b6","\\origof",!0),oe(se,ue,xe,"\u22b7","\\imageof",!0),oe(se,ce,xe,"\u22b8","\\multimap",!0),oe(se,ce,xe,"\u21ad","\\leftrightsquigarrow",!0),oe(se,ce,xe,"\u21c9","\\rightrightarrows",!0),oe(se,ce,xe,"\u21c4","\\rightleftarrows",!0),oe(se,ce,xe,"\u21a0","\\twoheadrightarrow",!0),oe(se,ce,xe,"\u21a3","\\rightarrowtail",!0),oe(se,ce,xe,"\u21ac","\\looparrowright",!0),oe(se,ce,xe,"\u21b7","\\curvearrowright",!0),oe(se,ce,xe,"\u21bb","\\circlearrowright",!0),oe(se,ce,xe,"\u21b1","\\Rsh",!0),oe(se,ce,xe,"\u21ca","\\downdownarrows",!0),oe(se,ce,xe,"\u21be","\\upharpoonright",!0),oe(se,ce,xe,"\u21c2","\\downharpoonright",!0),oe(se,ce,xe,"\u21dd","\\rightsquigarrow",!0),oe(se,ce,xe,"\u21dd","\\leadsto"),oe(se,ce,xe,"\u21db","\\Rrightarrow",!0),oe(se,ce,xe,"\u21be","\\restriction"),oe(se,ue,we,"\u2018","`"),oe(se,ue,we,"$","\\$"),oe(le,ue,we,"$","\\$"),oe(le,ue,we,"$","\\textdollar"),oe(se,ue,we,"%","\\%"),oe(le,ue,we,"%","\\%"),oe(se,ue,we,"_","\\_"),oe(le,ue,we,"_","\\_"),oe(le,ue,we,"_","\\textunderscore"),oe(se,ue,we,"\u2220","\\angle",!0),oe(se,ue,we,"\u221e","\\infty",!0),oe(se,ue,we,"\u2032","\\prime"),oe(se,ue,we,"\u25b3","\\triangle"),oe(se,ue,we,"\u0393","\\Gamma",!0),oe(se,ue,we,"\u0394","\\Delta",!0),oe(se,ue,we,"\u0398","\\Theta",!0),oe(se,ue,we,"\u039b","\\Lambda",!0),oe(se,ue,we,"\u039e","\\Xi",!0),oe(se,ue,we,"\u03a0","\\Pi",!0),oe(se,ue,we,"\u03a3","\\Sigma",!0),oe(se,ue,we,"\u03a5","\\Upsilon",!0),oe(se,ue,we,"\u03a6","\\Phi",!0),oe(se,ue,we,"\u03a8","\\Psi",!0),oe(se,ue,we,"\u03a9","\\Omega",!0),oe(se,ue,we,"A","\u0391"),oe(se,ue,we,"B","\u0392"),oe(se,ue,we,"E","\u0395"),oe(se,ue,we,"Z","\u0396"),oe(se,ue,we,"H","\u0397"),oe(se,ue,we,"I","\u0399"),oe(se,ue,we,"K","\u039a"),oe(se,ue,we,"M","\u039c"),oe(se,ue,we,"N","\u039d"),oe(se,ue,we,"O","\u039f"),oe(se,ue,we,"P","\u03a1"),oe(se,ue,we,"T","\u03a4"),oe(se,ue,we,"X","\u03a7"),oe(se,ue,we,"\xac","\\neg",!0),oe(se,ue,we,"\xac","\\lnot"),oe(se,ue,we,"\u22a4","\\top"),oe(se,ue,we,"\u22a5","\\bot"),oe(se,ue,we,"\u2205","\\emptyset"),oe(se,ce,we,"\u2205","\\varnothing"),oe(se,ue,me,"\u03b1","\\alpha",!0),oe(se,ue,me,"\u03b2","\\beta",!0),oe(se,ue,me,"\u03b3","\\gamma",!0),oe(se,ue,me,"\u03b4","\\delta",!0),oe(se,ue,me,"\u03f5","\\epsilon",!0),oe(se,ue,me,"\u03b6","\\zeta",!0),oe(se,ue,me,"\u03b7","\\eta",!0),oe(se,ue,me,"\u03b8","\\theta",!0),oe(se,ue,me,"\u03b9","\\iota",!0),oe(se,ue,me,"\u03ba","\\kappa",!0),oe(se,ue,me,"\u03bb","\\lambda",!0),oe(se,ue,me,"\u03bc","\\mu",!0),oe(se,ue,me,"\u03bd","\\nu",!0),oe(se,ue,me,"\u03be","\\xi",!0),oe(se,ue,me,"\u03bf","\\omicron",!0),oe(se,ue,me,"\u03c0","\\pi",!0),oe(se,ue,me,"\u03c1","\\rho",!0),oe(se,ue,me,"\u03c3","\\sigma",!0),oe(se,ue,me,"\u03c4","\\tau",!0),oe(se,ue,me,"\u03c5","\\upsilon",!0),oe(se,ue,me,"\u03d5","\\phi",!0),oe(se,ue,me,"\u03c7","\\chi",!0),oe(se,ue,me,"\u03c8","\\psi",!0),oe(se,ue,me,"\u03c9","\\omega",!0),oe(se,ue,me,"\u03b5","\\varepsilon",!0),oe(se,ue,me,"\u03d1","\\vartheta",!0),oe(se,ue,me,"\u03d6","\\varpi",!0),oe(se,ue,me,"\u03f1","\\varrho",!0),oe(se,ue,me,"\u03c2","\\varsigma",!0),oe(se,ue,me,"\u03c6","\\varphi",!0),oe(se,ue,de,"\u2217","*",!0),oe(se,ue,de,"+","+"),oe(se,ue,de,"\u2212","-",!0),oe(se,ue,de,"\u22c5","\\cdot",!0),oe(se,ue,de,"\u2218","\\circ",!0),oe(se,ue,de,"\xf7","\\div",!0),oe(se,ue,de,"\xb1","\\pm",!0),oe(se,ue,de,"\xd7","\\times",!0),oe(se,ue,de,"\u2229","\\cap",!0),oe(se,ue,de,"\u222a","\\cup",!0),oe(se,ue,de,"\u2216","\\setminus",!0),oe(se,ue,de,"\u2227","\\land"),oe(se,ue,de,"\u2228","\\lor"),oe(se,ue,de,"\u2227","\\wedge",!0),oe(se,ue,de,"\u2228","\\vee",!0),oe(se,ue,we,"\u221a","\\surd"),oe(se,ue,ve,"\u27e8","\\langle",!0),oe(se,ue,ve,"\u2223","\\lvert"),oe(se,ue,ve,"\u2225","\\lVert"),oe(se,ue,pe,"?","?"),oe(se,ue,pe,"!","!"),oe(se,ue,pe,"\u27e9","\\rangle",!0),oe(se,ue,pe,"\u2223","\\rvert"),oe(se,ue,pe,"\u2225","\\rVert"),oe(se,ue,xe,"=","="),oe(se,ue,xe,":",":"),oe(se,ue,xe,"\u2248","\\approx",!0),oe(se,ue,xe,"\u2245","\\cong",!0),oe(se,ue,xe,"\u2265","\\ge"),oe(se,ue,xe,"\u2265","\\geq",!0),oe(se,ue,xe,"\u2190","\\gets"),oe(se,ue,xe,">","\\gt",!0),oe(se,ue,xe,"\u2208","\\in",!0),oe(se,ue,xe,"\ue020","\\@not"),oe(se,ue,xe,"\u2282","\\subset",!0),oe(se,ue,xe,"\u2283","\\supset",!0),oe(se,ue,xe,"\u2286","\\subseteq",!0),oe(se,ue,xe,"\u2287","\\supseteq",!0),oe(se,ce,xe,"\u2288","\\nsubseteq",!0),oe(se,ce,xe,"\u2289","\\nsupseteq",!0),oe(se,ue,xe,"\u22a8","\\models"),oe(se,ue,xe,"\u2190","\\leftarrow",!0),oe(se,ue,xe,"\u2264","\\le"),oe(se,ue,xe,"\u2264","\\leq",!0),oe(se,ue,xe,"<","\\lt",!0),oe(se,ue,xe,"\u2192","\\rightarrow",!0),oe(se,ue,xe,"\u2192","\\to"),oe(se,ce,xe,"\u2271","\\ngeq",!0),oe(se,ce,xe,"\u2270","\\nleq",!0),oe(se,ue,be,"\xa0","\\ "),oe(se,ue,be,"\xa0","\\space"),oe(se,ue,be,"\xa0","\\nobreakspace"),oe(le,ue,be,"\xa0","\\ "),oe(le,ue,be,"\xa0"," "),oe(le,ue,be,"\xa0","\\space"),oe(le,ue,be,"\xa0","\\nobreakspace"),oe(se,ue,be,null,"\\nobreak"),oe(se,ue,be,null,"\\allowbreak"),oe(se,ue,ye,",",","),oe(se,ue,ye,";",";"),oe(se,ce,de,"\u22bc","\\barwedge",!0),oe(se,ce,de,"\u22bb","\\veebar",!0),oe(se,ue,de,"\u2299","\\odot",!0),oe(se,ue,de,"\u2295","\\oplus",!0),oe(se,ue,de,"\u2297","\\otimes",!0),oe(se,ue,we,"\u2202","\\partial",!0),oe(se,ue,de,"\u2298","\\oslash",!0),oe(se,ce,de,"\u229a","\\circledcirc",!0),oe(se,ce,de,"\u22a1","\\boxdot",!0),oe(se,ue,de,"\u25b3","\\bigtriangleup"),oe(se,ue,de,"\u25bd","\\bigtriangledown"),oe(se,ue,de,"\u2020","\\dagger"),oe(se,ue,de,"\u22c4","\\diamond"),oe(se,ue,de,"\u22c6","\\star"),oe(se,ue,de,"\u25c3","\\triangleleft"),oe(se,ue,de,"\u25b9","\\triangleright"),oe(se,ue,ve,"{","\\{"),oe(le,ue,we,"{","\\{"),oe(le,ue,we,"{","\\textbraceleft"),oe(se,ue,pe,"}","\\}"),oe(le,ue,we,"}","\\}"),oe(le,ue,we,"}","\\textbraceright"),oe(se,ue,ve,"{","\\lbrace"),oe(se,ue,pe,"}","\\rbrace"),oe(se,ue,ve,"[","\\lbrack",!0),oe(le,ue,we,"[","\\lbrack",!0),oe(se,ue,pe,"]","\\rbrack",!0),oe(le,ue,we,"]","\\rbrack",!0),oe(se,ue,ve,"(","\\lparen",!0),oe(se,ue,pe,")","\\rparen",!0),oe(le,ue,we,"<","\\textless",!0),oe(le,ue,we,">","\\textgreater",!0),oe(se,ue,ve,"\u230a","\\lfloor",!0),oe(se,ue,pe,"\u230b","\\rfloor",!0),oe(se,ue,ve,"\u2308","\\lceil",!0),oe(se,ue,pe,"\u2309","\\rceil",!0),oe(se,ue,we,"\\","\\backslash"),oe(se,ue,we,"\u2223","|"),oe(se,ue,we,"\u2223","\\vert"),oe(le,ue,we,"|","\\textbar",!0),oe(se,ue,we,"\u2225","\\|"),oe(se,ue,we,"\u2225","\\Vert"),oe(le,ue,we,"\u2225","\\textbardbl"),oe(le,ue,we,"~","\\textasciitilde"),oe(le,ue,we,"\\","\\textbackslash"),oe(le,ue,we,"^","\\textasciicircum"),oe(se,ue,xe,"\u2191","\\uparrow",!0),oe(se,ue,xe,"\u21d1","\\Uparrow",!0),oe(se,ue,xe,"\u2193","\\downarrow",!0),oe(se,ue,xe,"\u21d3","\\Downarrow",!0),oe(se,ue,xe,"\u2195","\\updownarrow",!0),oe(se,ue,xe,"\u21d5","\\Updownarrow",!0),oe(se,ue,ge,"\u2210","\\coprod"),oe(se,ue,ge,"\u22c1","\\bigvee"),oe(se,ue,ge,"\u22c0","\\bigwedge"),oe(se,ue,ge,"\u2a04","\\biguplus"),oe(se,ue,ge,"\u22c2","\\bigcap"),oe(se,ue,ge,"\u22c3","\\bigcup"),oe(se,ue,ge,"\u222b","\\int"),oe(se,ue,ge,"\u222b","\\intop"),oe(se,ue,ge,"\u222c","\\iint"),oe(se,ue,ge,"\u222d","\\iiint"),oe(se,ue,ge,"\u220f","\\prod"),oe(se,ue,ge,"\u2211","\\sum"),oe(se,ue,ge,"\u2a02","\\bigotimes"),oe(se,ue,ge,"\u2a01","\\bigoplus"),oe(se,ue,ge,"\u2a00","\\bigodot"),oe(se,ue,ge,"\u222e","\\oint"),oe(se,ue,ge,"\u222f","\\oiint"),oe(se,ue,ge,"\u2230","\\oiiint"),oe(se,ue,ge,"\u2a06","\\bigsqcup"),oe(se,ue,ge,"\u222b","\\smallint"),oe(le,ue,fe,"\u2026","\\textellipsis"),oe(se,ue,fe,"\u2026","\\mathellipsis"),oe(le,ue,fe,"\u2026","\\ldots",!0),oe(se,ue,fe,"\u2026","\\ldots",!0),oe(se,ue,fe,"\u22ef","\\@cdots",!0),oe(se,ue,fe,"\u22f1","\\ddots",!0),oe(se,ue,we,"\u22ee","\\varvdots"),oe(se,ue,he,"\u02ca","\\acute"),oe(se,ue,he,"\u02cb","\\grave"),oe(se,ue,he,"\xa8","\\ddot"),oe(se,ue,he,"~","\\tilde"),oe(se,ue,he,"\u02c9","\\bar"),oe(se,ue,he,"\u02d8","\\breve"),oe(se,ue,he,"\u02c7","\\check"),oe(se,ue,he,"^","\\hat"),oe(se,ue,he,"\u20d7","\\vec"),oe(se,ue,he,"\u02d9","\\dot"),oe(se,ue,he,"\u02da","\\mathring"),oe(se,ue,me,"\ue131","\\@imath"),oe(se,ue,me,"\ue237","\\@jmath"),oe(se,ue,we,"\u0131","\u0131"),oe(se,ue,we,"\u0237","\u0237"),oe(le,ue,we,"\u0131","\\i",!0),oe(le,ue,we,"\u0237","\\j",!0),oe(le,ue,we,"\xdf","\\ss",!0),oe(le,ue,we,"\xe6","\\ae",!0),oe(le,ue,we,"\u0153","\\oe",!0),oe(le,ue,we,"\xf8","\\o",!0),oe(le,ue,we,"\xc6","\\AE",!0),oe(le,ue,we,"\u0152","\\OE",!0),oe(le,ue,we,"\xd8","\\O",!0),oe(le,ue,he,"\u02ca","\\'"),oe(le,ue,he,"\u02cb","\\`"),oe(le,ue,he,"\u02c6","\\^"),oe(le,ue,he,"\u02dc","\\~"),oe(le,ue,he,"\u02c9","\\="),oe(le,ue,he,"\u02d8","\\u"),oe(le,ue,he,"\u02d9","\\."),oe(le,ue,he,"\xb8","\\c"),oe(le,ue,he,"\u02da","\\r"),oe(le,ue,he,"\u02c7","\\v"),oe(le,ue,he,"\xa8",'\\"'),oe(le,ue,he,"\u02dd","\\H"),oe(le,ue,he,"\u25ef","\\textcircled");var Se={"--":!0,"---":!0,"``":!0,"''":!0};oe(le,ue,we,"\u2013","--",!0),oe(le,ue,we,"\u2013","\\textendash"),oe(le,ue,we,"\u2014","---",!0),oe(le,ue,we,"\u2014","\\textemdash"),oe(le,ue,we,"\u2018","`",!0),oe(le,ue,we,"\u2018","\\textquoteleft"),oe(le,ue,we,"\u2019","'",!0),oe(le,ue,we,"\u2019","\\textquoteright"),oe(le,ue,we,"\u201c","``",!0),oe(le,ue,we,"\u201c","\\textquotedblleft"),oe(le,ue,we,"\u201d","''",!0),oe(le,ue,we,"\u201d","\\textquotedblright"),oe(se,ue,we,"\xb0","\\degree",!0),oe(le,ue,we,"\xb0","\\degree"),oe(le,ue,we,"\xb0","\\textdegree",!0),oe(se,ue,we,"\xa3","\\pounds"),oe(se,ue,we,"\xa3","\\mathsterling",!0),oe(le,ue,we,"\xa3","\\pounds"),oe(le,ue,we,"\xa3","\\textsterling",!0),oe(se,ce,we,"\u2720","\\maltese"),oe(le,ce,we,"\u2720","\\maltese");for(var _e='0123456789/@."',Me=0;Me<14;Me++){var Ee=_e.charAt(Me);oe(se,ue,we,Ee,Ee)}for(var Ae='0123456789!@*()-=+";:?/.,',Te=0;Te<25;Te++){var Ce=Ae.charAt(Te);oe(le,ue,we,Ce,Ce)}for(var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Ne=0;Ne<52;Ne++){var Re=De.charAt(Ne);oe(se,ue,me,Re,Re),oe(le,ue,we,Re,Re)}oe(se,ce,we,"C","\u2102"),oe(le,ce,we,"C","\u2102"),oe(se,ce,we,"H","\u210d"),oe(le,ce,we,"H","\u210d"),oe(se,ce,we,"N","\u2115"),oe(le,ce,we,"N","\u2115"),oe(se,ce,we,"P","\u2119"),oe(le,ce,we,"P","\u2119"),oe(se,ce,we,"Q","\u211a"),oe(le,ce,we,"Q","\u211a"),oe(se,ce,we,"R","\u211d"),oe(le,ce,we,"R","\u211d"),oe(se,ce,we,"Z","\u2124"),oe(le,ce,we,"Z","\u2124"),oe(se,ue,me,"h","\u210e"),oe(le,ue,me,"h","\u210e");for(var ke="",Ie=0;Ie<52;Ie++){var Fe=De.charAt(Ie);oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56320+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56372+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56424+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56580+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56684+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56736+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56788+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56840+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56944+Ie)),oe(le,ue,we,Fe,ke),Ie<26&&(oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56632+Ie)),oe(le,ue,we,Fe,ke),oe(se,ue,me,Fe,ke=String.fromCharCode(55349,56476+Ie)),oe(le,ue,we,Fe,ke))}oe(se,ue,me,"k",ke=String.fromCharCode(55349,56668)),oe(le,ue,we,"k",ke);for(var Pe=0;Pe<10;Pe++){var Oe=Pe.toString();oe(se,ue,me,Oe,ke=String.fromCharCode(55349,57294+Pe)),oe(le,ue,we,Oe,ke),oe(se,ue,me,Oe,ke=String.fromCharCode(55349,57314+Pe)),oe(le,ue,we,Oe,ke),oe(se,ue,me,Oe,ke=String.fromCharCode(55349,57324+Pe)),oe(le,ue,we,Oe,ke),oe(se,ue,me,Oe,ke=String.fromCharCode(55349,57334+Pe)),oe(le,ue,we,Oe,ke)}for(var Be="\xd0\xde\xfe",Le=0;Le<3;Le++){var ze=Be.charAt(Le);oe(se,ue,me,ze,ze),oe(le,ue,we,ze,ze)}var Ue=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],He=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],qe=function(e,t,n){return ae[n][e]&&ae[n][e].replace&&(e=ae[n][e].replace),{value:e,metrics:I(e,t,n)}},Ve=function(e,t,n,r,i){var a,o=qe(e,t,n),s=o.metrics;if(e=o.value,s){var l=s.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),a=new K(e,s.height,s.depth,l,s.skew,s.width,i)}else"undefined"!==typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"' and mode '"+n+"'"),a=new K(e,0,0,0,0,0,i);if(r){a.maxFontSize=r.sizeMultiplier,r.style.isTight()&&a.classes.push("mtight");var u=r.getColor();u&&(a.style.color=u)}return a},je=(e,t)=>{if(j(e.classes)!==j(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var n=e.classes[0];if("mbin"===n||"mord"===n)return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},Ge=function(e){for(var t=0,n=0,r=0,i=0;i<e.children.length;i++){var a=e.children[i];a.height>t&&(t=a.height),a.depth>n&&(n=a.depth),a.maxFontSize>r&&(r=a.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},We=function(e,t,n,r){var i=new Y(e,t,n,r);return Ge(i),i},Xe=(e,t,n,r)=>new Y(e,t,n,r),Ye=function(e){var t=new D(e);return Ge(t),t},$e=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}return r+"-"+("textbf"===t&&"textit"===n?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},Ze={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Je={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Ke={fontMap:Ze,makeSymbol:Ve,mathsym:function(e,t,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&qe(e,"Main-Bold",t).metrics?Ve(e,"Main-Bold",t,n,r.concat(["mathbf"])):"\\"===e||"main"===ae[t][e].font?Ve(e,"Main-Regular",t,n,r):Ve(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},makeSpan:We,makeSvgSpan:Xe,makeLineSpan:function(e,t,n){var r=We([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=V(r.height),r.maxFontSize=1,r},makeAnchor:function(e,t,n,r){var i=new $(e,t,n,r);return Ge(i),i},makeFragment:Ye,wrapFragment:function(e,t){return e instanceof D?We([],[e],t):e},makeVList:function(e,t){for(var{children:n,depth:r}=function(e){if("individualShift"===e.positionType){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,i=r,a=1;a<t.length;a++){var o=-t[a].shift-i-t[a].elem.depth,s=o-(t[a-1].elem.height+t[a-1].elem.depth);i+=o,n.push({type:"kern",size:s}),n.push(t[a])}return{children:n,depth:r}}var l;if("top"===e.positionType){for(var u=e.positionData,c=0;c<e.children.length;c++){var h=e.children[c];u-="kern"===h.type?h.size:h.elem.height+h.elem.depth}l=u}else if("bottom"===e.positionType)l=-e.positionData;else{var d=e.children[0];if("elem"!==d.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-d.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-d.elem.depth}}return{children:e.children,depth:l}}(e),i=0,a=0;a<n.length;a++){var o=n[a];if("elem"===o.type){var s=o.elem;i=Math.max(i,s.maxFontSize,s.height)}}i+=2;var l=We(["pstrut"],[]);l.style.height=V(i);for(var u=[],c=r,h=r,d=r,p=0;p<n.length;p++){var f=n[p];if("kern"===f.type)d+=f.size;else{var m=f.elem,g=f.wrapperClasses||[],v=f.wrapperStyle||{},y=We(g,[l,m],void 0,v);y.style.top=V(-i-d-m.depth),f.marginLeft&&(y.style.marginLeft=f.marginLeft),f.marginRight&&(y.style.marginRight=f.marginRight),u.push(y),d+=m.height+m.depth}c=Math.min(c,d),h=Math.max(h,d)}var x,b=We(["vlist"],u);if(b.style.height=V(h),c<0){var w=We([],[]),S=We(["vlist"],[w]);S.style.height=V(-c);var _=We(["vlist-s"],[new K("\u200b")]);x=[We(["vlist-r"],[b,_]),We(["vlist-r"],[S])]}else x=[We(["vlist-r"],[b])];var M=We(["vlist-t"],x);return 2===x.length&&M.classes.push("vlist-t2"),M.height=h,M.depth=-c,M},makeOrd:function(e,t,n){var r=e.mode,i=e.text,a=["mord"],s="math"===r||"text"===r&&t.font,l=s?t.font:t.fontFamily,u="",c="";if(55349===i.charCodeAt(0)&&([u,c]=function(e,t){var n=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,r="math"===t?0:1;if(119808<=n&&n<120484){var i=Math.floor((n-119808)/26);return[Ue[i][2],Ue[i][r]]}if(120782<=n&&n<=120831){var a=Math.floor((n-120782)/10);return[He[a][2],He[a][r]]}if(120485===n||120486===n)return[Ue[0][2],Ue[0][r]];if(120486<n&&n<120782)return["",""];throw new o("Unsupported character: "+e)}(i,r)),u.length>0)return Ve(i,u,r,t,a.concat(c));if(l){var h,d;if("boldsymbol"===l){var p=function(e,t,n,r,i){return"textord"!==i&&qe(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(i,r,0,0,n);h=p.fontName,d=[p.fontClass]}else s?(h=Ze[l].fontName,d=[l]):(h=$e(l,t.fontWeight,t.fontShape),d=[l,t.fontWeight,t.fontShape]);if(qe(i,h,r).metrics)return Ve(i,h,r,t,a.concat(d));if(Se.hasOwnProperty(i)&&"Typewriter"===h.slice(0,10)){for(var f=[],m=0;m<i.length;m++)f.push(Ve(i[m],h,r,t,a.concat(d)));return Ye(f)}}if("mathord"===n)return Ve(i,"Math-Italic",r,t,a.concat(["mathnormal"]));if("textord"===n){var g=ae[r][i]&&ae[r][i].font;if("ams"===g){var v=$e("amsrm",t.fontWeight,t.fontShape);return Ve(i,v,r,t,a.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==g&&g){var y=$e(g,t.fontWeight,t.fontShape);return Ve(i,y,r,t,a.concat(y,t.fontWeight,t.fontShape))}var x=$e("textrm",t.fontWeight,t.fontShape);return Ve(i,x,r,t,a.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:(e,t)=>{var n=We(["mspace"],[],t),r=q(e,t);return n.style.marginRight=V(r),n},staticSvg:function(e,t){var[n,r,i]=Je[e],a=new ee(n),o=new Q([a],{width:V(r),height:V(i),style:"width:"+V(r),viewBox:"0 0 "+1e3*r+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),s=Xe(["overlay"],[o],t);return s.height=i,s.style.height=V(i),s.style.width=V(r),s},svgData:Je,tryCombineChars:e=>{for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof K&&r instanceof K&&je(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e}},Qe={number:3,unit:"mu"},et={number:4,unit:"mu"},tt={number:5,unit:"mu"},nt={mord:{mop:Qe,mbin:et,mrel:tt,minner:Qe},mop:{mord:Qe,mop:Qe,mrel:tt,minner:Qe},mbin:{mord:et,mop:et,mopen:et,minner:et},mrel:{mord:tt,mop:tt,mopen:tt,minner:tt},mopen:{},mclose:{mop:Qe,mbin:et,mrel:tt,minner:Qe},mpunct:{mord:Qe,mop:Qe,mrel:tt,mopen:Qe,mclose:Qe,mpunct:Qe,minner:Qe},minner:{mord:Qe,mop:Qe,mbin:et,mrel:tt,mopen:Qe,mpunct:Qe,minner:Qe}},rt={mord:{mop:Qe},mop:{mord:Qe,mop:Qe},mbin:{},mrel:{},mopen:{},mclose:{mop:Qe},mpunct:{},minner:{mop:Qe}},it={},at={},ot={};function st(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:a,mathmlBuilder:o}=e,s={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<n.length;++l)it[n[l]]=s;t&&(a&&(at[t]=a),o&&(ot[t]=o))}function lt(e){var{type:t,htmlBuilder:n,mathmlBuilder:r}=e;st({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:n,mathmlBuilder:r})}var ut=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},ct=function(e){return"ordgroup"===e.type?e.body:[e]},ht=Ke.makeSpan,dt=["leftmost","mbin","mopen","mrel","mop","mpunct"],pt=["rightmost","mrel","mclose","mpunct"],ft={display:_.DISPLAY,text:_.TEXT,script:_.SCRIPT,scriptscript:_.SCRIPTSCRIPT},mt={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},gt=function(e,t,n,r){void 0===r&&(r=[null,null]);for(var i=[],a=0;a<e.length;a++){var o=St(e[a],t);if(o instanceof D){var s=o.children;i.push(...s)}else i.push(o)}if(Ke.tryCombineChars(i),!n)return i;var l=t;if(1===e.length){var u=e[0];"sizing"===u.type?l=t.havingSize(u.size):"styling"===u.type&&(l=t.havingStyle(ft[u.style]))}var c=ht([r[0]||"leftmost"],[],t),d=ht([r[1]||"rightmost"],[],t),p="root"===n;return vt(i,((e,t)=>{var n=t.classes[0],r=e.classes[0];"mbin"===n&&h.contains(pt,r)?t.classes[0]="mord":"mbin"===r&&h.contains(dt,n)&&(e.classes[0]="mord")}),{node:c},d,p),vt(i,((e,t)=>{var n=bt(t),r=bt(e),i=n&&r?e.hasClass("mtight")?rt[n][r]:nt[n][r]:null;if(i)return Ke.makeGlue(i,l)}),{node:c},d,p),i},vt=function e(t,n,r,i,a){i&&t.push(i);for(var o=0;o<t.length;o++){var s=t[o],l=yt(s);if(l)e(l.children,n,r,null,a);else{var u=!s.hasClass("mspace");if(u){var c=n(s,r.node);c&&(r.insertAfter?r.insertAfter(c):(t.unshift(c),o++))}u?r.node=s:a&&s.hasClass("newline")&&(r.node=ht(["leftmost"])),r.insertAfter=(e=>n=>{t.splice(e+1,0,n),o++})(o)}}i&&t.pop()},yt=function(e){return e instanceof D||e instanceof $||e instanceof Y&&e.hasClass("enclosing")?e:null},xt=function e(t,n){var r=yt(t);if(r){var i=r.children;if(i.length){if("right"===n)return e(i[i.length-1],"right");if("left"===n)return e(i[0],"left")}}return t},bt=function(e,t){return e?(t&&(e=xt(e,t)),mt[e.classes[0]]||null):null},wt=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return ht(t.concat(n))},St=function(e,t,n){if(!e)return ht();if(at[e.type]){var r=at[e.type](e,t);if(n&&t.size!==n.size){r=ht(t.sizingClasses(n),[r],t);var i=t.sizeMultiplier/n.sizeMultiplier;r.height*=i,r.depth*=i}return r}throw new o("Got group of unknown type: '"+e.type+"'")};function _t(e,t){var n=ht(["base"],e,t),r=ht(["strut"]);return r.style.height=V(n.height+n.depth),n.depth&&(r.style.verticalAlign=V(-n.depth)),n.children.unshift(r),n}function Mt(e,t){var n=null;1===e.length&&"tag"===e[0].type&&(n=e[0].tag,e=e[0].body);var r,i=gt(e,t,"root");2===i.length&&i[1].hasClass("tag")&&(r=i.pop());for(var a,o=[],s=[],l=0;l<i.length;l++)if(s.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var u=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,s.push(i[l]),i[l].hasClass("nobreak")&&(u=!0);u||(o.push(_t(s,t)),s=[])}else i[l].hasClass("newline")&&(s.pop(),s.length>0&&(o.push(_t(s,t)),s=[]),o.push(i[l]));s.length>0&&o.push(_t(s,t)),n?((a=_t(gt(n,t,!0))).classes=["tag"],o.push(a)):r&&o.push(r);var c=ht(["katex-html"],o);if(c.setAttribute("aria-hidden","true"),a){var h=a.children[0];h.style.height=V(c.height+c.depth),c.depth&&(h.style.verticalAlign=V(-c.depth))}return c}function Et(e){return new D(e)}class At{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=j(this.classes));for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=h.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+h.escape(j(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">"}toText(){return this.children.map((e=>e.toText())).join("")}}class Tt{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return h.escape(this.toText())}toText(){return this.text}}var Ct={MathNode:At,TextNode:Tt,SpaceNode:class{constructor(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?"\u200a":e>=.1666&&e<=.1667?"\u2009":e>=.2222&&e<=.2223?"\u2005":e>=.2777&&e<=.2778?"\u2005\u200a":e>=-.05556&&e<=-.05555?"\u200a\u2063":e>=-.1667&&e<=-.1666?"\u2009\u2063":e>=-.2223&&e<=-.2222?"\u205f\u2063":e>=-.2778&&e<=-.2777?"\u2005\u2063":null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",V(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+V(this.width)+'"/>'}toText(){return this.character?this.character:" "}},newDocumentFragment:Et},Dt=function(e,t,n){return!ae[t][e]||!ae[t][e].replace||55349===e.charCodeAt(0)||Se.hasOwnProperty(e)&&n&&(n.fontFamily&&"tt"===n.fontFamily.slice(4,6)||n.font&&"tt"===n.font.slice(4,6))||(e=ae[t][e].replace),new Ct.TextNode(e)},Nt=function(e){return 1===e.length?e[0]:new Ct.MathNode("mrow",e)},Rt=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var n=t.font;if(!n||"mathnormal"===n)return null;var r=e.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var i=e.text;return h.contains(["\\imath","\\jmath"],i)?null:(ae[r][i]&&ae[r][i].replace&&(i=ae[r][i].replace),I(i,Ke.fontMap[n].fontName,r)?Ke.fontMap[n].variant:null)},kt=function(e,t,n){if(1===e.length){var r=Ft(e[0],t);return n&&r instanceof At&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var i,a=[],o=0;o<e.length;o++){var s=Ft(e[o],t);if(s instanceof At&&i instanceof At){if("mtext"===s.type&&"mtext"===i.type&&s.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...s.children);continue}if("mn"===s.type&&"mn"===i.type){i.children.push(...s.children);continue}if("mi"===s.type&&1===s.children.length&&"mn"===i.type){var l=s.children[0];if(l instanceof Tt&&"."===l.text){i.children.push(...s.children);continue}}else if("mi"===i.type&&1===i.children.length){var u=i.children[0];if(u instanceof Tt&&"\u0338"===u.text&&("mo"===s.type||"mi"===s.type||"mn"===s.type)){var c=s.children[0];c instanceof Tt&&c.text.length>0&&(c.text=c.text.slice(0,1)+"\u0338"+c.text.slice(1),a.pop())}}}a.push(s),i=s}return a},It=function(e,t,n){return Nt(kt(e,t,n))},Ft=function(e,t){if(!e)return new Ct.MathNode("mrow");if(ot[e.type])return ot[e.type](e,t);throw new o("Got group of unknown type: '"+e.type+"'")};function Pt(e,t,n,r,i){var a,o=kt(e,n);a=1===o.length&&o[0]instanceof At&&h.contains(["mrow","mtable"],o[0].type)?o[0]:new Ct.MathNode("mrow",o);var s=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);s.setAttribute("encoding","application/x-tex");var l=new Ct.MathNode("semantics",[a,s]),u=new Ct.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&u.setAttribute("display","block");var c=i?"katex":"katex-mathml";return Ke.makeSpan([c],[u])}var Ot=function(e){return new L({style:e.displayMode?_.DISPLAY:_.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Bt=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=Ke.makeSpan(n,[e])}return e},Lt={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb","\\cdrightarrow":"\u2192","\\cdleftarrow":"\u2190","\\cdlongequal":"="},zt={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ut=function(e,t,n,r,i){var a,o=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(a=Ke.makeSpan(["stretchy",t],[],i),"fbox"===t){var s=i.color&&i.getColor();s&&(a.style.borderColor=s)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new te({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new te({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new Q(l,{width:"100%",height:V(o)});a=Ke.makeSvgSpan([],[u],i)}return a.height=o,a.style.height=V(o),a},Ht=function(e){var t=new Ct.MathNode("mo",[new Ct.TextNode(Lt[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},qt=function(e,t){var{span:n,minWidth:r,height:i}=function(){var n=4e5,r=e.label.slice(1);if(h.contains(["widehat","widecheck","widetilde","utilde"],r)){var i,a,o,s=function(e){return"ordgroup"===e.type?e.body.length:1}(e.base);if(s>5)"widehat"===r||"widecheck"===r?(i=420,n=2364,o=.42,a=r+"4"):(i=312,n=2340,o=.34,a="tilde4");else{var l=[1,1,2,2,3,3][s];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][l],i=[0,239,300,360,420][l],o=[0,.24,.3,.3,.36,.42][l],a=r+l):(n=[0,600,1033,2339,2340][l],i=[0,260,286,306,312][l],o=[0,.26,.286,.3,.306,.34][l],a="tilde"+l)}var u=new ee(a),c=new Q([u],{width:"100%",height:V(o),viewBox:"0 0 "+n+" "+i,preserveAspectRatio:"none"});return{span:Ke.makeSvgSpan([],[c],t),minWidth:0,height:o}}var d,p,f=[],m=zt[r],[g,v,y]=m,x=y/1e3,b=g.length;if(1===b)d=["hide-tail"],p=[m[3]];else if(2===b)d=["halfarrow-left","halfarrow-right"],p=["xMinYMin","xMaxYMin"];else{if(3!==b)throw new Error("Correct katexImagesData or update code here to support\n                    "+b+" children.");d=["brace-left","brace-center","brace-right"],p=["xMinYMin","xMidYMin","xMaxYMin"]}for(var w=0;w<b;w++){var S=new ee(g[w]),_=new Q([S],{width:"400em",height:V(x),viewBox:"0 0 "+n+" "+y,preserveAspectRatio:p[w]+" slice"}),M=Ke.makeSvgSpan([d[w]],[_],t);if(1===b)return{span:M,minWidth:v,height:x};M.style.height=V(x),f.push(M)}return{span:Ke.makeSpan(["stretchy"],f,t),minWidth:v,height:x}}();return n.height=i,n.style.height=V(i),r>0&&(n.style.minWidth=V(r)),n};function Vt(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function jt(e){var t=Gt(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function Gt(e){return e&&("atom"===e.type||ie.hasOwnProperty(e.type))?e:null}var Wt=(e,t)=>{var n,r,i;e&&"supsub"===e.type?(n=(r=Vt(e.base,"accent")).base,e.base=n,i=function(e){if(e instanceof Y)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(St(e,t)),e.base=r):n=(r=Vt(e,"accent")).base;var a=St(n,t.havingCrampedStyle()),o=0;if(r.isShifty&&h.isCharacterBox(n)){var s=h.getBaseElem(n);o=ne(St(s,t.havingCrampedStyle())).skew}var l,u="\\c"===r.label,c=u?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight);if(r.isStretchy)l=qt(r,t),l=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+V(2*o)+")",marginLeft:V(2*o)}:void 0}]},t);else{var d,p;"\\vec"===r.label?(d=Ke.staticSvg("vec",t),p=Ke.svgData.vec[1]):((d=ne(d=Ke.makeOrd({mode:r.mode,text:r.label},t,"textord"))).italic=0,p=d.width,u&&(c+=d.depth)),l=Ke.makeSpan(["accent-body"],[d]);var f="\\textcircled"===r.label;f&&(l.classes.push("accent-full"),c=a.height);var m=o;f||(m-=p/2),l.style.left=V(m),"\\textcircled"===r.label&&(l.style.top=".2em"),l=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-c},{type:"elem",elem:l}]},t)}var g=Ke.makeSpan(["mord","accent"],[l],t);return i?(i.children[0]=g,i.height=Math.max(g.height,i.height),i.classes[0]="mord",i):g},Xt=(e,t)=>{var n=e.isStretchy?Ht(e.label):new Ct.MathNode("mo",[Dt(e.label,e.mode)]),r=new Ct.MathNode("mover",[Ft(e.base,t),n]);return r.setAttribute("accent","true"),r},Yt=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((e=>"\\"+e)).join("|"));st({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var n=ut(t[0]),r=!Yt.test(e.funcName),i=!r||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:Wt,mathmlBuilder:Xt}),st({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var n=t[0],r=e.parser.mode;return"math"===r&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:Wt,mathmlBuilder:Xt}),st({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:(e,t)=>{var n=St(e.base,t),r=qt(e,t),i="\\utilde"===e.label?.12:0,a=Ke.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},t);return Ke.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var n=Ht(e.label),r=new Ct.MathNode("munder",[Ft(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var $t=e=>{var t=new Ct.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};st({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r,funcName:i}=e;return{type:"xArrow",mode:r.mode,label:i,body:t[0],below:n[0]}},htmlBuilder(e,t){var n,r=t.style,i=t.havingStyle(r.sup()),a=Ke.wrapFragment(St(e.body,i,t),t),o="\\x"===e.label.slice(0,2)?"x":"cd";a.classes.push(o+"-arrow-pad"),e.below&&(i=t.havingStyle(r.sub()),(n=Ke.wrapFragment(St(e.below,i,t),t)).classes.push(o+"-arrow-pad"));var s,l=qt(e,t),u=-t.fontMetrics().axisHeight+.5*l.height,c=-t.fontMetrics().axisHeight-.5*l.height-.111;if((a.depth>.25||"\\xleftequilibrium"===e.label)&&(c-=a.depth),n){var h=-t.fontMetrics().axisHeight+n.height+.5*l.height+.111;s=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:c},{type:"elem",elem:l,shift:u},{type:"elem",elem:n,shift:h}]},t)}else s=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:c},{type:"elem",elem:l,shift:u}]},t);return s.children[0].children[0].children[1].classes.push("svg-align"),Ke.makeSpan(["mrel","x-arrow"],[s],t)},mathmlBuilder(e,t){var n,r=Ht(e.label);if(r.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=$t(Ft(e.body,t));if(e.below){var a=$t(Ft(e.below,t));n=new Ct.MathNode("munderover",[r,a,i])}else n=new Ct.MathNode("mover",[r,i])}else if(e.below){var o=$t(Ft(e.below,t));n=new Ct.MathNode("munder",[r,o])}else n=$t(),n=new Ct.MathNode("mover",[r,n]);return n}});var Zt=Ke.makeSpan;function Jt(e,t){var n=gt(e.body,t,!0);return Zt([e.mclass],n,t)}function Kt(e,t){var n,r=kt(e.body,t);return"minner"===e.mclass?n=new Ct.MathNode("mpadded",r):"mord"===e.mclass?e.isCharacterBox?(n=r[0]).type="mi":n=new Ct.MathNode("mi",r):(e.isCharacterBox?(n=r[0]).type="mo":n=new Ct.MathNode("mo",r),"mbin"===e.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"===e.mclass||"mclose"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0em"):"minner"===e.mclass&&(n.attributes.lspace="0.0556em",n.attributes.width="+0.1111em")),n}st({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.slice(5),body:ct(i),isCharacterBox:h.isCharacterBox(i)}},htmlBuilder:Jt,mathmlBuilder:Kt});var Qt=e=>{var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};st({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:n}=e;return{type:"mclass",mode:n.mode,mclass:Qt(t[0]),body:ct(t[1]),isCharacterBox:h.isCharacterBox(t[1])}}}),st({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var n,{parser:r,funcName:i}=e,a=t[1],o=t[0];n="\\stackrel"!==i?Qt(a):"mrel";var s={type:"op",mode:a.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:ct(a)},l={type:"supsub",mode:o.mode,base:s,sup:"\\underset"===i?null:o,sub:"\\underset"===i?o:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l],isCharacterBox:h.isCharacterBox(l)}},htmlBuilder:Jt,mathmlBuilder:Kt}),st({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"pmb",mode:n.mode,mclass:Qt(t[0]),body:ct(t[0])}},htmlBuilder(e,t){var n=gt(e.body,t,!0),r=Ke.makeSpan([e.mclass],n,t);return r.style.textShadow="0.02em 0.01em 0.04px",r},mathmlBuilder(e,t){var n=kt(e.body,t),r=new Ct.MathNode("mstyle",n);return r.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),r}});var en={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},tn=e=>"textord"===e.type&&"@"===e.text;function nn(e,t,n){var r=en[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:r,mode:"math",family:"rel"},a={type:"ordgroup",mode:"math",body:[n.callFunction("\\\\cdleft",[t[0]],[]),n.callFunction("\\Big",[i],[]),n.callFunction("\\\\cdright",[t[1]],[])]};return n.callFunction("\\\\cdparent",[a],[]);case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return n.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}st({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder(e,t){var n=t.havingStyle(t.style.sup()),r=Ke.wrapFragment(St(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=V(.8-r.depth),r.height=0,r.depth=0,r},mathmlBuilder(e,t){var n=new Ct.MathNode("mrow",[Ft(e.label,t)]);return(n=new Ct.MathNode("mpadded",[n])).setAttribute("width","0"),"left"===e.side&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),(n=new Ct.MathNode("mstyle",[n])).setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}}),st({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:n}=e;return{type:"cdlabelparent",mode:n.mode,fragment:t[0]}},htmlBuilder(e,t){var n=Ke.wrapFragment(St(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder:(e,t)=>new Ct.MathNode("mrow",[Ft(e.fragment,t)])}),st({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:n}=e,r=Vt(t[0],"ordgroup").body,i="",a=0;a<r.length;a++){i+=Vt(r[a],"textord").text}var s,l=parseInt(i);if(isNaN(l))throw new o("\\@char has non-numeric argument "+i);if(l<0||l>=1114111)throw new o("\\@char with invalid code point "+i);return l<=65535?s=String.fromCharCode(l):(l-=65536,s=String.fromCharCode(55296+(l>>10),56320+(1023&l))),{type:"textord",mode:n.mode,text:s}}});var rn=(e,t)=>{var n=gt(e.body,t.withColor(e.color),!1);return Ke.makeFragment(n)},an=(e,t)=>{var n=kt(e.body,t.withColor(e.color)),r=new Ct.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};st({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:n}=e,r=Vt(t[0],"color-token").color,i=t[1];return{type:"color",mode:n.mode,color:r,body:ct(i)}},htmlBuilder:rn,mathmlBuilder:an}),st({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:n,breakOnTokenText:r}=e,i=Vt(t[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var a=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:a}},htmlBuilder:rn,mathmlBuilder:an}),st({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,n){var{parser:r}=e,i="["===r.gullet.future().text?r.parseSizeGroup(!0):null,a=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:a,size:i&&Vt(i,"size").value}},htmlBuilder(e,t){var n=Ke.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=V(q(e.size,t)))),n},mathmlBuilder(e,t){var n=new Ct.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",V(q(e.size,t)))),n}});var on={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},sn=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new o("Expected a control sequence",e);return t},ln=(e,t,n,r)=>{var i=e.gullet.macros.get(n.text);null==i&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,i,r)};st({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:n}=e;t.consumeSpaces();var r=t.fetch();if(on[r.text])return"\\global"!==n&&"\\\\globallong"!==n||(r.text=on[r.text]),Vt(t.parseFunction(),"internal");throw new o("Invalid token after macro prefix",r)}}),st({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=t.gullet.popToken(),i=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new o("Expected a control sequence",r);for(var a,s=0,l=[[]];"{"!==t.gullet.future().text;)if("#"===(r=t.gullet.popToken()).text){if("{"===t.gullet.future().text){a=t.gullet.future(),l[s].push("{");break}if(r=t.gullet.popToken(),!/^[1-9]$/.test(r.text))throw new o('Invalid argument number "'+r.text+'"');if(parseInt(r.text)!==s+1)throw new o('Argument number "'+r.text+'" out of order');s++,l.push([])}else{if("EOF"===r.text)throw new o("Expected a macro definition");l[s].push(r.text)}var{tokens:u}=t.gullet.consumeArg();return a&&u.unshift(a),"\\edef"!==n&&"\\xdef"!==n||(u=t.gullet.expandTokens(u)).reverse(),t.gullet.macros.set(i,{tokens:u,numArgs:s,delimiters:l},n===on[n]),{type:"internal",mode:t.mode}}}),st({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=sn(t.gullet.popToken());t.gullet.consumeSpaces();var i=(e=>{var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t})(t);return ln(t,r,i,"\\\\globallet"===n),{type:"internal",mode:t.mode}}}),st({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:n}=e,r=sn(t.gullet.popToken()),i=t.gullet.popToken(),a=t.gullet.popToken();return ln(t,r,a,"\\\\globalfuture"===n),t.gullet.pushToken(a),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var un=function(e,t,n){var r=I(ae.math[e]&&ae.math[e].replace||e,t,n);if(!r)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return r},cn=function(e,t,n,r){var i=n.havingBaseStyle(t),a=Ke.makeSpan(r.concat(i.sizingClasses(n)),[e],n),o=i.sizeMultiplier/n.sizeMultiplier;return a.height*=o,a.depth*=o,a.maxFontSize=i.sizeMultiplier,a},hn=function(e,t,n){var r=t.havingBaseStyle(n),i=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=V(i),e.height-=i,e.depth+=i},dn=function(e,t,n,r,i,a){var o=function(e,t,n,r){return Ke.makeSymbol(e,"Size"+t+"-Regular",n,r)}(e,t,i,r),s=cn(Ke.makeSpan(["delimsizing","size"+t],[o],r),_.TEXT,r,a);return n&&hn(s,r,_.TEXT),s},pn=function(e,t,n){var r;return r="Size1-Regular"===t?"delim-size1":"delim-size4",{type:"elem",elem:Ke.makeSpan(["delimsizinginner",r],[Ke.makeSpan([],[Ke.makeSymbol(e,t,n)])])}},fn=function(e,t,n){var r=N["Size4-Regular"][e.charCodeAt(0)]?N["Size4-Regular"][e.charCodeAt(0)][4]:N["Size1-Regular"][e.charCodeAt(0)][4],i=new ee("inner",function(e,t){switch(e){case"\u239c":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"\u2223":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"\u2225":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"\u239f":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"\u23a2":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"\u23a5":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"\u23aa":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"\u23d0":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"\u2016":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),a=new Q([i],{width:V(r),height:V(t),style:"width:"+V(r),viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),o=Ke.makeSvgSpan([],[a],n);return o.height=t,o.style.height=V(t),o.style.width=V(r),{type:"elem",elem:o}},mn={type:"kern",size:-.008},gn=["|","\\lvert","\\rvert","\\vert"],vn=["\\|","\\lVert","\\rVert","\\Vert"],yn=function(e,t,n,r,i,a){var o,s,l,u,c="",d=0;o=l=u=e,s=null;var p="Size1-Regular";"\\uparrow"===e?l=u="\u23d0":"\\Uparrow"===e?l=u="\u2016":"\\downarrow"===e?o=l="\u23d0":"\\Downarrow"===e?o=l="\u2016":"\\updownarrow"===e?(o="\\uparrow",l="\u23d0",u="\\downarrow"):"\\Updownarrow"===e?(o="\\Uparrow",l="\u2016",u="\\Downarrow"):h.contains(gn,e)?(l="\u2223",c="vert",d=333):h.contains(vn,e)?(l="\u2225",c="doublevert",d=556):"["===e||"\\lbrack"===e?(o="\u23a1",l="\u23a2",u="\u23a3",p="Size4-Regular",c="lbrack",d=667):"]"===e||"\\rbrack"===e?(o="\u23a4",l="\u23a5",u="\u23a6",p="Size4-Regular",c="rbrack",d=667):"\\lfloor"===e||"\u230a"===e?(l=o="\u23a2",u="\u23a3",p="Size4-Regular",c="lfloor",d=667):"\\lceil"===e||"\u2308"===e?(o="\u23a1",l=u="\u23a2",p="Size4-Regular",c="lceil",d=667):"\\rfloor"===e||"\u230b"===e?(l=o="\u23a5",u="\u23a6",p="Size4-Regular",c="rfloor",d=667):"\\rceil"===e||"\u2309"===e?(o="\u23a4",l=u="\u23a5",p="Size4-Regular",c="rceil",d=667):"("===e||"\\lparen"===e?(o="\u239b",l="\u239c",u="\u239d",p="Size4-Regular",c="lparen",d=875):")"===e||"\\rparen"===e?(o="\u239e",l="\u239f",u="\u23a0",p="Size4-Regular",c="rparen",d=875):"\\{"===e||"\\lbrace"===e?(o="\u23a7",s="\u23a8",u="\u23a9",l="\u23aa",p="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(o="\u23ab",s="\u23ac",u="\u23ad",l="\u23aa",p="Size4-Regular"):"\\lgroup"===e||"\u27ee"===e?(o="\u23a7",u="\u23a9",l="\u23aa",p="Size4-Regular"):"\\rgroup"===e||"\u27ef"===e?(o="\u23ab",u="\u23ad",l="\u23aa",p="Size4-Regular"):"\\lmoustache"===e||"\u23b0"===e?(o="\u23a7",u="\u23ad",l="\u23aa",p="Size4-Regular"):"\\rmoustache"!==e&&"\u23b1"!==e||(o="\u23ab",u="\u23a9",l="\u23aa",p="Size4-Regular");var f=un(o,p,i),m=f.height+f.depth,g=un(l,p,i),v=g.height+g.depth,y=un(u,p,i),x=y.height+y.depth,b=0,w=1;if(null!==s){var S=un(s,p,i);b=S.height+S.depth,w=2}var M=m+x+b,E=M+Math.max(0,Math.ceil((t-M)/(w*v)))*w*v,A=r.fontMetrics().axisHeight;n&&(A*=r.sizeMultiplier);var T=E/2-A,C=[];if(c.length>0){var D=E-m-x,N=Math.round(1e3*E),R=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v1759 h347 v-84\nH403z M403 1759 V0 H319 V1759 v"+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v1759 H0 v84 H347z\nM347 1759 V0 H263 V1759 v"+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M188 15 H145 v585 v"+t+" v585 h43z\nM367 15 v585 v"+t+" v585 c2.667,10,9.667,15,21,15\nc10,0,16.667,-5,20,-15 v-585 v"+-t+" v-585 c-2.667,-10,-9.667,-15,-21,-15\nc-10,0,-16.667,5,-20,15z M410 15 H367 v585 v"+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+" v1715 h263 v84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+" v1799 H0 v-84 H319z\nMM319 602 V0 H403 V602 v"+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+" v602 h84z\nM403 1759 V0 H319 V1759 v"+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+" v602 h84z\nM347 1759 V0 h-84 V1759 v"+t+" v602 h84z";case"lparen":return"M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1\nc-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,\n-36,557 l0,"+(t+84)+"c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,\n949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9\nc0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,\n-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189\nl0,-"+(t+92)+"c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,\n-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z";case"rparen":return"M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,\n63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5\nc11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,"+(t+9)+"\nc-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664\nc-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11\nc0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17\nc242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558\nl0,-"+(t+144)+"c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,\n-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z";default:throw new Error("Unknown stretchy delimiter.")}}(c,Math.round(1e3*D)),k=new ee(c,R),I=(d/1e3).toFixed(3)+"em",F=(N/1e3).toFixed(3)+"em",P=new Q([k],{width:I,height:F,viewBox:"0 0 "+d+" "+N}),O=Ke.makeSvgSpan([],[P],r);O.height=N/1e3,O.style.width=I,O.style.height=F,C.push({type:"elem",elem:O})}else{if(C.push(pn(u,p,i)),C.push(mn),null===s){var B=E-m-x+.016;C.push(fn(l,B,r))}else{var L=(E-m-x-b)/2+.016;C.push(fn(l,L,r)),C.push(mn),C.push(pn(s,p,i)),C.push(mn),C.push(fn(l,L,r))}C.push(mn),C.push(pn(o,p,i))}var z=r.havingBaseStyle(_.TEXT),U=Ke.makeVList({positionType:"bottom",positionData:T,children:C},z);return cn(Ke.makeSpan(["delimsizing","mult"],[U],z),_.TEXT,r,a)},xn=.08,bn=function(e,t,n,r,i){var a=function(e,t,n){t*=1e3;var r="";switch(e){case"sqrtMain":r=function(e,t){return"M95,"+(622+e+t)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,T);break;case"sqrtSize1":r=function(e,t){return"M263,"+(601+e+t)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,T);break;case"sqrtSize2":r=function(e,t){return"M983 "+(10+e+t)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"}(t,T);break;case"sqrtSize3":r=function(e,t){return"M424,"+(2398+e+t)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" "+t+"\nh400000v"+(40+e)+"h-400000z"}(t,T);break;case"sqrtSize4":r=function(e,t){return"M473,"+(2713+e+t)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"}(t,T);break;case"sqrtTall":r=function(e,t,n){return"M702 "+(e+t)+"H400000"+(40+e)+"\nH742v"+(n-54-t-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 "+t+"H400000v"+(40+e)+"H742z"}(t,T,n)}return r}(e,r,n),o=new ee(e,a),s=new Q([o],{width:"400em",height:V(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ke.makeSvgSpan(["hide-tail"],[s],i)},wn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","\\surd"],Sn=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1"],_n=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Mn=[0,1.2,1.8,2.4,3],En=[{type:"small",style:_.SCRIPTSCRIPT},{type:"small",style:_.SCRIPT},{type:"small",style:_.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],An=[{type:"small",style:_.SCRIPTSCRIPT},{type:"small",style:_.SCRIPT},{type:"small",style:_.TEXT},{type:"stack"}],Tn=[{type:"small",style:_.SCRIPTSCRIPT},{type:"small",style:_.SCRIPT},{type:"small",style:_.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Cn=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Dn=function(e,t,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var a=un(e,Cn(n[i]),"math"),o=a.height+a.depth;if("small"===n[i].type&&(o*=r.havingBaseStyle(n[i].style).sizeMultiplier),o>t)return n[i]}return n[n.length-1]},Nn=function(e,t,n,r,i,a){var o;"<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"\u27e9"!==e||(e="\\rangle"),o=h.contains(_n,e)?En:h.contains(wn,e)?Tn:An;var s=Dn(e,t,o,r);return"small"===s.type?function(e,t,n,r,i,a){var o=Ke.makeSymbol(e,"Main-Regular",i,r),s=cn(o,t,r,a);return n&&hn(s,r,t),s}(e,s.style,n,r,i,a):"large"===s.type?dn(e,s.size,n,r,i,a):yn(e,t,n,r,i,a)},Rn={sqrtImage:function(e,t){var n,r,i=t.havingBaseSizing(),a=Dn("\\surd",e*i.sizeMultiplier,Tn,i),o=i.sizeMultiplier,s=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,u=0,c=0;return"small"===a.type?(e<1?o=1:e<1.4&&(o=.7),u=(1+s)/o,(n=bn("sqrtMain",l=(1+s+xn)/o,c=1e3+1e3*s+80,s,t)).style.minWidth="0.853em",r=.833/o):"large"===a.type?(c=1080*Mn[a.size],u=(Mn[a.size]+s)/o,l=(Mn[a.size]+s+xn)/o,(n=bn("sqrtSize"+a.size,l,c,s,t)).style.minWidth="1.02em",r=1/o):(l=e+s+xn,u=e+s,c=Math.floor(1e3*e+s)+80,(n=bn("sqrtTall",l,c,s,t)).style.minWidth="0.742em",r=1.056),n.height=u,n.style.height=V(l),{span:n,advanceWidth:r,ruleWidth:(t.fontMetrics().sqrtRuleThickness+s)*o}},sizedDelim:function(e,t,n,r,i){if("<"===e||"\\lt"===e||"\u27e8"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"\u27e9"!==e||(e="\\rangle"),h.contains(wn,e)||h.contains(_n,e))return dn(e,t,!1,n,r,i);if(h.contains(Sn,e))return yn(e,Mn[t],!1,n,r,i);throw new o("Illegal delimiter: '"+e+"'")},sizeToMaxHeight:Mn,customSizedDelim:Nn,leftRightDelim:function(e,t,n,r,i,a){var o=r.fontMetrics().axisHeight*r.sizeMultiplier,s=5/r.fontMetrics().ptPerEm,l=Math.max(t-o,n+o),u=Math.max(l/500*901,2*l-s);return Nn(e,u,!0,r,i,a)}},kn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},In=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\u230a","\u230b","\\lceil","\\rceil","\u2308","\u2309","<",">","\\langle","\u27e8","\\rangle","\u27e9","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","\u27ee","\u27ef","\\lmoustache","\\rmoustache","\u23b0","\u23b1","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Fn(e,t){var n=Gt(e);if(n&&h.contains(In,n.text))return n;throw new o(n?"Invalid delimiter '"+n.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function Pn(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}st({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var n=Fn(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:kn[e.funcName].size,mclass:kn[e.funcName].mclass,delim:n.text}},htmlBuilder:(e,t)=>"."===e.delim?Ke.makeSpan([e.mclass]):Rn.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];"."!==e.delim&&t.push(Dt(e.delim,e.mode));var n=new Ct.MathNode("mo",t);"mopen"===e.mclass||"mclose"===e.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true");var r=V(Rn.sizeToMaxHeight[e.size]);return n.setAttribute("minsize",r),n.setAttribute("maxsize",r),n}}),st({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=e.parser.gullet.macros.get("\\current@color");if(n&&"string"!==typeof n)throw new o("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:Fn(t[0],e).text,color:n}}}),st({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=Fn(t[0],e),r=e.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var a=Vt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{Pn(e);for(var n,r,i=gt(e.body,t,!0,["mopen","mclose"]),a=0,o=0,s=!1,l=0;l<i.length;l++)i[l].isMiddle?s=!0:(a=Math.max(i[l].height,a),o=Math.max(i[l].depth,o));if(a*=t.sizeMultiplier,o*=t.sizeMultiplier,n="."===e.left?wt(t,["mopen"]):Rn.leftRightDelim(e.left,a,o,t,e.mode,["mopen"]),i.unshift(n),s)for(var u=1;u<i.length;u++){var c=i[u].isMiddle;c&&(i[u]=Rn.leftRightDelim(c.delim,a,o,c.options,e.mode,[]))}if("."===e.right)r=wt(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;r=Rn.leftRightDelim(e.right,a,o,h,e.mode,["mclose"])}return i.push(r),Ke.makeSpan(["minner"],i,t)},mathmlBuilder:(e,t)=>{Pn(e);var n=kt(e.body,t);if("."!==e.left){var r=new Ct.MathNode("mo",[Dt(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==e.right){var i=new Ct.MathNode("mo",[Dt(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),n.push(i)}return Nt(n)}}),st({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var n=Fn(t[0],e);if(!e.parser.leftrightDepth)throw new o("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:(e,t)=>{var n;if("."===e.delim)n=wt(t,[]);else{n=Rn.sizedDelim(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:(e,t)=>{var n="\\vert"===e.delim||"|"===e.delim?Dt("|","text"):Dt(e.delim,e.mode),r=new Ct.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var On=(e,t)=>{var n,r,i,a=Ke.wrapFragment(St(e.body,t),t),o=e.label.slice(1),s=t.sizeMultiplier,l=0,u=h.isCharacterBox(e.body);if("sout"===o)(n=Ke.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/s,l=-.5*t.fontMetrics().xHeight;else if("phase"===o){var c=q({number:.6,unit:"pt"},t),d=q({number:.35,unit:"ex"},t);s/=t.havingBaseSizing().sizeMultiplier;var p=a.height+a.depth+c+d;a.style.paddingLeft=V(p/2+c);var f=Math.floor(1e3*p*s),m="M400000 "+(r=f)+" H0 L"+r/2+" 0 l65 45 L145 "+(r-80)+" H400000z",g=new Q([new ee("phase",m)],{width:"400em",height:V(f/1e3),viewBox:"0 0 400000 "+f,preserveAspectRatio:"xMinYMin slice"});(n=Ke.makeSvgSpan(["hide-tail"],[g],t)).style.height=V(p),l=a.depth+c+d}else{/cancel/.test(o)?u||a.classes.push("cancel-pad"):"angl"===o?a.classes.push("anglpad"):a.classes.push("boxpad");var v=0,y=0,x=0;/box/.test(o)?(x=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=v=t.fontMetrics().fboxsep+("colorbox"===o?0:x)):"angl"===o?(v=4*(x=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),y=Math.max(0,.25-a.depth)):y=v=u?.2:0,n=Ut(a,o,v,y,t),/fbox|boxed|fcolorbox/.test(o)?(n.style.borderStyle="solid",n.style.borderWidth=V(x)):"angl"===o&&.049!==x&&(n.style.borderTopWidth=V(x),n.style.borderRightWidth=V(x)),l=a.depth+y,e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor,e.borderColor&&(n.style.borderColor=e.borderColor))}if(e.backgroundColor)i=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:l},{type:"elem",elem:a,shift:0}]},t);else{var b=/cancel|phase/.test(o)?["svg-align"]:[];i=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:n,shift:l,wrapperClasses:b}]},t)}return/cancel/.test(o)&&(i.height=a.height,i.depth=a.depth),/cancel/.test(o)&&!u?Ke.makeSpan(["mord","cancel-lap"],[i],t):Ke.makeSpan(["mord"],[i],t)},Bn=(e,t)=>{var n=0,r=new Ct.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ft(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};st({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,a=Vt(t[0],"color-token").color,o=t[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,body:o}},htmlBuilder:On,mathmlBuilder:Bn}),st({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,n){var{parser:r,funcName:i}=e,a=Vt(t[0],"color-token").color,o=Vt(t[1],"color-token").color,s=t[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:o,borderColor:a,body:s}},htmlBuilder:On,mathmlBuilder:Bn}),st({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\fbox",body:t[0]}}}),st({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:On,mathmlBuilder:Bn}),st({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"enclose",mode:n.mode,label:"\\angl",body:t[0]}}});var Ln={};function zn(e){for(var{type:t,names:n,props:r,handler:i,htmlBuilder:a,mathmlBuilder:o}=e,s={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)Ln[n[l]]=s;a&&(at[t]=a),o&&(ot[t]=o)}var Un={};function Hn(e,t){Un[e]=t}function qn(e){var t=[];e.consumeSpaces();var n=e.fetch().text;for("\\relax"===n&&(e.consume(),e.consumeSpaces(),n=e.fetch().text);"\\hline"===n||"\\hdashline"===n;)e.consume(),t.push("\\hdashline"===n),e.consumeSpaces(),n=e.fetch().text;return t}var Vn=e=>{if(!e.parser.settings.displayMode)throw new o("{"+e.envName+"} can be used only in display mode.")};function jn(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function Gn(e,t,n){var{hskipBeforeAndAfter:r,addJot:i,cols:s,arraystretch:l,colSeparationType:u,autoTag:c,singleRow:h,emptySingleRow:d,maxNumCols:p,leqno:f}=t;if(e.gullet.beginGroup(),h||e.gullet.macros.set("\\cr","\\\\\\relax"),!l){var m=e.gullet.expandMacroAsText("\\arraystretch");if(null==m)l=1;else if(!(l=parseFloat(m))||l<0)throw new o("Invalid \\arraystretch: "+m)}e.gullet.beginGroup();var g=[],v=[g],y=[],x=[],b=null!=c?[]:void 0;function w(){c&&e.gullet.macros.set("\\@eqnsw","1",!0)}function S(){b&&(e.gullet.macros.get("\\df@tag")?(b.push(e.subparse([new a("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):b.push(Boolean(c)&&"1"===e.gullet.macros.get("\\@eqnsw")))}for(w(),x.push(qn(e));;){var _=e.parseExpression(!1,h?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),_={type:"ordgroup",mode:e.mode,body:_},n&&(_={type:"styling",mode:e.mode,style:n,body:[_]}),g.push(_);var M=e.fetch().text;if("&"===M){if(p&&g.length===p){if(h||u)throw new o("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===M){S(),1===g.length&&"styling"===_.type&&0===_.body[0].body.length&&(v.length>1||!d)&&v.pop(),x.length<v.length+1&&x.push([]);break}if("\\\\"!==M)throw new o("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var E=void 0;" "!==e.gullet.future().text&&(E=e.parseSizeGroup(!0)),y.push(E?E.value:null),S(),x.push(qn(e)),g=[],v.push(g),w()}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:i,arraystretch:l,body:v,cols:s,rowGaps:y,hskipBeforeAndAfter:r,hLinesBeforeRow:x,colSeparationType:u,tags:b,leqno:f}}function Wn(e){return"d"===e.slice(0,1)?"display":"text"}var Xn=function(e,t){var n,r,i=e.body.length,a=e.hLinesBeforeRow,s=0,l=new Array(i),u=[],c=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),d=1/t.fontMetrics().ptPerEm,p=5*d;e.colSeparationType&&"small"===e.colSeparationType&&(p=t.havingStyle(_.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var f="CD"===e.colSeparationType?q({number:3,unit:"ex"},t):12*d,m=3*d,g=e.arraystretch*f,v=.7*g,y=.3*g,x=0;function b(e){for(var t=0;t<e.length;++t)t>0&&(x+=.25),u.push({pos:x,isDashed:e[t]})}for(b(a[0]),n=0;n<e.body.length;++n){var w=e.body[n],S=v,M=y;s<w.length&&(s=w.length);var E=new Array(w.length);for(r=0;r<w.length;++r){var A=St(w[r],t);M<A.depth&&(M=A.depth),S<A.height&&(S=A.height),E[r]=A}var T=e.rowGaps[n],C=0;T&&(C=q(T,t))>0&&(M<(C+=y)&&(M=C),C=0),e.addJot&&(M+=m),E.height=S,E.depth=M,x+=S,E.pos=x,x+=M+C,l[n]=E,b(a[n+1])}var D,N,R=x/2+t.fontMetrics().axisHeight,k=e.cols||[],I=[],F=[];if(e.tags&&e.tags.some((e=>e)))for(n=0;n<i;++n){var P=l[n],O=P.pos-R,B=e.tags[n],L=void 0;(L=!0===B?Ke.makeSpan(["eqn-num"],[],t):!1===B?Ke.makeSpan([],[],t):Ke.makeSpan([],gt(B,t,!0),t)).depth=P.depth,L.height=P.height,F.push({type:"elem",elem:L,shift:O})}for(r=0,N=0;r<s||N<k.length;++r,++N){for(var z=k[N]||{},U=!0;"separator"===z.type;){if(U||((D=Ke.makeSpan(["arraycolsep"],[])).style.width=V(t.fontMetrics().doubleRuleSep),I.push(D)),"|"!==z.separator&&":"!==z.separator)throw new o("Invalid separator type: "+z.separator);var H="|"===z.separator?"solid":"dashed",j=Ke.makeSpan(["vertical-separator"],[],t);j.style.height=V(x),j.style.borderRightWidth=V(c),j.style.borderRightStyle=H,j.style.margin="0 "+V(-c/2);var G=x-R;G&&(j.style.verticalAlign=V(-G)),I.push(j),z=k[++N]||{},U=!1}if(!(r>=s)){var W=void 0;(r>0||e.hskipBeforeAndAfter)&&0!==(W=h.deflt(z.pregap,p))&&((D=Ke.makeSpan(["arraycolsep"],[])).style.width=V(W),I.push(D));var X=[];for(n=0;n<i;++n){var Y=l[n],$=Y[r];if($){var Z=Y.pos-R;$.depth=Y.depth,$.height=Y.height,X.push({type:"elem",elem:$,shift:Z})}}X=Ke.makeVList({positionType:"individualShift",children:X},t),X=Ke.makeSpan(["col-align-"+(z.align||"c")],[X]),I.push(X),(r<s-1||e.hskipBeforeAndAfter)&&0!==(W=h.deflt(z.postgap,p))&&((D=Ke.makeSpan(["arraycolsep"],[])).style.width=V(W),I.push(D))}}if(l=Ke.makeSpan(["mtable"],I),u.length>0){for(var J=Ke.makeLineSpan("hline",t,c),K=Ke.makeLineSpan("hdashline",t,c),Q=[{type:"elem",elem:l,shift:0}];u.length>0;){var ee=u.pop(),te=ee.pos-R;ee.isDashed?Q.push({type:"elem",elem:K,shift:te}):Q.push({type:"elem",elem:J,shift:te})}l=Ke.makeVList({positionType:"individualShift",children:Q},t)}if(0===F.length)return Ke.makeSpan(["mord"],[l],t);var ne=Ke.makeVList({positionType:"individualShift",children:F},t);return ne=Ke.makeSpan(["tag"],[ne],t),Ke.makeFragment([l,ne])},Yn={c:"center ",l:"left ",r:"right "},$n=function(e,t){for(var n=[],r=new Ct.MathNode("mtd",[],["mtr-glue"]),i=new Ct.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var o=e.body[a],s=[],l=0;l<o.length;l++)s.push(new Ct.MathNode("mtd",[Ft(o[l],t)]));e.tags&&e.tags[a]&&(s.unshift(r),s.push(r),e.leqno?s.unshift(i):s.push(i)),n.push(new Ct.MathNode("mtr",s))}var u=new Ct.MathNode("mtable",n),c=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",V(c));var h="",d="";if(e.cols&&e.cols.length>0){var p=e.cols,f="",m=!1,g=0,v=p.length;"separator"===p[0].type&&(h+="top ",g=1),"separator"===p[p.length-1].type&&(h+="bottom ",v-=1);for(var y=g;y<v;y++)"align"===p[y].type?(d+=Yn[p[y].align],m&&(f+="none "),m=!0):"separator"===p[y].type&&m&&(f+="|"===p[y].separator?"solid ":"dashed ",m=!1);u.setAttribute("columnalign",d.trim()),/[sd]/.test(f)&&u.setAttribute("columnlines",f.trim())}if("align"===e.colSeparationType){for(var x=e.cols||[],b="",w=1;w<x.length;w++)b+=w%2?"0em ":"1em ";u.setAttribute("columnspacing",b.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?u.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?u.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var S="",_=e.hLinesBeforeRow;h+=_[0].length>0?"left ":"",h+=_[_.length-1].length>0?"right ":"";for(var M=1;M<_.length-1;M++)S+=0===_[M].length?"none ":_[M][0]?"dashed ":"solid ";return/[sd]/.test(S)&&u.setAttribute("rowlines",S.trim()),""!==h&&(u=new Ct.MathNode("menclose",[u])).setAttribute("notation",h.trim()),e.arraystretch&&e.arraystretch<1&&(u=new Ct.MathNode("mstyle",[u])).setAttribute("scriptlevel","1"),u},Zn=function(e,t){-1===e.envName.indexOf("ed")&&Vn(e);var n,r=[],i=e.envName.indexOf("at")>-1?"alignat":"align",a="split"===e.envName,s=Gn(e.parser,{cols:r,addJot:!0,autoTag:a?void 0:jn(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:a?2:void 0,leqno:e.parser.settings.leqno},"display"),l=0,u={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var c="",h=0;h<t[0].body.length;h++){c+=Vt(t[0].body[h],"textord").text}n=Number(c),l=2*n}var d=!l;s.body.forEach((function(e){for(var t=1;t<e.length;t+=2){var r=Vt(e[t],"styling");Vt(r.body[0],"ordgroup").body.unshift(u)}if(d)l<e.length&&(l=e.length);else{var i=e.length/2;if(n<i)throw new o("Too many math in a row: expected "+n+", but got "+i,e[0])}}));for(var p=0;p<l;++p){var f="r",m=0;p%2===1?f="l":p>0&&d&&(m=1),r[p]={type:"align",align:f,pregap:m,postgap:0}}return s.colSeparationType=d?"align":"alignat",s};zn({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var n=(Gt(t[0])?[t[0]]:Vt(t[0],"ordgroup").body).map((function(e){var t=jt(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new o("Unknown column alignment: "+t,e)})),r={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return Gn(e.parser,r,Wn(e.envName))},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",r={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if("*"===e.envName.charAt(e.envName.length-1)){var i=e.parser;if(i.consumeSpaces(),"["===i.fetch().text){if(i.consume(),i.consumeSpaces(),n=i.fetch().text,-1==="lcr".indexOf(n))throw new o("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),r.cols=[{type:"align",align:n}]}}var a=Gn(e.parser,r,Wn(e.envName)),s=Math.max(0,...a.body.map((e=>e.length)));return a.cols=new Array(s).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t=Gn(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var n=(Gt(t[0])?[t[0]]:Vt(t[0],"ordgroup").body).map((function(e){var t=jt(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new o("Unknown column alignment: "+t,e)}));if(n.length>1)throw new o("{subarray} can contain only one column");var r={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((r=Gn(e.parser,r,"script")).body.length>0&&r.body[0].length>1)throw new o("{subarray} can contain only one column");return r},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t=Gn(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Wn(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Zn,htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){h.contains(["gather","gather*"],e.envName)&&Vn(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:jn(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Gn(e.parser,t,"display")},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Zn,htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){Vn(e);var t={autoTag:jn(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Gn(e.parser,t,"display")},htmlBuilder:Xn,mathmlBuilder:$n}),zn({type:"array",names:["CD"],props:{numArgs:0},handler:e=>(Vn(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if("&"!==n&&"\\\\"!==n){if("\\end"===n){0===t[t.length-1].length&&t.pop();break}throw new o("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var r,i,a=[],s=[a],l=0;l<t.length;l++){for(var u=t[l],c={type:"styling",body:[],mode:"math",style:"display"},h=0;h<u.length;h++)if(tn(u[h])){a.push(c);var d=jt(u[h+=1]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(d)>-1);else{if(!("<>AV".indexOf(d)>-1))throw new o('Expected one of "<>AV=|." after @',u[h]);for(var f=0;f<2;f++){for(var m=!0,g=h+1;g<u.length;g++){if(i=d,("mathord"===(r=u[g]).type||"atom"===r.type)&&r.text===i){m=!1,h=g;break}if(tn(u[g]))throw new o("Missing a "+d+" character to complete a CD arrow.",u[g]);p[f].body.push(u[g])}if(m)throw new o("Missing a "+d+" character to complete a CD arrow.",u[h])}}var v={type:"styling",body:[nn(d,p,e)],mode:"math",style:"display"};a.push(v),c={type:"styling",body:[],mode:"math",style:"display"}}else c.body.push(u[h]);l%2===0?a.push(c):a.shift(),a=[],s.push(a)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}(e.parser)),htmlBuilder:Xn,mathmlBuilder:$n}),Hn("\\nonumber","\\gdef\\@eqnsw{0}"),Hn("\\notag","\\nonumber"),st({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new o(e.funcName+" valid only within array environment")}});var Jn=Ln;st({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];if("ordgroup"!==i.type)throw new o("Invalid environment name",i);for(var a="",s=0;s<i.body.length;++s)a+=Vt(i.body[s],"textord").text;if("\\begin"===r){if(!Jn.hasOwnProperty(a))throw new o("No such environment: "+a,i);var l=Jn[a],{args:u,optArgs:c}=n.parseArguments("\\begin{"+a+"}",l),h={mode:n.mode,envName:a,parser:n},d=l.handler(h,u,c);n.expect("\\end",!1);var p=n.nextToken,f=Vt(n.parseFunction(),"environment");if(f.name!==a)throw new o("Mismatch: \\begin{"+a+"} matched by \\end{"+f.name+"}",p);return d}return{type:"environment",mode:n.mode,name:a,nameGroup:i}}});var Kn=(e,t)=>{var n=e.font,r=t.withFont(n);return St(e.body,r)},Qn=(e,t)=>{var n=e.font,r=t.withFont(n);return Ft(e.body,r)},er={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};st({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=ut(t[0]),a=r;return a in er&&(a=er[a]),{type:"font",mode:n.mode,font:a.slice(1),body:i}},htmlBuilder:Kn,mathmlBuilder:Qn}),st({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:n}=e,r=t[0],i=h.isCharacterBox(r);return{type:"mclass",mode:n.mode,mclass:Qt(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}}),st({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r,breakOnTokenText:i}=e,{mode:a}=n,o=n.parseExpression(!0,i);return{type:"font",mode:a,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:o}}},htmlBuilder:Kn,mathmlBuilder:Qn});var tr=(e,t)=>{var n=t;return"display"===e?n=n.id>=_.SCRIPT.id?n.text():_.DISPLAY:"text"===e&&n.size===_.DISPLAY.size?n=_.TEXT:"script"===e?n=_.SCRIPT:"scriptscript"===e&&(n=_.SCRIPTSCRIPT),n},nr=(e,t)=>{var n,r=tr(e.size,t.style),i=r.fracNum(),a=r.fracDen();n=t.havingStyle(i);var o=St(e.numer,n,t);if(e.continued){var s=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;o.height=o.height<s?s:o.height,o.depth=o.depth<l?l:o.depth}n=t.havingStyle(a);var u,c,h,d,p,f,m,g,v,y,x=St(e.denom,n,t);if(e.hasBarLine?(e.barSize?(c=q(e.barSize,t),u=Ke.makeLineSpan("frac-line",t,c)):u=Ke.makeLineSpan("frac-line",t),c=u.height,h=u.height):(u=null,c=0,h=t.fontMetrics().defaultRuleThickness),r.size===_.DISPLAY.size||"display"===e.size?(d=t.fontMetrics().num1,p=c>0?3*h:7*h,f=t.fontMetrics().denom1):(c>0?(d=t.fontMetrics().num2,p=h):(d=t.fontMetrics().num3,p=3*h),f=t.fontMetrics().denom2),u){var b=t.fontMetrics().axisHeight;d-o.depth-(b+.5*c)<p&&(d+=p-(d-o.depth-(b+.5*c))),b-.5*c-(x.height-f)<p&&(f+=p-(b-.5*c-(x.height-f)));var w=-(b-.5*c);m=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:x,shift:f},{type:"elem",elem:u,shift:w},{type:"elem",elem:o,shift:-d}]},t)}else{var S=d-o.depth-(x.height-f);S<p&&(d+=.5*(p-S),f+=.5*(p-S)),m=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:x,shift:f},{type:"elem",elem:o,shift:-d}]},t)}return n=t.havingStyle(r),m.height*=n.sizeMultiplier/t.sizeMultiplier,m.depth*=n.sizeMultiplier/t.sizeMultiplier,g=r.size===_.DISPLAY.size?t.fontMetrics().delim1:r.size===_.SCRIPTSCRIPT.size?t.havingStyle(_.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,v=null==e.leftDelim?wt(t,["mopen"]):Rn.customSizedDelim(e.leftDelim,g,!0,t.havingStyle(r),e.mode,["mopen"]),y=e.continued?Ke.makeSpan([]):null==e.rightDelim?wt(t,["mclose"]):Rn.customSizedDelim(e.rightDelim,g,!0,t.havingStyle(r),e.mode,["mclose"]),Ke.makeSpan(["mord"].concat(n.sizingClasses(t)),[v,Ke.makeSpan(["mfrac"],[m]),y],t)},rr=(e,t)=>{var n=new Ct.MathNode("mfrac",[Ft(e.numer,t),Ft(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var r=q(e.barSize,t);n.setAttribute("linethickness",V(r))}}else n.setAttribute("linethickness","0px");var i=tr(e.size,t.style);if(i.size!==t.style.size){n=new Ct.MathNode("mstyle",[n]);var a=i.size===_.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",a),n.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var o=[];if(null!=e.leftDelim){var s=new Ct.MathNode("mo",[new Ct.TextNode(e.leftDelim.replace("\\",""))]);s.setAttribute("fence","true"),o.push(s)}if(o.push(n),null!=e.rightDelim){var l=new Ct.MathNode("mo",[new Ct.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return Nt(o)}return n};st({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var n,{parser:r,funcName:i}=e,a=t[0],o=t[1],s=null,l=null,u="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,s="(",l=")";break;case"\\\\bracefrac":n=!1,s="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,s="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text"}return{type:"genfrac",mode:r.mode,continued:!1,numer:a,denom:o,hasBarLine:n,leftDelim:s,rightDelim:l,size:u,barSize:null}},htmlBuilder:nr,mathmlBuilder:rr}),st({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],a=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:i,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),st({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var t,{parser:n,funcName:r,token:i}=e;switch(r){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:t,token:i}}});var ir=["display","text","script","scriptscript"],ar=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};st({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var n,{parser:r}=e,i=t[4],a=t[5],o=ut(t[0]),s="atom"===o.type&&"open"===o.family?ar(o.text):null,l=ut(t[1]),u="atom"===l.type&&"close"===l.family?ar(l.text):null,c=Vt(t[2],"size"),h=null;n=!!c.isBlank||(h=c.value).number>0;var d="auto",p=t[3];if("ordgroup"===p.type){if(p.body.length>0){var f=Vt(p.body[0],"textord");d=ir[Number(f.text)]}}else p=Vt(p,"textord"),d=ir[Number(p.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:a,continued:!1,hasBarLine:n,barSize:h,leftDelim:s,rightDelim:u,size:d}},htmlBuilder:nr,mathmlBuilder:rr}),st({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:n,funcName:r,token:i}=e;return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Vt(t[0],"size").value,token:i}}}),st({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0],a=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Vt(t[1],"infix").size),o=t[2],s=a.number>0;return{type:"genfrac",mode:n.mode,numer:i,denom:o,continued:!1,hasBarLine:s,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:nr,mathmlBuilder:rr});var or=(e,t)=>{var n,r,i=t.style;"supsub"===e.type?(n=e.sup?St(e.sup,t.havingStyle(i.sup()),t):St(e.sub,t.havingStyle(i.sub()),t),r=Vt(e.base,"horizBrace")):r=Vt(e,"horizBrace");var a,o=St(r.base,t.havingBaseStyle(_.DISPLAY)),s=qt(r,t);if(r.isOver?(a=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:s}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(a=Ke.makeVList({positionType:"bottom",positionData:o.depth+.1+s.height,children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:o}]},t)).children[0].children[0].children[0].classes.push("svg-align"),n){var l=Ke.makeSpan(["mord",r.isOver?"mover":"munder"],[a],t);a=r.isOver?Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):Ke.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return Ke.makeSpan(["mord",r.isOver?"mover":"munder"],[a],t)};st({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:n,funcName:r}=e;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:or,mathmlBuilder:(e,t)=>{var n=Ht(e.label);return new Ct.MathNode(e.isOver?"mover":"munder",[Ft(e.base,t),n])}}),st({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[1],i=Vt(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:ct(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var n=gt(e.body,t,!1);return Ke.makeAnchor(e.href,[],n,t)},mathmlBuilder:(e,t)=>{var n=It(e.body,t);return n instanceof At||(n=new At("mrow",[n])),n.setAttribute("href",e.href),n}}),st({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=Vt(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],a=0;a<r.length;a++){var o=r[a];"~"===o&&(o="\\textasciitilde"),i.push({type:"textord",mode:"text",text:o})}var s={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:ct(s)}}}),st({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:n}=e;return{type:"hbox",mode:n.mode,body:ct(t[0])}},htmlBuilder(e,t){var n=gt(e.body,t,!1);return Ke.makeFragment(n)},mathmlBuilder:(e,t)=>new Ct.MathNode("mrow",kt(e.body,t))}),st({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var n,{parser:r,funcName:i,token:a}=e,s=Vt(t[0],"raw").string,l=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var u={};switch(i){case"\\htmlClass":u.class=s,n={command:"\\htmlClass",class:s};break;case"\\htmlId":u.id=s,n={command:"\\htmlId",id:s};break;case"\\htmlStyle":u.style=s,n={command:"\\htmlStyle",style:s};break;case"\\htmlData":for(var c=s.split(","),h=0;h<c.length;h++){var d=c[h].split("=");if(2!==d.length)throw new o("Error parsing key-value for \\htmlData");u["data-"+d[0].trim()]=d[1].trim()}n={command:"\\htmlData",attributes:u};break;default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(n)?{type:"html",mode:r.mode,attributes:u,body:ct(l)}:r.formatUnsupportedCmd(i)},htmlBuilder:(e,t)=>{var n=gt(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push(...e.attributes.class.trim().split(/\s+/));var i=Ke.makeSpan(r,n,t);for(var a in e.attributes)"class"!==a&&e.attributes.hasOwnProperty(a)&&i.setAttribute(a,e.attributes[a]);return i},mathmlBuilder:(e,t)=>It(e.body,t)}),st({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"htmlmathml",mode:n.mode,html:ct(t[0]),mathml:ct(t[1])}},htmlBuilder:(e,t)=>{var n=gt(e.html,t,!1);return Ke.makeFragment(n)},mathmlBuilder:(e,t)=>It(e.mathml,t)});var sr=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new o("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!H(n))throw new o("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};st({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,n)=>{var{parser:r}=e,i={number:0,unit:"em"},a={number:.9,unit:"em"},s={number:0,unit:"em"},l="";if(n[0])for(var u=Vt(n[0],"raw").string.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(2===h.length){var d=h[1].trim();switch(h[0].trim()){case"alt":l=d;break;case"width":i=sr(d);break;case"height":a=sr(d);break;case"totalheight":s=sr(d);break;default:throw new o("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var p=Vt(t[0],"url").url;return""===l&&(l=(l=(l=p).replace(/^.*[\\/]/,"")).substring(0,l.lastIndexOf("."))),r.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:r.mode,alt:l,width:i,height:a,totalheight:s,src:p}:r.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var n=q(e.height,t),r=0;e.totalheight.number>0&&(r=q(e.totalheight,t)-n);var i=0;e.width.number>0&&(i=q(e.width,t));var a={height:V(n+r)};i>0&&(a.width=V(i)),r>0&&(a.verticalAlign=V(-r));var o=new Z(e.src,e.alt,a);return o.height=n,o.depth=r,o},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=q(e.height,t),i=0;if(e.totalheight.number>0&&(i=q(e.totalheight,t)-r,n.setAttribute("valign",V(-i))),n.setAttribute("height",V(r+i)),e.width.number>0){var a=q(e.width,t);n.setAttribute("width",V(a))}return n.setAttribute("src",e.src),n}}),st({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=Vt(t[0],"size");if(n.settings.strict){var a="m"===r[1],o="mu"===i.value.unit;a?(o||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):o&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:(e,t)=>Ke.makeGlue(e.dimension,t),mathmlBuilder(e,t){var n=q(e.dimension,t);return new Ct.SpaceNode(n)}}),st({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:(e,t)=>{var n;"clap"===e.alignment?(n=Ke.makeSpan([],[St(e.body,t)]),n=Ke.makeSpan(["inner"],[n],t)):n=Ke.makeSpan(["inner"],[St(e.body,t)]);var r=Ke.makeSpan(["fix"],[]),i=Ke.makeSpan([e.alignment],[n,r],t),a=Ke.makeSpan(["strut"]);return a.style.height=V(i.height+i.depth),i.depth&&(a.style.verticalAlign=V(-i.depth)),i.children.unshift(a),i=Ke.makeSpan(["thinbox"],[i],t),Ke.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Ft(e.body,t)]);if("rlap"!==e.alignment){var r="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),st({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:n,parser:r}=e,i=r.mode;r.switchMode("math");var a="\\("===n?"\\)":"$",o=r.parseExpression(!1,a);return r.expect(a),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:o}}}),st({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new o("Mismatched "+e.funcName)}});var lr=(e,t)=>{switch(t.style.size){case _.DISPLAY.size:return e.display;case _.TEXT.size:return e.text;case _.SCRIPT.size:return e.script;case _.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};st({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:n}=e;return{type:"mathchoice",mode:n.mode,display:ct(t[0]),text:ct(t[1]),script:ct(t[2]),scriptscript:ct(t[3])}},htmlBuilder:(e,t)=>{var n=lr(e,t),r=gt(n,t,!1);return Ke.makeFragment(r)},mathmlBuilder:(e,t)=>{var n=lr(e,t);return It(n,t)}});var ur=(e,t,n,r,i,a,o)=>{e=Ke.makeSpan([],[e]);var s,l,u,c=n&&h.isCharacterBox(n);if(t){var d=St(t,r.havingStyle(i.sup()),r);l={elem:d,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-d.depth)}}if(n){var p=St(n,r.havingStyle(i.sub()),r);s={elem:p,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-p.height)}}if(l&&s){var f=r.fontMetrics().bigOpSpacing5+s.elem.height+s.elem.depth+s.kern+e.depth+o;u=Ke.makeVList({positionType:"bottom",positionData:f,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:V(-a)},{type:"kern",size:s.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:V(a)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(s){var m=e.height-o;u=Ke.makeVList({positionType:"top",positionData:m,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:s.elem,marginLeft:V(-a)},{type:"kern",size:s.kern},{type:"elem",elem:e}]},r)}else{if(!l)return e;var g=e.depth+o;u=Ke.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:V(a)},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}var v=[u];if(s&&0!==a&&!c){var y=Ke.makeSpan(["mspace"],[],r);y.style.marginRight=V(a),v.unshift(y)}return Ke.makeSpan(["mop","op-limits"],v,r)},cr=["\\smallint"],hr=(e,t)=>{var n,r,i,a=!1;"supsub"===e.type?(n=e.sup,r=e.sub,i=Vt(e.base,"op"),a=!0):i=Vt(e,"op");var o,s=t.style,l=!1;if(s.size===_.DISPLAY.size&&i.symbol&&!h.contains(cr,i.name)&&(l=!0),i.symbol){var u=l?"Size2-Regular":"Size1-Regular",c="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(c=i.name.slice(1),i.name="oiint"===c?"\\iint":"\\iiint"),o=Ke.makeSymbol(i.name,u,"math",t,["mop","op-symbol",l?"large-op":"small-op"]),c.length>0){var d=o.italic,p=Ke.staticSvg(c+"Size"+(l?"2":"1"),t);o=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:p,shift:l?.08:0}]},t),i.name="\\"+c,o.classes.unshift("mop"),o.italic=d}}else if(i.body){var f=gt(i.body,t,!0);1===f.length&&f[0]instanceof K?(o=f[0]).classes[0]="mop":o=Ke.makeSpan(["mop"],f,t)}else{for(var m=[],g=1;g<i.name.length;g++)m.push(Ke.mathsym(i.name[g],i.mode,t));o=Ke.makeSpan(["mop"],m,t)}var v=0,y=0;return(o instanceof K||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(v=(o.height-o.depth)/2-t.fontMetrics().axisHeight,y=o.italic),a?ur(o,n,r,t,s,y,v):(v&&(o.style.position="relative",o.style.top=V(v)),o)},dr=(e,t)=>{var n;if(e.symbol)n=new At("mo",[Dt(e.name,e.mode)]),h.contains(cr,e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new At("mo",kt(e.body,t));else{n=new At("mi",[new Tt(e.name.slice(1))]);var r=new At("mo",[Dt("\u2061","text")]);n=e.parentIsSupSub?new At("mrow",[n,r]):Et([n,r])}return n},pr={"\u220f":"\\prod","\u2210":"\\coprod","\u2211":"\\sum","\u22c0":"\\bigwedge","\u22c1":"\\bigvee","\u22c2":"\\bigcap","\u22c3":"\\bigcup","\u2a00":"\\bigodot","\u2a01":"\\bigoplus","\u2a02":"\\bigotimes","\u2a04":"\\biguplus","\u2a06":"\\bigsqcup"};st({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","\u220f","\u2210","\u2211","\u22c0","\u22c1","\u22c2","\u22c3","\u2a00","\u2a01","\u2a02","\u2a04","\u2a06"],props:{numArgs:0},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=r;return 1===i.length&&(i=pr[i]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:hr,mathmlBuilder:dr}),st({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ct(r)}},htmlBuilder:hr,mathmlBuilder:dr});var fr={"\u222b":"\\int","\u222c":"\\iint","\u222d":"\\iiint","\u222e":"\\oint","\u222f":"\\oiint","\u2230":"\\oiiint"};st({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:hr,mathmlBuilder:dr}),st({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:hr,mathmlBuilder:dr}),st({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","\u222b","\u222c","\u222d","\u222e","\u222f","\u2230"],props:{numArgs:0},handler(e){var{parser:t,funcName:n}=e,r=n;return 1===r.length&&(r=fr[r]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:hr,mathmlBuilder:dr});var mr=(e,t)=>{var n,r,i,a,o=!1;if("supsub"===e.type?(n=e.sup,r=e.sub,i=Vt(e.base,"operatorname"),o=!0):i=Vt(e,"operatorname"),i.body.length>0){for(var s=i.body.map((e=>{var t=e.text;return"string"===typeof t?{type:"textord",mode:e.mode,text:t}:e})),l=gt(s,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof K&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=Ke.makeSpan(["mop"],l,t)}else a=Ke.makeSpan(["mop"],[],t);return o?ur(a,n,r,t,t.style,0,0):a};function gr(e,t,n){for(var r=gt(e,t,!1),i=t.sizeMultiplier/n.sizeMultiplier,a=0;a<r.length;a++){var o=r[a].classes.indexOf("sizing");o<0?Array.prototype.push.apply(r[a].classes,t.sizingClasses(n)):r[a].classes[o+1]==="reset-size"+t.size&&(r[a].classes[o+1]="reset-size"+n.size),r[a].height*=i,r[a].depth*=i}return Ke.makeFragment(r)}st({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:n,funcName:r}=e,i=t[0];return{type:"operatorname",mode:n.mode,body:ct(i),alwaysHandleSupSub:"\\operatornamewithlimits"===r,limits:!1,parentIsSupSub:!1}},htmlBuilder:mr,mathmlBuilder:(e,t)=>{for(var n=kt(e.body,t.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var a=n[i];if(a instanceof Ct.SpaceNode);else if(a instanceof Ct.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var o=a.children[0];1===a.children.length&&o instanceof Ct.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var s=n.map((e=>e.toText())).join("");n=[new Ct.TextNode(s)]}var l=new Ct.MathNode("mi",n);l.setAttribute("mathvariant","normal");var u=new Ct.MathNode("mo",[Dt("\u2061","text")]);return e.parentIsSupSub?new Ct.MathNode("mrow",[l,u]):Ct.newDocumentFragment([l,u])}}),Hn("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),lt({type:"ordgroup",htmlBuilder:(e,t)=>e.semisimple?Ke.makeFragment(gt(e.body,t,!1)):Ke.makeSpan(["mord"],gt(e.body,t,!0),t),mathmlBuilder:(e,t)=>It(e.body,t,!0)}),st({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:n}=e,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder(e,t){var n=St(e.body,t.havingCrampedStyle()),r=Ke.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,a=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},t);return Ke.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("\u203e")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("mover",[Ft(e.body,t),n]);return r.setAttribute("accent","true"),r}}),st({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"phantom",mode:n.mode,body:ct(r)}},htmlBuilder:(e,t)=>{var n=gt(e.body,t.withPhantom(),!1);return Ke.makeFragment(n)},mathmlBuilder:(e,t)=>{var n=kt(e.body,t);return new Ct.MathNode("mphantom",n)}}),st({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=Ke.makeSpan([],[St(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),Ke.makeSpan(["mord"],[n],t)},mathmlBuilder:(e,t)=>{var n=kt(ct(e.body),t),r=new Ct.MathNode("mphantom",n),i=new Ct.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),st({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:n}=e,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:(e,t)=>{var n=Ke.makeSpan(["inner"],[St(e.body,t.withPhantom())]),r=Ke.makeSpan(["fix"],[]);return Ke.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:(e,t)=>{var n=kt(ct(e.body),t),r=new Ct.MathNode("mphantom",n),i=new Ct.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}}),st({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:n}=e,r=Vt(t[0],"size").value,i=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder(e,t){var n=St(e.body,t),r=q(e.dy,t);return Ke.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mpadded",[Ft(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}}),st({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}}),st({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(e,t,n){var{parser:r}=e,i=n[0],a=Vt(t[0],"size"),o=Vt(t[1],"size");return{type:"rule",mode:r.mode,shift:i&&Vt(i,"size").value,width:a.value,height:o.value}},htmlBuilder(e,t){var n=Ke.makeSpan(["mord","rule"],[],t),r=q(e.width,t),i=q(e.height,t),a=e.shift?q(e.shift,t):0;return n.style.borderRightWidth=V(r),n.style.borderTopWidth=V(i),n.style.bottom=V(a),n.width=r,n.height=i+a,n.depth=-a,n.maxFontSize=1.125*i*t.sizeMultiplier,n},mathmlBuilder(e,t){var n=q(e.width,t),r=q(e.height,t),i=e.shift?q(e.shift,t):0,a=t.color&&t.getColor()||"black",o=new Ct.MathNode("mspace");o.setAttribute("mathbackground",a),o.setAttribute("width",V(n)),o.setAttribute("height",V(r));var s=new Ct.MathNode("mpadded",[o]);return i>=0?s.setAttribute("height",V(i)):(s.setAttribute("height",V(i)),s.setAttribute("depth",V(-i))),s.setAttribute("voffset",V(i)),s}});var vr=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];st({type:"sizing",names:vr,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:n,funcName:r,parser:i}=e,a=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:vr.indexOf(r)+1,body:a}},htmlBuilder:(e,t)=>{var n=t.havingSize(e.size);return gr(e.body,n,t)},mathmlBuilder:(e,t)=>{var n=t.havingSize(e.size),r=kt(e.body,n),i=new Ct.MathNode("mstyle",r);return i.setAttribute("mathsize",V(n.sizeMultiplier)),i}}),st({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,n)=>{var{parser:r}=e,i=!1,a=!1,o=n[0]&&Vt(n[0],"ordgroup");if(o)for(var s="",l=0;l<o.body.length;++l){if("t"===(s=o.body[l].text))i=!0;else{if("b"!==s){i=!1,a=!1;break}a=!0}}else i=!0,a=!0;var u=t[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:a}},htmlBuilder:(e,t)=>{var n=Ke.makeSpan([],[St(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var a=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return Ke.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var n=new Ct.MathNode("mpadded",[Ft(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}}),st({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,n){var{parser:r}=e,i=n[0],a=t[0];return{type:"sqrt",mode:r.mode,body:a,index:i}},htmlBuilder(e,t){var n=St(e.body,t.havingCrampedStyle());0===n.height&&(n.height=t.fontMetrics().xHeight),n=Ke.wrapFragment(n,t);var r=t.fontMetrics().defaultRuleThickness,i=r;t.style.id<_.TEXT.id&&(i=t.fontMetrics().xHeight);var a=r+i/4,o=n.height+n.depth+a+r,{span:s,ruleWidth:l,advanceWidth:u}=Rn.sqrtImage(o,t),c=s.height-l;c>n.height+n.depth+a&&(a=(a+c-n.height-n.depth)/2);var h=s.height-n.height-a-l;n.style.paddingLeft=V(u);var d=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+h)},{type:"elem",elem:s},{type:"kern",size:l}]},t);if(e.index){var p=t.havingStyle(_.SCRIPTSCRIPT),f=St(e.index,p,t),m=.6*(d.height-d.depth),g=Ke.makeVList({positionType:"shift",positionData:-m,children:[{type:"elem",elem:f}]},t),v=Ke.makeSpan(["root"],[g]);return Ke.makeSpan(["mord","sqrt"],[v,d],t)}return Ke.makeSpan(["mord","sqrt"],[d],t)},mathmlBuilder(e,t){var{body:n,index:r}=e;return r?new Ct.MathNode("mroot",[Ft(n,t),Ft(r,t)]):new Ct.MathNode("msqrt",[Ft(n,t)])}});var yr={display:_.DISPLAY,text:_.TEXT,script:_.SCRIPT,scriptscript:_.SCRIPTSCRIPT};st({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:n,funcName:r,parser:i}=e,a=i.parseExpression(!0,n),o=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:o,body:a}},htmlBuilder(e,t){var n=yr[e.style],r=t.havingStyle(n).withFont("");return gr(e.body,r,t)},mathmlBuilder(e,t){var n=yr[e.style],r=t.havingStyle(n),i=kt(e.body,r),a=new Ct.MathNode("mstyle",i),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});lt({type:"supsub",htmlBuilder(e,t){var n=function(e,t){var n=e.base;return n?"op"===n.type?n.limits&&(t.style.size===_.DISPLAY.size||n.alwaysHandleSupSub)?hr:null:"operatorname"===n.type?n.alwaysHandleSupSub&&(t.style.size===_.DISPLAY.size||n.limits)?mr:null:"accent"===n.type?h.isCharacterBox(n.base)?Wt:null:"horizBrace"===n.type&&!e.sub===n.isOver?or:null:null}(e,t);if(n)return n(e,t);var r,i,a,{base:o,sup:s,sub:l}=e,u=St(o,t),c=t.fontMetrics(),d=0,p=0,f=o&&h.isCharacterBox(o);if(s){var m=t.havingStyle(t.style.sup());r=St(s,m,t),f||(d=u.height-m.fontMetrics().supDrop*m.sizeMultiplier/t.sizeMultiplier)}if(l){var g=t.havingStyle(t.style.sub());i=St(l,g,t),f||(p=u.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}a=t.style===_.DISPLAY?c.sup1:t.style.cramped?c.sup3:c.sup2;var v,y=t.sizeMultiplier,x=V(.5/c.ptPerEm/y),b=null;if(i){var w=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(u instanceof K||w)&&(b=V(-u.italic))}if(r&&i){d=Math.max(d,a,r.depth+.25*c.xHeight),p=Math.max(p,c.sub2);var S=4*c.defaultRuleThickness;if(d-r.depth-(i.height-p)<S){p=S-(d-r.depth)+i.height;var M=.8*c.xHeight-(d-r.depth);M>0&&(d+=M,p-=M)}var E=[{type:"elem",elem:i,shift:p,marginRight:x,marginLeft:b},{type:"elem",elem:r,shift:-d,marginRight:x}];v=Ke.makeVList({positionType:"individualShift",children:E},t)}else if(i){p=Math.max(p,c.sub1,i.height-.8*c.xHeight);var A=[{type:"elem",elem:i,marginLeft:b,marginRight:x}];v=Ke.makeVList({positionType:"shift",positionData:p,children:A},t)}else{if(!r)throw new Error("supsub must have either sup or sub.");d=Math.max(d,a,r.depth+.25*c.xHeight),v=Ke.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:r,marginRight:x}]},t)}var T=bt(u,"right")||"mord";return Ke.makeSpan([T],[u,Ke.makeSpan(["msupsub"],[v])],t)},mathmlBuilder(e,t){var n,r=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(r=!0,n=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var i,a=[Ft(e.base,t)];if(e.sub&&a.push(Ft(e.sub,t)),e.sup&&a.push(Ft(e.sup,t)),r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var o=e.base;i=o&&"op"===o.type&&o.limits&&t.style===_.DISPLAY||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(t.style===_.DISPLAY||o.limits)?"munderover":"msubsup"}else{var s=e.base;i=s&&"op"===s.type&&s.limits&&(t.style===_.DISPLAY||s.alwaysHandleSupSub)||s&&"operatorname"===s.type&&s.alwaysHandleSupSub&&(s.limits||t.style===_.DISPLAY)?"munder":"msub"}else{var l=e.base;i=l&&"op"===l.type&&l.limits&&(t.style===_.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===_.DISPLAY)?"mover":"msup"}return new Ct.MathNode(i,a)}}),lt({type:"atom",htmlBuilder:(e,t)=>Ke.mathsym(e.text,e.mode,t,["m"+e.family]),mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[Dt(e.text,e.mode)]);if("bin"===e.family){var r=Rt(e,t);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===e.family?n.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||n.setAttribute("stretchy","false");return n}});var xr={mi:"italic",mn:"normal",mtext:"normal"};lt({type:"mathord",htmlBuilder:(e,t)=>Ke.makeOrd(e,t,"mathord"),mathmlBuilder(e,t){var n=new Ct.MathNode("mi",[Dt(e.text,e.mode,t)]),r=Rt(e,t)||"italic";return r!==xr[n.type]&&n.setAttribute("mathvariant",r),n}}),lt({type:"textord",htmlBuilder:(e,t)=>Ke.makeOrd(e,t,"textord"),mathmlBuilder(e,t){var n,r=Dt(e.text,e.mode,t),i=Rt(e,t)||"normal";return n="text"===e.mode?new Ct.MathNode("mtext",[r]):/[0-9]/.test(e.text)?new Ct.MathNode("mn",[r]):"\\prime"===e.text?new Ct.MathNode("mo",[r]):new Ct.MathNode("mi",[r]),i!==xr[n.type]&&n.setAttribute("mathvariant",i),n}});var br={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},wr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};lt({type:"spacing",htmlBuilder(e,t){if(wr.hasOwnProperty(e.text)){var n=wr[e.text].className||"";if("text"===e.mode){var r=Ke.makeOrd(e,t,"textord");return r.classes.push(n),r}return Ke.makeSpan(["mspace",n],[Ke.mathsym(e.text,e.mode,t)],t)}if(br.hasOwnProperty(e.text))return Ke.makeSpan(["mspace",br[e.text]],[],t);throw new o('Unknown type of space "'+e.text+'"')},mathmlBuilder(e,t){if(!wr.hasOwnProperty(e.text)){if(br.hasOwnProperty(e.text))return new Ct.MathNode("mspace");throw new o('Unknown type of space "'+e.text+'"')}return new Ct.MathNode("mtext",[new Ct.TextNode("\xa0")])}});var Sr=()=>{var e=new Ct.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};lt({type:"tag",mathmlBuilder(e,t){var n=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[Sr(),new Ct.MathNode("mtd",[It(e.body,t)]),Sr(),new Ct.MathNode("mtd",[It(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var _r={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Mr={"\\textbf":"textbf","\\textmd":"textmd"},Er={"\\textit":"textit","\\textup":"textup"},Ar=(e,t)=>{var n=e.font;return n?_r[n]?t.withTextFontFamily(_r[n]):Mr[n]?t.withTextFontWeight(Mr[n]):"\\emph"===n?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(Er[n]):t};st({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:n,funcName:r}=e,i=t[0];return{type:"text",mode:n.mode,body:ct(i),font:r}},htmlBuilder(e,t){var n=Ar(e,t),r=gt(e.body,n,!0);return Ke.makeSpan(["mord","text"],r,n)},mathmlBuilder(e,t){var n=Ar(e,t);return It(e.body,n)}}),st({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:n}=e;return{type:"underline",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=St(e.body,t),r=Ke.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,a=Ke.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},t);return Ke.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("\u203e")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("munder",[Ft(e.body,t),n]);return r.setAttribute("accentunder","true"),r}}),st({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:n}=e;return{type:"vcenter",mode:n.mode,body:t[0]}},htmlBuilder(e,t){var n=St(e.body,t),r=t.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return Ke.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},t)},mathmlBuilder:(e,t)=>new Ct.MathNode("mpadded",[Ft(e.body,t)],["vcenter"])}),st({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,n){throw new o("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var n=Tr(e),r=[],i=t.havingStyle(t.style.text()),a=0;a<n.length;a++){var o=n[a];"~"===o&&(o="\\textasciitilde"),r.push(Ke.makeSymbol(o,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return Ke.makeSpan(["mord","text"].concat(i.sizingClasses(t)),Ke.tryCombineChars(r),i)},mathmlBuilder(e,t){var n=new Ct.TextNode(Tr(e)),r=new Ct.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var Tr=e=>e.body.replace(/ /g,e.star?"\u2423":"\xa0"),Cr=it,Dr="[ \r\n\t]",Nr="(\\\\[a-zA-Z@]+)"+Dr+"*",Rr="[\u0300-\u036f]",kr=new RegExp(Rr+"+$"),Ir="("+Dr+"+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-\u2027\u202a-\ud7ff\uf900-\uffff]"+Rr+"*|[\ud800-\udbff][\udc00-\udfff]"+Rr+"*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|"+Nr+"|\\\\[^\ud800-\udfff])";class Fr{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Ir,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new a("EOF",new i(this,t,t));var n=this.tokenRegex.exec(e);if(null===n||n.index!==t)throw new o("Unexpected character: '"+e[t]+"'",new a(e[t],new i(this,t,t+1)));var r=n[6]||n[3]||(n[2]?"\\ ":" ");if(14===this.catcodes[r]){var s=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===s?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new a(r,new i(this,t,this.tokenRegex.lastIndex))}}class Pr{constructor(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(0===this.undefStack.length)throw new o("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(null==e[t]?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}null==t?delete this.current[e]:this.current[e]=t}}var Or=Un;Hn("\\noexpand",(function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}})),Hn("\\expandafter",(function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}})),Hn("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),Hn("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),Hn("\\@ifnextchar",(function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return 1===t[0].length&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),Hn("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Hn("\\TextOrMath",(function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));var Br={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Hn("\\char",(function(e){var t,n=e.popToken(),r="";if("'"===n.text)t=8,n=e.popToken();else if('"'===n.text)t=16,n=e.popToken();else if("`"===n.text)if("\\"===(n=e.popToken()).text[0])r=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new o("\\char` missing argument");r=n.text.charCodeAt(0)}else t=10;if(t){if(null==(r=Br[n.text])||r>=t)throw new o("Invalid base-"+t+" digit "+n.text);for(var i;null!=(i=Br[e.future().text])&&i<t;)r*=t,r+=i,e.popToken()}return"\\@char{"+r+"}"}));var Lr=(e,t,n)=>{var r=e.consumeArg().tokens;if(1!==r.length)throw new o("\\newcommand's first argument must be a macro name");var i=r[0].text,a=e.isDefined(i);if(a&&!t)throw new o("\\newcommand{"+i+"} attempting to redefine "+i+"; use \\renewcommand");if(!a&&!n)throw new o("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var s=0;if(1===(r=e.consumeArg().tokens).length&&"["===r[0].text){for(var l="",u=e.expandNextToken();"]"!==u.text&&"EOF"!==u.text;)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new o("Invalid number of arguments: "+l);s=parseInt(l),r=e.consumeArg().tokens}return e.macros.set(i,{tokens:r,numArgs:s}),""};Hn("\\newcommand",(e=>Lr(e,!1,!0))),Hn("\\renewcommand",(e=>Lr(e,!0,!1))),Hn("\\providecommand",(e=>Lr(e,!0,!0))),Hn("\\message",(e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map((e=>e.text)).join("")),""})),Hn("\\errmessage",(e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map((e=>e.text)).join("")),""})),Hn("\\show",(e=>{var t=e.popToken(),n=t.text;return console.log(t,e.macros.get(n),Cr[n],ae.math[n],ae.text[n]),""})),Hn("\\bgroup","{"),Hn("\\egroup","}"),Hn("~","\\nobreakspace"),Hn("\\lq","`"),Hn("\\rq","'"),Hn("\\aa","\\r a"),Hn("\\AA","\\r A"),Hn("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`\xa9}"),Hn("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Hn("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`\xae}"),Hn("\u212c","\\mathscr{B}"),Hn("\u2130","\\mathscr{E}"),Hn("\u2131","\\mathscr{F}"),Hn("\u210b","\\mathscr{H}"),Hn("\u2110","\\mathscr{I}"),Hn("\u2112","\\mathscr{L}"),Hn("\u2133","\\mathscr{M}"),Hn("\u211b","\\mathscr{R}"),Hn("\u212d","\\mathfrak{C}"),Hn("\u210c","\\mathfrak{H}"),Hn("\u2128","\\mathfrak{Z}"),Hn("\\Bbbk","\\Bbb{k}"),Hn("\xb7","\\cdotp"),Hn("\\llap","\\mathllap{\\textrm{#1}}"),Hn("\\rlap","\\mathrlap{\\textrm{#1}}"),Hn("\\clap","\\mathclap{\\textrm{#1}}"),Hn("\\mathstrut","\\vphantom{(}"),Hn("\\underbar","\\underline{\\text{#1}}"),Hn("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Hn("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`\u2260}}"),Hn("\\ne","\\neq"),Hn("\u2260","\\neq"),Hn("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`\u2209}}"),Hn("\u2209","\\notin"),Hn("\u2258","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`\u2258}}"),Hn("\u2259","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`\u2258}}"),Hn("\u225a","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`\u225a}}"),Hn("\u225b","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`\u225b}}"),Hn("\u225d","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`\u225d}}"),Hn("\u225e","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`\u225e}}"),Hn("\u225f","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`\u225f}}"),Hn("\u27c2","\\perp"),Hn("\u203c","\\mathclose{!\\mkern-0.8mu!}"),Hn("\u220c","\\notni"),Hn("\u231c","\\ulcorner"),Hn("\u231d","\\urcorner"),Hn("\u231e","\\llcorner"),Hn("\u231f","\\lrcorner"),Hn("\xa9","\\copyright"),Hn("\xae","\\textregistered"),Hn("\ufe0f","\\textregistered"),Hn("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Hn("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Hn("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Hn("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Hn("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),Hn("\u22ee","\\vdots"),Hn("\\varGamma","\\mathit{\\Gamma}"),Hn("\\varDelta","\\mathit{\\Delta}"),Hn("\\varTheta","\\mathit{\\Theta}"),Hn("\\varLambda","\\mathit{\\Lambda}"),Hn("\\varXi","\\mathit{\\Xi}"),Hn("\\varPi","\\mathit{\\Pi}"),Hn("\\varSigma","\\mathit{\\Sigma}"),Hn("\\varUpsilon","\\mathit{\\Upsilon}"),Hn("\\varPhi","\\mathit{\\Phi}"),Hn("\\varPsi","\\mathit{\\Psi}"),Hn("\\varOmega","\\mathit{\\Omega}"),Hn("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Hn("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),Hn("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Hn("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Hn("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Hn("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var zr={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Hn("\\dots",(function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in zr?t=zr[n]:("\\not"===n.slice(0,4)||n in ae.math&&h.contains(["bin","rel"],ae.math[n].group))&&(t="\\dotsb"),t}));var Ur={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Hn("\\dotso",(function(e){return e.future().text in Ur?"\\ldots\\,":"\\ldots"})),Hn("\\dotsc",(function(e){var t=e.future().text;return t in Ur&&","!==t?"\\ldots\\,":"\\ldots"})),Hn("\\cdots",(function(e){return e.future().text in Ur?"\\@cdots\\,":"\\@cdots"})),Hn("\\dotsb","\\cdots"),Hn("\\dotsm","\\cdots"),Hn("\\dotsi","\\!\\cdots"),Hn("\\dotsx","\\ldots\\,"),Hn("\\DOTSI","\\relax"),Hn("\\DOTSB","\\relax"),Hn("\\DOTSX","\\relax"),Hn("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Hn("\\,","\\tmspace+{3mu}{.1667em}"),Hn("\\thinspace","\\,"),Hn("\\>","\\mskip{4mu}"),Hn("\\:","\\tmspace+{4mu}{.2222em}"),Hn("\\medspace","\\:"),Hn("\\;","\\tmspace+{5mu}{.2777em}"),Hn("\\thickspace","\\;"),Hn("\\!","\\tmspace-{3mu}{.1667em}"),Hn("\\negthinspace","\\!"),Hn("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Hn("\\negthickspace","\\tmspace-{5mu}{.277em}"),Hn("\\enspace","\\kern.5em "),Hn("\\enskip","\\hskip.5em\\relax"),Hn("\\quad","\\hskip1em\\relax"),Hn("\\qquad","\\hskip2em\\relax"),Hn("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Hn("\\tag@paren","\\tag@literal{({#1})}"),Hn("\\tag@literal",(e=>{if(e.macros.get("\\df@tag"))throw new o("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),Hn("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Hn("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Hn("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Hn("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Hn("\\newline","\\\\\\relax"),Hn("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var Hr=V(N["Main-Regular"]["T".charCodeAt(0)][1]-.7*N["Main-Regular"]["A".charCodeAt(0)][1]);Hn("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+Hr+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),Hn("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+Hr+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),Hn("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Hn("\\@hspace","\\hskip #1\\relax"),Hn("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Hn("\\ordinarycolon",":"),Hn("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Hn("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Hn("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Hn("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Hn("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Hn("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Hn("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Hn("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Hn("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Hn("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Hn("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Hn("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Hn("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Hn("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Hn("\u2237","\\dblcolon"),Hn("\u2239","\\eqcolon"),Hn("\u2254","\\coloneqq"),Hn("\u2255","\\eqqcolon"),Hn("\u2a74","\\Coloneqq"),Hn("\\ratio","\\vcentcolon"),Hn("\\coloncolon","\\dblcolon"),Hn("\\colonequals","\\coloneqq"),Hn("\\coloncolonequals","\\Coloneqq"),Hn("\\equalscolon","\\eqqcolon"),Hn("\\equalscoloncolon","\\Eqqcolon"),Hn("\\colonminus","\\coloneq"),Hn("\\coloncolonminus","\\Coloneq"),Hn("\\minuscolon","\\eqcolon"),Hn("\\minuscoloncolon","\\Eqcolon"),Hn("\\coloncolonapprox","\\Colonapprox"),Hn("\\coloncolonsim","\\Colonsim"),Hn("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Hn("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Hn("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Hn("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Hn("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`\u220c}}"),Hn("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Hn("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Hn("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Hn("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Hn("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Hn("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Hn("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Hn("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Hn("\\gvertneqq","\\html@mathml{\\@gvertneqq}{\u2269}"),Hn("\\lvertneqq","\\html@mathml{\\@lvertneqq}{\u2268}"),Hn("\\ngeqq","\\html@mathml{\\@ngeqq}{\u2271}"),Hn("\\ngeqslant","\\html@mathml{\\@ngeqslant}{\u2271}"),Hn("\\nleqq","\\html@mathml{\\@nleqq}{\u2270}"),Hn("\\nleqslant","\\html@mathml{\\@nleqslant}{\u2270}"),Hn("\\nshortmid","\\html@mathml{\\@nshortmid}{\u2224}"),Hn("\\nshortparallel","\\html@mathml{\\@nshortparallel}{\u2226}"),Hn("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{\u2288}"),Hn("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{\u2289}"),Hn("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{\u228a}"),Hn("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{\u2acb}"),Hn("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{\u228b}"),Hn("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{\u2acc}"),Hn("\\imath","\\html@mathml{\\@imath}{\u0131}"),Hn("\\jmath","\\html@mathml{\\@jmath}{\u0237}"),Hn("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`\u27e6}}"),Hn("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`\u27e7}}"),Hn("\u27e6","\\llbracket"),Hn("\u27e7","\\rrbracket"),Hn("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`\u2983}}"),Hn("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`\u2984}}"),Hn("\u2983","\\lBrace"),Hn("\u2984","\\rBrace"),Hn("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`\u29b5}}"),Hn("\u29b5","\\minuso"),Hn("\\darr","\\downarrow"),Hn("\\dArr","\\Downarrow"),Hn("\\Darr","\\Downarrow"),Hn("\\lang","\\langle"),Hn("\\rang","\\rangle"),Hn("\\uarr","\\uparrow"),Hn("\\uArr","\\Uparrow"),Hn("\\Uarr","\\Uparrow"),Hn("\\N","\\mathbb{N}"),Hn("\\R","\\mathbb{R}"),Hn("\\Z","\\mathbb{Z}"),Hn("\\alef","\\aleph"),Hn("\\alefsym","\\aleph"),Hn("\\Alpha","\\mathrm{A}"),Hn("\\Beta","\\mathrm{B}"),Hn("\\bull","\\bullet"),Hn("\\Chi","\\mathrm{X}"),Hn("\\clubs","\\clubsuit"),Hn("\\cnums","\\mathbb{C}"),Hn("\\Complex","\\mathbb{C}"),Hn("\\Dagger","\\ddagger"),Hn("\\diamonds","\\diamondsuit"),Hn("\\empty","\\emptyset"),Hn("\\Epsilon","\\mathrm{E}"),Hn("\\Eta","\\mathrm{H}"),Hn("\\exist","\\exists"),Hn("\\harr","\\leftrightarrow"),Hn("\\hArr","\\Leftrightarrow"),Hn("\\Harr","\\Leftrightarrow"),Hn("\\hearts","\\heartsuit"),Hn("\\image","\\Im"),Hn("\\infin","\\infty"),Hn("\\Iota","\\mathrm{I}"),Hn("\\isin","\\in"),Hn("\\Kappa","\\mathrm{K}"),Hn("\\larr","\\leftarrow"),Hn("\\lArr","\\Leftarrow"),Hn("\\Larr","\\Leftarrow"),Hn("\\lrarr","\\leftrightarrow"),Hn("\\lrArr","\\Leftrightarrow"),Hn("\\Lrarr","\\Leftrightarrow"),Hn("\\Mu","\\mathrm{M}"),Hn("\\natnums","\\mathbb{N}"),Hn("\\Nu","\\mathrm{N}"),Hn("\\Omicron","\\mathrm{O}"),Hn("\\plusmn","\\pm"),Hn("\\rarr","\\rightarrow"),Hn("\\rArr","\\Rightarrow"),Hn("\\Rarr","\\Rightarrow"),Hn("\\real","\\Re"),Hn("\\reals","\\mathbb{R}"),Hn("\\Reals","\\mathbb{R}"),Hn("\\Rho","\\mathrm{P}"),Hn("\\sdot","\\cdot"),Hn("\\sect","\\S"),Hn("\\spades","\\spadesuit"),Hn("\\sub","\\subset"),Hn("\\sube","\\subseteq"),Hn("\\supe","\\supseteq"),Hn("\\Tau","\\mathrm{T}"),Hn("\\thetasym","\\vartheta"),Hn("\\weierp","\\wp"),Hn("\\Zeta","\\mathrm{Z}"),Hn("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Hn("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Hn("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Hn("\\bra","\\mathinner{\\langle{#1}|}"),Hn("\\ket","\\mathinner{|{#1}\\rangle}"),Hn("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Hn("\\Bra","\\left\\langle#1\\right|"),Hn("\\Ket","\\left|#1\\right\\rangle");var qr=e=>t=>{var n=t.consumeArg().tokens,r=t.consumeArg().tokens,i=t.consumeArg().tokens,a=t.consumeArg().tokens,o=t.macros.get("|"),s=t.macros.get("\\|");t.macros.beginGroup();var l=t=>n=>{e&&(n.macros.set("|",o),i.length&&n.macros.set("\\|",s));var a=t;!t&&i.length&&("|"===n.future().text&&(n.popToken(),a=!0));return{tokens:a?i:r,numArgs:0}};t.macros.set("|",l(!1)),i.length&&t.macros.set("\\|",l(!0));var u=t.consumeArg().tokens,c=t.expandTokens([...a,...u,...n]);return t.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};Hn("\\bra@ket",qr(!1)),Hn("\\bra@set",qr(!0)),Hn("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),Hn("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),Hn("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),Hn("\\angln","{\\angl n}"),Hn("\\blue","\\textcolor{##6495ed}{#1}"),Hn("\\orange","\\textcolor{##ffa500}{#1}"),Hn("\\pink","\\textcolor{##ff00af}{#1}"),Hn("\\red","\\textcolor{##df0030}{#1}"),Hn("\\green","\\textcolor{##28ae7b}{#1}"),Hn("\\gray","\\textcolor{gray}{#1}"),Hn("\\purple","\\textcolor{##9d38bd}{#1}"),Hn("\\blueA","\\textcolor{##ccfaff}{#1}"),Hn("\\blueB","\\textcolor{##80f6ff}{#1}"),Hn("\\blueC","\\textcolor{##63d9ea}{#1}"),Hn("\\blueD","\\textcolor{##11accd}{#1}"),Hn("\\blueE","\\textcolor{##0c7f99}{#1}"),Hn("\\tealA","\\textcolor{##94fff5}{#1}"),Hn("\\tealB","\\textcolor{##26edd5}{#1}"),Hn("\\tealC","\\textcolor{##01d1c1}{#1}"),Hn("\\tealD","\\textcolor{##01a995}{#1}"),Hn("\\tealE","\\textcolor{##208170}{#1}"),Hn("\\greenA","\\textcolor{##b6ffb0}{#1}"),Hn("\\greenB","\\textcolor{##8af281}{#1}"),Hn("\\greenC","\\textcolor{##74cf70}{#1}"),Hn("\\greenD","\\textcolor{##1fab54}{#1}"),Hn("\\greenE","\\textcolor{##0d923f}{#1}"),Hn("\\goldA","\\textcolor{##ffd0a9}{#1}"),Hn("\\goldB","\\textcolor{##ffbb71}{#1}"),Hn("\\goldC","\\textcolor{##ff9c39}{#1}"),Hn("\\goldD","\\textcolor{##e07d10}{#1}"),Hn("\\goldE","\\textcolor{##a75a05}{#1}"),Hn("\\redA","\\textcolor{##fca9a9}{#1}"),Hn("\\redB","\\textcolor{##ff8482}{#1}"),Hn("\\redC","\\textcolor{##f9685d}{#1}"),Hn("\\redD","\\textcolor{##e84d39}{#1}"),Hn("\\redE","\\textcolor{##bc2612}{#1}"),Hn("\\maroonA","\\textcolor{##ffbde0}{#1}"),Hn("\\maroonB","\\textcolor{##ff92c6}{#1}"),Hn("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Hn("\\maroonD","\\textcolor{##ca337c}{#1}"),Hn("\\maroonE","\\textcolor{##9e034e}{#1}"),Hn("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Hn("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Hn("\\purpleC","\\textcolor{##aa87ff}{#1}"),Hn("\\purpleD","\\textcolor{##7854ab}{#1}"),Hn("\\purpleE","\\textcolor{##543b78}{#1}"),Hn("\\mintA","\\textcolor{##f5f9e8}{#1}"),Hn("\\mintB","\\textcolor{##edf2df}{#1}"),Hn("\\mintC","\\textcolor{##e0e5cc}{#1}"),Hn("\\grayA","\\textcolor{##f6f7f7}{#1}"),Hn("\\grayB","\\textcolor{##f0f1f2}{#1}"),Hn("\\grayC","\\textcolor{##e3e5e6}{#1}"),Hn("\\grayD","\\textcolor{##d6d8da}{#1}"),Hn("\\grayE","\\textcolor{##babec2}{#1}"),Hn("\\grayF","\\textcolor{##888d93}{#1}"),Hn("\\grayG","\\textcolor{##626569}{#1}"),Hn("\\grayH","\\textcolor{##3b3e40}{#1}"),Hn("\\grayI","\\textcolor{##21242c}{#1}"),Hn("\\kaBlue","\\textcolor{##314453}{#1}"),Hn("\\kaGreen","\\textcolor{##71B307}{#1}");var Vr={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class jr{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Pr(Or,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new Fr(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,r;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken(),({tokens:r,end:n}=this.consumeArg(["]"]))}else({tokens:r,start:t,end:n}=this.consumeArg());return this.pushToken(new a("EOF",n.loc)),this.pushTokens(r),t.range(n,"")}consumeSpaces(){for(;;){if(" "!==this.future().text)break;this.stack.pop()}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var r,i=this.future(),a=0,s=0;do{if(r=this.popToken(),t.push(r),"{"===r.text)++a;else if("}"===r.text){if(-1===--a)throw new o("Extra }",r)}else if("EOF"===r.text)throw new o("Unexpected end of input in a macro argument, expected '"+(e&&n?e[s]:"}")+"'",r);if(e&&n)if((0===a||1===a&&"{"===e[s])&&r.text===e[s]){if(++s===e.length){t.splice(-s,s);break}}else s=0}while(0!==a||n);return"{"===i.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:r}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new o("The length of delimiters doesn't match the number of args!");for(var n=t[0],r=0;r<n.length;r++){var i=this.popToken();if(n[r]!==i.text)throw new o("Use of the macro doesn't match its definition",i)}}for(var a=[],s=0;s<e;s++)a.push(this.consumeArg(t&&t[s+1]).tokens);return a}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new o("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),n=t.text,r=t.noexpand?null:this._getExpansion(n);if(null==r||e&&r.unexpandable){if(e&&null==r&&"\\"===n[0]&&!this.isDefined(n))throw new o("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var i=r.tokens,a=this.consumeArgs(r.numArgs,r.delimiters);if(r.numArgs)for(var s=(i=i.slice()).length-1;s>=0;--s){var l=i[s];if("#"===l.text){if(0===s)throw new o("Incomplete placeholder at end of macro body",l);if("#"===(l=i[--s]).text)i.splice(s+1,1);else{if(!/^[1-9]$/.test(l.text))throw new o("Not a valid argument number",l);i.splice(s,2,...a[+l.text-1])}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(!1===this.expandOnce()){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new a(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(!1===this.expandOnce(!0)){var r=this.stack.pop();r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(r)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t?t.map((e=>e.text)).join(""):t}_getExpansion(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var n=this.lexer.catcodes[e];if(null!=n&&13!==n)return}var r="function"===typeof t?t(this):t;if("string"===typeof r){var i=0;if(-1!==r.indexOf("#"))for(var a=r.replace(/##/g,"");-1!==a.indexOf("#"+(i+1));)++i;for(var o=new Fr(r,this.settings),s=[],l=o.lex();"EOF"!==l.text;)s.push(l),l=o.lex();return s.reverse(),{tokens:s,numArgs:i}}return r}isDefined(e){return this.macros.has(e)||Cr.hasOwnProperty(e)||ae.math.hasOwnProperty(e)||ae.text.hasOwnProperty(e)||Vr.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return null!=t?"string"===typeof t||"function"===typeof t||!t.unexpandable:Cr.hasOwnProperty(e)&&!Cr[e].primitive}}var Gr=/^[\u208a\u208b\u208c\u208d\u208e\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089\u2090\u2091\u2095\u1d62\u2c7c\u2096\u2097\u2098\u2099\u2092\u209a\u1d63\u209b\u209c\u1d64\u1d65\u2093\u1d66\u1d67\u1d68\u1d69\u1d6a]/,Wr=Object.freeze({"\u208a":"+","\u208b":"-","\u208c":"=","\u208d":"(","\u208e":")","\u2080":"0","\u2081":"1","\u2082":"2","\u2083":"3","\u2084":"4","\u2085":"5","\u2086":"6","\u2087":"7","\u2088":"8","\u2089":"9","\u2090":"a","\u2091":"e","\u2095":"h","\u1d62":"i","\u2c7c":"j","\u2096":"k","\u2097":"l","\u2098":"m","\u2099":"n","\u2092":"o","\u209a":"p","\u1d63":"r","\u209b":"s","\u209c":"t","\u1d64":"u","\u1d65":"v","\u2093":"x","\u1d66":"\u03b2","\u1d67":"\u03b3","\u1d68":"\u03c1","\u1d69":"\u03d5","\u1d6a":"\u03c7","\u207a":"+","\u207b":"-","\u207c":"=","\u207d":"(","\u207e":")","\u2070":"0","\xb9":"1","\xb2":"2","\xb3":"3","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u1d2c":"A","\u1d2e":"B","\u1d30":"D","\u1d31":"E","\u1d33":"G","\u1d34":"H","\u1d35":"I","\u1d36":"J","\u1d37":"K","\u1d38":"L","\u1d39":"M","\u1d3a":"N","\u1d3c":"O","\u1d3e":"P","\u1d3f":"R","\u1d40":"T","\u1d41":"U","\u2c7d":"V","\u1d42":"W","\u1d43":"a","\u1d47":"b","\u1d9c":"c","\u1d48":"d","\u1d49":"e","\u1da0":"f","\u1d4d":"g","\u02b0":"h","\u2071":"i","\u02b2":"j","\u1d4f":"k","\u02e1":"l","\u1d50":"m","\u207f":"n","\u1d52":"o","\u1d56":"p","\u02b3":"r","\u02e2":"s","\u1d57":"t","\u1d58":"u","\u1d5b":"v","\u02b7":"w","\u02e3":"x","\u02b8":"y","\u1dbb":"z","\u1d5d":"\u03b2","\u1d5e":"\u03b3","\u1d5f":"\u03b4","\u1d60":"\u03d5","\u1d61":"\u03c7","\u1dbf":"\u03b8"}),Xr={"\u0301":{text:"\\'",math:"\\acute"},"\u0300":{text:"\\`",math:"\\grave"},"\u0308":{text:'\\"',math:"\\ddot"},"\u0303":{text:"\\~",math:"\\tilde"},"\u0304":{text:"\\=",math:"\\bar"},"\u0306":{text:"\\u",math:"\\breve"},"\u030c":{text:"\\v",math:"\\check"},"\u0302":{text:"\\^",math:"\\hat"},"\u0307":{text:"\\.",math:"\\dot"},"\u030a":{text:"\\r",math:"\\mathring"},"\u030b":{text:"\\H"},"\u0327":{text:"\\c"}},Yr={"\xe1":"a\u0301","\xe0":"a\u0300","\xe4":"a\u0308","\u01df":"a\u0308\u0304","\xe3":"a\u0303","\u0101":"a\u0304","\u0103":"a\u0306","\u1eaf":"a\u0306\u0301","\u1eb1":"a\u0306\u0300","\u1eb5":"a\u0306\u0303","\u01ce":"a\u030c","\xe2":"a\u0302","\u1ea5":"a\u0302\u0301","\u1ea7":"a\u0302\u0300","\u1eab":"a\u0302\u0303","\u0227":"a\u0307","\u01e1":"a\u0307\u0304","\xe5":"a\u030a","\u01fb":"a\u030a\u0301","\u1e03":"b\u0307","\u0107":"c\u0301","\u1e09":"c\u0327\u0301","\u010d":"c\u030c","\u0109":"c\u0302","\u010b":"c\u0307","\xe7":"c\u0327","\u010f":"d\u030c","\u1e0b":"d\u0307","\u1e11":"d\u0327","\xe9":"e\u0301","\xe8":"e\u0300","\xeb":"e\u0308","\u1ebd":"e\u0303","\u0113":"e\u0304","\u1e17":"e\u0304\u0301","\u1e15":"e\u0304\u0300","\u0115":"e\u0306","\u1e1d":"e\u0327\u0306","\u011b":"e\u030c","\xea":"e\u0302","\u1ebf":"e\u0302\u0301","\u1ec1":"e\u0302\u0300","\u1ec5":"e\u0302\u0303","\u0117":"e\u0307","\u0229":"e\u0327","\u1e1f":"f\u0307","\u01f5":"g\u0301","\u1e21":"g\u0304","\u011f":"g\u0306","\u01e7":"g\u030c","\u011d":"g\u0302","\u0121":"g\u0307","\u0123":"g\u0327","\u1e27":"h\u0308","\u021f":"h\u030c","\u0125":"h\u0302","\u1e23":"h\u0307","\u1e29":"h\u0327","\xed":"i\u0301","\xec":"i\u0300","\xef":"i\u0308","\u1e2f":"i\u0308\u0301","\u0129":"i\u0303","\u012b":"i\u0304","\u012d":"i\u0306","\u01d0":"i\u030c","\xee":"i\u0302","\u01f0":"j\u030c","\u0135":"j\u0302","\u1e31":"k\u0301","\u01e9":"k\u030c","\u0137":"k\u0327","\u013a":"l\u0301","\u013e":"l\u030c","\u013c":"l\u0327","\u1e3f":"m\u0301","\u1e41":"m\u0307","\u0144":"n\u0301","\u01f9":"n\u0300","\xf1":"n\u0303","\u0148":"n\u030c","\u1e45":"n\u0307","\u0146":"n\u0327","\xf3":"o\u0301","\xf2":"o\u0300","\xf6":"o\u0308","\u022b":"o\u0308\u0304","\xf5":"o\u0303","\u1e4d":"o\u0303\u0301","\u1e4f":"o\u0303\u0308","\u022d":"o\u0303\u0304","\u014d":"o\u0304","\u1e53":"o\u0304\u0301","\u1e51":"o\u0304\u0300","\u014f":"o\u0306","\u01d2":"o\u030c","\xf4":"o\u0302","\u1ed1":"o\u0302\u0301","\u1ed3":"o\u0302\u0300","\u1ed7":"o\u0302\u0303","\u022f":"o\u0307","\u0231":"o\u0307\u0304","\u0151":"o\u030b","\u1e55":"p\u0301","\u1e57":"p\u0307","\u0155":"r\u0301","\u0159":"r\u030c","\u1e59":"r\u0307","\u0157":"r\u0327","\u015b":"s\u0301","\u1e65":"s\u0301\u0307","\u0161":"s\u030c","\u1e67":"s\u030c\u0307","\u015d":"s\u0302","\u1e61":"s\u0307","\u015f":"s\u0327","\u1e97":"t\u0308","\u0165":"t\u030c","\u1e6b":"t\u0307","\u0163":"t\u0327","\xfa":"u\u0301","\xf9":"u\u0300","\xfc":"u\u0308","\u01d8":"u\u0308\u0301","\u01dc":"u\u0308\u0300","\u01d6":"u\u0308\u0304","\u01da":"u\u0308\u030c","\u0169":"u\u0303","\u1e79":"u\u0303\u0301","\u016b":"u\u0304","\u1e7b":"u\u0304\u0308","\u016d":"u\u0306","\u01d4":"u\u030c","\xfb":"u\u0302","\u016f":"u\u030a","\u0171":"u\u030b","\u1e7d":"v\u0303","\u1e83":"w\u0301","\u1e81":"w\u0300","\u1e85":"w\u0308","\u0175":"w\u0302","\u1e87":"w\u0307","\u1e98":"w\u030a","\u1e8d":"x\u0308","\u1e8b":"x\u0307","\xfd":"y\u0301","\u1ef3":"y\u0300","\xff":"y\u0308","\u1ef9":"y\u0303","\u0233":"y\u0304","\u0177":"y\u0302","\u1e8f":"y\u0307","\u1e99":"y\u030a","\u017a":"z\u0301","\u017e":"z\u030c","\u1e91":"z\u0302","\u017c":"z\u0307","\xc1":"A\u0301","\xc0":"A\u0300","\xc4":"A\u0308","\u01de":"A\u0308\u0304","\xc3":"A\u0303","\u0100":"A\u0304","\u0102":"A\u0306","\u1eae":"A\u0306\u0301","\u1eb0":"A\u0306\u0300","\u1eb4":"A\u0306\u0303","\u01cd":"A\u030c","\xc2":"A\u0302","\u1ea4":"A\u0302\u0301","\u1ea6":"A\u0302\u0300","\u1eaa":"A\u0302\u0303","\u0226":"A\u0307","\u01e0":"A\u0307\u0304","\xc5":"A\u030a","\u01fa":"A\u030a\u0301","\u1e02":"B\u0307","\u0106":"C\u0301","\u1e08":"C\u0327\u0301","\u010c":"C\u030c","\u0108":"C\u0302","\u010a":"C\u0307","\xc7":"C\u0327","\u010e":"D\u030c","\u1e0a":"D\u0307","\u1e10":"D\u0327","\xc9":"E\u0301","\xc8":"E\u0300","\xcb":"E\u0308","\u1ebc":"E\u0303","\u0112":"E\u0304","\u1e16":"E\u0304\u0301","\u1e14":"E\u0304\u0300","\u0114":"E\u0306","\u1e1c":"E\u0327\u0306","\u011a":"E\u030c","\xca":"E\u0302","\u1ebe":"E\u0302\u0301","\u1ec0":"E\u0302\u0300","\u1ec4":"E\u0302\u0303","\u0116":"E\u0307","\u0228":"E\u0327","\u1e1e":"F\u0307","\u01f4":"G\u0301","\u1e20":"G\u0304","\u011e":"G\u0306","\u01e6":"G\u030c","\u011c":"G\u0302","\u0120":"G\u0307","\u0122":"G\u0327","\u1e26":"H\u0308","\u021e":"H\u030c","\u0124":"H\u0302","\u1e22":"H\u0307","\u1e28":"H\u0327","\xcd":"I\u0301","\xcc":"I\u0300","\xcf":"I\u0308","\u1e2e":"I\u0308\u0301","\u0128":"I\u0303","\u012a":"I\u0304","\u012c":"I\u0306","\u01cf":"I\u030c","\xce":"I\u0302","\u0130":"I\u0307","\u0134":"J\u0302","\u1e30":"K\u0301","\u01e8":"K\u030c","\u0136":"K\u0327","\u0139":"L\u0301","\u013d":"L\u030c","\u013b":"L\u0327","\u1e3e":"M\u0301","\u1e40":"M\u0307","\u0143":"N\u0301","\u01f8":"N\u0300","\xd1":"N\u0303","\u0147":"N\u030c","\u1e44":"N\u0307","\u0145":"N\u0327","\xd3":"O\u0301","\xd2":"O\u0300","\xd6":"O\u0308","\u022a":"O\u0308\u0304","\xd5":"O\u0303","\u1e4c":"O\u0303\u0301","\u1e4e":"O\u0303\u0308","\u022c":"O\u0303\u0304","\u014c":"O\u0304","\u1e52":"O\u0304\u0301","\u1e50":"O\u0304\u0300","\u014e":"O\u0306","\u01d1":"O\u030c","\xd4":"O\u0302","\u1ed0":"O\u0302\u0301","\u1ed2":"O\u0302\u0300","\u1ed6":"O\u0302\u0303","\u022e":"O\u0307","\u0230":"O\u0307\u0304","\u0150":"O\u030b","\u1e54":"P\u0301","\u1e56":"P\u0307","\u0154":"R\u0301","\u0158":"R\u030c","\u1e58":"R\u0307","\u0156":"R\u0327","\u015a":"S\u0301","\u1e64":"S\u0301\u0307","\u0160":"S\u030c","\u1e66":"S\u030c\u0307","\u015c":"S\u0302","\u1e60":"S\u0307","\u015e":"S\u0327","\u0164":"T\u030c","\u1e6a":"T\u0307","\u0162":"T\u0327","\xda":"U\u0301","\xd9":"U\u0300","\xdc":"U\u0308","\u01d7":"U\u0308\u0301","\u01db":"U\u0308\u0300","\u01d5":"U\u0308\u0304","\u01d9":"U\u0308\u030c","\u0168":"U\u0303","\u1e78":"U\u0303\u0301","\u016a":"U\u0304","\u1e7a":"U\u0304\u0308","\u016c":"U\u0306","\u01d3":"U\u030c","\xdb":"U\u0302","\u016e":"U\u030a","\u0170":"U\u030b","\u1e7c":"V\u0303","\u1e82":"W\u0301","\u1e80":"W\u0300","\u1e84":"W\u0308","\u0174":"W\u0302","\u1e86":"W\u0307","\u1e8c":"X\u0308","\u1e8a":"X\u0307","\xdd":"Y\u0301","\u1ef2":"Y\u0300","\u0178":"Y\u0308","\u1ef8":"Y\u0303","\u0232":"Y\u0304","\u0176":"Y\u0302","\u1e8e":"Y\u0307","\u0179":"Z\u0301","\u017d":"Z\u030c","\u1e90":"Z\u0302","\u017b":"Z\u0307","\u03ac":"\u03b1\u0301","\u1f70":"\u03b1\u0300","\u1fb1":"\u03b1\u0304","\u1fb0":"\u03b1\u0306","\u03ad":"\u03b5\u0301","\u1f72":"\u03b5\u0300","\u03ae":"\u03b7\u0301","\u1f74":"\u03b7\u0300","\u03af":"\u03b9\u0301","\u1f76":"\u03b9\u0300","\u03ca":"\u03b9\u0308","\u0390":"\u03b9\u0308\u0301","\u1fd2":"\u03b9\u0308\u0300","\u1fd1":"\u03b9\u0304","\u1fd0":"\u03b9\u0306","\u03cc":"\u03bf\u0301","\u1f78":"\u03bf\u0300","\u03cd":"\u03c5\u0301","\u1f7a":"\u03c5\u0300","\u03cb":"\u03c5\u0308","\u03b0":"\u03c5\u0308\u0301","\u1fe2":"\u03c5\u0308\u0300","\u1fe1":"\u03c5\u0304","\u1fe0":"\u03c5\u0306","\u03ce":"\u03c9\u0301","\u1f7c":"\u03c9\u0300","\u038e":"\u03a5\u0301","\u1fea":"\u03a5\u0300","\u03ab":"\u03a5\u0308","\u1fe9":"\u03a5\u0304","\u1fe8":"\u03a5\u0306","\u038f":"\u03a9\u0301","\u1ffa":"\u03a9\u0300"};class $r{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new jr(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new o("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new a("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){"math"===this.mode&&this.consumeSpaces();var r=this.fetch();if(-1!==$r.endOfExpression.indexOf(r.text))break;if(t&&r.text===t)break;if(e&&Cr[r.text]&&Cr[r.text].infix)break;var i=this.parseAtom(t);if(!i)break;"internal"!==i.type&&n.push(i)}return"text"===this.mode&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t,n=-1,r=0;r<e.length;r++)if("infix"===e[r].type){if(-1!==n)throw new o("only one infix operator per group",e[r].token);n=r,t=e[r].replaceWith}if(-1!==n&&t){var i,a,s=e.slice(0,n),l=e.slice(n+1);return i=1===s.length&&"ordgroup"===s[0].type?s[0]:{type:"ordgroup",mode:this.mode,body:s},a=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===t?this.callFunction(t,[i,e[n],a],[]):this.callFunction(t,[i,a],[])]}return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var r=this.parseGroup(e);if(!r)throw new o("Expected group after '"+n+"'",t);return r}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}}parseAtom(e){var t,n,r=this.parseGroup("atom",e);if("text"===this.mode)return r;for(;;){this.consumeSpaces();var i=this.fetch();if("\\limits"===i.text||"\\nolimits"===i.text){if(r&&"op"===r.type){var s="\\limits"===i.text;r.limits=s,r.alwaysHandleSupSub=!0}else{if(!r||"operatorname"!==r.type)throw new o("Limit controls must follow a math operator",i);r.alwaysHandleSupSub&&(r.limits="\\limits"===i.text)}this.consume()}else if("^"===i.text){if(t)throw new o("Double superscript",i);t=this.handleSupSubscript("superscript")}else if("_"===i.text){if(n)throw new o("Double subscript",i);n=this.handleSupSubscript("subscript")}else if("'"===i.text){if(t)throw new o("Double superscript",i);var l={type:"textord",mode:this.mode,text:"\\prime"},u=[l];for(this.consume();"'"===this.fetch().text;)u.push(l),this.consume();"^"===this.fetch().text&&u.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:u}}else{if(!Wr[i.text])break;var c=Gr.test(i.text),h=[];for(h.push(new a(Wr[i.text])),this.consume();;){var d=this.fetch().text;if(!Wr[d])break;if(Gr.test(d)!==c)break;h.unshift(new a(Wr[d])),this.consume()}var p=this.subparse(h);c?n={type:"ordgroup",mode:"math",body:p}:t={type:"ordgroup",mode:"math",body:p}}}return t||n?{type:"supsub",mode:this.mode,base:r,sup:t,sub:n}:r}parseFunction(e,t){var n=this.fetch(),r=n.text,i=Cr[r];if(!i)return null;if(this.consume(),t&&"atom"!==t&&!i.allowedInArgument)throw new o("Got function '"+r+"' with no arguments"+(t?" as "+t:""),n);if("text"===this.mode&&!i.allowedInText)throw new o("Can't use function '"+r+"' in text mode",n);if("math"===this.mode&&!1===i.allowedInMath)throw new o("Can't use function '"+r+"' in math mode",n);var{args:a,optArgs:s}=this.parseArguments(r,i);return this.callFunction(r,a,s,n,e)}callFunction(e,t,n,r,i){var a={funcName:e,parser:this,token:r,breakOnTokenText:i},s=Cr[e];if(s&&s.handler)return s.handler(a,t,n);throw new o("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var r=[],i=[],a=0;a<n;a++){var s=t.argTypes&&t.argTypes[a],l=a<t.numOptionalArgs;(t.primitive&&null==s||"sqrt"===t.type&&1===a&&null==i[0])&&(s="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",s,l);if(l)i.push(u);else{if(null==u)throw new o("Null argument, please report this as a bug");r.push(u)}}return{args:r,optArgs:i}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":var r=this.parseArgumentGroup(n,"text");return null!=r?{type:"styling",mode:r.mode,body:[r],style:"text"}:null;case"raw":var i=this.parseStringGroup("raw",n);return null!=i?{type:"raw",mode:"text",string:i.text}:null;case"primitive":if(n)throw new o("A primitive argument cannot be optional");var a=this.parseGroup(e);if(null==a)throw new o("Expected group as "+e,this.fetch());return a;case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new o("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;" "===this.fetch().text;)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(null==n)return null;for(var r,i="";"EOF"!==(r=this.fetch()).text;)i+=r.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,t){for(var n,r=this.fetch(),i=r,a="";"EOF"!==(n=this.fetch()).text&&e.test(a+n.text);)a+=(i=n).text,this.consume();if(""===a)throw new o("Invalid "+t+": '"+r.text+"'",r);return r.range(i,a)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new o("Invalid color: '"+t.text+"'",t);var r=n[0];return/^[0-9a-f]{6}$/i.test(r)&&(r="#"+r),{type:"color-token",mode:this.mode,color:r}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",n=!0);var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!r)throw new o("Invalid size: '"+t.text+"'",t);var i={number:+(r[1]+r[2]),unit:r[3]};if(!H(i))throw new o("Invalid unit: '"+i.unit+"'",t);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(null==n)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return t&&this.switchMode(r),a}parseGroup(e,t){var n,r=this.fetch(),a=r.text;if("{"===a||"\\begingroup"===a){this.consume();var s="{"===a?"}":"\\endgroup";this.gullet.beginGroup();var l=this.parseExpression(!1,s),u=this.fetch();this.expect(s),this.gullet.endGroup(),n={type:"ordgroup",mode:this.mode,loc:i.range(r,u),body:l,semisimple:"\\begingroup"===a||void 0}}else if(null==(n=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===a[0]&&!Vr.hasOwnProperty(a)){if(this.settings.throwOnError)throw new o("Undefined control sequence: "+a,r);n=this.formatUnsupportedCmd(a),this.consume()}return n}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],a=r.text;"-"===a&&"-"===e[n+1].text&&(n+1<t&&"-"===e[n+2].text?(e.splice(n,3,{type:"textord",mode:"text",loc:i.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:i.range(r,e[n+1]),text:"--"}),t-=1)),"'"!==a&&"`"!==a||e[n+1].text!==a||(e.splice(n,2,{type:"textord",mode:"text",loc:i.range(r,e[n+1]),text:a+a}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),r="*"===n.charAt(0);if(r&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new o("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:r}}Yr.hasOwnProperty(t[0])&&!ae[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Yr[t[0]]+t.slice(1));var a,s=kr.exec(t);if(s&&("i"===(t=t.substring(0,s.index))?t="\u0131":"j"===t&&(t="\u0237")),ae[this.mode][t]){this.settings.strict&&"math"===this.mode&&Be.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var l,u=ae[this.mode][t].group,c=i.range(e);if(re.hasOwnProperty(u)){var h=u;l={type:"atom",mode:this.mode,family:h,loc:c,text:t}}else l={type:u,mode:this.mode,loc:c,text:t};a=l}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(A(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),a={type:"textord",mode:"text",loc:i.range(e),text:t}}if(this.consume(),s)for(var d=0;d<s[0].length;d++){var p=s[0][d];if(!Xr[p])throw new o("Unknown accent ' "+p+"'",e);var f=Xr[p][this.mode]||Xr[p].text;if(!f)throw new o("Accent "+p+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:i.range(e),label:f,isStretchy:!1,isShifty:!0,base:a}}return a}}$r.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Zr=function(e,t){if(!("string"===typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new $r(e,t);delete n.gullet.macros.current["\\df@tag"];var r=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new o("\\tag works only in display equations");r=[{type:"tag",mode:"text",body:r,tag:n.subparse([new a("\\df@tag")])}]}return r};"undefined"!==typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!==typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."));var Jr=function(e,t,n){if(n.throwOnError||!(e instanceof o))throw e;var r=Ke.makeSpan(["katex-error"],[new K(t)]);return r.setAttribute("title",e.toString()),r.setAttribute("style","color:"+n.errorColor),r},Kr=function(e,t){var n=new f(t);try{return function(e,t,n){var r,i=Ot(n);if("mathml"===n.output)return Pt(e,t,i,n.displayMode,!0);if("html"===n.output){var a=Mt(e,i);r=Ke.makeSpan(["katex"],[a])}else{var o=Pt(e,t,i,n.displayMode,!1),s=Mt(e,i);r=Ke.makeSpan(["katex"],[o,s])}return Bt(r,n)}(Zr(e,n),e,n)}catch(Fw){return Jr(Fw,e,n)}},Qr=function(e,t){return Kr(e,t).toMarkup()};const ei="171",ti={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ni={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ri=0,ii=1,ai=2,oi=3,si=0,li=1,ui=2,ci=3,hi=0,di=1,pi=2,fi=0,mi=1,gi=2,vi=3,yi=4,xi=5,bi=100,wi=101,Si=102,_i=103,Mi=104,Ei=200,Ai=201,Ti=202,Ci=203,Di=204,Ni=205,Ri=206,ki=207,Ii=208,Fi=209,Pi=210,Oi=211,Bi=212,Li=213,zi=214,Ui=0,Hi=1,qi=2,Vi=3,ji=4,Gi=5,Wi=6,Xi=7,Yi=0,$i=1,Zi=2,Ji=0,Ki=1,Qi=2,ea=3,ta=4,na=5,ra=6,ia=7,aa="attached",oa="detached",sa=300,la=301,ua=302,ca=303,ha=304,da=306,pa=1e3,fa=1001,ma=1002,ga=1003,va=1004,ya=1004,xa=1005,ba=1005,wa=1006,Sa=1007,_a=1007,Ma=1008,Ea=1008,Aa=1009,Ta=1010,Ca=1011,Da=1012,Na=1013,Ra=1014,ka=1015,Ia=1016,Fa=1017,Pa=1018,Oa=1020,Ba=35902,La=1021,za=1022,Ua=1023,Ha=1024,qa=1025,Va=1026,ja=1027,Ga=1028,Wa=1029,Xa=1030,Ya=1031,$a=1032,Za=1033,Ja=33776,Ka=33777,Qa=33778,eo=33779,to=35840,no=35841,ro=35842,io=35843,ao=36196,oo=37492,so=37496,lo=37808,uo=37809,co=37810,ho=37811,po=37812,fo=37813,mo=37814,go=37815,vo=37816,yo=37817,xo=37818,bo=37819,wo=37820,So=37821,_o=36492,Mo=36494,Eo=36495,Ao=36283,To=36284,Co=36285,Do=36286,No=2200,Ro=2201,ko=2202,Io=2300,Fo=2301,Po=2302,Oo=2400,Bo=2401,Lo=2402,zo=2500,Uo=2501,Ho=0,qo=1,Vo=2,jo=3200,Go=3201,Wo=3202,Xo=3203,Yo=0,$o=1,Zo="",Jo="srgb",Ko="srgb-linear",Qo="linear",es="srgb",ts=0,ns=7680,rs=7681,is=7682,as=7683,os=34055,ss=34056,ls=5386,us=512,cs=513,hs=514,ds=515,ps=516,fs=517,ms=518,gs=519,vs=512,ys=513,xs=514,bs=515,ws=516,Ss=517,_s=518,Ms=519,Es=35044,As=35048,Ts=35040,Cs=35045,Ds=35049,Ns=35041,Rs=35046,ks=35050,Is=35042,Fs="100",Ps="300 es",Os=2e3,Bs=2001;class Ls{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const zs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Us=1234567;const Hs=Math.PI/180,qs=180/Math.PI;function Vs(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(zs[255&e]+zs[e>>8&255]+zs[e>>16&255]+zs[e>>24&255]+"-"+zs[255&t]+zs[t>>8&255]+"-"+zs[t>>16&15|64]+zs[t>>24&255]+"-"+zs[63&n|128]+zs[n>>8&255]+"-"+zs[n>>16&255]+zs[n>>24&255]+zs[255&r]+zs[r>>8&255]+zs[r>>16&255]+zs[r>>24&255]).toLowerCase()}function js(e,t,n){return Math.max(t,Math.min(n,e))}function Gs(e,t){return(e%t+t)%t}function Ws(e,t,n){return(1-n)*e+n*t}function Xs(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Ys(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const $s={DEG2RAD:Hs,RAD2DEG:qs,generateUUID:Vs,clamp:js,euclideanModulo:Gs,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Ws,damp:function(e,t,n,r){return Ws(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Gs(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Us=e);let t=Us+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Hs},radToDeg:function(e){return e*qs},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const a=Math.cos,o=Math.sin,s=a(n/2),l=o(n/2),u=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),d=o((t-r)/2),p=a((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(s*c,l*h,l*d,s*u);break;case"YZY":e.set(l*d,s*c,l*h,s*u);break;case"ZXZ":e.set(l*h,l*d,s*c,s*u);break;case"XZX":e.set(s*c,l*f,l*p,s*u);break;case"YXY":e.set(l*p,s*c,l*f,s*u);break;case"ZYZ":e.set(l*f,l*p,s*c,s*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Ys,denormalize:Xs};class Zs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Zs.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=js(this.x,e.x,t.x),this.y=js(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=js(this.x,e,t),this.y=js(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(js(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(js(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Js{constructor(e,t,n,r,i,a,o,s,l){Js.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l)}set(e,t,n,r,i,a,o,s,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],l=n[1],u=n[4],c=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],x=r[7],b=r[2],w=r[5],S=r[8];return i[0]=a*f+o*v+s*b,i[3]=a*m+o*y+s*w,i[6]=a*g+o*x+s*S,i[1]=l*f+u*v+c*b,i[4]=l*m+u*y+c*w,i[7]=l*g+u*x+c*S,i[2]=h*f+d*v+p*b,i[5]=h*m+d*y+p*w,i[8]=h*g+d*x+p*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-n*i*u+n*o*s+r*i*l-r*a*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=u*a-o*l,h=o*s-u*i,d=l*i-a*s,p=t*c+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=c*f,e[1]=(r*l-u*n)*f,e[2]=(o*n-r*a)*f,e[3]=h*f,e[4]=(u*t-r*s)*f,e[5]=(r*i-o*t)*f,e[6]=d*f,e[7]=(n*s-l*t)*f,e[8]=(a*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,a,o){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*a+l*o)+a+e,-r*l,r*s,-r*(-l*a+s*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Ks.makeScale(e,t)),this}rotate(e){return this.premultiply(Ks.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ks.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ks=new Js;function Qs(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const el={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function tl(e,t){return new el[e](t)}function nl(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function rl(){const e=nl("canvas");return e.style.display="block",e}const il={};function al(e){e in il||(il[e]=!0,console.warn(e))}const ol=(new Js).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),sl=(new Js).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function ll(){const e={enabled:!0,workingColorSpace:Ko,spaces:{},convert:function(e,t,n){return!1!==this.enabled&&t!==n&&t&&n?(this.spaces[t].transfer===es&&(e.r=cl(e.r),e.g=cl(e.g),e.b=cl(e.b)),this.spaces[t].primaries!==this.spaces[n].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===es&&(e.r=hl(e.r),e.g=hl(e.g),e.b=hl(e.b)),e):e},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return e===Zo?Qo:this.spaces[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.workingColorSpace;return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,n){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.workingColorSpace;return this.spaces[e].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return e.define({[Ko]:{primaries:t,whitePoint:r,transfer:Qo,toXYZ:ol,fromXYZ:sl,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Jo},outputColorSpaceConfig:{drawingBufferColorSpace:Jo}},[Jo]:{primaries:t,whitePoint:r,transfer:es,toXYZ:ol,fromXYZ:sl,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Jo}}}),e}const ul=ll();function cl(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function hl(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let dl;class pl{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===dl&&(dl=nl("canvas")),dl.width=e.width,dl.height=e.height;const n=dl.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=dl}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=nl("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*cl(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*cl(t[e]/255)):t[e]=cl(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let fl=0;class ml{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:fl++}),this.uuid=Vs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(gl(r[t].image)):e.push(gl(r[t]))}else e=gl(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function gl(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?pl.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vl=0;class yl extends Ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yl.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yl.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fa,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fa,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wa,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ma,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ua,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Aa,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:yl.DEFAULT_ANISOTROPY,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Zo;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vl++}),this.uuid=Vs(),this.name="",this.source=new ml(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=a,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=s,this.offset=new Zs(0,0),this.repeat=new Zs(1,1),this.center=new Zs(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Js,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==sa)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pa:e.x=e.x-Math.floor(e.x);break;case fa:e.x=e.x<0?0:1;break;case ma:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case pa:e.y=e.y-Math.floor(e.y);break;case fa:e.y=e.y<0?0:1;break;case ma:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}yl.DEFAULT_IMAGE=null,yl.DEFAULT_MAPPING=sa,yl.DEFAULT_ANISOTROPY=1;class xl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;xl.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],g=s[10];if(Math.abs(u-h)<a&&Math.abs(c-f)<a&&Math.abs(p-m)<a){if(Math.abs(u+h)<o&&Math.abs(c+f)<o&&Math.abs(p+m)<o&&Math.abs(l+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(u+h)/4,x=(c+f)/4,b=(p+m)/4;return e>s&&e>v?e<a?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=x/n):s>v?s<a?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=b/r):v<a?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=x/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(c-f)/v,this.z=(h-u)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=js(this.x,e.x,t.x),this.y=js(this.y,e.y,t.y),this.z=js(this.z,e.z,t.z),this.w=js(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=js(this.x,e,t),this.y=js(this.y,e,t),this.z=js(this.z,e,t),this.w=js(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(js(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bl extends Ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new xl(0,0,e,t),this.scissorTest=!1,this.viewport=new xl(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:wa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new yl(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const a=n.count;for(let o=0;o<a;o++)this.textures[o]=i.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ml(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class wl extends bl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class Sl extends yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ga,this.minFilter=ga,this.wrapR=fa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class _l extends wl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Sl(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ml extends yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ga,this.minFilter=ga,this.wrapR=fa,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class El extends wl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ml(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Al{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,a,o){let s=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[a+0],d=i[a+1],p=i[a+2],f=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(c!==f||s!==h||l!==d||u!==p){let e=1-o;const t=s*h+l*d+u*p+c*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),a=Math.atan2(i,t*n);e=Math.sin(e*a)/i,o=Math.sin(o*a)/i}const i=o*n;if(s=s*e+h*i,l=l*e+d*i,u=u*e+p*i,c=c*e+f*i,e===1-o){const e=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=e,l*=e,u*=e,c*=e}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,a){const o=n[r],s=n[r+1],l=n[r+2],u=n[r+3],c=i[a],h=i[a+1],d=i[a+2],p=i[a+3];return e[t]=o*p+u*c+s*d-l*h,e[t+1]=s*p+u*h+l*c-o*d,e[t+2]=l*p+u*d+o*h-s*c,e[t+3]=u*p-o*c-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,l=o(n/2),u=o(r/2),c=o(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(a){case"XYZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"YXZ":this._x=h*u*c+l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"ZXY":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c-h*d*p;break;case"ZYX":this._x=h*u*c-l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c+h*d*p;break;case"YZX":this._x=h*u*c+l*d*p,this._y=l*d*c+h*u*p,this._z=l*u*p-h*d*c,this._w=l*u*c-h*d*p;break;case"XZY":this._x=h*u*c-l*d*p,this._y=l*d*c-h*u*p,this._z=l*u*p+h*d*c,this._w=l*u*c+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],l=t[2],u=t[6],c=t[10],h=n+o+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-s)*e,this._y=(i-l)*e,this._z=(a-r)*e}else if(n>o&&n>c){const e=2*Math.sqrt(1+n-o-c);this._w=(u-s)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(i+l)/e}else if(o>c){const e=2*Math.sqrt(1+o-n-c);this._w=(i-l)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(s+u)/e}else{const e=2*Math.sqrt(1+c-n-o);this._w=(a-r)/e,this._x=(i+l)/e,this._y=(s+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(js(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=n*u+a*o+r*l-i*s,this._y=r*u+a*s+i*o-n*l,this._z=i*u+a*l+n*s-r*o,this._w=a*u-n*o-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,a=this._w;let o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;const s=1-o*o;if(s<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(s),u=Math.atan2(l,o),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=a*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Tl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Tl.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Dl.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Dl.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,l=2*(a*r-o*n),u=2*(o*t-i*r),c=2*(i*n-a*t);return this.x=t+s*l+a*c-o*u,this.y=n+s*u+o*l-i*c,this.z=r+s*c+i*u-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=js(this.x,e.x,t.x),this.y=js(this.y,e.y,t.y),this.z=js(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=js(this.x,e,t),this.y=js(this.y,e,t),this.z=js(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(js(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Cl.copy(this).projectOnVector(e),this.sub(Cl)}reflect(e){return this.sub(Cl.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(js(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Cl=new Tl,Dl=new Al;class Nl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(kl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(kl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=kl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,kl):kl.fromBufferAttribute(r,t),kl.applyMatrix4(e.matrixWorld),this.expandByPoint(kl);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Il.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Il.copy(n.boundingBox)),Il.applyMatrix4(e.matrixWorld),this.union(Il)}const r=e.children;for(let i=0,a=r.length;i<a;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,kl),kl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ul),Hl.subVectors(this.max,Ul),Fl.subVectors(e.a,Ul),Pl.subVectors(e.b,Ul),Ol.subVectors(e.c,Ul),Bl.subVectors(Pl,Fl),Ll.subVectors(Ol,Pl),zl.subVectors(Fl,Ol);let t=[0,-Bl.z,Bl.y,0,-Ll.z,Ll.y,0,-zl.z,zl.y,Bl.z,0,-Bl.x,Ll.z,0,-Ll.x,zl.z,0,-zl.x,-Bl.y,Bl.x,0,-Ll.y,Ll.x,0,-zl.y,zl.x,0];return!!jl(t,Fl,Pl,Ol,Hl)&&(t=[1,0,0,0,1,0,0,0,1],!!jl(t,Fl,Pl,Ol,Hl)&&(ql.crossVectors(Bl,Ll),t=[ql.x,ql.y,ql.z],jl(t,Fl,Pl,Ol,Hl)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,kl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(kl).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Rl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Rl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Rl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Rl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Rl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Rl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Rl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Rl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Rl)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Rl=[new Tl,new Tl,new Tl,new Tl,new Tl,new Tl,new Tl,new Tl],kl=new Tl,Il=new Nl,Fl=new Tl,Pl=new Tl,Ol=new Tl,Bl=new Tl,Ll=new Tl,zl=new Tl,Ul=new Tl,Hl=new Tl,ql=new Tl,Vl=new Tl;function jl(e,t,n,r,i){for(let a=0,o=e.length-3;a<=o;a+=3){Vl.fromArray(e,a);const o=i.x*Math.abs(Vl.x)+i.y*Math.abs(Vl.y)+i.z*Math.abs(Vl.z),s=t.dot(Vl),l=n.dot(Vl),u=r.dot(Vl);if(Math.max(-Math.max(s,l,u),Math.min(s,l,u))>o)return!1}return!0}const Gl=new Nl,Wl=new Tl,Xl=new Tl;class Yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Gl.setFromPoints(e).getCenter(n);let r=0;for(let i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Wl.subVectors(e,this.center);const t=Wl.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Wl,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Xl.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Wl.copy(e.center).add(Xl)),this.expandByPoint(Wl.copy(e.center).sub(Xl))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const $l=new Tl,Zl=new Tl,Jl=new Tl,Kl=new Tl,Ql=new Tl,eu=new Tl,tu=new Tl;class nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,$l)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=$l.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):($l.copy(this.origin).addScaledVector(this.direction,t),$l.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Zl.copy(e).add(t).multiplyScalar(.5),Jl.copy(t).sub(e).normalize(),Kl.copy(this.origin).sub(Zl);const i=.5*e.distanceTo(t),a=-this.direction.dot(Jl),o=Kl.dot(this.direction),s=-Kl.dot(Jl),l=Kl.lengthSq(),u=Math.abs(1-a*a);let c,h,d,p;if(u>0)if(c=a*s-o,h=a*o-s,p=i*u,c>=0)if(h>=-p)if(h<=p){const e=1/u;c*=e,h*=e,d=c*(c+a*h+2*o)+h*(a*c+h+2*s)+l}else h=i,c=Math.max(0,-(a*h+o)),d=-c*c+h*(h+2*s)+l;else h=-i,c=Math.max(0,-(a*h+o)),d=-c*c+h*(h+2*s)+l;else h<=-p?(c=Math.max(0,-(-a*i+o)),h=c>0?-i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+l):h<=p?(c=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(c=Math.max(0,-(a*i+o)),h=c>0?i:Math.min(Math.max(-i,-s),i),d=-c*c+h*(h+2*s)+l);else h=a>0?-i:i,c=Math.max(0,-(a*h+o)),d=-c*c+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,c),r&&r.copy(Zl).addScaledVector(Jl,h),d}intersectSphere(e,t){$l.subVectors(e.center,this.origin);const n=$l.dot(this.direction),r=$l.dot($l)-n*n,i=e.radius*e.radius;if(r>i)return null;const a=Math.sqrt(i-r),o=n-a,s=n+a;return s<0?null:o<0?this.at(s,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,a,o,s;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),n>a||i>r?null:((i>n||isNaN(n))&&(n=i),(a<r||isNaN(r))&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!==n)&&(n=o),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,$l)}intersectTriangle(e,t,n,r,i){Ql.subVectors(t,e),eu.subVectors(n,e),tu.crossVectors(Ql,eu);let a,o=this.direction.dot(tu);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Kl.subVectors(this.origin,e);const s=a*this.direction.dot(eu.crossVectors(Kl,eu));if(s<0)return null;const l=a*this.direction.dot(Ql.cross(Kl));if(l<0)return null;if(s+l>o)return null;const u=-a*Kl.dot(tu);return u<0?null:this.at(u/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ru{constructor(e,t,n,r,i,a,o,s,l,u,c,h,d,p,f,m){ru.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,a,o,s,l,u,c,h,d,p,f,m)}set(e,t,n,r,i,a,o,s,l,u,c,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=a,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ru).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/iu.setFromMatrixColumn(e,0).length(),i=1/iu.setFromMatrixColumn(e,1).length(),a=1/iu.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*s}else if("YXZ"===e.order){const e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e+i*o,t[4]=r*o-n,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=a*s}else if("ZXY"===e.order){const e=s*u,n=s*c,r=l*u,i=l*c;t[0]=e-i*o,t[4]=-a*c,t[8]=r+n*o,t[1]=n+r*o,t[5]=a*u,t[9]=i-e*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){const e=a*u,n=a*c,r=o*u,i=o*c;t[0]=s*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=a*s,n=a*l,r=o*s,i=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=a*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=o*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ou,e,su)}lookAt(e,t,n){const r=this.elements;return cu.subVectors(e,t),0===cu.lengthSq()&&(cu.z=1),cu.normalize(),lu.crossVectors(n,cu),0===lu.lengthSq()&&(1===Math.abs(n.z)?cu.x+=1e-4:cu.z+=1e-4,cu.normalize(),lu.crossVectors(n,cu)),lu.normalize(),uu.crossVectors(cu,lu),r[0]=lu.x,r[4]=uu.x,r[8]=cu.x,r[1]=lu.y,r[5]=uu.y,r[9]=cu.y,r[2]=lu.z,r[6]=uu.z,r[10]=cu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],l=n[12],u=n[1],c=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],w=r[0],S=r[4],_=r[8],M=r[12],E=r[1],A=r[5],T=r[9],C=r[13],D=r[2],N=r[6],R=r[10],k=r[14],I=r[3],F=r[7],P=r[11],O=r[15];return i[0]=a*w+o*E+s*D+l*I,i[4]=a*S+o*A+s*N+l*F,i[8]=a*_+o*T+s*R+l*P,i[12]=a*M+o*C+s*k+l*O,i[1]=u*w+c*E+h*D+d*I,i[5]=u*S+c*A+h*N+d*F,i[9]=u*_+c*T+h*R+d*P,i[13]=u*M+c*C+h*k+d*O,i[2]=p*w+f*E+m*D+g*I,i[6]=p*S+f*A+m*N+g*F,i[10]=p*_+f*T+m*R+g*P,i[14]=p*M+f*C+m*k+g*O,i[3]=v*w+y*E+x*D+b*I,i[7]=v*S+y*A+x*N+b*F,i[11]=v*_+y*T+x*R+b*P,i[15]=v*M+y*C+x*k+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(+i*s*c-r*l*c-i*o*h+n*l*h+r*o*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*a*h-r*a*d+r*l*u-i*s*u)+e[11]*(+t*l*c-t*o*d-i*a*c+n*a*d+i*o*u-n*l*u)+e[15]*(-r*o*u-t*s*c+t*o*h+r*a*c-n*a*h+n*s*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*h*l+f*s*d-o*m*d-c*s*g+o*h*g,y=p*h*l-u*m*l-p*s*d+a*m*d+u*s*g-a*h*g,x=u*f*l-p*c*l+p*o*d-a*f*d-u*o*g+a*c*g,b=p*c*s-u*f*s-p*o*h+a*f*h+u*o*m-a*c*m,w=t*v+n*y+r*x+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/w;return e[0]=v*S,e[1]=(f*h*i-c*m*i-f*r*d+n*m*d+c*r*g-n*h*g)*S,e[2]=(o*m*i-f*s*i+f*r*l-n*m*l-o*r*g+n*s*g)*S,e[3]=(c*s*i-o*h*i-c*r*l+n*h*l+o*r*d-n*s*d)*S,e[4]=y*S,e[5]=(u*m*i-p*h*i+p*r*d-t*m*d-u*r*g+t*h*g)*S,e[6]=(p*s*i-a*m*i-p*r*l+t*m*l+a*r*g-t*s*g)*S,e[7]=(a*h*i-u*s*i+u*r*l-t*h*l-a*r*d+t*s*d)*S,e[8]=x*S,e[9]=(p*c*i-u*f*i-p*n*d+t*f*d+u*n*g-t*c*g)*S,e[10]=(a*f*i-p*o*i+p*n*l-t*f*l-a*n*g+t*o*g)*S,e[11]=(u*o*i-a*c*i-u*n*l+t*c*l+a*n*d-t*o*d)*S,e[12]=b*S,e[13]=(u*f*r-p*c*r+p*n*h-t*f*h-u*n*m+t*c*m)*S,e[14]=(p*o*r-a*f*r-p*n*s+t*f*s+a*n*m-t*o*m)*S,e[15]=(a*c*r-u*o*r+u*n*s-t*c*s-a*n*h+t*o*h)*S,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,l=i*a,u=i*o;return this.set(l*a+n,l*o-r*s,l*s+r*o,0,l*o+r*s,u*o+n,u*s-r*a,0,l*s-r*o,u*s+r*a,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,l=i+i,u=a+a,c=o+o,h=i*l,d=i*u,p=i*c,f=a*u,m=a*c,g=o*c,v=s*l,y=s*u,x=s*c,b=n.x,w=n.y,S=n.z;return r[0]=(1-(f+g))*b,r[1]=(d+x)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-x)*w,r[5]=(1-(h+g))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(p+y)*S,r[9]=(m-v)*S,r[10]=(1-(h+f))*S,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=iu.set(r[0],r[1],r[2]).length();const a=iu.set(r[4],r[5],r[6]).length(),o=iu.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],au.copy(this);const s=1/i,l=1/a,u=1/o;return au.elements[0]*=s,au.elements[1]*=s,au.elements[2]*=s,au.elements[4]*=l,au.elements[5]*=l,au.elements[6]*=l,au.elements[8]*=u,au.elements[9]*=u,au.elements[10]*=u,t.setFromRotationMatrix(au),n.x=i,n.y=a,n.z=o,this}makePerspective(e,t,n,r,i,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Os;const s=this.elements,l=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),h=(n+r)/(n-r);let d,p;if(o===Os)d=-(a+i)/(a-i),p=-2*a*i/(a-i);else{if(o!==Bs)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);d=-a/(a-i),p=-a*i/(a-i)}return s[0]=l,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,a){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Os;const s=this.elements,l=1/(t-e),u=1/(n-r),c=1/(a-i),h=(t+e)*l,d=(n+r)*u;let p,f;if(o===Os)p=(a+i)*c,f=-2*c;else{if(o!==Bs)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);p=i*c,f=-1*c}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=f,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const iu=new Tl,au=new ru,ou=new Tl(0,0,0),su=new Tl(1,1,1),lu=new Tl,uu=new Tl,cu=new Tl,hu=new ru,du=new Al;class pu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pu.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(js(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-js(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(js(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-js(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(js(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-js(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return hu.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hu,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return du.setFromEuler(this),this.setFromQuaternion(du,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}pu.DEFAULT_ORDER="XYZ";class fu{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let mu=0;const gu=new Tl,vu=new Al,yu=new ru,xu=new Tl,bu=new Tl,wu=new Tl,Su=new Al,_u=new Tl(1,0,0),Mu=new Tl(0,1,0),Eu=new Tl(0,0,1),Au={type:"added"},Tu={type:"removed"},Cu={type:"childadded",child:null},Du={type:"childremoved",child:null};class Nu extends Ls{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:mu++}),this.uuid=Vs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nu.DEFAULT_UP.clone();const e=new Tl,t=new pu,n=new Al,r=new Tl(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ru},normalMatrix:{value:new Js}}),this.matrix=new ru,this.matrixWorld=new ru,this.matrixAutoUpdate=Nu.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Nu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new fu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return vu.setFromAxisAngle(e,t),this.quaternion.multiply(vu),this}rotateOnWorldAxis(e,t){return vu.setFromAxisAngle(e,t),this.quaternion.premultiply(vu),this}rotateX(e){return this.rotateOnAxis(_u,e)}rotateY(e){return this.rotateOnAxis(Mu,e)}rotateZ(e){return this.rotateOnAxis(Eu,e)}translateOnAxis(e,t){return gu.copy(e).applyQuaternion(this.quaternion),this.position.add(gu.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_u,e)}translateY(e){return this.translateOnAxis(Mu,e)}translateZ(e){return this.translateOnAxis(Eu,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(yu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?xu.copy(e):xu.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),bu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yu.lookAt(bu,xu,this.up):yu.lookAt(xu,bu,this.up),this.quaternion.setFromRotationMatrix(yu),r&&(yu.extractRotation(r.matrixWorld),vu.setFromRotationMatrix(yu),this.quaternion.premultiply(vu.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Au),Cu.child=e,this.dispatchEvent(Cu),Cu.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Tu),Du.child=e,this.dispatchEvent(Du),Du.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),yu.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),yu.multiply(e.parent.matrixWorld)),e.applyMatrix4(yu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Au),Cu.child=e,this.dispatchEvent(Cu),Cu.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bu,e,wu),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bu,Su,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=a(e.geometries),r=a(e.materials),i=a(e.textures),o=a(e.images),s=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u),c.length>0&&(n.nodes=c)}return n.object=r,n;function a(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}Nu.DEFAULT_UP=new Tl(0,1,0),Nu.DEFAULT_MATRIX_AUTO_UPDATE=!0,Nu.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ru=new Tl,ku=new Tl,Iu=new Tl,Fu=new Tl,Pu=new Tl,Ou=new Tl,Bu=new Tl,Lu=new Tl,zu=new Tl,Uu=new Tl,Hu=new xl,qu=new xl,Vu=new xl;class ju{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Tl;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ru.subVectors(e,t),r.cross(Ru);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Ru.subVectors(r,t),ku.subVectors(n,t),Iu.subVectors(e,t);const a=Ru.dot(Ru),o=Ru.dot(ku),s=Ru.dot(Iu),l=ku.dot(ku),u=ku.dot(Iu),c=a*l-o*o;if(0===c)return i.set(0,0,0),null;const h=1/c,d=(l*s-o*u)*h,p=(a*u-o*s)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Fu)&&(Fu.x>=0&&Fu.y>=0&&Fu.x+Fu.y<=1)}static getInterpolation(e,t,n,r,i,a,o,s){return null===this.getBarycoord(e,t,n,r,Fu)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,Fu.x),s.addScaledVector(a,Fu.y),s.addScaledVector(o,Fu.z),s)}static getInterpolatedAttribute(e,t,n,r,i,a){return Hu.setScalar(0),qu.setScalar(0),Vu.setScalar(0),Hu.fromBufferAttribute(e,t),qu.fromBufferAttribute(e,n),Vu.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(Hu,i.x),a.addScaledVector(qu,i.y),a.addScaledVector(Vu,i.z),a}static isFrontFacing(e,t,n,r){return Ru.subVectors(n,t),ku.subVectors(e,t),Ru.cross(ku).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ru.subVectors(this.c,this.b),ku.subVectors(this.a,this.b),.5*Ru.cross(ku).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ju.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ju.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return ju.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return ju.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ju.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let a,o;Pu.subVectors(r,n),Ou.subVectors(i,n),Lu.subVectors(e,n);const s=Pu.dot(Lu),l=Ou.dot(Lu);if(s<=0&&l<=0)return t.copy(n);zu.subVectors(e,r);const u=Pu.dot(zu),c=Ou.dot(zu);if(u>=0&&c<=u)return t.copy(r);const h=s*c-u*l;if(h<=0&&s>=0&&u<=0)return a=s/(s-u),t.copy(n).addScaledVector(Pu,a);Uu.subVectors(e,i);const d=Pu.dot(Uu),p=Ou.dot(Uu);if(p>=0&&d<=p)return t.copy(i);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return o=l/(l-p),t.copy(n).addScaledVector(Ou,o);const m=u*p-d*c;if(m<=0&&c-u>=0&&d-p>=0)return Bu.subVectors(i,r),o=(c-u)/(c-u+(d-p)),t.copy(r).addScaledVector(Bu,o);const g=1/(m+f+h);return a=f*g,o=h*g,t.copy(n).addScaledVector(Pu,a).addScaledVector(Ou,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Gu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Wu={h:0,s:0,l:0},Xu={h:0,s:0,l:0};function Yu(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class $u{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ul.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ul.workingColorSpace;return this.r=e,this.g=t,this.b=n,ul.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ul.workingColorSpace;if(e=Gs(e,1),t=js(t,0,1),n=js(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Yu(i,r,e+1/3),this.g=Yu(i,r,e),this.b=Yu(i,r,e-1/3)}return ul.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jo;const n=Gu[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=cl(e.r),this.g=cl(e.g),this.b=cl(e.b),this}copyLinearToSRGB(e){return this.r=hl(e.r),this.g=hl(e.g),this.b=hl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jo;return ul.fromWorkingColorSpace(Zu.copy(this),e),65536*Math.round(js(255*Zu.r,0,255))+256*Math.round(js(255*Zu.g,0,255))+Math.round(js(255*Zu.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jo;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ul.workingColorSpace;ul.fromWorkingColorSpace(Zu.copy(this),t);const n=Zu.r,r=Zu.g,i=Zu.b,a=Math.max(n,r,i),o=Math.min(n,r,i);let s,l;const u=(o+a)/2;if(o===a)s=0,l=0;else{const e=a-o;switch(l=u<=.5?e/(a+o):e/(2-a-o),a){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=u,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ul.workingColorSpace;return ul.fromWorkingColorSpace(Zu.copy(this),t),e.r=Zu.r,e.g=Zu.g,e.b=Zu.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jo;ul.fromWorkingColorSpace(Zu.copy(this),e);const t=Zu.r,n=Zu.g,r=Zu.b;return e!==Jo?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Wu),this.setHSL(Wu.h+e,Wu.s+t,Wu.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Wu),e.getHSL(Xu);const n=Ws(Wu.h,Xu.h,t),r=Ws(Wu.s,Xu.s,t),i=Ws(Wu.l,Xu.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Zu=new $u;$u.NAMES=Gu;let Ju=0;class Ku extends Ls{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Ju++}),this.uuid=Vs(),this.name="",this.type="Material",this.blending=mi,this.side=hi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Di,this.blendDst=Ni,this.blendEquation=bi,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $u(0,0,0),this.blendAlpha=0,this.depthFunc=Vi,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gs,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ns,this.stencilZFail=ns,this.stencilZPass=ns,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==mi&&(n.blending=this.blending),this.side!==hi&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==Di&&(n.blendSrc=this.blendSrc),this.blendDst!==Ni&&(n.blendDst=this.blendDst),this.blendEquation!==bi&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Vi&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==gs&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ns&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ns&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ns&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Qu extends Ku{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $u(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pu,this.combine=Yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ec=tc();function tc(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const a=new Uint32Array(2048),o=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,a[l]=e|t}for(let l=1024;l<2048;++l)a[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:a,exponentTable:o,offsetTable:s}}function nc(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=js(e,-65504,65504),ec.floatView[0]=e;const t=ec.uint32View[0],n=t>>23&511;return ec.baseTable[n]+((8388607&t)>>ec.shiftTable[n])}function rc(e){const t=e>>10;return ec.uint32View[0]=ec.mantissaTable[ec.offsetTable[t]+(1023&e)]+ec.exponentTable[t],ec.floatView[0]}const ic={toHalfFloat:nc,fromHalfFloat:rc},ac=new Tl,oc=new Zs;class sc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Es,this.updateRanges=[],this.gpuType=ka,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)oc.fromBufferAttribute(this,t),oc.applyMatrix3(e),this.setXY(t,oc.x,oc.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)ac.fromBufferAttribute(this,t),ac.applyMatrix3(e),this.setXYZ(t,ac.x,ac.y,ac.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ac.fromBufferAttribute(this,t),ac.applyMatrix4(e),this.setXYZ(t,ac.x,ac.y,ac.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ac.fromBufferAttribute(this,t),ac.applyNormalMatrix(e),this.setXYZ(t,ac.x,ac.y,ac.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ac.fromBufferAttribute(this,t),ac.transformDirection(e),this.setXYZ(t,ac.x,ac.y,ac.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Xs(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ys(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Xs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Xs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Xs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Xs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array),r=Ys(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array),r=Ys(r,this.array),i=Ys(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Es&&(e.usage=this.usage),e}}class lc extends sc{constructor(e,t,n){super(new Int8Array(e),t,n)}}class uc extends sc{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class cc extends sc{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class hc extends sc{constructor(e,t,n){super(new Int16Array(e),t,n)}}class dc extends sc{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class pc extends sc{constructor(e,t,n){super(new Int32Array(e),t,n)}}class fc extends sc{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class mc extends sc{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=rc(this.array[e*this.itemSize]);return this.normalized&&(t=Xs(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize]=nc(t),this}getY(e){let t=rc(this.array[e*this.itemSize+1]);return this.normalized&&(t=Xs(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize+1]=nc(t),this}getZ(e){let t=rc(this.array[e*this.itemSize+2]);return this.normalized&&(t=Xs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize+2]=nc(t),this}getW(e){let t=rc(this.array[e*this.itemSize+3]);return this.normalized&&(t=Xs(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ys(t,this.array)),this.array[e*this.itemSize+3]=nc(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array)),this.array[e+0]=nc(t),this.array[e+1]=nc(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array),r=Ys(r,this.array)),this.array[e+0]=nc(t),this.array[e+1]=nc(n),this.array[e+2]=nc(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array),r=Ys(r,this.array),i=Ys(i,this.array)),this.array[e+0]=nc(t),this.array[e+1]=nc(n),this.array[e+2]=nc(r),this.array[e+3]=nc(i),this}}class gc extends sc{constructor(e,t,n){super(new Float32Array(e),t,n)}}let vc=0;const yc=new ru,xc=new Nu,bc=new Tl,wc=new Nl,Sc=new Nl,_c=new Tl;class Mc extends Ls{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vc++}),this.uuid=Vs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Qs(e)?fc:dc)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Js).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return yc.makeRotationFromQuaternion(e),this.applyMatrix4(yc),this}rotateX(e){return yc.makeRotationX(e),this.applyMatrix4(yc),this}rotateY(e){return yc.makeRotationY(e),this.applyMatrix4(yc),this}rotateZ(e){return yc.makeRotationZ(e),this.applyMatrix4(yc),this}translate(e,t,n){return yc.makeTranslation(e,t,n),this.applyMatrix4(yc),this}scale(e,t,n){return yc.makeScale(e,t,n),this.applyMatrix4(yc),this}lookAt(e){return xc.lookAt(e),xc.updateMatrix(),this.applyMatrix4(xc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bc).negate(),this.translate(bc.x,bc.y,bc.z),this}setFromPoints(e){const t=this.getAttribute("position");if(void 0===t){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}this.setAttribute("position",new gc(t,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const n=e[r];t.setXYZ(r,n.x,n.y,n.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Tl(-1/0,-1/0,-1/0),new Tl(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];wc.setFromBufferAttribute(e),this.morphTargetsRelative?(_c.addVectors(this.boundingBox.min,wc.min),this.boundingBox.expandByPoint(_c),_c.addVectors(this.boundingBox.max,wc.max),this.boundingBox.expandByPoint(_c)):(this.boundingBox.expandByPoint(wc.min),this.boundingBox.expandByPoint(wc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Yl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Tl,1/0);if(e){const n=this.boundingSphere.center;if(wc.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];Sc.setFromBufferAttribute(n),this.morphTargetsRelative?(_c.addVectors(wc.min,Sc.min),wc.expandByPoint(_c),_c.addVectors(wc.max,Sc.max),wc.expandByPoint(_c)):(wc.expandByPoint(Sc.min),wc.expandByPoint(Sc.max))}wc.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)_c.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(_c));if(t)for(let i=0,a=t.length;i<a;i++){const a=t[i],o=this.morphTargetsRelative;for(let t=0,i=a.count;t<i;t++)_c.fromBufferAttribute(a,t),o&&(bc.fromBufferAttribute(e,t),_c.add(bc)),r=Math.max(r,n.distanceToSquared(_c))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new sc(new Float32Array(4*n.count),4));const a=this.getAttribute("tangent"),o=[],s=[];for(let _=0;_<n.count;_++)o[_]=new Tl,s[_]=new Tl;const l=new Tl,u=new Tl,c=new Tl,h=new Zs,d=new Zs,p=new Zs,f=new Tl,m=new Tl;function g(e,t,r){l.fromBufferAttribute(n,e),u.fromBufferAttribute(n,t),c.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),u.sub(l),c.sub(l),d.sub(h),p.sub(h);const a=1/(d.x*p.y-p.x*d.y);isFinite(a)&&(f.copy(u).multiplyScalar(p.y).addScaledVector(c,-d.y).multiplyScalar(a),m.copy(c).multiplyScalar(d.x).addScaledVector(u,-p.x).multiplyScalar(a),o[e].add(f),o[t].add(f),o[r].add(f),s[e].add(m),s[t].add(m),s[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let _=0,M=v.length;_<M;++_){const t=v[_],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const y=new Tl,x=new Tl,b=new Tl,w=new Tl;function S(e){b.fromBufferAttribute(r,e),w.copy(b);const t=o[e];y.copy(t),y.sub(b.multiplyScalar(b.dot(t))).normalize(),x.crossVectors(w,t);const n=x.dot(s[e])<0?-1:1;a.setXYZW(e,y.x,y.y,y.z,n)}for(let _=0,M=v.length;_<M;++_){const t=v[_],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)S(e.getX(r+0)),S(e.getX(r+1)),S(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new sc(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Tl,i=new Tl,a=new Tl,o=new Tl,s=new Tl,l=new Tl,u=new Tl,c=new Tl;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),o.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),o.add(u),s.add(u),l.add(u),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)_c.fromBufferAttribute(e,t),_c.normalize(),e.setXYZ(t,_c.x,_c.y,_c.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r);let o=0,s=0;for(let l=0,u=t.length;l<u;l++){o=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)a[s++]=n[o++]}return new sc(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Mc,n=this.index.array,r=this.attributes;for(const o in r){const i=e(r[o],n);t.setAttribute(o,i)}const i=this.morphAttributes;for(const o in i){const r=[],a=i[o];for(let t=0,i=a.length;t<i;t++){const i=e(a[t],n);r.push(i)}t.morphAttributes[o]=r}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,s=a.length;o<s;o++){const e=a[o];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let l=0,u=a.length;l<u;l++){const e=a[l];this.addGroup(e.start,e.count,e.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ec=new ru,Ac=new nu,Tc=new Yl,Cc=new Tl,Dc=new Tl,Nc=new Tl,Rc=new Tl,kc=new Tl,Ic=new Tl,Fc=new Tl,Pc=new Tl;class Oc extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Qu;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(i&&o){Ic.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=o[n],s=i[n];0!==r&&(kc.fromBufferAttribute(s,e),a?Ic.addScaledVector(kc,r):Ic.addScaledVector(kc.sub(t),r))}t.add(Ic)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Tc.copy(n.boundingSphere),Tc.applyMatrix4(i),Ac.copy(e.ray).recast(e.near),!1===Tc.containsPoint(Ac.origin)){if(null===Ac.intersectSphere(Tc,Cc))return;if(Ac.origin.distanceToSquared(Cc)>(e.far-e.near)**2)return}Ec.copy(i).invert(),Ac.copy(e.ray).applyMatrix4(Ec),null!==n.boundingBox&&!1===Ac.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Ac)}}_computeIntersections(e,t,n){let r;const i=this.geometry,a=this.material,o=i.index,s=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,c=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==o)if(Array.isArray(a))for(let p=0,f=h.length;p<f;p++){const i=h[p],s=a[i.materialIndex];for(let a=Math.max(i.start,d.start),h=Math.min(o.count,Math.min(i.start+i.count,d.start+d.count));a<h;a+=3){r=Bc(this,s,e,n,l,u,c,o.getX(a),o.getX(a+1),o.getX(a+2)),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);i<s;i+=3){r=Bc(this,a,e,n,l,u,c,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==s)if(Array.isArray(a))for(let p=0,f=h.length;p<f;p++){const i=h[p],o=a[i.materialIndex];for(let a=Math.max(i.start,d.start),h=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));a<h;a+=3){r=Bc(this,o,e,n,l,u,c,a,a+1,a+2),r&&(r.faceIndex=Math.floor(a/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),o=Math.min(s.count,d.start+d.count);i<o;i+=3){r=Bc(this,a,e,n,l,u,c,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function Bc(e,t,n,r,i,a,o,s,l,u){e.getVertexPosition(s,Dc),e.getVertexPosition(l,Nc),e.getVertexPosition(u,Rc);const c=function(e,t,n,r,i,a,o,s){let l;if(l=t.side===di?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side===hi,s),null===l)return null;Pc.copy(s),Pc.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(Pc);return u<n.near||u>n.far?null:{distance:u,point:Pc.clone(),object:e}}(e,t,n,r,Dc,Nc,Rc,Fc);if(c){const e=new Tl;ju.getBarycoord(Fc,Dc,Nc,Rc,e),i&&(c.uv=ju.getInterpolatedAttribute(i,s,l,u,e,new Zs)),a&&(c.uv1=ju.getInterpolatedAttribute(a,s,l,u,e,new Zs)),o&&(c.normal=ju.getInterpolatedAttribute(o,s,l,u,e,new Tl),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const t={a:s,b:l,c:u,normal:new Tl,materialIndex:0};ju.getNormal(Dc,Nc,Rc,t.normal),c.face=t,c.barycoord=e}return c}class Lc extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};const o=this;r=Math.floor(r),i=Math.floor(i),a=Math.floor(a);const s=[],l=[],u=[],c=[];let h=0,d=0;function p(e,t,n,r,i,a,p,f,m,g,v){const y=a/m,x=p/g,b=a/2,w=p/2,S=f/2,_=m+1,M=g+1;let E=0,A=0;const T=new Tl;for(let o=0;o<M;o++){const a=o*x-w;for(let s=0;s<_;s++){const h=s*y-b;T[e]=h*r,T[t]=a*i,T[n]=S,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,u.push(T.x,T.y,T.z),c.push(s/m),c.push(1-o/g),E+=1}}for(let o=0;o<g;o++)for(let e=0;e<m;e++){const t=h+e+_*o,n=h+e+_*(o+1),r=h+(e+1)+_*(o+1),i=h+(e+1)+_*o;s.push(t,n,i),s.push(n,r,i),A+=6}o.addGroup(d,A,v),d+=A,h+=E}p("z","y","x",-1,-1,n,t,e,a,i,0),p("z","y","x",1,-1,n,t,-e,a,i,1),p("x","z","y",1,1,e,n,t,r,a,2),p("x","z","y",1,-1,e,n,-t,r,a,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new gc(l,3)),this.setAttribute("normal",new gc(u,3)),this.setAttribute("uv",new gc(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function zc(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Uc(e){const t={};for(let n=0;n<e.length;n++){const r=zc(e[n]);for(const e in r)t[e]=r[e]}return t}function Hc(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:ul.workingColorSpace}const qc={clone:zc,merge:Uc};class Vc extends Ku{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=zc(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class jc extends Nu{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ru,this.projectionMatrix=new ru,this.projectionMatrixInverse=new ru,this.coordinateSystem=Os}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Gc=new Tl,Wc=new Zs,Xc=new Zs;class Yc extends jc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*qs*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Hs*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*qs*Math.atan(Math.tan(.5*Hs*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Gc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Gc.x,Gc.y).multiplyScalar(-e/Gc.z),Gc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Gc.x,Gc.y).multiplyScalar(-e/Gc.z)}getViewSize(e,t){return this.getViewBounds(e,Wc,Xc),t.subVectors(Xc,Wc)}setViewOffset(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Hs*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,o=a.fullHeight;i+=a.offsetX*r/e,t-=a.offsetY*n/o,r*=a.width/e,n*=a.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $c=-90;class Zc extends Nu{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Yc($c,1,e,t);r.layers=this.layers,this.add(r);const i=new Yc($c,1,e,t);i.layers=this.layers,this.add(i);const a=new Yc($c,1,e,t);a.layers=this.layers,this.add(a);const o=new Yc($c,1,e,t);o.layers=this.layers,this.add(o);const s=new Yc($c,1,e,t);s.layers=this.layers,this.add(s);const l=new Yc($c,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,a,o,s]=t;for(const l of t)this.remove(l);if(e===Os)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==Bs)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,a,o,s,l,u]=this.children,c=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,a),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,u),e.setRenderTarget(c,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class Jc extends yl{constructor(e,t,n,r,i,a,o,s,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:la,n,r,i,a,o,s,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Kc extends wl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Jc(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:wa}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Lc(5,5,5),i=new Vc({name:"CubemapFromEquirect",uniforms:zc(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:di,blending:fi});i.uniforms.tEquirect.value=t;const a=new Oc(r,i),o=t.minFilter;t.minFilter===Ma&&(t.minFilter=wa);return new Zc(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}class Qc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new $u(e),this.density=t}clone(){return new Qc(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class eh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new $u(e),this.near=t,this.far=n}clone(){return new eh(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class th extends Nu{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new pu,this.environmentIntensity=1,this.environmentRotation=new pu,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class nh{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Es,this.updateRanges=[],this.version=0,this.uuid=Vs()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vs()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rh=new Tl;class ih{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)rh.fromBufferAttribute(this,t),rh.applyMatrix4(e),this.setXYZ(t,rh.x,rh.y,rh.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)rh.fromBufferAttribute(this,t),rh.applyNormalMatrix(e),this.setXYZ(t,rh.x,rh.y,rh.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)rh.fromBufferAttribute(this,t),rh.transformDirection(e),this.setXYZ(t,rh.x,rh.y,rh.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Xs(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Ys(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Ys(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ys(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ys(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ys(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Xs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Xs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Xs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Xs(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array),r=Ys(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ys(t,this.array),n=Ys(n,this.array),r=Ys(r,this.array),i=Ys(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new sc(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ih(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class ah extends Ku{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $u(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let oh;const sh=new Tl,lh=new Tl,uh=new Tl,ch=new Zs,hh=new Zs,dh=new ru,ph=new Tl,fh=new Tl,mh=new Tl,gh=new Zs,vh=new Zs,yh=new Zs;class xh extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ah;if(super(),this.isSprite=!0,this.type="Sprite",void 0===oh){oh=new Mc;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new nh(e,5);oh.setIndex([0,1,2,0,2,3]),oh.setAttribute("position",new ih(t,3,0,!1)),oh.setAttribute("uv",new ih(t,2,3,!1))}this.geometry=oh,this.material=e,this.center=new Zs(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),lh.setFromMatrixScale(this.matrixWorld),dh.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),uh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&lh.multiplyScalar(-uh.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const a=this.center;bh(ph.set(-.5,-.5,0),uh,a,lh,r,i),bh(fh.set(.5,-.5,0),uh,a,lh,r,i),bh(mh.set(.5,.5,0),uh,a,lh,r,i),gh.set(0,0),vh.set(1,0),yh.set(1,1);let o=e.ray.intersectTriangle(ph,fh,mh,!1,sh);if(null===o&&(bh(fh.set(-.5,.5,0),uh,a,lh,r,i),vh.set(0,1),o=e.ray.intersectTriangle(ph,mh,fh,!1,sh),null===o))return;const s=e.ray.origin.distanceTo(sh);s<e.near||s>e.far||t.push({distance:s,point:sh.clone(),uv:ju.getInterpolation(sh,ph,fh,mh,gh,vh,yh,new Zs),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function bh(e,t,n,r,i,a){ch.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(hh.x=a*ch.x-i*ch.y,hh.y=i*ch.x+a*ch.y):hh.copy(ch),e.copy(t),e.x+=hh.x,e.y+=hh.y,e.applyMatrix4(dh)}const wh=new Tl,Sh=new Tl;class _h extends Nu{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const e=t.splice(n,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){wh.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(wh);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){wh.setFromMatrixPosition(e.matrixWorld),Sh.setFromMatrixPosition(this.matrixWorld);const n=wh.distanceTo(Sh)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const Mh=new Tl,Eh=new xl,Ah=new xl,Th=new Tl,Ch=new ru,Dh=new Tl,Nh=new Yl,Rh=new ru,kh=new nu;class Ih extends Oc{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=aa,this.bindMatrix=new ru,this.bindMatrixInverse=new ru,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Nl),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Dh),this.boundingBox.expandByPoint(Dh)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Yl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Dh),this.boundingSphere.expandByPoint(Dh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Nh.copy(this.boundingSphere),Nh.applyMatrix4(r),!1!==e.ray.intersectsSphere(Nh)&&(Rh.copy(r).invert(),kh.copy(e.ray).applyMatrix4(Rh),null!==this.boundingBox&&!1===kh.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,kh)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new xl,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===aa?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===oa?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Eh.fromBufferAttribute(r.attributes.skinIndex,e),Ah.fromBufferAttribute(r.attributes.skinWeight,e),Mh.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=Ah.getComponent(i);if(0!==e){const r=Eh.getComponent(i);Ch.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Th.copy(Mh).applyMatrix4(Ch),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fh extends Nu{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ph extends yl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:ga,arguments.length>9&&void 0!==arguments[9]?arguments[9]:ga,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Oh=new ru,Bh=new ru;class Lh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Vs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new ru)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new ru;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,a=e.length;i<a;i++){const r=e[i]?e[i].matrixWorld:Bh;Oh.multiplyMatrices(r,t[i]),Oh.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Lh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ph(t,e,e,Ua,ka);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Fh),this.bones.push(i),this.boneInverses.push((new ru).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class zh extends sc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Uh=new ru,Hh=new ru,qh=[],Vh=new Nl,jh=new ru,Gh=new Oc,Wh=new Yl;class Xh extends Oc{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new zh(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,jh)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Nl),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Uh),Vh.copy(e.boundingBox).applyMatrix4(Uh),this.boundingBox.union(Vh)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Yl),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Uh),Wh.copy(e.boundingSphere).applyMatrix4(Uh),this.boundingSphere.union(Wh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[i+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Gh.geometry=this.geometry,Gh.material=this.material,void 0!==Gh.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Wh.copy(this.boundingSphere),Wh.applyMatrix4(n),!1!==e.ray.intersectsSphere(Wh)))for(let i=0;i<r;i++){this.getMatrixAt(i,Uh),Hh.multiplyMatrices(n,Uh),Gh.matrixWorld=Hh,Gh.raycast(e,qh);for(let e=0,n=qh.length;e<n;e++){const n=qh[e];n.instanceId=i,n.object=this,t.push(n)}qh.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new zh(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Ph(new Float32Array(r*this.count),r,this.count,Ga,ka));const i=this.morphTexture.source.data.data;let a=0;for(let l=0;l<n.length;l++)a+=n[l];const o=this.geometry.morphTargetsRelative?1:1-a,s=r*e;i[s]=o,i.set(n,s+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const Yh=new Tl,$h=new Tl,Zh=new Js;class Jh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Yh.subVectors(n,t).cross($h.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Yh),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Zh.getNormalMatrix(e),r=this.coplanarPoint(Yh).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Kh=new Yl,Qh=new Tl;class ed{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Jh,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Jh,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Jh,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Jh,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Jh,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Jh;this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Os;const n=this.planes,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],g=r[12],v=r[13],y=r[14],x=r[15];if(n[0].setComponents(s-i,h-l,m-d,x-g).normalize(),n[1].setComponents(s+i,h+l,m+d,x+g).normalize(),n[2].setComponents(s+a,h+u,m+p,x+v).normalize(),n[3].setComponents(s-a,h-u,m-p,x-v).normalize(),n[4].setComponents(s-o,h-c,m-f,x-y).normalize(),t===Os)n[5].setComponents(s+o,h+c,m+f,x+y).normalize();else{if(t!==Bs)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,c,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Kh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Kh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Kh)}intersectsSprite(e){return Kh.center.set(0,0,0),Kh.radius=.7071067811865476,Kh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Kh)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Qh.x=r.normal.x>0?e.max.x:e.min.x,Qh.y=r.normal.y>0?e.max.y:e.min.y,Qh.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Qh)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function td(e,t){return e-t}function nd(e,t){return e.z-t.z}function rd(e,t){return t.z-e.z}class id{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const i=this.pool,a=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1,index:-1});const o=i[this.index];a.push(o),this.index++,o.start=e,o.count=t,o.z=n,o.index=r}reset(){this.list.length=0,this.index=0}}const ad=new ru,od=new $u(1,1,1),sd=new ed,ld=new Nl,ud=new Yl,cd=new Tl,hd=new Tl,dd=new Tl,pd=new id,fd=new Oc,md=[];function gd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let a=0;a<i;a++)for(let i=0;i<r;i++)t.setComponent(a+n,i,e.getComponent(a,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}function vd(e,t){if(e.constructor!==t.constructor){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++)t[r]=e[r]}else{const n=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,n))}}class yd extends Oc{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,r=arguments.length>3?arguments[3]:void 0;super(new Mc,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Ph(t,e,e,Ua,ka);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Ph(t,e,e,Wa,Ra);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Ph(t,e,e,Ua,ka);n.colorSpace=ul.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:a,itemSize:o,normalized:s}=i,l=new a.constructor(n*o),u=new sc(l,o,s);t.setAttribute(r,u)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new sc(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nl);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,ad),this.getBoundingBoxAt(r,ld).applyMatrix4(ad),e.union(ld)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Yl);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,ad),this.getBoundingSphereAt(r,ud).applyMatrix4(ad),e.union(ud)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const t={visible:!0,active:!0,geometryIndex:e};let n=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(td),n=this._availableInstanceIds.shift(),this._instanceInfo[n]=t):(n=this._instanceInfo.length,this._instanceInfo.push(t));const r=this._matricesTexture;ad.identity().toArray(r.image.data,16*n),r.needsUpdate=!0;const i=this._colorsTexture;return i&&(od.toArray(i.image.data,4*n),i.needsUpdate=!0),this._visibilityChanged=!0,n}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},i=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=-1===t?e.getAttribute("position").count:t;const a=e.getIndex();if(null!==a&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=-1===n?a.count:n),-1!==r.indexStart&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let o;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(td),o=this._availableGeometryIds.shift(),i[o]=r):(o=this._geometryCount,this._geometryCount++,i.push(r)),this.setGeometryAt(o,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,o}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),a=t.getIndex(),o=this._geometryInfo[e];if(r&&a.count>o.reservedIndexCount||t.attributes.position.count>o.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const s=o.vertexStart,l=o.reservedVertexCount;o.vertexCount=t.getAttribute("position").count;for(const u in n.attributes){const e=t.getAttribute(u),r=n.getAttribute(u);gd(e,r,s);const i=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=s+t;for(let t=0;t<i;t++)r.setComponent(e,t,0)}r.needsUpdate=!0,r.addUpdateRange(s*i,l*i)}if(r){const e=o.indexStart,n=o.reservedIndexCount;o.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)i.setX(e+t,s+a.getX(t));for(let t=a.count,r=n;t<r;t++)i.setX(e+t,s);i.needsUpdate=!0,i.addUpdateRange(e,o.reservedIndexCount)}return o.start=r?o.indexStart:o.vertexStart,o.count=r?o.indexCount:o.vertexCount,o.boundingBox=null,null!==t.boundingBox&&(o.boundingBox=t.boundingBox.clone()),o.boundingSphere=null,null!==t.boundingSphere&&(o.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;const n=this._instanceInfo;for(let r=0,i=n.length;r<i;r++)n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map(((e,t)=>t)).sort(((e,t)=>n[e].vertexStart-n[t].vertexStart)),i=this.geometry;for(let a=0,o=n.length;a<o;a++){const o=r[a],s=n[o];if(!1!==s.active){if(null!==i.index){if(s.indexStart!==t){const{indexStart:n,vertexStart:r,reservedIndexCount:a}=s,o=i.index,l=o.array,u=e-r;for(let e=n;e<n+a;e++)l[e]=l[e]+u;o.array.copyWithin(t,n,n+a),o.addUpdateRange(t,a),s.indexStart=t}t+=s.reservedIndexCount}if(s.vertexStart!==e){const{vertexStart:t,reservedVertexCount:n}=s,r=i.attributes;for(const i in r){const a=r[i],{array:o,itemSize:s}=a;o.copyWithin(e*s,t*s,(t+n)*s),a.addUpdateRange(e*s,n*s)}s.vertexStart=e}e+=s.reservedVertexCount,s.start=i.index?s.indexStart:s.vertexStart,this._nextIndexStart=i.index?s.indexStart+s.reservedIndexCount:0,this._nextVertexStart=s.vertexStart+s.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingBox){const e=new Nl,t=n.index,i=n.attributes.position;for(let n=r.start,a=r.start+r.count;n<a;n++){let r=n;t&&(r=t.getX(r)),e.expandByPoint(cd.fromBufferAttribute(i,r))}r.boundingBox=e}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(null===r.boundingSphere){const t=new Yl;this.getBoundingBoxAt(e,ld),ld.getCenter(t.center);const i=n.index,a=n.attributes.position;let o=0;for(let e=r.start,n=r.start+r.count;e<n;e++){let n=e;i&&(n=i.getX(n)),cd.fromBufferAttribute(a,n),o=Math.max(o,t.center.distanceToSquared(cd))}t.radius=Math.sqrt(o),r.boundingSphere=t}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,16*e),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(td);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),i=new Int32Array(e);vd(this._multiDrawCounts,r),vd(this._multiDrawStarts,i),this._multiDrawCounts=r,this._multiDrawStarts=i,this._maxInstanceCount=e;const a=this._indirectTexture,o=this._matricesTexture,s=this._colorsTexture;a.dispose(),this._initIndirectTexture(),vd(a.image.data,this._indirectTexture.image.data),o.dispose(),this._initMatricesTexture(),vd(o.image.data,this._matricesTexture.image.data),s&&(s.dispose(),this._initColorsTexture(),vd(s.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter((e=>e.active)),r=Math.max(...n.map((e=>e.vertexStart+e.reservedVertexCount)));if(r>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index){const e=Math.max(...n.map((e=>e.indexStart+e.reservedIndexCount)));if(e>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`)}const i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Mc,this._initializeGeometry(i));const a=this.geometry;i.index&&vd(i.index.array,a.index.array);for(const o in i.attributes)vd(i.attributes[o].array,a.attributes[o].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,i=this.matrixWorld,a=this.geometry;fd.material=this.material,fd.geometry.index=a.index,fd.geometry.attributes=a.attributes,null===fd.geometry.boundingBox&&(fd.geometry.boundingBox=new Nl),null===fd.geometry.boundingSphere&&(fd.geometry.boundingSphere=new Yl);for(let o=0,s=n.length;o<s;o++){if(!n[o].visible||!n[o].active)continue;const a=n[o].geometryIndex,s=r[a];fd.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(o,fd.matrixWorld).premultiply(i),this.getBoundingBoxAt(a,fd.geometry.boundingBox),this.getBoundingSphereAt(a,fd.geometry.boundingSphere),fd.raycast(e,md);for(let e=0,n=md.length;e<n;e++){const n=md[e];n.object=this,n.batchId=o,t.push(n)}md.length=0}fd.material=null,fd.geometry.index=null,fd.geometry.attributes={},fd.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map((e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null}))),this._instanceInfo=e._instanceInfo.map((e=>({...e}))),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),o=null===a?1:a.array.BYTES_PER_ELEMENT,s=this._instanceInfo,l=this._multiDrawStarts,u=this._multiDrawCounts,c=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,p=d.image.data;h&&(ad.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),sd.setFromProjectionMatrix(ad,e.coordinateSystem));let f=0;if(this.sortObjects){ad.copy(this.matrixWorld).invert(),cd.setFromMatrixPosition(n.matrixWorld).applyMatrix4(ad),hd.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(ad);for(let n=0,r=s.length;n<r;n++)if(s[n].visible&&s[n].active){const e=s[n].geometryIndex;this.getMatrixAt(n,ad),this.getBoundingSphereAt(e,ud).applyMatrix4(ad);let t=!1;if(h&&(t=!sd.intersectsSphere(ud)),!t){const t=c[e],r=dd.subVectors(ud.center,cd).dot(hd);pd.push(t.start,t.count,r,n)}}const e=pd.list,t=this.customSort;null===t?e.sort(i.transparent?rd:nd):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[f]=t.start*o,u[f]=t.count,p[f]=t.index,f++}pd.reset()}else for(let m=0,g=s.length;m<g;m++)if(s[m].visible&&s[m].active){const e=s[m].geometryIndex;let t=!1;if(h&&(this.getMatrixAt(m,ad),this.getBoundingSphereAt(e,ud).applyMatrix4(ad),t=!sd.intersectsSphere(ud)),!t){const t=c[e];l[f]=t.start*o,u[f]=t.count,p[f]=m,f++}}d.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,a){this.onBeforeRender(e,null,r,i,a)}}class xd extends Ku{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $u(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const bd=new Tl,wd=new Tl,Sd=new ru,_d=new nu,Md=new Yl,Ed=new Tl,Ad=new Tl;class Td extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new xd;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)bd.fromBufferAttribute(t,e-1),wd.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=bd.distanceTo(wd);e.setAttribute("lineDistance",new gc(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Md.copy(n.boundingSphere),Md.applyMatrix4(r),Md.radius+=i,!1===e.ray.intersectsSphere(Md))return;Sd.copy(r).invert(),_d.copy(e.ray).applyMatrix4(Sd);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=this.isLineSegments?2:1,u=n.index,c=n.attributes.position;if(null!==u){const n=Math.max(0,a.start),r=Math.min(u.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=u.getX(i),r=u.getX(i+1),a=Cd(this,e,_d,s,n,r);a&&t.push(a)}if(this.isLineLoop){const i=u.getX(r-1),a=u.getX(n),o=Cd(this,e,_d,s,i,a);o&&t.push(o)}}else{const n=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);for(let i=n,a=r-1;i<a;i+=l){const n=Cd(this,e,_d,s,i,i+1);n&&t.push(n)}if(this.isLineLoop){const i=Cd(this,e,_d,s,r-1,n);i&&t.push(i)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Cd(e,t,n,r,i,a){const o=e.geometry.attributes.position;bd.fromBufferAttribute(o,i),wd.fromBufferAttribute(o,a);if(n.distanceSqToSegment(bd,wd,Ed,Ad)>r)return;Ed.applyMatrix4(e.matrixWorld);const s=t.ray.origin.distanceTo(Ed);return s<t.near||s>t.far?void 0:{distance:s,point:Ad.clone().applyMatrix4(e.matrixWorld),index:i,face:null,faceIndex:null,barycoord:null,object:e}}const Dd=new Tl,Nd=new Tl;class Rd extends Td{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Dd.fromBufferAttribute(t,e),Nd.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Dd.distanceTo(Nd);e.setAttribute("lineDistance",new gc(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class kd extends Td{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Id extends Ku{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $u(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Fd=new ru,Pd=new nu,Od=new Yl,Bd=new Tl;class Ld extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mc,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Id;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Od.copy(n.boundingSphere),Od.applyMatrix4(r),Od.radius+=i,!1===e.ray.intersectsSphere(Od))return;Fd.copy(r).invert(),Pd.copy(e.ray).applyMatrix4(Fd);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,l=n.index,u=n.attributes.position;if(null!==l){for(let n=Math.max(0,a.start),i=Math.min(l.count,a.start+a.count);n<i;n++){const i=l.getX(n);Bd.fromBufferAttribute(u,i),zd(Bd,i,s,r,e,t,this)}}else{for(let n=Math.max(0,a.start),i=Math.min(u.count,a.start+a.count);n<i;n++)Bd.fromBufferAttribute(u,n),zd(Bd,n,s,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function zd(e,t,n,r,i,a,o){const s=Pd.distanceSqToPoint(e);if(s<n){const n=new Tl;Pd.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}class Ud extends Nu{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Hd extends yl{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:wa,this.magFilter=void 0!==i?i:wa,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class qd extends yl{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ga,this.minFilter=ga,this.generateMipmaps=!1,this.needsUpdate=!0}}class Vd extends yl{constructor(e,t,n,r,i,a,o,s,l,u,c,h){super(null,a,o,s,l,u,r,i,c,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class jd extends Vd{constructor(e,t,n,r,i,a){super(e,t,n,i,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=fa,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Gd extends Vd{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,la),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Wd extends yl{constructor(e,t,n,r,i,a,o,s,l){super(e,t,n,r,i,a,o,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Xd extends yl{constructor(e,t,n,r,i,a,o,s,l){let u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Va;if(u!==Va&&u!==ja)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Va&&(n=Ra),void 0===n&&u===ja&&(n=Oa),super(null,r,i,a,o,s,u,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:ga,this.minFilter=void 0!==s?s:ga,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Yd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let a;a=t||e*n[i-1];let o,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),o=n[r]-a,o<0)s=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===a)return r/(i-1);const u=n[r];return(r+(a-u)/(n[r+1]-u))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Zs:new Tl);return s.copy(o).sub(a).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Tl,r=[],i=[],a=[],o=new Tl,s=new ru;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new Tl)}i[0]=new Tl,a[0]=new Tl;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(js(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(o,e))}a[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(js(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),a[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class $d extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);const a=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=s-this.aY;o=n*e-r*t+this.aX,s=n*t+r*e+this.aY}return t.set(o,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Zd extends $d{constructor(e,t,n,r,i,a){super(e,t,n,n,r,i,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Jd(){let e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){let l=(t-e)/a-(n-e)/(a+o)+(n-t)/o,u=(n-t)/o-(r-t)/(o+s)+(r-n)/s;l*=o,u*=o,i(t,n,l,u)},calc:function(i){const a=i*i;return e+t*i+n*a+r*(a*i)}}}const Kd=new Tl,Qd=new Jd,ep=new Jd,tp=new Jd;class np extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let a,o,s=Math.floor(i),l=i-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:0===l&&s===r-1&&(s=r-2,l=1),this.closed||s>0?a=n[(s-1)%r]:(Kd.subVectors(n[0],n[1]).add(n[0]),a=Kd);const u=n[s%r],c=n[(s+1)%r];if(this.closed||s+2<r?o=n[(s+2)%r]:(Kd.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=Kd),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(c),e),r=Math.pow(c.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Qd.initNonuniformCatmullRom(a.x,u.x,c.x,o.x,t,n,r),ep.initNonuniformCatmullRom(a.y,u.y,c.y,o.y,t,n,r),tp.initNonuniformCatmullRom(a.z,u.z,c.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(Qd.initCatmullRom(a.x,u.x,c.x,o.x,this.tension),ep.initCatmullRom(a.y,u.y,c.y,o.y,this.tension),tp.initCatmullRom(a.z,u.z,c.z,o.z,this.tension));return t.set(Qd.calc(l),ep.calc(l),tp.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Tl).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function rp(e,t,n,r,i){const a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function ip(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ap(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class op extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zs,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Zs;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(ap(e,n.x,r.x,i.x,a.x),ap(e,n.y,r.y,i.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sp extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Tl,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Tl;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl,n=this.v0,r=this.v1,i=this.v2,a=this.v3;return t.set(ap(e,n.x,r.x,i.x,a.x),ap(e,n.y,r.y,i.y,a.y),ap(e,n.z,r.z,i.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class lp extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class up extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class cp extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Zs;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs,n=this.v0,r=this.v1,i=this.v2;return t.set(ip(e,n.x,r.x,i.x),ip(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hp extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Tl;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl,n=this.v0,r=this.v1,i=this.v2;return t.set(ip(e,n.x,r.x,i.x),ip(e,n.y,r.y,i.y),ip(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dp extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs,n=this.points,r=(n.length-1)*e,i=Math.floor(r),a=r-i,o=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],u=n[i>n.length-3?n.length-1:i+2];return t.set(rp(a,o.x,s.x,l.x,u.x),rp(a,o.y,s.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Zs).fromArray(n))}return this}}var pp=Object.freeze({__proto__:null,ArcCurve:Zd,CatmullRomCurve3:np,CubicBezierCurve:op,CubicBezierCurve3:sp,EllipseCurve:$d,LineCurve:lp,LineCurve3:up,QuadraticBezierCurve:cp,QuadraticBezierCurve3:hp,SplineCurve:dp});class fp extends Yd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new pp[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,a=this.curves[i],o=a.getLength(),s=0===o?0:1-e/o;return a.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const a=i[r],o=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new pp[n.type]).fromJSON(n))}return this}}class mp extends fp{constructor(e){super(),this.type="Path",this.currentPoint=new Zs,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new lp(this.currentPoint.clone(),new Zs(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new cp(this.currentPoint.clone(),new Zs(e,t),new Zs(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,a){const o=new op(this.currentPoint.clone(),new Zs(e,t),new Zs(n,r),new Zs(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new dp(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,a){const o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+o,t+s,n,r,i,a),this}absarc(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}ellipse(e,t,n,r,i,a,o,s){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,a,o,s),this}absellipse(e,t,n,r,i,a,o,s){const l=new $d(e,t,n,r,i,a,o,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class gp extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Zs(0,-.5),new Zs(.5,0),new Zs(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=js(r,0,2*Math.PI);const i=[],a=[],o=[],s=[],l=[],u=1/t,c=new Tl,h=new Zs,d=new Tl,p=new Tl,f=new Tl;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),s.push(d.x,d.y,d.z),f.copy(p)}for(let v=0;v<=t;v++){const i=n+v*u*r,d=Math.sin(i),p=Math.cos(i);for(let n=0;n<=e.length-1;n++){c.x=e[n].x*d,c.y=e[n].y,c.z=e[n].x*p,a.push(c.x,c.y,c.z),h.x=v/t,h.y=n/(e.length-1),o.push(h.x,h.y);const r=s[3*n+0]*d,i=s[3*n+1],u=s[3*n+0]*p;l.push(r,i,u)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,r=n,a=n+e.length,o=n+e.length+1,s=n+1;i.push(r,a,s),i.push(o,s,a)}this.setIndex(i),this.setAttribute("position",new gc(a,3)),this.setAttribute("uv",new gc(o,2)),this.setAttribute("normal",new gc(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gp(e.points,e.segments,e.phiStart,e.phiLength)}}class vp extends gp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=new mp;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new vp(e.radius,e.length,e.capSegments,e.radialSegments)}}class yp extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],a=[],o=[],s=[],l=new Tl,u=new Zs;a.push(0,0,0),o.push(0,0,1),s.push(.5,.5);for(let c=0,h=3;c<=t;c++,h+=3){const i=n+c/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),a.push(l.x,l.y,l.z),o.push(0,0,1),u.x=(a[h]/e+1)/2,u.y=(a[h+1]/e+1)/2,s.push(u.x,u.y)}for(let c=1;c<=t;c++)i.push(c,c+1,0);this.setIndex(i),this.setAttribute("position",new gc(a,3)),this.setAttribute("normal",new gc(o,3)),this.setAttribute("uv",new gc(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class xp extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const u=[],c=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function v(n){const i=p,a=new Zs,f=new Tl;let v=0;const y=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=r;e++){const t=e/r*s+o,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*x,f.z=y*n,c.push(f.x,f.y,f.z),h.push(0,x,0),a.x=.5*n+.5,a.y=.5*i*x+.5,d.push(a.x,a.y),p++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const a=new Tl,v=new Tl;let y=0;const x=(t-e)/n;for(let l=0;l<=i;l++){const u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+o,l=Math.sin(i),f=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*f,c.push(v.x,v.y,v.z),a.set(l,x,f).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),u.push(p++)}f.push(u)}for(let n=0;n<r;n++)for(let r=0;r<i;r++){const a=f[r][n],o=f[r+1][n],s=f[r+1][n+1],l=f[r][n+1];(e>0||0!==r)&&(u.push(a,o,l),y+=3),(t>0||r!==i-1)&&(u.push(o,s,l),y+=3)}l.addGroup(g,y,0),g+=y}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new gc(c,3)),this.setAttribute("normal",new gc(h,3)),this.setAttribute("uv",new gc(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xp(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bp extends xp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}static fromJSON(e){return new bp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wp extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],a=[];function o(e,t,n,r){const i=r+1,a=[];for(let o=0;o<=i;o++){a[o]=[];const r=e.clone().lerp(n,o/i),s=t.clone().lerp(n,o/i),l=i-o;for(let e=0;e<=l;e++)a[o][e]=0===e&&o===i?r:r.clone().lerp(s,e/l)}for(let o=0;o<i;o++)for(let e=0;e<2*(i-o)-1;e++){const t=Math.floor(e/2);e%2===0?(s(a[o][t+1]),s(a[o+1][t]),s(a[o][t])):(s(a[o][t+1]),s(a[o+1][t+1]),s(a[o+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Tl,r=new Tl,i=new Tl;for(let a=0;a<t.length;a+=3)l(t[a+0],n),l(t[a+1],r),l(t[a+2],i),o(n,r,i,e)}(r),function(e){const t=new Tl;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new Tl;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=c(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(r,1-o)}var t;(function(){const e=new Tl,t=new Tl,n=new Tl,r=new Tl,o=new Zs,s=new Zs,l=new Zs;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=c(r);u(o,d+0,e,p),u(s,d+2,t,p),u(l,d+4,n,p)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new gc(i,3)),this.setAttribute("normal",new gc(i.slice(),3)),this.setAttribute("uv",new gc(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wp(e.vertices,e.indices,e.radius,e.details)}}class Sp extends wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sp(e.radius,e.detail)}}const _p=new Tl,Mp=new Tl,Ep=new Tl,Ap=new ju;class Tp extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Hs*t),a=e.getIndex(),o=e.getAttribute("position"),s=a?a.count:o.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},d=[];for(let e=0;e<s;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=Ap;if(t.fromBufferAttribute(o,l[0]),n.fromBufferAttribute(o,l[1]),s.fromBufferAttribute(o,l[2]),Ap.getNormal(Ep),c[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,c[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,c[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],r=c[t],a=Ap[u[e]],o=Ap[u[t]],s=`${n}_${r}`,p=`${r}_${n}`;p in h&&h[p]?(Ep.dot(h[p].normal)<=i&&(d.push(a.x,a.y,a.z),d.push(o.x,o.y,o.z)),h[p]=null):s in h||(h[s]={index0:l[e],index1:l[t],normal:Ep.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];_p.fromBufferAttribute(o,t),Mp.fromBufferAttribute(o,n),d.push(_p.x,_p.y,_p.z),d.push(Mp.x,Mp.y,Mp.z)}this.setAttribute("position",new gc(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Cp extends mp{constructor(e){super(e),this.uuid=Vs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new mp).fromJSON(n))}return this}}const Dp=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,i=r?t[0]*n:e.length;let a=Np(e,0,i,n,!0);const o=[];if(!a||a.next===a.prev)return o;let s,l,u,c,h,d,p;if(r&&(a=function(e,t,n,r){const i=[];let a,o,s,l,u;for(a=0,o=t.length;a<o;a++)s=t[a]*r,l=a<o-1?t[a+1]*r:e.length,u=Np(e,s,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Hp(u));for(i.sort(Bp),a=0;a<i.length;a++)n=Lp(i[a],n);return n}(e,t,a,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);p=Math.max(u-s,c-l),p=0!==p?32767/p:0}return kp(a,o,n,s,l,p,0),o};function Np(e,t,n,r,i){let a,o;if(i===function(e,t,n,r){let i=0;for(let a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Jp(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Jp(a,e[a],e[a+1],o);return o&&Gp(o,o.next)&&(Kp(o),o=o.next),o}function Rp(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Gp(r,r.next)&&0!==jp(r.prev,r,r.next))r=r.next;else{if(Kp(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function kp(e,t,n,r,i,a,o){if(!e)return;!o&&a&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=Up(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ,r);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,r,i,a);let s,l,u=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Fp(e,r,i,a):Ip(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Kp(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?kp(e=Pp(Rp(e),t,n),t,n,r,i,a,2):2===o&&Op(e,t,n,r,i,a):kp(Rp(e),t,n,r,i,a,1);break}}function Ip(e){const t=e.prev,n=e,r=e.next;if(jp(t,n,r)>=0)return!1;const i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,p=s>l?s>u?s:u:l>u?l:u;let f=r.next;for(;f!==t;){if(f.x>=c&&f.x<=d&&f.y>=h&&f.y<=p&&qp(i,s,a,l,o,u,f.x,f.y)&&jp(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Fp(e,t,n,r){const i=e.prev,a=e,o=e.next;if(jp(i,a,o)>=0)return!1;const s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,d=o.y,p=s<l?s<u?s:u:l<u?l:u,f=c<h?c<d?c:d:h<d?h:d,m=s>l?s>u?s:u:l>u?l:u,g=c>h?c>d?c:d:h>d?h:d,v=Up(p,f,t,n,r),y=Up(m,g,t,n,r);let x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&qp(s,c,l,h,u,d,x.x,x.y)&&jp(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==o&&qp(s,c,l,h,u,d,b.x,b.y)&&jp(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==i&&x!==o&&qp(s,c,l,h,u,d,x.x,x.y)&&jp(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==i&&b!==o&&qp(s,c,l,h,u,d,b.x,b.y)&&jp(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Pp(e,t,n){let r=e;do{const i=r.prev,a=r.next.next;!Gp(i,a)&&Wp(i,r,r.next,a)&&$p(i,a)&&$p(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),Kp(r),Kp(r.next),r=e=a),r=r.next}while(r!==e);return Rp(r)}function Op(e,t,n,r,i,a){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&Vp(o,e)){let s=Zp(o,e);return o=Rp(o,o.next),s=Rp(s,s.next),kp(o,t,n,r,i,a,0),void kp(s,t,n,r,i,a,0)}e=e.next}o=o.next}while(o!==e)}function Bp(e,t){return e.x-t.x}function Lp(e,t){const n=function(e,t){let n,r=t,i=-1/0;const a=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){const e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=a&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===a))return n}r=r.next}while(r!==t);if(!n)return null;const s=n,l=n.x,u=n.y;let c,h=1/0;r=n;do{a>=r.x&&r.x>=l&&a!==r.x&&qp(o<u?a:i,o,l,u,o<u?i:a,o,r.x,r.y)&&(c=Math.abs(o-r.y)/(a-r.x),$p(r,e)&&(c<h||c===h&&(r.x>n.x||r.x===n.x&&zp(n,r)))&&(n=r,h=c)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;const r=Zp(n,e);return Rp(r,r.next),Rp(n,n.next)}function zp(e,t){return jp(e.prev,e,t.prev)<0&&jp(t.next,e,e.next)<0}function Up(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Hp(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function qp(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Vp(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Wp(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&($p(e,t)&&$p(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(jp(e.prev,e,t.prev)||jp(e,t.prev,t))||Gp(e,t)&&jp(e.prev,e,e.next)>0&&jp(t.prev,t,t.next)>0)}function jp(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Gp(e,t){return e.x===t.x&&e.y===t.y}function Wp(e,t,n,r){const i=Yp(jp(e,t,n)),a=Yp(jp(e,t,r)),o=Yp(jp(n,r,e)),s=Yp(jp(n,r,t));return i!==a&&o!==s||(!(0!==i||!Xp(e,n,t))||(!(0!==a||!Xp(e,r,t))||(!(0!==o||!Xp(n,e,r))||!(0!==s||!Xp(n,t,r)))))}function Xp(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Yp(e){return e>0?1:e<0?-1:0}function $p(e,t){return jp(e.prev,e,e.next)<0?jp(e,t,e.next)>=0&&jp(e,e.prev,t)>=0:jp(e,t,e.prev)<0||jp(e,e.next,t)<0}function Zp(e,t){const n=new Qp(e.i,e.x,e.y),r=new Qp(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Jp(e,t,n,r){const i=new Qp(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Kp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Qp(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ef{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return ef.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];tf(e),nf(n,e);let a=e.length;t.forEach(tf);for(let s=0;s<t.length;s++)r.push(a),a+=t[s].length,nf(n,t[s]);const o=Dp(n,r);for(let s=0;s<o.length;s+=3)i.push(o.slice(s,s+3));return i}}function tf(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function nf(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class rf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cp([new Zs(.5,.5),new Zs(-.5,.5),new Zs(-.5,-.5),new Zs(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let o=0,s=e.length;o<s;o++){a(e[o])}function a(e){const a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:c-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:af;let g,v,y,x,b,w=!1;f&&(g=f.getSpacedPoints(s),w=!0,u=!1,v=f.computeFrenetFrames(s,!1),y=new Tl,x=new Tl,b=new Tl),u||(p=0,c=0,h=0,d=0);const S=e.extractPoints(o);let _=S.shape;const M=S.holes;if(!ef.isClockWise(_)){_=_.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];ef.isClockWise(t)&&(M[e]=t.reverse())}}const E=ef.triangulateShape(_,M),A=_;for(let t=0,n=M.length;t<n;t++){const e=M[t];_=_.concat(e)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const C=_.length,D=E.length;function N(e,t,n){let r,i,a;const o=e.x-t.x,s=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=o*o+s*s,h=o*u-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),d=Math.sqrt(l*l+u*u),p=t.x-s/h,f=t.y+o/h,m=((n.x-u/d-p)*u-(n.y+l/d-f)*l)/(o*u-s*l);r=p+o*m-e.x,i=f+s*m-e.y;const g=r*r+i*i;if(g<=2)return new Zs(r,i);a=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?l>Number.EPSILON&&(e=!0):o<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(u)&&(e=!0),e?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new Zs(r/a,i/a)}const R=[];for(let t=0,n=A.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),R[t]=N(A[t],A[r],A[i]);const k=[];let I,F=R.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];I=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[t]=N(e[t],e[r],e[i]);k.push(I),F=F.concat(I)}for(let t=0;t<p;t++){const e=t/p,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=A.length;t<i;t++){const e=T(A[t],R[t],r);B(e.x,e.y,-n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];I=k[t];for(let t=0,i=e.length;t<i;t++){const i=T(e[t],I[t],r);B(i.x,i.y,-n)}}}const P=h+d;for(let t=0;t<C;t++){const e=u?T(_[t],F[t],P):_[t];w?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(x).add(y),B(b.x,b.y,b.z)):B(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<C;e++){const n=u?T(_[e],F[e],P):_[e];w?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(x).add(y),B(b.x,b.y,b.z)):B(n.x,n.y,l/s*t)}for(let t=p-1;t>=0;t--){const e=t/p,n=c*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=A.length;t<i;t++){const e=T(A[t],R[t],r);B(e.x,e.y,l+n)}for(let t=0,i=M.length;t<i;t++){const e=M[t];I=k[t];for(let t=0,i=e.length;t<i;t++){const i=T(e[t],I[t],r);w?B(i.x,i.y+g[s-1].y,g[s-1].x+n):B(i.x,i.y,l+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=C*e,a=C*(e+1);z(t+r+n,t+i+n,t+i+a,t+r+a)}}}function B(e,t,n){a.push(e),a.push(t),a.push(n)}function L(e,t,i){U(e),U(t),U(i);const a=r.length/3,o=m.generateTopUV(n,r,a-3,a-2,a-1);H(o[0]),H(o[1]),H(o[2])}function z(e,t,i,a){U(e),U(t),U(a),U(t),U(i),U(a);const o=r.length/3,s=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);H(s[0]),H(s[1]),H(s[3]),H(s[1]),H(s[2]),H(s[3])}function U(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function H(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(u){let e=0,t=C*e;for(let n=0;n<D;n++){const e=E[n];L(e[2]+t,e[1]+t,e[0]+t)}e=s+2*p,t=C*e;for(let n=0;n<D;n++){const e=E[n];L(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<D;e++){const t=E[e];L(t[2],t[1],t[0])}for(let e=0;e<D;e++){const t=E[e];L(t[0]+C*s,t[1]+C*s,t[2]+C*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;O(A,t),t+=A.length;for(let n=0,r=M.length;n<r;n++){const e=M[n];O(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new gc(r,3)),this.setAttribute("uv",new gc(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,a=e.shapes.length;i<a;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new pp[r.type]).fromJSON(r)),new rf(n,e.options)}}const af={generateTopUV:function(e,t,n,r,i){const a=t[3*n],o=t[3*n+1],s=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new Zs(a,o),new Zs(s,l),new Zs(u,c)]},generateSideWallUV:function(e,t,n,r,i,a){const o=t[3*n],s=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<Math.abs(o-u)?[new Zs(o,1-l),new Zs(u,1-h),new Zs(d,1-f),new Zs(m,1-v)]:[new Zs(s,1-l),new Zs(c,1-h),new Zs(p,1-f),new Zs(g,1-v)]}};class of extends wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new of(e.radius,e.detail)}}class sf extends wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sf(e.radius,e.detail)}}class lf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,a=t/2,o=Math.floor(n),s=Math.floor(r),l=o+1,u=s+1,c=e/o,h=t/s,d=[],p=[],f=[],m=[];for(let g=0;g<u;g++){const e=g*h-a;for(let t=0;t<l;t++){const n=t*c-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/o),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<o;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new gc(p,3)),this.setAttribute("normal",new gc(f,3)),this.setAttribute("uv",new gc(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lf(e.width,e.height,e.widthSegments,e.heightSegments)}}class uf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},n=Math.max(3,n),r=Math.max(1,r);const o=[],s=[],l=[],u=[];let c=e;const h=(t-e)/r,d=new Tl,p=new Zs;for(let f=0;f<=r;f++){for(let e=0;e<=n;e++){const r=i+e/n*a;d.x=c*Math.cos(r),d.y=c*Math.sin(r),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,u.push(p.x,p.y)}c+=h}for(let f=0;f<r;f++){const e=f*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,a=r+n+1,s=r+n+2,l=r+1;o.push(i,a,l),o.push(a,s,l)}}this.setIndex(o),this.setAttribute("position",new gc(s,3)),this.setAttribute("normal",new gc(l,3)),this.setAttribute("uv",new gc(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cp([new Zs(0,.5),new Zs(-.5,-.5),new Zs(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],a=[];let o=0,s=0;if(!1===Array.isArray(e))l(e);else for(let u=0;u<e.length;u++)l(e[u]),this.addGroup(o,s,u),o+=s,s=0;function l(e){const o=r.length/3,l=e.extractPoints(t);let u=l.shape;const c=l.holes;!1===ef.isClockWise(u)&&(u=u.reverse());for(let t=0,n=c.length;t<n;t++){const e=c[t];!0===ef.isClockWise(e)&&(c[t]=e.reverse())}const h=ef.triangulateShape(u,c);for(let t=0,n=c.length;t<n;t++){const e=c[t];u=u.concat(e)}for(let t=0,n=u.length;t<n;t++){const e=u[t];r.push(e.x,e.y,0),i.push(0,0,1),a.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+o,i=e[1]+o,a=e[2]+o;n.push(r,i,a),s+=3}}this.setIndex(n),this.setAttribute("position",new gc(r,3)),this.setAttribute("normal",new gc(i,3)),this.setAttribute("uv",new gc(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new cf(n,e.curveSegments)}}class hf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(a+o,Math.PI);let l=0;const u=[],c=new Tl,h=new Tl,d=[],p=[],f=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0===g&&0===a?y=.5/t:g===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;c.x=-e*Math.cos(r+s*i)*Math.sin(a+v*o),c.y=e*Math.cos(a+v*o),c.z=e*Math.sin(r+s*i)*Math.sin(a+v*o),p.push(c.x,c.y,c.z),h.copy(c).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-v),d.push(l++)}u.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=u[g][e+1],r=u[g][e],i=u[g+1][e],o=u[g+1][e+1];(0!==g||a>0)&&d.push(t,r,o),(g!==n-1||s<Math.PI)&&d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new gc(p,3)),this.setAttribute("normal",new gc(f,3)),this.setAttribute("uv",new gc(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class df extends wp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new df(e.radius,e.detail)}}class pf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],s=[],l=[],u=new Tl,c=new Tl,h=new Tl;for(let d=0;d<=n;d++)for(let a=0;a<=r;a++){const p=a/r*i,f=d/n*Math.PI*2;c.x=(e+t*Math.cos(f))*Math.cos(p),c.y=(e+t*Math.cos(f))*Math.sin(p),c.z=t*Math.sin(f),o.push(c.x,c.y,c.z),u.x=e*Math.cos(p),u.y=e*Math.sin(p),h.subVectors(c,u).normalize(),s.push(h.x,h.y,h.z),l.push(a/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,o=(r+1)*d+e;a.push(t,n,o),a.push(n,i,o)}this.setIndex(a),this.setAttribute("position",new gc(o,3)),this.setAttribute("normal",new gc(s,3)),this.setAttribute("uv",new gc(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pf(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ff extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},n=Math.floor(n),r=Math.floor(r);const o=[],s=[],l=[],u=[],c=new Tl,h=new Tl,d=new Tl,p=new Tl,f=new Tl,m=new Tl,g=new Tl;for(let y=0;y<=n;++y){const o=y/n*i*Math.PI*2;v(o,i,a,e,d),v(o+.01,i,a,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,a=-t*Math.cos(i),o=t*Math.sin(i);c.x=d.x+(a*g.x+o*f.x),c.y=d.y+(a*g.y+o*f.y),c.z=d.z+(a*g.z+o*f.z),s.push(c.x,c.y,c.z),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(y/n),u.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){const t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,a=(r+1)*(y-1)+e;o.push(t,n,a),o.push(n,i,a)}function v(e,t,n,r,i){const a=Math.cos(e),o=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*a,i.y=r*(2+l)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(o),this.setAttribute("position",new gc(s,3)),this.setAttribute("normal",new gc(l,3)),this.setAttribute("uv",new gc(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ff(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class mf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hp(new Tl(-1,-1,0),new Tl(-1,1,0),new Tl(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new Tl,s=new Tl,l=new Zs;let u=new Tl;const c=[],h=[],d=[],p=[];function f(i){u=e.getPointAt(i/t,u);const l=a.normals[i],d=a.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),a=-Math.cos(t);s.x=a*l.x+i*d.x,s.y=a*l.y+i*d.y,s.z=a*l.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),o.x=u.x+n*s.x,o.y=u.y+n*s.y,o.z=u.z+n*s.z,c.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),a=(r+1)*e+t,o=(r+1)*(e-1)+t;p.push(n,i,o),p.push(i,a,o)}}()}(),this.setIndex(p),this.setAttribute("position",new gc(c,3)),this.setAttribute("normal",new gc(h,3)),this.setAttribute("uv",new gc(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new mf((new pp[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class gf extends Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new Tl,i=new Tl;if(null!==e.index){const a=e.attributes.position,o=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],u=l.start;for(let e=u,s=u+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=o.getX(e+l),u=o.getX(e+(l+1)%3);r.fromBufferAttribute(a,s),i.fromBufferAttribute(a,u),!0===vf(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const a=e.attributes.position;for(let e=0,o=a.count/3;e<o;e++)for(let s=0;s<3;s++){const o=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(a,o),i.fromBufferAttribute(a,l),!0===vf(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new gc(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function vf(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var yf=Object.freeze({__proto__:null,BoxGeometry:Lc,CapsuleGeometry:vp,CircleGeometry:yp,ConeGeometry:bp,CylinderGeometry:xp,DodecahedronGeometry:Sp,EdgesGeometry:Tp,ExtrudeGeometry:rf,IcosahedronGeometry:of,LatheGeometry:gp,OctahedronGeometry:sf,PlaneGeometry:lf,PolyhedronGeometry:wp,RingGeometry:uf,ShapeGeometry:cf,SphereGeometry:hf,TetrahedronGeometry:df,TorusGeometry:pf,TorusKnotGeometry:ff,TubeGeometry:mf,WireframeGeometry:gf});class xf extends Ku{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $u(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class bf extends Vc{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class wf extends Ku{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new $u(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $u(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yo,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sf extends wf{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Zs(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return js(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $u(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $u(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $u(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _f extends Ku{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $u(16777215),this.specular=new $u(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $u(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yo,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pu,this.combine=Yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mf extends Ku{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $u(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $u(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yo,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Ef extends Ku{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yo,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Af extends Ku{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $u(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $u(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yo,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new pu,this.combine=Yi,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tf extends Ku{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jo,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Cf extends Ku{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Df extends Ku{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $u(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Yo,this.normalScale=new Zs(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Nf extends xd{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Rf(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function kf(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function If(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function Ff(e,t,n){const r=e.length,i=new e.constructor(r);for(let a=0,o=0;o!==r;++a){const r=n[a]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function Pf(e,t,n,r){let i=1,a=e[0];for(;void 0!==a&&void 0===a[r];)a=e[i++];if(void 0===a)return;let o=a[r];if(void 0!==o)if(Array.isArray(o))do{o=a[r],void 0!==o&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[r],void 0!==o&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{o=a[r],void 0!==o&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}const Of={convertArray:Rf,isTypedArray:kf,getKeyframeOrder:If,sortedArray:Ff,flattenJSON:Pf,subclip:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const a=e.clone();a.name=t;const o=[];for(let l=0;l<a.tracks.length;++l){const e=a.tracks[l],t=e.getValueSize(),s=[],u=[];for(let a=0;a<e.times.length;++a){const o=e.times[a]*i;if(!(o<n||o>=r)){s.push(e.times[a]);for(let n=0;n<t;++n)u.push(e.values[a*t+n])}}0!==s.length&&(e.times=Rf(s,e.times.constructor),e.values=Rf(u,e.values.constructor),o.push(e))}a.tracks=o;let s=1/0;for(let l=0;l<a.tracks.length;++l)s>a.tracks[l].times[0]&&(s=a.tracks[l].times[0]);for(let l=0;l<a.tracks.length;++l)a.tracks[l].shift(-1*s);return a.resetDuration(),a},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,a=t/r;for(let o=0;o<i;++o){const t=n.tracks[o],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let u=0;const c=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=t.times.length-1;let d;if(a<=t.times[0]){const e=s,n=l-s;d=t.values.slice(e,n)}else if(a>=t.times[h]){const e=h*l+s,n=e+l-s;d=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=s,r=l-s;e.evaluate(a),d=e.resultBuffer.slice(n,r)}if("quaternion"===r){(new Al).fromArray(d).normalize().conjugate().toArray(d)}const p=i.times.length;for(let e=0;e<p;++e){const t=e*c+u;if("quaternion"===r)Al.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=c-2*u;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=Uo,e}};class Bf{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let a;n:{r:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}a=n,n=0}}for(;n<a;){const r=n+a>>>1;e<t[r]?a=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let a=0;a!==r;++a)t[a]=n[i+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Lf extends Bf{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Oo,endingEnd:Oo}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case Bo:i=e,o=2*t-n;break;case Lo:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Bo:a=e,s=2*n-t;break;case Lo:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}const l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-n),this._offsetPrev=i*u,this._offsetNext=a*u}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let b=0;b!==o;++b)i[b]=g*a[u+b]+v*a[l+b]+y*a[s+b]+x*a[c+b];return i}}class zf extends Bf{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(n-t)/(r-t),c=1-u;for(let h=0;h!==o;++h)i[h]=a[l+h]*c+a[s+h]*u;return i}}class Uf extends Bf{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Hf{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Rf(t,this.TimeBufferType),this.values=Rf(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Rf(e.times,Array),values:Rf(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Uf(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new zf(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Lf(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Io:t=this.InterpolantFactoryMethodDiscrete;break;case Fo:t=this.InterpolantFactoryMethodLinear;break;case Po:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Io;case this.InterpolantFactoryMethodLinear:return Fo;case this.InterpolantFactoryMethodSmooth:return Po}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,a=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(a=Math.max(a,1),i=a-1);const e=this.getValueSize();this.times=n.slice(i,a),this.values=this.values.slice(i*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==i;o++){const t=n[o];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,t),e=!1;break}if(null!==a&&a>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,t,a),e=!1;break}a=t}if(void 0!==r&&kf(r))for(let o=0,s=r.length;o!==s;++o){const t=r[o];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Po,i=e.length-1;let a=1;for(let o=1;o<i;++o){let i=!1;const s=e[o];if(s!==e[o+1]&&(1!==o||s!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,a=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[a+o]){i=!0;break}}}if(i){if(o!==a){e[a]=e[o];const r=o*n,i=a*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++a}}if(i>0){e[a]=e[i];for(let e=i*n,r=a*n,o=0;o!==n;++o)t[r+o]=t[e+o];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Hf.prototype.TimeBufferType=Float32Array,Hf.prototype.ValueBufferType=Float32Array,Hf.prototype.DefaultInterpolation=Fo;class qf extends Hf{constructor(e,t,n){super(e,t,n)}}qf.prototype.ValueTypeName="bool",qf.prototype.ValueBufferType=Array,qf.prototype.DefaultInterpolation=Io,qf.prototype.InterpolantFactoryMethodLinear=void 0,qf.prototype.InterpolantFactoryMethodSmooth=void 0;class Vf extends Hf{}Vf.prototype.ValueTypeName="color";class jf extends Hf{}jf.prototype.ValueTypeName="number";class Gf extends Bf{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t);let l=e*o;for(let u=l+o;l!==u;l+=4)Al.slerpFlat(i,0,a,l-o,a,l,s);return i}}class Wf extends Hf{InterpolantFactoryMethodLinear(e){return new Gf(this.times,this.values,this.getValueSize(),e)}}Wf.prototype.ValueTypeName="quaternion",Wf.prototype.InterpolantFactoryMethodSmooth=void 0;class Xf extends Hf{constructor(e,t,n){super(e,t,n)}}Xf.prototype.ValueTypeName="string",Xf.prototype.ValueBufferType=Array,Xf.prototype.DefaultInterpolation=Io,Xf.prototype.InterpolantFactoryMethodLinear=void 0,Xf.prototype.InterpolantFactoryMethodSmooth=void 0;class Yf extends Hf{}Yf.prototype.ValueTypeName="vector";class $f{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:zo;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Vs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,o=n.length;a!==o;++a)t.push(Zf(n[a]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,a=n.length;i!==a;++i)t.push(Hf.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,a=[];for(let o=0;o<i;o++){let e=[],s=[];e.push((o+i-1)%i,o,(o+1)%i),s.push(0,1,0);const l=If(e);e=Ff(e,1,l),s=Ff(s,1,l),r||0!==e[0]||(e.push(i),s.push(s[0])),a.push(new jf(".morphTargetInfluences["+t[o].name+"]",e,s).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let o=0,s=e.length;o<s;o++){const t=e[o],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const a=[],o=[];Pf(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const e=l[u].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],a=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),a.push(r.morphTarget===i?1:0)}r.push(new jf(".morphTargetInfluence["+i+"]",t,a))}s=t.length*a}else{const i=".bones["+t[u].name+"]";n(Yf,i+".position",e,"pos",r),n(Wf,i+".quaternion",e,"rot",r),n(Yf,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Zf(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jf;case"vector":case"vector2":case"vector3":case"vector4":return Yf;case"color":return Vf;case"quaternion":return Wf;case"bool":case"boolean":return qf;case"string":return Xf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Pf(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Jf={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Kf{constructor(e,t,n){const r=this;let i,a=!1,o=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,s),o===s&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Qf=new Kf;class em{constructor(e){this.manager=void 0!==e?e:Qf,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}em.DEFAULT_MATERIAL_NAME="__DEFAULT";const tm={};class nm extends Error{constructor(e,t){super(e),this.response=t}}class rm extends em{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Jf.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==tm[e])return void tm[e].push({onLoad:t,onProgress:n,onError:r});tm[e]=[],tm[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,s=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=tm[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=i?parseInt(i):0,o=0!==a;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:i,value:l}=r;if(i)e.close();else{s+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:s,total:a});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}),(t=>{e.error(t)}))}()}});return new Response(l)}throw new nm(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Jf.add(e,t);const n=tm[e];delete tm[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=tm[e];if(void 0===n)throw this.manager.itemError(e),t;delete tm[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class im extends em{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new rm(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(vk){r?r(vk):console.error(vk),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=$f.parse(e[n]);t.push(r)}return t}}class am extends em{constructor(e){super(e)}load(e,t,n,r){const i=this,a=[],o=new Vd,s=new rm(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function u(u){s.load(e[u],(function(e){const n=i.parse(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(o.minFilter=wa),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let c=0,h=e.length;c<h;++c)u(c);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)a[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),a[t].format=n.format,a[t].width=n.width,a[t].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=wa),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}class om extends em{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=Jf.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;const o=nl("img");function s(){u(),Jf.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){u(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function u(){o.removeEventListener("load",s,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",s,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class sm extends em{constructor(e){super(e)}load(e,t,n,r){const i=new Jc;i.colorSpace=Jo;const a=new om(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)s(l);return i}}class lm extends em{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new Ph,o=new rm(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){let n;try{n=i.parse(e)}catch(Fw){if(void 0===r)return void console.error(Fw);r(Fw)}void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:fa,a.wrapT=void 0!==n.wrapT?n.wrapT:fa,a.magFilter=void 0!==n.magFilter?n.magFilter:wa,a.minFilter=void 0!==n.minFilter?n.minFilter:wa,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(a.colorSpace=n.colorSpace),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Ma),1===n.mipmapCount&&(a.minFilter=wa),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n)}),n,r),a}}class um extends em{constructor(e){super(e)}load(e,t,n,r){const i=new yl,a=new om(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class cm extends Nu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new $u(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class hm extends cm{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Nu.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $u(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const dm=new ru,pm=new Tl,fm=new Tl;class mm{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Zs(512,512),this.map=null,this.mapPass=null,this.matrix=new ru,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ed,this._frameExtents=new Zs(1,1),this._viewportCount=1,this._viewports=[new xl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;pm.setFromMatrixPosition(e.matrixWorld),t.position.copy(pm),fm.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(fm),t.updateMatrixWorld(),dm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(dm),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(dm)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class gm extends mm{constructor(){super(new Yc(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*qs*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class vm extends cm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nu.DEFAULT_UP),this.updateMatrix(),this.target=new Nu,this.distance=n,this.angle=r,this.penumbra=i,this.decay=a,this.map=null,this.shadow=new gm}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const ym=new ru,xm=new Tl,bm=new Tl;class wm extends mm{constructor(){super(new Yc(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Zs(4,2),this._viewportCount=6,this._viewports=[new xl(2,1,1,1),new xl(0,1,1,1),new xl(3,1,1,1),new xl(1,1,1,1),new xl(3,0,1,1),new xl(1,0,1,1)],this._cubeDirections=[new Tl(1,0,0),new Tl(-1,0,0),new Tl(0,0,1),new Tl(0,0,-1),new Tl(0,1,0),new Tl(0,-1,0)],this._cubeUps=[new Tl(0,1,0),new Tl(0,1,0),new Tl(0,1,0),new Tl(0,1,0),new Tl(0,0,1),new Tl(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),xm.setFromMatrixPosition(e.matrixWorld),n.position.copy(xm),bm.copy(n.position),bm.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(bm),n.updateMatrixWorld(),r.makeTranslation(-xm.x,-xm.y,-xm.z),ym.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ym)}}class Sm extends cm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new wm}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class _m extends jc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,a=i+e*this.view.width,o-=t*this.view.offsetY,s=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class Mm extends mm{constructor(){super(new _m(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Em extends cm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nu.DEFAULT_UP),this.updateMatrix(),this.target=new Nu,this.shadow=new Mm}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Am extends cm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Tm extends cm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Cm{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Tl)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class Dm extends cm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cm;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nm extends em{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,a=new rm(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(vk){r?r(vk):console.error(vk),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new $u).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new $u).setHex(t.value);break;case"v2":r.uniforms[i].value=(new Zs).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new Tl).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new xl).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new Js).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new ru).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Zs).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Zs).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Nm.createMaterialFromType(e)}static createMaterialFromType(e){return new{ShadowMaterial:xf,SpriteMaterial:ah,RawShaderMaterial:bf,ShaderMaterial:Vc,PointsMaterial:Id,MeshPhysicalMaterial:Sf,MeshStandardMaterial:wf,MeshPhongMaterial:_f,MeshToonMaterial:Mf,MeshNormalMaterial:Ef,MeshLambertMaterial:Af,MeshDepthMaterial:Tf,MeshDistanceMaterial:Cf,MeshBasicMaterial:Qu,MeshMatcapMaterial:Df,LineDashedMaterial:Nf,LineBasicMaterial:xd,Material:Ku}[e]}}class Rm{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(vk){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class km extends Mc{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Im extends em{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new rm(i.manager);a.setPath(i.path),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(vk){r?r(vk):console.error(vk),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],a=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],a=new Uint32Array(i).buffer;return n[t]=a,a}(e,i.buffer),o=tl(i.type,a),s=new nh(o,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new km:new Mc,a=e.data.index;if(void 0!==a){const e=tl(a.type,a.array);i.setIndex(new sc(e,1))}const o=e.data.attributes;for(const c in o){const t=o[c];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new ih(i,t.itemSize,t.offset,t.normalized)}else{const e=tl(t.type,t.array);n=new(t.isInstancedBufferAttribute?zh:sc)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),i.setAttribute(c,n)}const s=e.data.morphAttributes;if(s)for(const c in s){const t=s[c],n=[];for(let i=0,a=t.length;i<a;i++){const a=t[i];let o;if(a.isInterleavedBufferAttribute){const t=r(e.data,a.data);o=new ih(t,a.itemSize,a.offset,a.normalized)}else{const e=tl(a.type,a.array);o=new sc(e,a.itemSize,a.normalized)}void 0!==a.name&&(o.name=a.name),n.push(o)}i.morphAttributes[c]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let c=0,h=l.length;c!==h;++c){const e=l[c];i.addGroup(e.start,e.count,e.materialIndex)}const u=e.data.boundingSphere;if(void 0!==u){const e=new Tl;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new Yl(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class Fm extends em{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===this.path?Rm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new rm(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let a=null;try{a=JSON.parse(n)}catch(Fw){return void 0!==r&&r(Fw),void console.error("THREE:ObjectLoader: Can't parse "+e+".",Fw.message)}const o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(a,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?Rm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new rm(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),a=JSON.parse(i),o=a.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),o=this.parseTextures(e.textures,a),s=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,s,o,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o,a,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Cp).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,a=e.length;i<a;i++){const t=(new Lh).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new Im;for(let i=0,a=e.length;i<a;i++){let a;const o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(o);break;default:o.type in yf?a=yf[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.userData&&(a.userData=o.userData),n[o.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new Nm;i.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===n[a.uuid]&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=$f.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function a(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:tl(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Kf(t);i=new om(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=a(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ph(n.data,n.width,n.height)))}r[n.uuid]=new ml(e)}else{const e=a(n.url);r[n.uuid]=new ml(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"===typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:tl(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new om(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],a=r.url;if(Array.isArray(a)){const e=[];for(let t=0,n=a.length;t<n;t++){const n=a[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Ph(r.data,r.width,r.height)))}n[r.uuid]=new ml(e)}else{const e=await i(r.url);n[r.uuid]=new ml(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,a=e.length;i<a;i++){const a=e[i];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const o=t[a.image],s=o.data;let l;Array.isArray(s)?(l=new Jc,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Ph:new yl,s&&(l.needsUpdate=!0)),l.source=o,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=n(a.mapping,Pm)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=n(a.wrap[0],Om),l.wrapT=n(a.wrap[1],Om)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.minFilter&&(l.minFilter=n(a.minFilter,Bm)),void 0!==a.magFilter&&(l.magFilter=n(a.magFilter,Bm)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.compareFunction&&(l.compareFunction=a.compareFunction),void 0!==a.userData&&(l.userData=a.userData),r[a.uuid]=l}return r}parseObject(e,t,n,r,i){let a,o,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":a=new th,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new $u(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new eh(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Qc(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Yc(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new _m(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new Am(e.color,e.intensity);break;case"DirectionalLight":a=new Em(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new Sm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Tm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new vm(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new hm(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new Dm).fromJSON(e);break;case"SkinnedMesh":o=l(e.geometry),s=u(e.material),a=new Ih(o,s),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=l(e.geometry),s=u(e.material),a=new Oc(o,s);break;case"InstancedMesh":o=l(e.geometry),s=u(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;a=new Xh(o,s,t),a.instanceMatrix=new zh(new Float32Array(n.array),16),void 0!==r&&(a.instanceColor=new zh(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":o=l(e.geometry),s=u(e.material),a=new yd(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s),a.geometry=o,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._visibility=e.visibility,a._active=e.active,a._bounds=e.bounds.map((e=>{const t=new Nl;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new Yl;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}})),a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._geometryCount=e.geometryCount,a._matricesTexture=c(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":a=new _h;break;case"Line":a=new Td(l(e.geometry),u(e.material));break;case"LineLoop":a=new kd(l(e.geometry),u(e.material));break;case"LineSegments":a=new Rd(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new Ld(l(e.geometry),u(e.material));break;case"Sprite":a=new xh(u(e.material));break;case"Group":a=new Ud;break;case"Bone":a=new Fh;break;default:a=new Nu}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)a.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];a.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=a.getObjectByProperty("uuid",n.object);void 0!==r&&a.addLevel(r,n.distance,n.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}bindLightTargets(e){e.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new Nu}}))}}const Pm={UVMapping:sa,CubeReflectionMapping:la,CubeRefractionMapping:ua,EquirectangularReflectionMapping:ca,EquirectangularRefractionMapping:ha,CubeUVReflectionMapping:da},Om={RepeatWrapping:pa,ClampToEdgeWrapping:fa,MirroredRepeatWrapping:ma},Bm={NearestFilter:ga,NearestMipmapNearestFilter:va,NearestMipmapLinearFilter:xa,LinearFilter:wa,LinearMipmapNearestFilter:Sa,LinearMipmapLinearFilter:Ma};class Lm extends em{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,a=Jf.get(e);if(void 0!==a)return i.manager.itemStart(e),a.then?void a.then((n=>{t&&t(n),i.manager.itemEnd(e)})).catch((e=>{r&&r(e)})):(setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a);const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;const s=fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return Jf.add(e,n),t&&t(n),i.manager.itemEnd(e),n})).catch((function(t){r&&r(t),Jf.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)}));Jf.add(e,s),i.manager.itemStart(e)}}let zm;class Um{static getContext(){return void 0===zm&&(zm=new(window.AudioContext||window.webkitAudioContext)),zm}static setContext(e){zm=e}}class Hm extends em{constructor(e){super(e)}load(e,t,n,r){const i=this,a=new rm(this.manager);function o(t){r?r(t):console.error(t),i.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){try{const n=e.slice(0);Um.getContext().decodeAudioData(n,(function(e){t(e)})).catch(o)}catch(vk){o(vk)}}),n,r)}}const qm=new ru,Vm=new ru,jm=new ru;class Gm{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yc,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yc,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,jm.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Hs*t.fov*.5)/t.zoom;let a,o;Vm.elements[12]=-n,qm.elements[12]=n,a=-i*t.aspect+r,o=i*t.aspect+r,jm.elements[0]=2*t.near/(o-a),jm.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(jm),a=-i*t.aspect-r,o=i*t.aspect-r,jm.elements[0]=2*t.near/(o-a),jm.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(jm)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Vm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qm)}}class Wm extends Yc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class Xm{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ym(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Ym();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Ym(){return performance.now()}const $m=new Tl,Zm=new Al,Jm=new Tl,Km=new Tl;class Qm extends Nu{constructor(){super(),this.type="AudioListener",this.context=Um.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Xm}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($m,Zm,Jm),Km.set(0,0,-1).applyQuaternion(Zm),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($m.x,e),t.positionY.linearRampToValueAtTime($m.y,e),t.positionZ.linearRampToValueAtTime($m.z,e),t.forwardX.linearRampToValueAtTime(Km.x,e),t.forwardY.linearRampToValueAtTime(Km.y,e),t.forwardZ.linearRampToValueAtTime(Km.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition($m.x,$m.y,$m.z),t.setOrientation(Km.x,Km.y,Km.z,n.x,n.y,n.z)}}class eg extends Nu{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),"buffer"!==e.sourceType?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const tg=new Tl,ng=new Al,rg=new Tl,ig=new Tl;class ag extends eg{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(tg,ng,rg),ig.set(0,0,1).applyQuaternion(ng);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(tg.x,e),t.positionY.linearRampToValueAtTime(tg.y,e),t.positionZ.linearRampToValueAtTime(tg.z,e),t.orientationX.linearRampToValueAtTime(ig.x,e),t.orientationY.linearRampToValueAtTime(ig.y,e),t.orientationZ.linearRampToValueAtTime(ig.z,e)}else t.setPosition(tg.x,tg.y,tg.z),t.setOrientation(ig.x,ig.y,ig.z)}}class og{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class sg{constructor(e,t,n){let r,i,a;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==r;++e)n[i+e]=n[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let a=0;a!==i;++a)e[t+a]=e[n+a]}_slerp(e,t,n,r){Al.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const a=this._workIndex*i;Al.multiplyQuaternionsFlat(e,a,e,t,e,n),Al.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,n,r,i){const a=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*a+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]+e[n+a]*r}}}const lg="\\[\\]\\.:\\/",ug=new RegExp("["+lg+"]","g"),cg="[^"+lg+"]",hg="[^"+lg.replace("\\.","")+"]",dg=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",cg)+/(WCOD+)?/.source.replace("WCOD",hg)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cg)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cg)+"$"),pg=["material","materials","bones","map"];class fg{constructor(e,t,n){this.path=t,this.parsedPath=n||fg.parseTrackName(t),this.node=fg.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new fg.Composite(e,t,n):new fg(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ug,"")}static parseTrackName(e){const t=dg.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==pg.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const a=n(i.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=fg.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const a=e[r];if(void 0===a){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=i}else void 0!==a.fromArray&&void 0!==a.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(s=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fg.Composite=class{constructor(e,t,n){const r=n||fg.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},fg.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},fg.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},fg.prototype.GetterByBindingType=[fg.prototype._getValue_direct,fg.prototype._getValue_array,fg.prototype._getValue_arrayElement,fg.prototype._getValue_toArray],fg.prototype.SetterByBindingTypeAndVersioning=[[fg.prototype._setValue_direct,fg.prototype._setValue_direct_setNeedsUpdate,fg.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fg.prototype._setValue_array,fg.prototype._setValue_array_setNeedsUpdate,fg.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fg.prototype._setValue_arrayElement,fg.prototype._setValue_arrayElement_setNeedsUpdate,fg.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fg.prototype._setValue_fromArray,fg.prototype._setValue_fromArray_setNeedsUpdate,fg.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mg{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Vs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length;let o,s=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const c=arguments[u],h=c.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(c);for(let e=0,t=a;e!==t;++e)i[e].push(new fg(c,n[e],r[e]))}else if(d<l){o=e[d];const s=--l,u=e[s];t[u.uuid]=d,e[d]=u,t[h]=s,e[s]=c;for(let e=0,t=a;e!==t;++e){const t=i[e],a=t[s];let o=t[d];t[d]=a,void 0===o&&(o=new fg(c,n[e],r[e])),t[s]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a],s=o.uuid,l=t[s];if(void 0!==l&&l>=i){const a=i++,u=e[a];t[u.uuid]=l,e[l]=u,t[s]=a,e[a]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[l]=r,t[a]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,a=e.length;for(let o=0,s=arguments.length;o!==s;++o){const s=arguments[o].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const o=--i,s=e[o],u=--a,c=e[u];t[s.uuid]=l,e[l]=s,t[c.uuid]=o,e[o]=c,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[u];t[l]=r,t[o]=i,t.pop()}}else{const i=--a,o=e[i];i>0&&(t[o.uuid]=l),e[l]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(let h=u,d=s.length;h!==d;++h){const n=s[h];c[h]=new fg(n,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class gg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,a=i.length,o=new Array(a),s={endingStart:Oo,endingEnd:Oo};for(let l=0;l!==a;++l){const e=i[l].createInterpolant(null);o[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ro,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,a=n/r;e.warp(1,i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const s=o.parameterPositions,l=o.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Uo)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(a),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(a),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const a=n===ko;if(0===e)return-1===i?r:a&&1===(1&i)?t-r:r;if(n===No){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(a&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Bo,r.endingEnd=Bo):(r.endingStart=e?this.zeroSlopeAtStart?Bo:Oo:Lo,r.endingEnd=t?this.zeroSlopeAtEnd?Bo:Oo:Lo)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}const vg=new Float32Array(1);class yg extends Ls{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let u=l[s];void 0===u&&(u={},l[s]=u);for(let c=0;c!==i;++c){const e=r[c],i=e.name;let l=u[i];if(void 0!==l)++l.referenceCount,a[c]=l;else{if(l=a[c],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}const r=t&&t._propertyBindings[c].binding.parsedPath;l=new sg(fg.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),a[c]=l}o[c].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let a=r[t];void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new zf(new Float32Array(2),new Float32Array(2),1,vg),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let a="string"===typeof e?$f.findByName(r,e):e;const o=null!==a?a.uuid:e,s=this._actionsByClip[o];let l=null;if(void 0===n&&(n=null!==a?a.blendMode:zo),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const u=new gg(this,a,t,n);return this._bindAction(u,l),this._addInactiveAction(u,o,i),u}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?$f.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,a)}const o=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)o[l].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,a=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,a._cacheIndex=i,t[i]=a,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class xg{constructor(e){this.value=e}clone(){return new xg(void 0===this.value.clone?this.value:this.value.clone())}}let bg=0;class wg extends Ls{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:bg++}),this.name="",this.usage=Es,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class Sg extends nh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class _g{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Mg=new ru;class Eg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new nu(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new fu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Mg.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Mg),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Tg(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(Ag),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)Tg(e[r],this,n,t);return n.sort(Ag),n}}function Ag(e,t){return e.distance-t.distance}function Tg(e,t,n,r){let i=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(i=!1)}if(!0===i&&!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)Tg(r[e],t,n,!0)}}class Cg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=js(this.phi,e,Math.PI-e),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(js(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Dg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class Ng{constructor(e,t,n,r){Ng.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}const Rg=new Zs;class kg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Zs(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Rg.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Rg).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ig=new Tl,Fg=new Tl;class Pg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Ig.subVectors(e,this.start),Fg.subVectors(this.end,this.start);const n=Fg.dot(Fg);let r=Fg.dot(Ig)/n;return t&&(r=js(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Og=new Tl;class Bg extends Nu{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Mc,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,s=32;a<s;a++,o++){const e=a/s*Math.PI*2,t=o/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new gc(r,3));const i=new xd({fog:!1,toneMapped:!1});this.cone=new Rd(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Og.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Og),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lg=new Tl,zg=new ru,Ug=new ru;class Hg extends Rd{constructor(e){const t=qg(e),n=new Mc,r=[],i=[],a=new $u(0,0,1),o=new $u(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new gc(r,3)),n.setAttribute("color",new gc(i,3));super(n,new xd({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ug.copy(this.root.matrixWorld).invert();for(let i=0,a=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(zg.multiplyMatrices(Ug,e.matrixWorld),Lg.setFromMatrixPosition(zg),r.setXYZ(a,Lg.x,Lg.y,Lg.z),zg.multiplyMatrices(Ug,e.parent.matrixWorld),Lg.setFromMatrixPosition(zg),r.setXYZ(a+1,Lg.x,Lg.y,Lg.z),a+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function qg(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,qg(e.children[n]));return t}class Vg extends Oc{constructor(e,t,n){super(new hf(t,4,2),new Qu({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const jg=new Tl,Gg=new $u,Wg=new $u;class Xg extends Nu{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new sf(t);r.rotateY(.5*Math.PI),this.material=new Qu({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.setAttribute("color",new sc(a,3)),this.add(new Oc(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Gg.copy(this.light.color),Wg.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Gg:Wg;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jg.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Yg extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new $u(n),r=new $u(r);const i=t/2,a=e/t,o=e/2,s=[],l=[];for(let c=0,h=0,d=-o;c<=t;c++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);const e=c===i?n:r;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const u=new Mc;u.setAttribute("position",new gc(s,3)),u.setAttribute("color",new gc(l,3));super(u,new xd({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $g extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new $u(i),a=new $u(a);const o=[],s=[];if(t>1)for(let u=0;u<t;u++){const n=u/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;o.push(0,0,0),o.push(r,0,l);const c=1&u?i:a;s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(let u=0;u<n;u++){const t=1&u?i:a,l=e-e/n*u;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l;o.push(i,0,a),s.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,a=Math.cos(n)*l,o.push(i,0,a),s.push(t.r,t.g,t.b)}}const l=new Mc;l.setAttribute("position",new gc(o,3)),l.setAttribute("color",new gc(s,3));super(l,new xd({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Zg=new Tl,Jg=new Tl,Kg=new Tl;class Qg extends Nu{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Mc;r.setAttribute("position",new gc([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new xd({fog:!1,toneMapped:!1});this.lightPlane=new Td(r,i),this.add(this.lightPlane),r=new Mc,r.setAttribute("position",new gc([0,0,0,0,0,1],3)),this.targetLine=new Td(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Zg.setFromMatrixPosition(this.light.matrixWorld),Jg.setFromMatrixPosition(this.light.target.matrixWorld),Kg.subVectors(Jg,Zg),this.lightPlane.lookAt(Jg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Jg),this.targetLine.scale.z=Kg.length()}}const ev=new Tl,tv=new jc;class nv extends Rd{constructor(e){const t=new Mc,n=new xd({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],a={};function o(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new gc(r,3)),t.setAttribute("color",new gc(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new $u(16755200),u=new $u(16711680),c=new $u(43775),h=new $u(16777215),d=new $u(3355443);this.setColors(l,u,c,h,d)}setColors(e,t,n,r,i){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,i.r,i.g,i.b),a.setXYZ(41,i.r,i.g,i.b),a.setXYZ(42,i.r,i.g,i.b),a.setXYZ(43,i.r,i.g,i.b),a.setXYZ(44,i.r,i.g,i.b),a.setXYZ(45,i.r,i.g,i.b),a.setXYZ(46,i.r,i.g,i.b),a.setXYZ(47,i.r,i.g,i.b),a.setXYZ(48,i.r,i.g,i.b),a.setXYZ(49,i.r,i.g,i.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;tv.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),rv("c",t,e,tv,0,0,-1),rv("t",t,e,tv,0,0,1),rv("n1",t,e,tv,-1,-1,-1),rv("n2",t,e,tv,1,-1,-1),rv("n3",t,e,tv,-1,1,-1),rv("n4",t,e,tv,1,1,-1),rv("f1",t,e,tv,-1,-1,1),rv("f2",t,e,tv,1,-1,1),rv("f3",t,e,tv,-1,1,1),rv("f4",t,e,tv,1,1,1),rv("u1",t,e,tv,.7,1.1,-1),rv("u2",t,e,tv,-.7,1.1,-1),rv("u3",t,e,tv,0,2,-1),rv("cf1",t,e,tv,-1,0,1),rv("cf2",t,e,tv,1,0,1),rv("cf3",t,e,tv,0,-1,1),rv("cf4",t,e,tv,0,1,1),rv("cn1",t,e,tv,-1,0,-1),rv("cn2",t,e,tv,1,0,-1),rv("cn3",t,e,tv,0,-1,-1),rv("cn4",t,e,tv,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function rv(e,t,n,r,i,a,o){ev.set(i,a,o).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],ev.x,ev.y,ev.z)}}const iv=new Nl;class av extends Rd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Mc;i.setIndex(new sc(n,1)),i.setAttribute("position",new sc(r,3)),super(i,new xd({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&iv.setFromObject(this.object),iv.isEmpty())return;const t=iv.min,n=iv.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ov extends Rd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Mc;r.setIndex(new sc(n,1)),r.setAttribute("position",new gc([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new xd({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class sv extends Td{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new Mc;r.setAttribute("position",new gc([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new xd({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new Mc;i.setAttribute("position",new gc([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Oc(i,new Qu({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lv=new Tl;let uv,cv;class hv extends Nu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Tl(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Tl(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===uv&&(uv=new Mc,uv.setAttribute("position",new gc([0,0,0,0,1,0],3)),cv=new xp(0,.5,1,5,1),cv.translate(0,-.5,0)),this.position.copy(t),this.line=new Td(uv,new xd({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Oc(cv,new Qu({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lv.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lv,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class dv extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Mc;n.setAttribute("position",new gc(t,3)),n.setAttribute("color",new gc([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new xd({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new $u,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pv{constructor(){this.type="ShapePath",this.color=new $u,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new mp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,a){return this.currentPath.bezierCurveTo(e,t,n,r,i,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,a=0;a<n;i=a++){let n=t[i],o=t[a],s=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[a],s=-s,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const n=ef.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,a,o;const s=[];if(1===r.length)return a=r[0],o=new Cp,o.curves=a.curves,s.push(o),s;let l=!n(r[0].getPoints());l=e?!l:l;const u=[],c=[];let h,d,p=[],f=0;c[f]=void 0,p[f]=[];for(let m=0,g=r.length;m<g;m++)a=r[m],h=a.getPoints(),i=n(h),i=e?!i:i,i?(!l&&c[f]&&f++,c[f]={s:new Cp,p:h},c[f].s.curves=a.curves,l&&f++,p[f]=[]):p[f].push({h:a,p:h[0]});if(!c[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Cp;i.curves=r.curves,t.push(i)}return t}(r);if(c.length>1){let e=!1,n=0;for(let t=0,r=c.length;t<r;t++)u[t]=[];for(let r=0,i=c.length;r<i;r++){const i=p[r];for(let a=0;a<i.length;a++){const o=i[a];let s=!0;for(let i=0;i<c.length;i++)t(o.p,c[i].p)&&(r!==i&&n++,s?(s=!1,u[i].push(o)):e=!0);s&&u[r].push(o)}}n>0&&!1===e&&(p=u)}for(let m=0,g=c.length;m<g;m++){o=c[m].s,s.push(o),d=p[m];for(let e=0,t=d.length;e<t;e++)o.holes.push(d[e].h)}return s}}class fv extends Ls{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function mv(e,t,n,r){const i=function(e){switch(e){case Aa:case Ta:return{byteLength:1,components:1};case Da:case Ca:case Ia:return{byteLength:2,components:1};case Fa:case Pa:return{byteLength:2,components:4};case Ra:case Na:case ka:return{byteLength:4,components:1};case Ba:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case La:case Ha:return e*t;case qa:return e*t*2;case Ga:case Wa:return e*t/i.components*i.byteLength;case Xa:case Ya:return e*t*2/i.components*i.byteLength;case za:return e*t*3/i.components*i.byteLength;case Ua:case Za:return e*t*4/i.components*i.byteLength;case Ja:case Ka:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Qa:case eo:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case no:case io:return Math.max(e,16)*Math.max(t,8)/4;case to:case ro:return Math.max(e,8)*Math.max(t,8)/2;case ao:case oo:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case so:case lo:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case uo:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case co:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case ho:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case po:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case fo:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case mo:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case go:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case vo:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case yo:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case xo:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case bo:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case wo:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case So:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case _o:case Mo:case Eo:return Math.ceil(e/4)*Math.ceil(t/4)*16;case Ao:case To:return Math.ceil(e/4)*Math.ceil(t/4)*8;case Co:case Do:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}const gv={contain:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:mv};class vv extends wl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}function yv(){let e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function xv(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,a=r.byteLength,o=e.createBuffer();let s;if(e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)s=e.FLOAT;else if(r instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=e.SHORT;else if(r instanceof Uint32Array)s=e.UNSIGNED_INT;else if(r instanceof Int32Array)s=e.INT;else if(r instanceof Int8Array)s=e.BYTE;else if(r instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=e.UNSIGNED_BYTE}return{buffer:o,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:a}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,a=n.updateRanges;if(e.bindBuffer(r,t),0===a.length)e.bufferSubData(r,0,i);else{a.sort(((e,t)=>e.start-t.start));let t=0;for(let e=1;e<a.length;e++){const n=a[t],r=a[e];r.start<=n.start+n.count+1?n.count=Math.max(n.count,r.start+r.count-n.start):(++t,a[t]=r)}a.length=t+1;for(let n=0,o=a.length;n<o;n++){const t=a[n];e.bufferSubData(r,t.start*i.BYTES_PER_ELEMENT,i,t.start,t.count)}n.clearUpdateRanges()}n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ei}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ei);const bv={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},wv={common:{diffuse:{value:new $u(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Js},alphaMap:{value:null},alphaMapTransform:{value:new Js},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Js}},envmap:{envMap:{value:null},envMapRotation:{value:new Js},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Js}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Js}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Js},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Js},normalScale:{value:new Zs(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Js},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Js}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Js}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Js}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $u(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $u(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Js},alphaTest:{value:0},uvTransform:{value:new Js}},sprite:{diffuse:{value:new $u(16777215)},opacity:{value:1},center:{value:new Zs(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Js},alphaMap:{value:null},alphaMapTransform:{value:new Js},alphaTest:{value:0}}},Sv={basic:{uniforms:Uc([wv.common,wv.specularmap,wv.envmap,wv.aomap,wv.lightmap,wv.fog]),vertexShader:bv.meshbasic_vert,fragmentShader:bv.meshbasic_frag},lambert:{uniforms:Uc([wv.common,wv.specularmap,wv.envmap,wv.aomap,wv.lightmap,wv.emissivemap,wv.bumpmap,wv.normalmap,wv.displacementmap,wv.fog,wv.lights,{emissive:{value:new $u(0)}}]),vertexShader:bv.meshlambert_vert,fragmentShader:bv.meshlambert_frag},phong:{uniforms:Uc([wv.common,wv.specularmap,wv.envmap,wv.aomap,wv.lightmap,wv.emissivemap,wv.bumpmap,wv.normalmap,wv.displacementmap,wv.fog,wv.lights,{emissive:{value:new $u(0)},specular:{value:new $u(1118481)},shininess:{value:30}}]),vertexShader:bv.meshphong_vert,fragmentShader:bv.meshphong_frag},standard:{uniforms:Uc([wv.common,wv.envmap,wv.aomap,wv.lightmap,wv.emissivemap,wv.bumpmap,wv.normalmap,wv.displacementmap,wv.roughnessmap,wv.metalnessmap,wv.fog,wv.lights,{emissive:{value:new $u(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bv.meshphysical_vert,fragmentShader:bv.meshphysical_frag},toon:{uniforms:Uc([wv.common,wv.aomap,wv.lightmap,wv.emissivemap,wv.bumpmap,wv.normalmap,wv.displacementmap,wv.gradientmap,wv.fog,wv.lights,{emissive:{value:new $u(0)}}]),vertexShader:bv.meshtoon_vert,fragmentShader:bv.meshtoon_frag},matcap:{uniforms:Uc([wv.common,wv.bumpmap,wv.normalmap,wv.displacementmap,wv.fog,{matcap:{value:null}}]),vertexShader:bv.meshmatcap_vert,fragmentShader:bv.meshmatcap_frag},points:{uniforms:Uc([wv.points,wv.fog]),vertexShader:bv.points_vert,fragmentShader:bv.points_frag},dashed:{uniforms:Uc([wv.common,wv.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bv.linedashed_vert,fragmentShader:bv.linedashed_frag},depth:{uniforms:Uc([wv.common,wv.displacementmap]),vertexShader:bv.depth_vert,fragmentShader:bv.depth_frag},normal:{uniforms:Uc([wv.common,wv.bumpmap,wv.normalmap,wv.displacementmap,{opacity:{value:1}}]),vertexShader:bv.meshnormal_vert,fragmentShader:bv.meshnormal_frag},sprite:{uniforms:Uc([wv.sprite,wv.fog]),vertexShader:bv.sprite_vert,fragmentShader:bv.sprite_frag},background:{uniforms:{uvTransform:{value:new Js},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bv.background_vert,fragmentShader:bv.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Js}},vertexShader:bv.backgroundCube_vert,fragmentShader:bv.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bv.cube_vert,fragmentShader:bv.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bv.equirect_vert,fragmentShader:bv.equirect_frag},distanceRGBA:{uniforms:Uc([wv.common,wv.displacementmap,{referencePosition:{value:new Tl},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bv.distanceRGBA_vert,fragmentShader:bv.distanceRGBA_frag},shadow:{uniforms:Uc([wv.lights,wv.fog,{color:{value:new $u(0)},opacity:{value:1}}]),vertexShader:bv.shadow_vert,fragmentShader:bv.shadow_frag}};Sv.physical={uniforms:Uc([Sv.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Js},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Js},clearcoatNormalScale:{value:new Zs(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Js},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Js},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Js},sheen:{value:0},sheenColor:{value:new $u(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Js},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Js},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Js},transmissionSamplerSize:{value:new Zs},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Js},attenuationDistance:{value:0},attenuationColor:{value:new $u(0)},specularColor:{value:new $u(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Js},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Js},anisotropyVector:{value:new Zs},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Js}}]),vertexShader:bv.meshphysical_vert,fragmentShader:bv.meshphysical_frag};const _v={r:0,b:0,g:0},Mv=new pu,Ev=new ru;function Av(e,t,n,r,i,a,o){const s=new $u(0);let l,u,c=!0===a?0:1,h=null,d=0,p=null;function f(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function m(t,n){t.getRGB(_v,Hc(e)),r.buffers.color.setClear(_v.r,_v.g,_v.b,n,o)}return{getClearColor:function(){return s},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),c=t,m(s,c)},getClearAlpha:function(){return c},setClearAlpha:function(e){c=e,m(s,c)},render:function(t){let n=!1;const i=f(t);null===i?m(s,c):i&&i.isColor&&(m(i,1),n=!0);const a=e.xr.getEnvironmentBlendMode();"additive"===a?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===a&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=f(n);r&&(r.isCubeTexture||r.mapping===da)?(void 0===u&&(u=new Oc(new Lc(1,1,1),new Vc({name:"BackgroundCubeMaterial",uniforms:zc(Sv.backgroundCube.uniforms),vertexShader:Sv.backgroundCube.vertexShader,fragmentShader:Sv.backgroundCube.fragmentShader,side:di,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),Mv.copy(n.backgroundRotation),Mv.x*=-1,Mv.y*=-1,Mv.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(Mv.y*=-1,Mv.z*=-1),u.material.uniforms.envMap.value=r,u.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Ev.makeRotationFromEuler(Mv)),u.material.toneMapped=ul.getTransfer(r.colorSpace)!==es,h===r&&d===r.version&&p===e.toneMapping||(u.material.needsUpdate=!0,h=r,d=r.version,p=e.toneMapping),u.layers.enableAll(),t.unshift(u,u.geometry,u.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new Oc(new lf(2,2),new Vc({name:"BackgroundMaterial",uniforms:zc(Sv.background.uniforms),vertexShader:Sv.background.vertexShader,fragmentShader:Sv.background.fragmentShader,side:hi,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=ul.getTransfer(r.colorSpace)!==es,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==u&&(u.geometry.dispose(),u.material.dispose()),void 0!==l&&(l.geometry.dispose(),l.material.dispose())}}}function Tv(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=u(null);let a=i,o=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function u(e){const t=[],r=[],i=[];for(let a=0;a<n;a++)t[a]=0,r[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function c(){const e=a.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const r=a.newAttributes,i=a.enabledAttributes,o=a.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function p(){const t=a.newAttributes,n=a.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function f(t,n,r,i,a,o,s){!0===s?e.vertexAttribIPointer(t,n,r,a,o):e.vertexAttribPointer(t,n,r,i,a,o)}function m(){g(),o=!0,a!==i&&(a=i,s(a.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1;const y=function(t,n,i){const a=!0===i.wireframe;let o=r[t.id];void 0===o&&(o={},r[t.id]=o);let s=o[n.id];void 0===s&&(s={},o[n.id]=s);let l=s[a];void 0===l&&(l=u(e.createVertexArray()),s[a]=l);return l}(m,l,i);a!==y&&(a=y,s(a.object)),v=function(e,t,n,r){const i=a.attributes,o=t.attributes;let s=0;const l=n.getAttributes();for(const a in l){if(l[a].location>=0){const t=i[a];let n=o[a];if(void 0===n&&("instanceMatrix"===a&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===a&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return a.attributesNum!==s||a.index!==r}(n,m,l,g),v&&function(e,t,n,r){const i={},o=t.attributes;let s=0;const l=n.getAttributes();for(const a in l){if(l[a].location>=0){let t=o[a];void 0===t&&("instanceMatrix"===a&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===a&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[a]=n,s++}}a.attributes=i,a.attributesNum=s,a.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||o)&&(o=!1,function(n,r,i,a){c();const o=a.attributes,s=i.getAttributes(),l=r.defaultAttributeValues;for(const u in s){const r=s[u];if(r.location>=0){let i=o[u];if(void 0===i&&("instanceMatrix"===u&&n.instanceMatrix&&(i=n.instanceMatrix),"instanceColor"===u&&n.instanceColor&&(i=n.instanceColor)),void 0!==i){const o=i.normalized,s=i.itemSize,l=t.get(i);if(void 0===l)continue;const u=l.buffer,c=l.type,p=l.bytesPerElement,m=c===e.INT||c===e.UNSIGNED_INT||i.gpuType===Na;if(i.isInterleavedBufferAttribute){const t=i.data,l=t.stride,g=i.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)d(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<r.locationSize;e++)f(r.location+e,s/r.locationSize,c,o,l*p,(g+s/r.locationSize*e)*p,m)}else{if(i.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)d(r.location+e,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<r.locationSize;e++)f(r.location+e,s/r.locationSize,c,o,s*p,s/r.locationSize*e*p,m)}}else if(void 0!==l){const t=l[u];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:c,enableAttribute:h,disableUnusedAttributes:p}}function Cv(e,t,n){let r;function i(t,i,a){0!==a&&(e.drawArraysInstanced(r,t,i,a),n.update(i,r,a))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,a);let o=0;for(let t=0;t<a;t++)o+=i[t];n.update(o,r,1)},this.renderMultiDrawInstances=function(e,a,o,s){if(0===o)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],a[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,a,0,s,0,o);let t=0;for(let e=0;e<o;e++)t+=a[e]*s[e];n.update(t,r,1)}}}function Dv(e,t,n,r){let i;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==n.precision?n.precision:"highp";const s=a(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);const l=!0===n.logarithmicDepthBuffer,u=!0===n.reverseDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:a,textureFormatReadable:function(t){return t===Ua||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===Ia&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Aa&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==ka&&!i)},precision:o,logarithmicDepthBuffer:l,reverseDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Nv(e){const t=this;let n=null,r=0,i=!1,a=!1;const o=new Jh,s=new Js,l={value:null,needsUpdate:!1};function u(e,n,r,i){const a=null!==e?e.length:0;let u=null;if(0!==a){if(u=l.value,!0!==i||null===u){const t=r+4*a,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let n=0,l=r;n!==a;++n,l+=4)o.copy(e[n]).applyMatrix4(i,s),o.normal.toArray(u,l),u[l+3]=o.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){n=u(e,t,0)},this.setState=function(o,s,c){const h=o.clippingPlanes,d=o.clipIntersection,p=o.clipShadows,f=e.get(o);if(!i||null===h||0===h.length||a&&!p)a?u(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=a?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=u(h,s,t,c);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Rv(e){let t=new WeakMap;function n(e,t){return t===ca?e.mapping=la:t===ha&&(e.mapping=ua),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping;if(a===ca||a===ha){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const a=i.image;if(a&&a.height>0){const o=new Kc(a.height);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}const kv=[.125,.215,.35,.446,.526,.582],Iv=20,Fv=new _m,Pv=new $u;let Ov=null,Bv=0,Lv=0,zv=!1;const Uv=(1+Math.sqrt(5))/2,Hv=1/Uv,qv=[new Tl(-Uv,Hv,0),new Tl(Uv,Hv,0),new Tl(-Hv,0,Uv),new Tl(Hv,0,Uv),new Tl(0,Uv,-Hv),new Tl(0,Uv,Hv),new Tl(-1,1,-1),new Tl(1,1,-1),new Tl(-1,1,1),new Tl(1,1,1)];class Vv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Ov=this._renderer.getRenderTarget(),Bv=this._renderer.getActiveCubeFace(),Lv=this._renderer.getActiveMipmapLevel(),zv=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Xv(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Wv(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ov,Bv,Lv),this._renderer.xr.enabled=zv,e.scissorTest=!1,Gv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===la||e.mapping===ua?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ov=this._renderer.getRenderTarget(),Bv=this._renderer.getActiveCubeFace(),Lv=this._renderer.getActiveMipmapLevel(),zv=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:wa,minFilter:wa,generateMipmaps:!1,type:Ia,format:Ua,colorSpace:Ko,depthBuffer:!1},r=jv(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=jv(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const a=e-4+1+kv.length;for(let o=0;o<a;o++){const a=Math.pow(2,i);n.push(a);let s=1/a;o>e-4?s=kv[o-e+4-1]:0===o&&(s=0),r.push(s);const l=1/(a-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),x=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];x.set(i,g*p*e)}const b=new Mc;b.setAttribute("position",new sc(v,f)),b.setAttribute("uv",new sc(y,m)),b.setAttribute("faceIndex",new sc(x,g)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Iv),i=new Tl(0,1,0),a=new Vc({name:"SphericalGaussianBlur",defines:{n:Iv,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Yv(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:fi,depthTest:!1,depthWrite:!1});return a}(r,e,t)}return r}_compileMaterial(e){const t=new Oc(this._lodPlanes[0],e);this._renderer.compile(t,Fv)}_sceneToCubeUV(e,t,n,r){const i=new Yc(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,u=s.toneMapping;s.getClearColor(Pv),s.toneMapping=Ji,s.autoClear=!1;const c=new Qu({name:"PMREM.Background",side:di,depthWrite:!1,depthTest:!1}),h=new Oc(new Lc,c);let d=!1;const p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,d=!0):(c.color.copy(Pv),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,a[f],0),i.lookAt(o[f],0,0)):1===t?(i.up.set(0,0,a[f]),i.lookAt(0,o[f],0)):(i.up.set(0,a[f],0),i.lookAt(0,0,o[f]));const n=this._cubeSize;Gv(r,t*n,f>2?n:0,n,n),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=u,s.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===la||e.mapping===ua;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Xv()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Wv());const i=r?this._cubemapMaterial:this._equirectMaterial,a=new Oc(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const o=this._cubeSize;Gv(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,Fv)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=qv[(r-i-1)%qv.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,a,o){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new Oc(this._lodPlanes[r],l),c=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):Iv;f>Iv&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let x=0;x<Iv;++x){const e=x/p,t=Math.exp(-e*e/2);m.push(t),0===x?g+=t:x<f&&(g+=2*t)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;c.envMap.value=e.texture,c.samples.value=f,c.weights.value=m,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);const{_lodMax:v}=this;c.dTheta.value=d,c.mipInt.value=v-n;const y=this._sizeLods[r];Gv(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(u,Fv)}}function jv(e,t,n){const r=new wl(e,t,n);return r.texture.mapping=da,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Gv(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Wv(){return new Vc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Yv(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:fi,depthTest:!1,depthWrite:!1})}function Xv(){return new Vc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Yv(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:fi,depthTest:!1,depthWrite:!1})}function Yv(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function $v(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const a=i.mapping,o=a===ca||a===ha,s=a===la||a===ua;if(o||s){let a=t.get(i);const l=void 0!==a?a.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new Vv(e)),a=o?n.fromEquirectangular(i,a):n.fromCubemap(i,a),a.texture.pmremVersion=i.pmremVersion,t.set(i,a),a.texture;if(void 0!==a)return a.texture;{const l=i.image;return o&&l&&l.height>0||s&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new Vv(e)),a=o?n.fromEquirectangular(i):n.fromCubemap(i),a.texture.pmremVersion=i.pmremVersion,t.set(i,a),i.addEventListener("dispose",r),a.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Zv(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&al("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Jv(e,t,n,r){const i={},a=new WeakMap;function o(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);s.removeEventListener("dispose",o),delete i[s.id];const l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],a=e[t+2];n.push(r,i,i,a,a,r)}}else{if(void 0===i)return;{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const s=new(Qs(n)?fc:dc)(n,1);s.version=o;const l=a.get(e);l&&t.remove(l),a.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const i in r)t.update(r[i],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){const t=a.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function Kv(e,t,n){let r,i,a;function o(t,o,s){0!==s&&(e.drawElementsInstanced(r,o,i,t*a,s),n.update(o,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,a,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,a,0,i,e,0,o);let s=0;for(let t=0;t<o;t++)s+=a[t];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,s,l,u){if(0===l)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)o(e[t]/a,s[t],u[t]);else{c.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,u,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e]*u[e];n.update(t,r,1)}}}function Qv(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function ey(e,t,n){const r=new WeakMap,i=new xl;return{update:function(a,o,s){const l=a.morphTargetInfluences,u=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,c=void 0!==u?u.length:0;let h=r.get(o);if(void 0===h||h.count!==c){void 0!==h&&h.texture.dispose();const d=void 0!==o.morphAttributes.position,p=void 0!==o.morphAttributes.normal,f=void 0!==o.morphAttributes.color,m=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],v=o.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===p&&(y=2),!0===f&&(y=3);let x=o.attributes.position.count*y,b=1;x>t.maxTextureSize&&(b=Math.ceil(x/t.maxTextureSize),x=t.maxTextureSize);const w=new Float32Array(x*b*4*c),S=new Sl(w,x,b,c);S.type=ka,S.needsUpdate=!0;const _=4*y;for(let E=0;E<c;E++){const A=m[E],T=g[E],C=v[E],D=x*b*4*E;for(let N=0;N<A.count;N++){const R=N*_;!0===d&&(i.fromBufferAttribute(A,N),w[D+R+0]=i.x,w[D+R+1]=i.y,w[D+R+2]=i.z,w[D+R+3]=0),!0===p&&(i.fromBufferAttribute(T,N),w[D+R+4]=i.x,w[D+R+5]=i.y,w[D+R+6]=i.z,w[D+R+7]=0),!0===f&&(i.fromBufferAttribute(C,N),w[D+R+8]=i.x,w[D+R+9]=i.y,w[D+R+10]=i.z,w[D+R+11]=4===C.itemSize?i.w:1)}}function M(){S.dispose(),r.delete(o),o.removeEventListener("dispose",M)}h={count:c,texture:S,size:new Zs(x,b)},r.set(o,h),o.addEventListener("dispose",M)}if(!0===a.isInstancedMesh&&null!==a.morphTexture)s.getUniforms().setValue(e,"morphTexture",a.morphTexture,n);else{let k=0;for(let F=0;F<l.length;F++)k+=l[F];const I=o.morphTargetsRelative?1:1-k;s.getUniforms().setValue(e,"morphTargetBaseInfluence",I),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function ty(e,t,n,r){let i=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const s=r.render.frame,l=o.geometry,u=t.get(o,l);if(i.get(u)!==s&&(t.update(u),i.set(u,s)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",a)&&o.addEventListener("dispose",a),i.get(o)!==s&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,s))),o.isSkinnedMesh){const e=o.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return u},dispose:function(){i=new WeakMap}}}const ny=new yl,ry=new Xd(1,1),iy=new Sl,ay=new Ml,oy=new Jc,sy=[],ly=[],uy=new Float32Array(16),cy=new Float32Array(9),hy=new Float32Array(4);function dy(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let a=sy[i];if(void 0===a&&(a=new Float32Array(i),sy[i]=a),0!==t){r.toArray(a,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(a,i)}return a}function py(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function fy(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function my(e,t){let n=ly[t];void 0===n&&(n=new Int32Array(t),ly[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function gy(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function vy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(py(n,t))return;e.uniform2fv(this.addr,t),fy(n,t)}}function yy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(py(n,t))return;e.uniform3fv(this.addr,t),fy(n,t)}}function xy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(py(n,t))return;e.uniform4fv(this.addr,t),fy(n,t)}}function by(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(py(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),fy(n,t)}else{if(py(n,r))return;hy.set(r),e.uniformMatrix2fv(this.addr,!1,hy),fy(n,r)}}function wy(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(py(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),fy(n,t)}else{if(py(n,r))return;cy.set(r),e.uniformMatrix3fv(this.addr,!1,cy),fy(n,r)}}function Sy(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(py(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),fy(n,t)}else{if(py(n,r))return;uy.set(r),e.uniformMatrix4fv(this.addr,!1,uy),fy(n,r)}}function _y(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function My(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(py(n,t))return;e.uniform2iv(this.addr,t),fy(n,t)}}function Ey(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(py(n,t))return;e.uniform3iv(this.addr,t),fy(n,t)}}function Ay(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(py(n,t))return;e.uniform4iv(this.addr,t),fy(n,t)}}function Ty(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Cy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(py(n,t))return;e.uniform2uiv(this.addr,t),fy(n,t)}}function Dy(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(py(n,t))return;e.uniform3uiv(this.addr,t),fy(n,t)}}function Ny(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(py(n,t))return;e.uniform4uiv(this.addr,t),fy(n,t)}}function Ry(e,t,n){const r=this.cache,i=n.allocateTextureUnit();let a;r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),this.type===e.SAMPLER_2D_SHADOW?(ry.compareFunction=bs,a=ry):a=ny,n.setTexture2D(t||a,i)}function ky(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||ay,i)}function Iy(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||oy,i)}function Fy(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||iy,i)}function Py(e,t){e.uniform1fv(this.addr,t)}function Oy(e,t){const n=dy(t,this.size,2);e.uniform2fv(this.addr,n)}function By(e,t){const n=dy(t,this.size,3);e.uniform3fv(this.addr,n)}function Ly(e,t){const n=dy(t,this.size,4);e.uniform4fv(this.addr,n)}function zy(e,t){const n=dy(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Uy(e,t){const n=dy(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Hy(e,t){const n=dy(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function qy(e,t){e.uniform1iv(this.addr,t)}function Vy(e,t){e.uniform2iv(this.addr,t)}function jy(e,t){e.uniform3iv(this.addr,t)}function Gy(e,t){e.uniform4iv(this.addr,t)}function Wy(e,t){e.uniform1uiv(this.addr,t)}function Xy(e,t){e.uniform2uiv(this.addr,t)}function Yy(e,t){e.uniform3uiv(this.addr,t)}function $y(e,t){e.uniform4uiv(this.addr,t)}function Zy(e,t,n){const r=this.cache,i=t.length,a=my(n,i);py(r,a)||(e.uniform1iv(this.addr,a),fy(r,a));for(let o=0;o!==i;++o)n.setTexture2D(t[o]||ny,a[o])}function Jy(e,t,n){const r=this.cache,i=t.length,a=my(n,i);py(r,a)||(e.uniform1iv(this.addr,a),fy(r,a));for(let o=0;o!==i;++o)n.setTexture3D(t[o]||ay,a[o])}function Ky(e,t,n){const r=this.cache,i=t.length,a=my(n,i);py(r,a)||(e.uniform1iv(this.addr,a),fy(r,a));for(let o=0;o!==i;++o)n.setTextureCube(t[o]||oy,a[o])}function Qy(e,t,n){const r=this.cache,i=t.length,a=my(n,i);py(r,a)||(e.uniform1iv(this.addr,a),fy(r,a));for(let o=0;o!==i;++o)n.setTexture2DArray(t[o]||iy,a[o])}class ex{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return gy;case 35664:return vy;case 35665:return yy;case 35666:return xy;case 35674:return by;case 35675:return wy;case 35676:return Sy;case 5124:case 35670:return _y;case 35667:case 35671:return My;case 35668:case 35672:return Ey;case 35669:case 35673:return Ay;case 5125:return Ty;case 36294:return Cy;case 36295:return Dy;case 36296:return Ny;case 35678:case 36198:case 36298:case 36306:case 35682:return Ry;case 35679:case 36299:case 36307:return ky;case 35680:case 36300:case 36308:case 36293:return Iy;case 36289:case 36303:case 36311:case 36292:return Fy}}(t.type)}}class tx{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Py;case 35664:return Oy;case 35665:return By;case 35666:return Ly;case 35674:return zy;case 35675:return Uy;case 35676:return Hy;case 5124:case 35670:return qy;case 35667:case 35671:return Vy;case 35668:case 35672:return jy;case 35669:case 35673:return Gy;case 5125:return Wy;case 36294:return Xy;case 36295:return Yy;case 36296:return $y;case 35678:case 36198:case 36298:case 36306:case 35682:return Zy;case 35679:case 36299:case 36307:return Jy;case 35680:case 36300:case 36308:case 36293:return Ky;case 36289:case 36303:case 36311:case 36292:return Qy}}(t.type)}}class nx{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,a=r.length;i!==a;++i){const a=r[i];a.setValue(e,t[a.id],n)}}}const rx=/(\w+)(\])?(\[|\.)?/g;function ix(e,t){e.seq.push(t),e.map[t.id]=t}function ax(e,t,n){const r=e.name,i=r.length;for(rx.lastIndex=0;;){const a=rx.exec(r),o=rx.lastIndex;let s=a[1];const l="]"===a[2],u=a[3];if(l&&(s|=0),void 0===u||"["===u&&o+2===i){ix(n,void 0===u?new ex(s,e,t):new tx(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new nx(s),ix(n,e)),n=e}}}class ox{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);ax(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,a=t.length;i!==a;++i){const a=t[i],o=n[a.id];!1!==o.needsUpdate&&a.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function sx(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let lx=0;const ux=new Js;function cx(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const a=/ERROR: 0:(\d+)/.exec(i);if(a){const r=parseInt(a[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),a=Math.min(t+6,n.length);for(let o=i;o<a;o++){const e=o+1;r.push(`${e===t?">":" "} ${e}: ${n[o]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function hx(e,t){const n=function(e){ul._getMatrix(ux,ul.workingColorSpace,e);const t=`mat3( ${ux.elements.map((e=>e.toFixed(4)))} )`;switch(ul.getTransfer(e)){case Qo:return[t,"LinearTransferOETF"];case es:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${e}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function dx(e,t){let n;switch(t){case Ki:n="Linear";break;case Qi:n="Reinhard";break;case ea:n="Cineon";break;case ta:n="ACESFilmic";break;case ra:n="AgX";break;case ia:n="Neutral";break;case na:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const px=new Tl;function fx(){ul.getLuminanceCoefficients(px);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${px.x.toFixed(4)}, ${px.y.toFixed(4)}, ${px.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function mx(e){return""!==e}function gx(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function vx(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const yx=/^[ \t]*#include +<([\w\d./]+)>/gm;function xx(e){return e.replace(yx,wx)}const bx=new Map;function wx(e,t){let n=bv[t];if(void 0===n){const e=bx.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=bv[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return xx(n)}const Sx=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _x(e){return e.replace(Sx,Mx)}function Mx(e,t,n,r){let i="";for(let a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Ex(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ax(e,t,n,r){const i=e.getContext(),a=n.defines;let o=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===li?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===ui?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===ci&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case la:case ua:t="ENVMAP_TYPE_CUBE";break;case da:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===ua&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Yi:t="ENVMAP_BLENDING_MULTIPLY";break;case $i:t="ENVMAP_BLENDING_MIX";break;case Zi:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(mx).join("\n")}(n),f=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(a),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(mx).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f].filter(mx).join("\n"),v.length>0&&(v+="\n")):(g=[Ex(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(mx).join("\n"),v=[Ex(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ji?"#define TONE_MAPPING":"",n.toneMapping!==Ji?bv.tonemapping_pars_fragment:"",n.toneMapping!==Ji?dx("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",bv.colorspace_pars_fragment,hx("linearToOutputTexel",n.outputColorSpace),fx(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(mx).join("\n")),o=xx(o),o=gx(o,n),o=vx(o,n),s=xx(s),s=gx(s,n),s=vx(s,n),o=_x(o),s=_x(s),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===Ps?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ps?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+g+o,b=y+v+s,w=sx(i,i.VERTEX_SHADER,x),S=sx(i,i.FRAGMENT_SHADER,b);function _(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(w).trim(),a=i.getShaderInfoLog(S).trim();let o=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(o=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,m,w,S);else{const e=cx(i,w,"vertex"),r=cx(i,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==a||(s=!1);s&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:a,prefix:v}})}i.deleteShader(w),i.deleteShader(S),M=new ox(i,m),E=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),a=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[a]={type:r.type,location:e.getAttribLocation(t,a),locationSize:o}}return n}(i,m)}let M,E;i.attachShader(m,w),i.attachShader(m,S),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===M&&_(this),M},this.getAttributes=function(){return void 0===E&&_(this),E};let A=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=i.getProgramParameter(m,37297)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=lx++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=S,this}let Tx=0;class Cx{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(i)&&(a.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Dx(e),t.set(e,n)),n}}class Dx{constructor(e){this.id=Tx++,this.code=e,this.usedTimes=0}}function Nx(e,t,n,r,i,a,o){const s=new fu,l=new Cx,u=new Set,c=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return u.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(a,s,c,g,v){const y=g.fog,x=v.geometry,b=a.isMeshStandardMaterial?g.environment:null,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||b),S=w&&w.mapping===da?w.image.height:null,_=f[a.type];null!==a.precision&&(p=i.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const M=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,E=void 0!==M?M.length:0;let A,T,C,D,N=0;if(void 0!==x.morphAttributes.position&&(N=1),void 0!==x.morphAttributes.normal&&(N=2),void 0!==x.morphAttributes.color&&(N=3),_){const e=Sv[_];A=e.vertexShader,T=e.fragmentShader}else A=a.vertexShader,T=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),D=l.getFragmentShaderID(a);const R=e.getRenderTarget(),k=e.state.buffers.depth.getReversed(),I=!0===v.isInstancedMesh,F=!0===v.isBatchedMesh,P=!!a.map,O=!!a.matcap,B=!!w,L=!!a.aoMap,z=!!a.lightMap,U=!!a.bumpMap,H=!!a.normalMap,q=!!a.displacementMap,V=!!a.emissiveMap,j=!!a.metalnessMap,G=!!a.roughnessMap,W=a.anisotropy>0,X=a.clearcoat>0,Y=a.dispersion>0,$=a.iridescence>0,Z=a.sheen>0,J=a.transmission>0,K=W&&!!a.anisotropyMap,Q=X&&!!a.clearcoatMap,ee=X&&!!a.clearcoatNormalMap,te=X&&!!a.clearcoatRoughnessMap,ne=$&&!!a.iridescenceMap,re=$&&!!a.iridescenceThicknessMap,ie=Z&&!!a.sheenColorMap,ae=Z&&!!a.sheenRoughnessMap,oe=!!a.specularMap,se=!!a.specularColorMap,le=!!a.specularIntensityMap,ue=J&&!!a.transmissionMap,ce=J&&!!a.thicknessMap,he=!!a.gradientMap,de=!!a.alphaMap,pe=a.alphaTest>0,fe=!!a.alphaHash,me=!!a.extensions;let ge=Ji;a.toneMapped&&(null!==R&&!0!==R.isXRRenderTarget||(ge=e.toneMapping));const ve={shaderID:_,shaderType:a.type,shaderName:a.name,vertexShader:A,fragmentShader:T,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:D,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,batching:F,batchingColor:F&&null!==v._colorsTexture,instancing:I,instancingColor:I&&null!==v.instanceColor,instancingMorph:I&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===R?e.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:Ko,alphaToCoverage:!!a.alphaToCoverage,map:P,matcap:O,envMap:B,envMapMode:B&&w.mapping,envMapCubeUVHeight:S,aoMap:L,lightMap:z,bumpMap:U,normalMap:H,displacementMap:d&&q,emissiveMap:V,normalMapObjectSpace:H&&a.normalMapType===$o,normalMapTangentSpace:H&&a.normalMapType===Yo,metalnessMap:j,roughnessMap:G,anisotropy:W,anisotropyMap:K,clearcoat:X,clearcoatMap:Q,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,dispersion:Y,iridescence:$,iridescenceMap:ne,iridescenceThicknessMap:re,sheen:Z,sheenColorMap:ie,sheenRoughnessMap:ae,specularMap:oe,specularColorMap:se,specularIntensityMap:le,transmission:J,transmissionMap:ue,thicknessMap:ce,gradientMap:he,opaque:!1===a.transparent&&a.blending===mi&&!1===a.alphaToCoverage,alphaMap:de,alphaTest:pe,alphaHash:fe,combine:a.combine,mapUv:P&&m(a.map.channel),aoMapUv:L&&m(a.aoMap.channel),lightMapUv:z&&m(a.lightMap.channel),bumpMapUv:U&&m(a.bumpMap.channel),normalMapUv:H&&m(a.normalMap.channel),displacementMapUv:q&&m(a.displacementMap.channel),emissiveMapUv:V&&m(a.emissiveMap.channel),metalnessMapUv:j&&m(a.metalnessMap.channel),roughnessMapUv:G&&m(a.roughnessMap.channel),anisotropyMapUv:K&&m(a.anisotropyMap.channel),clearcoatMapUv:Q&&m(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(a.clearcoatRoughnessMap.channel),iridescenceMapUv:ne&&m(a.iridescenceMap.channel),iridescenceThicknessMapUv:re&&m(a.iridescenceThicknessMap.channel),sheenColorMapUv:ie&&m(a.sheenColorMap.channel),sheenRoughnessMapUv:ae&&m(a.sheenRoughnessMap.channel),specularMapUv:oe&&m(a.specularMap.channel),specularColorMapUv:se&&m(a.specularColorMap.channel),specularIntensityMapUv:le&&m(a.specularIntensityMap.channel),transmissionMapUv:ue&&m(a.transmissionMap.channel),thicknessMapUv:ce&&m(a.thicknessMap.channel),alphaMapUv:de&&m(a.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(H||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!x.attributes.uv&&(P||de),fog:!!y,useFog:!0===a.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,reverseDepthBuffer:k,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:E,morphTextureStride:N,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ge,decodeVideoTexture:P&&!0===a.map.isVideoTexture&&ul.getTransfer(a.map.colorSpace)===es,decodeVideoTextureEmissive:V&&!0===a.emissiveMap.isVideoTexture&&ul.getTransfer(a.emissiveMap.colorSpace)===es,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===pi,flipSided:a.side===di,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:me&&!0===a.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(me&&!0===a.extensions.multiDraw||F)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ve.vertexUv1s=u.has(1),ve.vertexUv2s=u.has(2),ve.vertexUv3s=u.has(3),u.clear(),ve},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0);t.instancing&&s.enable(1);t.instancingColor&&s.enable(2);t.instancingMorph&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);t.dispersion&&s.enable(20);t.batchingColor&&s.enable(21);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.reverseDepthBuffer&&s.enable(4);t.skinning&&s.enable(5);t.morphTargets&&s.enable(6);t.morphNormals&&s.enable(7);t.morphColors&&s.enable(8);t.premultipliedAlpha&&s.enable(9);t.shadowMapEnabled&&s.enable(10);t.doubleSided&&s.enable(11);t.flipSided&&s.enable(12);t.useDepthPacking&&s.enable(13);t.dithering&&s.enable(14);t.transmission&&s.enable(15);t.sheen&&s.enable(16);t.opaque&&s.enable(17);t.pointsUvs&&s.enable(18);t.decodeVideoTexture&&s.enable(19);t.decodeVideoTextureEmissive&&s.enable(20);t.alphaToCoverage&&s.enable(21);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=Sv[t];n=qc.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=c.length;e<i;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ax(e,n,t,a),c.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Rx(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function kx(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ix(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Fx(){const e=[];let t=0;const n=[],r=[],i=[];function a(n,r,i,a,o,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:a,renderOrder:n.renderOrder,z:o,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=o,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,s,l,u){const c=a(e,t,o,s,l,u);o.transmission>0?r.push(c):!0===o.transparent?i.push(c):n.push(c)},unshift:function(e,t,o,s,l,u){const c=a(e,t,o,s,l,u);o.transmission>0?r.unshift(c):!0===o.transparent?i.unshift(c):n.unshift(c)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||kx),r.length>1&&r.sort(t||Ix),i.length>1&&i.sort(t||Ix)}}}function Px(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Fx,e.set(t,[i])):n>=r.length?(i=new Fx,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Ox(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Tl,color:new $u};break;case"SpotLight":n={position:new Tl,direction:new Tl,color:new $u,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Tl,color:new $u,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Tl,skyColor:new $u,groundColor:new $u};break;case"RectAreaLight":n={color:new $u,position:new Tl,halfWidth:new Tl,halfHeight:new Tl}}return e[t.id]=n,n}}}let Bx=0;function Lx(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function zx(e){const t=new Ox,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Zs};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Zs,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let s=0;s<9;s++)r.probe.push(new Tl);const i=new Tl,a=new ru,o=new ru;return{setup:function(i){let a=0,o=0,s=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,u=0,c=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0;i.sort(Lx);for(let e=0,b=i.length;e<b;e++){const x=i[e],b=x.color,w=x.intensity,S=x.distance,_=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)a+=b.r*w,o+=b.g*w,s+=b.b*w;else if(x.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(x.sh.coefficients[e],w);y++}else if(x.isDirectionalLight){const e=t.get(x);if(e.color.copy(x.color).multiplyScalar(x.intensity),x.castShadow){const e=x.shadow,t=n.get(x);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=_,r.directionalShadowMatrix[l]=x.shadow.matrix,p++}r.directional[l]=e,l++}else if(x.isSpotLight){const e=t.get(x);e.position.setFromMatrixPosition(x.matrixWorld),e.color.copy(b).multiplyScalar(w),e.distance=S,e.coneCos=Math.cos(x.angle),e.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),e.decay=x.decay,r.spot[c]=e;const i=x.shadow;if(x.map&&(r.spotLightMap[g]=x.map,g++,i.updateMatrices(x),x.castShadow&&v++),r.spotLightMatrix[c]=i.matrix,x.castShadow){const e=n.get(x);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[c]=e,r.spotShadowMap[c]=_,m++}c++}else if(x.isRectAreaLight){const e=t.get(x);e.color.copy(b).multiplyScalar(w),e.halfWidth.set(.5*x.width,0,0),e.halfHeight.set(0,.5*x.height,0),r.rectArea[h]=e,h++}else if(x.isPointLight){const e=t.get(x);if(e.color.copy(x.color).multiplyScalar(x.intensity),e.distance=x.distance,e.decay=x.decay,x.castShadow){const e=x.shadow,t=n.get(x);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[u]=t,r.pointShadowMap[u]=_,r.pointShadowMatrix[u]=x.shadow.matrix,f++}r.point[u]=e,u++}else if(x.isHemisphereLight){const e=t.get(x);e.skyColor.copy(x.color).multiplyScalar(w),e.groundColor.copy(x.groundColor).multiplyScalar(w),r.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=wv.LTC_FLOAT_1,r.rectAreaLTC2=wv.LTC_FLOAT_2):(r.rectAreaLTC1=wv.LTC_HALF_1,r.rectAreaLTC2=wv.LTC_HALF_2)),r.ambient[0]=a,r.ambient[1]=o,r.ambient[2]=s;const x=r.hash;x.directionalLength===l&&x.pointLength===u&&x.spotLength===c&&x.rectAreaLength===h&&x.hemiLength===d&&x.numDirectionalShadows===p&&x.numPointShadows===f&&x.numSpotShadows===m&&x.numSpotMaps===g&&x.numLightProbes===y||(r.directional.length=l,r.spot.length=c,r.rectArea.length=h,r.point.length=u,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=y,x.directionalLength=l,x.pointLength=u,x.spotLength=c,x.rectAreaLength=h,x.hemiLength=d,x.numDirectionalShadows=p,x.numPointShadows=f,x.numSpotShadows=m,x.numSpotMaps=g,x.numLightProbes=y,r.version=Bx++)},setupView:function(e,t){let n=0,s=0,l=0,u=0,c=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=r.rectArea[u];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(t.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),u++}else if(t.isPointLight){const e=r.point[s];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s++}else if(t.isHemisphereLight){const e=r.hemi[c];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),c++}}},state:r}}function Ux(e){const t=new zx(e),n=[],r=[];const i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Hx(e){let t=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=t.get(n);let a;return void 0===i?(a=new Ux(e),t.set(n,[a])):r>=i.length?(a=new Ux(e),i.push(a)):a=i[r],a},dispose:function(){t=new WeakMap}}}function qx(e,t,n){let r=new ed;const i=new Zs,a=new Zs,o=new xl,s=new Tf({depthPacking:Go}),l=new Cf,u={},c=n.maxTextureSize,h={[hi]:di,[di]:hi,[pi]:pi},d=new Vc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Zs},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new Mc;f.setAttribute("position",new sc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Oc(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=li;let v=this.type;function y(n,r){const a=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new wl(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,a,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,a,p,m,null)}function x(t,n,r,i){let a=null;const o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)a=o;else if(a=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=a.uuid,t=n.uuid;let r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=a.clone(),r[t]=i,n.addEventListener("dispose",w)),a=i}if(a.visible=n.visible,a.wireframe=n.wireframe,a.side=i===ci?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],a.alphaMap=n.alphaMap,a.alphaTest=n.alphaTest,a.map=n.map,a.clipShadows=n.clipShadows,a.clippingPlanes=n.clippingPlanes,a.clipIntersection=n.clipIntersection,a.displacementMap=n.displacementMap,a.displacementScale=n.displacementScale,a.displacementBias=n.displacementBias,a.wireframeLinewidth=n.wireframeLinewidth,a.linewidth=n.linewidth,!0===r.isPointLight&&!0===a.isMeshDistanceMaterial){e.properties.get(a).light=r}return a}function b(n,i,a,o,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===ci)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let u=0,c=t.length;u<c;u++){const c=t[u],h=l[c.materialIndex];if(h&&h.visible){const t=x(n,h,o,s);n.onBeforeShadow(e,n,i,a,r,t,c),e.renderBufferDirect(a,null,r,t,n,c),n.onAfterShadow(e,n,i,a,r,t,c)}}}else if(l.visible){const t=x(n,l,o,s);n.onBeforeShadow(e,n,i,a,r,t,null),e.renderBufferDirect(a,null,r,t,n,null),n.onAfterShadow(e,n,i,a,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)b(l[e],i,a,o,s)}function w(e){e.target.removeEventListener("dispose",w);for(const t in u){const n=u[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(fi),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=v!==ci&&this.type===ci,f=v===ci&&this.type!==ci;for(let m=0,g=t.length;m<g;m++){const l=t[m],u=l.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const h=u.getFrameExtents();if(i.multiply(h),a.copy(u.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/h.x),i.x=a.x*h.x,u.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/h.y),i.y=a.y*h.y,u.mapSize.y=a.y)),null===u.map||!0===p||!0===f){const e=this.type!==ci?{minFilter:ga,magFilter:ga}:{};null!==u.map&&u.map.dispose(),u.map=new wl(i.x,i.y,e),u.map.texture.name=l.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const g=u.getViewportCount();for(let e=0;e<g;e++){const t=u.getViewport(e);o.set(a.x*t.x,a.y*t.y,a.x*t.z,a.y*t.w),d.viewport(o),u.updateMatrices(l,e),r=u.getFrustum(),b(n,s,u.camera,l,this.type)}!0!==u.isPointLightShadow&&this.type===ci&&y(u,s),u.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,u,h)}}const Vx={[Ui]:Hi,[qi]:Wi,[ji]:Xi,[Vi]:Gi,[Hi]:Ui,[Wi]:qi,[Xi]:ji,[Gi]:Vi};function jx(e,t){const n=new function(){let t=!1;const n=new xl;let r=null;const i=new xl(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},r=new function(){let n=!1,r=!1,i=null,a=null,o=null;return{setReversed:function(e){if(r!==e){const e=t.get("EXT_clip_control");r?e.clipControlEXT(e.LOWER_LEFT_EXT,e.ZERO_TO_ONE_EXT):e.clipControlEXT(e.LOWER_LEFT_EXT,e.NEGATIVE_ONE_TO_ONE_EXT);const n=o;o=null,this.setClear(n)}r=e},getReversed:function(){return r},setTest:function(t){t?U(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(t){i===t||n||(e.depthMask(t),i=t)},setFunc:function(t){if(r&&(t=Vx[t]),a!==t){switch(t){case Ui:e.depthFunc(e.NEVER);break;case Hi:e.depthFunc(e.ALWAYS);break;case qi:e.depthFunc(e.LESS);break;case Vi:e.depthFunc(e.LEQUAL);break;case ji:e.depthFunc(e.EQUAL);break;case Gi:e.depthFunc(e.GEQUAL);break;case Wi:e.depthFunc(e.GREATER);break;case Xi:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}a=t}},setLocked:function(e){n=e},setClear:function(t){o!==t&&(r&&(t=1-t),e.clearDepth(t),o=t)},reset:function(){n=!1,i=null,a=null,o=null,r=!1}}},i=new function(){let t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(n){t||(n?U(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&l===r||(e.stencilOp(t,n,r),o=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,l=null,u=null}}},a=new WeakMap,o=new WeakMap;let s={},l={},u=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,x=null,b=new $u(0,0,0),w=0,S=!1,_=null,M=null,E=null,A=null,T=null;const C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let D=!1,N=0;const R=e.getParameter(e.VERSION);-1!==R.indexOf("WebGL")?(N=parseFloat(/^WebGL (\d)/.exec(R)[1]),D=N>=1):-1!==R.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),D=N>=2);let k=null,I={};const F=e.getParameter(e.SCISSOR_BOX),P=e.getParameter(e.VIEWPORT),O=(new xl).fromArray(F),B=(new xl).fromArray(P);function L(t,n,r,i){const a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<r;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}const z={};function U(t){!0!==s[t]&&(e.enable(t),s[t]=!0)}function H(t){!1!==s[t]&&(e.disable(t),s[t]=!1)}z[e.TEXTURE_2D]=L(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=L(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=L(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=L(e.TEXTURE_3D,e.TEXTURE_3D,1,1),n.setClear(0,0,0,1),r.setClear(1),i.setClear(0),U(e.DEPTH_TEST),r.setFunc(Vi),G(!1),W(ii),U(e.CULL_FACE),j(fi);const q={[bi]:e.FUNC_ADD,[wi]:e.FUNC_SUBTRACT,[Si]:e.FUNC_REVERSE_SUBTRACT};q[_i]=e.MIN,q[Mi]=e.MAX;const V={[Ei]:e.ZERO,[Ai]:e.ONE,[Ti]:e.SRC_COLOR,[Di]:e.SRC_ALPHA,[Pi]:e.SRC_ALPHA_SATURATE,[Ii]:e.DST_COLOR,[Ri]:e.DST_ALPHA,[Ci]:e.ONE_MINUS_SRC_COLOR,[Ni]:e.ONE_MINUS_SRC_ALPHA,[Fi]:e.ONE_MINUS_DST_COLOR,[ki]:e.ONE_MINUS_DST_ALPHA,[Oi]:e.CONSTANT_COLOR,[Bi]:e.ONE_MINUS_CONSTANT_COLOR,[Li]:e.CONSTANT_ALPHA,[zi]:e.ONE_MINUS_CONSTANT_ALPHA};function j(t,n,r,i,a,o,s,l,u,c){if(t!==fi){if(!1===d&&(U(e.BLEND),d=!0),t===xi)a=a||n,o=o||r,s=s||i,n===f&&a===v||(e.blendEquationSeparate(q[n],q[a]),f=n,v=a),r===m&&i===g&&o===y&&s===x||(e.blendFuncSeparate(V[r],V[i],V[o],V[s]),m=r,g=i,y=o,x=s),!1!==l.equals(b)&&u===w||(e.blendColor(l.r,l.g,l.b,u),b.copy(l),w=u),p=t,S=!1;else if(t!==p||c!==S){if(f===bi&&v===bi||(e.blendEquation(e.FUNC_ADD),f=bi,v=bi),c)switch(t){case mi:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case gi:e.blendFunc(e.ONE,e.ONE);break;case vi:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case yi:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case mi:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case gi:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case vi:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case yi:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,y=null,x=null,b.set(0,0,0),w=0,p=t,S=c}}else!0===d&&(H(e.BLEND),d=!1)}function G(t){_!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),_=t)}function W(t){t!==ri?(U(e.CULL_FACE),t!==M&&(t===ii?e.cullFace(e.BACK):t===ai?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),M=t}function X(t,n,r){t?(U(e.POLYGON_OFFSET_FILL),A===n&&T===r||(e.polygonOffset(n,r),A=n,T=r)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:r,stencil:i},enable:U,disable:H,bindFramebuffer:function(t,n){return l[t]!==n&&(e.bindFramebuffer(t,n),l[t]=n,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=c,i=!1;if(t){r=u.get(n),void 0===r&&(r=[],u.set(n,r));const a=t.textures;if(r.length!==a.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=a.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=a.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:j,setMaterial:function(t,a){t.side===pi?H(e.CULL_FACE):U(e.CULL_FACE);let o=t.side===di;a&&(o=!o),G(o),t.blending===mi&&!1===t.transparent?j(fi):j(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),n.setMask(t.colorWrite);const s=t.stencilWrite;i.setTest(s),s&&(i.setMask(t.stencilWriteMask),i.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),i.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?U(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:G,setCullFace:W,setLineWidth:function(t){t!==E&&(D&&e.lineWidth(t),E=t)},setPolygonOffset:X,setScissorTest:function(t){t?U(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===k?e.TEXTURE0+C-1:k);let i=I[r];void 0===i&&(i={type:void 0,texture:void 0},I[r]=i),i.type===t&&i.texture===n||(k!==r&&(e.activeTexture(r),k=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=I[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},updateUBOMapping:function(t,n){let r=o.get(n);void 0===r&&(r=new WeakMap,o.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=o.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Fw){console.error("THREE.WebGLState:",Fw)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),r.setReversed(!1),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),s={},k=null,I={},l={},u=new WeakMap,c=[],h=null,d=!1,p=null,f=null,m=null,g=null,v=null,y=null,x=null,b=new $u(0,0,0),w=0,S=!1,_=null,M=null,E=null,A=null,T=null,O.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),n.reset(),r.reset(),i.reset()}}}function Gx(e,t,n,r,i,a,o){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new Zs,c=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(q){}function f(e,t){return p?new OffscreenCanvas(e,t):nl("canvas")}function m(e,t,n){let r=1;const i=H(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),a=Math.floor(r*i.height);void 0===h&&(h=f(n,a));const o=t?f(n,a):h;o.width=n,o.height=a;return o.getContext("2d").drawImage(e,0,0,n,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps}function v(t){e.generateMipmap(t)}function y(t){return t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D}function x(n,r,i,a){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RG8UI),i===e.UNSIGNED_SHORT&&(s=e.RG16UI),i===e.UNSIGNED_INT&&(s=e.RG32UI),i===e.BYTE&&(s=e.RG8I),i===e.SHORT&&(s=e.RG16I),i===e.INT&&(s=e.RG32I)),r===e.RGB_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGB8UI),i===e.UNSIGNED_SHORT&&(s=e.RGB16UI),i===e.UNSIGNED_INT&&(s=e.RGB32UI),i===e.BYTE&&(s=e.RGB8I),i===e.SHORT&&(s=e.RGB16I),i===e.INT&&(s=e.RGB32I)),r===e.RGBA_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RGBA8UI),i===e.UNSIGNED_SHORT&&(s=e.RGBA16UI),i===e.UNSIGNED_INT&&(s=e.RGBA32UI),i===e.BYTE&&(s=e.RGBA8I),i===e.SHORT&&(s=e.RGBA16I),i===e.INT&&(s=e.RGBA32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),r===e.RGBA){const t=o?Qo:ul.getTransfer(a);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=t===es?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function b(t,n){let r;return t?null===n||n===Ra||n===Oa?r=e.DEPTH24_STENCIL8:n===ka?r=e.DEPTH32F_STENCIL8:n===Da&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Ra||n===Oa?r=e.DEPTH_COMPONENT24:n===ka?r=e.DEPTH_COMPONENT32F:n===Da&&(r=e.DEPTH_COMPONENT16),r}function w(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==ga&&e.minFilter!==wa?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function S(e){const t=e.target;t.removeEventListener("dispose",S),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=d.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&M(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&c.delete(t)}function _(t){const n=t.target;n.removeEventListener("dispose",_),function(t){const n=r.get(t);t.depthTexture&&(t.depthTexture.dispose(),r.remove(t.depthTexture));if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let a=0,s=i.length;a<s;a++){const t=r.get(i[a]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),o.memory.textures--),r.remove(i[a])}r.remove(t)}(n)}function M(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete d.get(i)[n.__cacheKey],o.memory.textures--}let E=0;function A(t,i){const a=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;c.get(e)!==t&&(c.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void k(a,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+i)}const T={[pa]:e.REPEAT,[fa]:e.CLAMP_TO_EDGE,[ma]:e.MIRRORED_REPEAT},C={[ga]:e.NEAREST,[va]:e.NEAREST_MIPMAP_NEAREST,[xa]:e.NEAREST_MIPMAP_LINEAR,[wa]:e.LINEAR,[Sa]:e.LINEAR_MIPMAP_NEAREST,[Ma]:e.LINEAR_MIPMAP_LINEAR},D={[vs]:e.NEVER,[Ms]:e.ALWAYS,[ys]:e.LESS,[bs]:e.LEQUAL,[xs]:e.EQUAL,[_s]:e.GEQUAL,[ws]:e.GREATER,[Ss]:e.NOTEQUAL};function N(n,a){if(a.type!==ka||!1!==t.has("OES_texture_float_linear")||a.magFilter!==wa&&a.magFilter!==Sa&&a.magFilter!==xa&&a.magFilter!==Ma&&a.minFilter!==wa&&a.minFilter!==Sa&&a.minFilter!==xa&&a.minFilter!==Ma||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,T[a.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,T[a.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,T[a.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,C[a.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,C[a.minFilter]),a.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,D[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(a.magFilter===ga)return;if(a.minFilter!==xa&&a.minFilter!==Ma)return;if(a.type===ka&&!1===t.has("OES_texture_float_linear"))return;if(a.anisotropy>1||r.get(a).__currentAnisotropy){const o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy}}}function R(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));const i=n.source;let a=d.get(i);void 0===a&&(a={},d.set(i,a));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===a[s]&&(a[s]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[s].usedTimes++;const i=a[t.__cacheKey];void 0!==i&&(a[t.__cacheKey].usedTimes--,0===i.usedTimes&&M(n)),t.__cacheKey=s,t.__webglTexture=a[s].texture}return r}function k(t,o,s){let l=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(l=e.TEXTURE_3D);const u=R(t,o),c=o.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=r.get(c);if(c.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+s);const t=ul.getPrimaries(ul.workingColorSpace),r=o.colorSpace===Zo?null:ul.getPrimaries(o.colorSpace),d=o.colorSpace===Zo||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(o.image,!1,i.maxTextureSize);p=U(o,p);const f=a.convert(o.format,o.colorSpace),y=a.convert(o.type);let S,_=x(o.internalFormat,f,y,o.colorSpace,o.isVideoTexture);N(l,o);const M=o.mipmaps,E=!0!==o.isVideoTexture,A=void 0===h.__version||!0===u,T=c.dataReady,C=w(o,p);if(o.isDepthTexture)_=b(o.format===ja,o.type),A&&(E?n.texStorage2D(e.TEXTURE_2D,1,_,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,_,p.width,p.height,0,f,y,null));else if(o.isDataTexture)if(M.length>0){E&&A&&n.texStorage2D(e.TEXTURE_2D,C,_,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],E?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,f,y,S.data):n.texImage2D(e.TEXTURE_2D,t,_,S.width,S.height,0,f,y,S.data);o.generateMipmaps=!1}else E?(A&&n.texStorage2D(e.TEXTURE_2D,C,_,p.width,p.height),T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,f,y,p.data)):n.texImage2D(e.TEXTURE_2D,0,_,p.width,p.height,0,f,y,p.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){E&&A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,_,M[0].width,M[0].height,p.depth);for(let t=0,r=M.length;t<r;t++)if(S=M[t],o.format!==Ua)if(null!==f)if(E){if(T)if(o.layerUpdates.size>0){const r=mv(S.width,S.height,o.format,o.type);for(const i of o.layerUpdates){const a=S.data.subarray(i*r/S.data.BYTES_PER_ELEMENT,(i+1)*r/S.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,S.width,S.height,1,f,a)}o.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,p.depth,f,S.data)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,_,S.width,S.height,p.depth,0,S.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else E?T&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,p.depth,f,y,S.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,_,S.width,S.height,p.depth,0,f,y,S.data)}else{E&&A&&n.texStorage2D(e.TEXTURE_2D,C,_,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],o.format!==Ua?null!==f?E?T&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,f,S.data):n.compressedTexImage2D(e.TEXTURE_2D,t,_,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,f,y,S.data):n.texImage2D(e.TEXTURE_2D,t,_,S.width,S.height,0,f,y,S.data)}else if(o.isDataArrayTexture)if(E){if(A&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,_,p.width,p.height,p.depth),T)if(o.layerUpdates.size>0){const t=mv(p.width,p.height,o.format,o.type);for(const r of o.layerUpdates){const i=p.data.subarray(r*t/p.data.BYTES_PER_ELEMENT,(r+1)*t/p.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,p.width,p.height,1,f,y,i)}o.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,_,p.width,p.height,p.depth,0,f,y,p.data);else if(o.isData3DTexture)E?(A&&n.texStorage3D(e.TEXTURE_3D,C,_,p.width,p.height,p.depth),T&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,y,p.data)):n.texImage3D(e.TEXTURE_3D,0,_,p.width,p.height,p.depth,0,f,y,p.data);else if(o.isFramebufferTexture){if(A)if(E)n.texStorage2D(e.TEXTURE_2D,C,_,p.width,p.height);else{let t=p.width,r=p.height;for(let i=0;i<C;i++)n.texImage2D(e.TEXTURE_2D,i,_,t,r,0,f,y,null),t>>=1,r>>=1}}else if(M.length>0){if(E&&A){const t=H(M[0]);n.texStorage2D(e.TEXTURE_2D,C,_,t.width,t.height)}for(let t=0,r=M.length;t<r;t++)S=M[t],E?T&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,y,S):n.texImage2D(e.TEXTURE_2D,t,_,f,y,S);o.generateMipmaps=!1}else if(E){if(A){const t=H(p);n.texStorage2D(e.TEXTURE_2D,C,_,t.width,t.height)}T&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,y,p)}else n.texImage2D(e.TEXTURE_2D,0,_,f,y,p);g(o)&&v(l),h.__version=c.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function I(t,i,o,l,u,c){const h=a.convert(o.format,o.colorSpace),d=a.convert(o.type),p=x(o.internalFormat,h,d,o.colorSpace),f=r.get(i),m=r.get(o);if(m.__renderTarget=i,!f.__hasExternalTextures){const t=Math.max(1,i.width>>c),r=Math.max(1,i.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?n.texImage3D(u,c,p,t,r,i.depth,0,h,d,null):n.texImage2D(u,c,p,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),z(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,u,m.__webglTexture,0,L(i)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,u,m.__webglTexture,c),n.bindFramebuffer(e.FRAMEBUFFER,null)}function F(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,a=i&&i.isDepthTexture?i.type:null,o=b(n.stencilBuffer,a),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=L(n);z(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,o,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const o=t[i],l=a.convert(o.format,o.colorSpace),u=a.convert(o.type),c=x(o.internalFormat,l,u,o.colorSpace),h=L(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,c,n.width,n.height):z(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function P(t){const i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const a=r.get(i.depthTexture);a.__renderTarget=i,a.__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),A(i.depthTexture,0);const o=a.__webglTexture,l=L(i);if(i.depthTexture.format===Va)z(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==ja)throw new Error("Unknown depthTexture format");z(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),F(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,a)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),F(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}const O=[],B=[];function L(e){return Math.min(i.maxSamples,e.samples)}function z(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Ko&&n!==Zo&&(ul.getTransfer(n)===es?r===Ua&&i===Aa||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function H(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(u.width=e.naturalWidth||e.width,u.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(u.width=e.displayWidth,u.height=e.displayHeight):(u.width=e.width,u.height=e.height),u}this.allocateTextureUnit=function(){const e=E;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=A,this.setTexture2DArray=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?k(a,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?k(a,t,i):n.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,o,s){if(6!==o.image.length)return;const l=R(t,o),u=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const c=r.get(u);if(u.version!==c.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=ul.getPrimaries(ul.workingColorSpace),r=o.colorSpace===Zo?null:ul.getPrimaries(o.colorSpace),h=o.colorSpace===Zo||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=o.isCompressedTexture||o.image[0].isCompressedTexture,p=o.image[0]&&o.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?o.image[e].image:o.image[e]:m(o.image[e],!0,i.maxCubemapSize),f[e]=U(o,f[e]);const y=f[0],b=a.convert(o.format,o.colorSpace),S=a.convert(o.type),_=x(o.internalFormat,b,S,o.colorSpace),M=!0!==o.isVideoTexture,E=void 0===c.__version||!0===l,A=u.dataReady;let T,C=w(o,y);if(N(e.TEXTURE_CUBE_MAP,o),d){M&&E&&n.texStorage2D(e.TEXTURE_CUBE_MAP,C,_,y.width,y.height);for(let t=0;t<6;t++){T=f[t].mipmaps;for(let r=0;r<T.length;r++){const i=T[r];o.format!==Ua?null!==b?M?A&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,_,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,S,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,_,i.width,i.height,0,b,S,i.data)}}}else{if(T=o.mipmaps,M&&E){T.length>0&&C++;const t=H(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,C,_,t.width,t.height)}for(let t=0;t<6;t++)if(p){M?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,b,S,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,_,f[t].width,f[t].height,0,b,S,f[t].data);for(let r=0;r<T.length;r++){const i=T[r].image[t].image;M?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,b,S,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,_,i.width,i.height,0,b,S,i.data)}}else{M?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,S,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,_,b,S,f[t]);for(let r=0;r<T.length;r++){const i=T[r];M?A&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,b,S,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,_,b,S,i.image[t])}}}g(o)&&v(e.TEXTURE_CUBE_MAP),c.__version=u.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(s,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){const a=r.get(t);void 0!==n&&I(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&P(t)},this.setupRenderTarget=function(t){const i=t.texture,s=r.get(t),l=r.get(i);t.addEventListener("dispose",_);const u=t.textures,c=!0===t.isWebGLCubeRenderTarget,h=u.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,o.memory.textures++),c){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)s.__webglFramebuffer[t][n]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=u.length;t<n;t++){const n=r.get(u[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===z(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<u.length;n++){const r=u[n];s.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const i=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=x(r.internalFormat,i,o,r.colorSpace,!0===t.isXRRenderTarget),c=L(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,s.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),F(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),N(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)I(s.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else I(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,a=u.length;i<a;i++){const a=u[i],o=r.get(a);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),N(e.TEXTURE_2D,a),I(s.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),g(a)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),N(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)I(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else I(s.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){const t=e.textures;for(let i=0,a=t.length;i<a;i++){const a=t[i];if(g(a)){const t=y(e),i=r.get(a).__webglTexture;n.bindTexture(t,i),v(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===z(t)){const i=t.textures,a=t.width,o=t.height;let s=e.COLOR_BUFFER_BIT;const u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=r.get(t),h=i.length>1;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,s,e.NEAREST),!0===l&&(O.length=0,B.length=0,O.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(O.push(u),B.push(u),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,B)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,O))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);const a=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=P,this.setupFrameBufferTexture=I,this.useMultisampledRTT=z}function Wx(e,t){return{convert:function(n){let r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zo;const a=ul.getTransfer(i);if(n===Aa)return e.UNSIGNED_BYTE;if(n===Fa)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Pa)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ba)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Ta)return e.BYTE;if(n===Ca)return e.SHORT;if(n===Da)return e.UNSIGNED_SHORT;if(n===Na)return e.INT;if(n===Ra)return e.UNSIGNED_INT;if(n===ka)return e.FLOAT;if(n===Ia)return e.HALF_FLOAT;if(n===La)return e.ALPHA;if(n===za)return e.RGB;if(n===Ua)return e.RGBA;if(n===Ha)return e.LUMINANCE;if(n===qa)return e.LUMINANCE_ALPHA;if(n===Va)return e.DEPTH_COMPONENT;if(n===ja)return e.DEPTH_STENCIL;if(n===Ga)return e.RED;if(n===Wa)return e.RED_INTEGER;if(n===Xa)return e.RG;if(n===Ya)return e.RG_INTEGER;if(n===Za)return e.RGBA_INTEGER;if(n===Ja||n===Ka||n===Qa||n===eo)if(a===es){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Ja)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Ka)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Qa)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===eo)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Ja)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Ka)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Qa)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===eo)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===to||n===no||n===ro||n===io){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===to)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===no)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ro)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===io)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===ao||n===oo||n===so){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===ao||n===oo)return a===es?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===so)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===lo||n===uo||n===co||n===ho||n===po||n===fo||n===mo||n===go||n===vo||n===yo||n===xo||n===bo||n===wo||n===So){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===lo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===uo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===co)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ho)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===po)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===fo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===mo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===go)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===vo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===yo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===xo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===bo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===wo)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===So)return a===es?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===_o||n===Mo||n===Eo){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===_o)return a===es?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Mo)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Eo)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Ao||n===To||n===Co||n===Do){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===_o)return r.COMPRESSED_RED_RGTC1_EXT;if(n===To)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Co)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Do)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Oa?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}const Xx={type:"move"};class Yx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ud,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ud,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Tl,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Tl),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ud,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Tl,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Tl),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,a=null;const o=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const a of e.hand.values()){const e=t.getJointPose(a,n),r=this._getHandJoint(l,a);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),s=.02,u=.005;l.inputState.pinching&&o>s+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=s-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Xx)))}return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Ud;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class $x{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new yl;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Vc({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Oc(new lf(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Zx extends Ls{constructor(e,t){super();const n=this;let r=null,i=1,a=null,o="local-floor",s=1,l=null,u=null,c=null,h=null,d=null,p=null;const f=new $x,m=t.getContextAttributes();let g=null,v=null;const y=[],x=[],b=new Zs;let w=null;const S=new Yc;S.viewport=new xl;const _=new Yc;_.viewport=new xl;const M=[S,_],E=new Wm;let A=null,T=null;function C(e){const t=x.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||a),n.dispatchEvent({type:e.type,data:e.inputSource}))}function D(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",D),r.removeEventListener("inputsourceschange",N);for(let e=0;e<y.length;e++){const t=x[e];null!==t&&(x[e]=null,y[e].disconnect(t))}A=null,T=null,f.reset(),e.setRenderTarget(g),d=null,h=null,c=null,r=null,v=null,P.stop(),n.isPresenting=!1,e.setPixelRatio(w),e.setSize(b.width,b.height,!1),n.dispatchEvent({type:"sessionend"})}function N(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=x.indexOf(n);r>=0&&(x[r]=null,y[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=x.indexOf(n);if(-1===r){for(let e=0;e<y.length;e++){if(e>=x.length){x.push(n),r=e;break}if(null===x[e]){x[e]=n,r=e;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Yx,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Yx,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Yx,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(u){if(r=u,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",D),r.addEventListener("inputsourceschange",N),!0!==m.xrCompatible&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(b),void 0===r.renderState.layers){const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new wl(d.framebufferWidth,d.framebufferHeight,{format:Ua,type:Aa,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,a=null,o=null;m.depth&&(o=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?ja:Va,a=m.stencil?Oa:Ra);const s={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};c=new XRWebGLBinding(r,t),h=c.createProjectionLayer(s),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new wl(h.textureWidth,h.textureHeight,{format:Ua,type:Aa,depthTexture:new Xd(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}v.isXRRenderTarget=!0,this.setFoveation(s),l=null,a=await r.requestReferenceSpace(o),P.setContext(r),P.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const R=new Tl,k=new Tl;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==f.texture&&(f.depthNear>0&&(t=f.depthNear),f.depthFar>0&&(n=f.depthFar)),E.near=_.near=S.near=t,E.far=_.far=S.far=n,A===E.near&&T===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),A=E.near,T=E.far),S.layers.mask=2|e.layers.mask,_.layers.mask=4|e.layers.mask,E.layers.mask=S.layers.mask|_.layers.mask;const i=e.parent,a=E.cameras;I(E,i);for(let r=0;r<a.length;r++)I(a[r],i);2===a.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),k.setFromMatrixPosition(n.matrixWorld);const r=R.distanceTo(k),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],d=o*c,p=o*h,f=r/(-c+h),m=f*-c;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=o+f,n=s+f,i=d-m,a=p+(r-m),c=l*s/n*t,h=u*s/n*t;e.projectionMatrix.makePerspective(i,a,c,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(E,S,_):E.projectionMatrix.copy(S.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*qs*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,i)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(e){s=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(E)};let F=null;const P=new yv;P.setAnimationLoop((function(t,i){if(u=i.getViewerPose(l||a),p=i,null!==u){const t=u.views;null!==d&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let a=null;if(null!==d)a=d.getViewport(i);else{const t=c.getViewSubImage(h,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let o=M[r];void 0===o&&(o=new Yc,o.layers.enable(r),o.viewport=new xl,M[r]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(a.x,a.y,a.width,a.height),0===r&&(E.matrix.copy(o.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(o)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=c.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&f.init(e,n,r.renderState)}}for(let e=0;e<y.length;e++){const t=x[e],n=y[e];null!==t&&void 0!==n&&n.update(t,i,l||a)}F&&F(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null})),this.setAnimationLoop=function(e){F=e},this.dispose=function(){}}}const Jx=new pu,Kx=new ru;function Qx(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===di&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===di&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),a=i.envMap,o=i.envMapRotation;a&&(e.envMap.value=a,Jx.copy(o),Jx.x*=-1,Jx.y*=-1,Jx.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(Jx.y*=-1,Jx.z*=-1),e.envMapRotation.value.setFromMatrix4(Kx.makeRotationFromEuler(Jx)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Hc(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,a,o,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===di&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,a,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function eb(e,t,n,r){let i={},a={},o=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const i=e.value,a=t+"_"+n;if(void 0===r[a])return r[a]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const e=r[a];if("number"===typeof i||"boolean"===typeof i){if(e!==i)return r[a]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function u(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function c(t){const n=t.target;n.removeEventListener("dispose",c);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete a[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let a=0,o=t.length;a<o;a++){const e=Array.isArray(t[a])?t[a]:[t[a]];for(let t=0,i=e.length;t<i;t++){const i=e[t],a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=u(a[e]),o=n%r,s=o%t.boundary,l=o+s;n+=s,0!==l&&r-l<t.storage&&(n+=r-l),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",c));const p=h.program;r.updateUBOMapping(n,p);const f=t.render.frame;a[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,o=r.length;i<o;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,a)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let a=0;a<n.length;a++){const o=n[a],s=u(o);"number"===typeof o||"boolean"===typeof o?(r.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):o.isMatrix3?(r.__data[0]=o.elements[0],r.__data[1]=o.elements[1],r.__data[2]=o.elements[2],r.__data[3]=0,r.__data[4]=o.elements[3],r.__data[5]=o.elements[4],r.__data[6]=o.elements[5],r.__data[7]=0,r.__data[8]=o.elements[6],r.__data[9]=o.elements[7],r.__data[10]=o.elements[8],r.__data[11]=0):(o.toArray(r.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),a[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},a={}}}}class tb{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=rl(),context:n=null,depth:r=!0,stencil:i=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:c=!1,reverseDepthBuffer:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=a;const p=new Uint32Array(4),f=new Int32Array(4);let m=null,g=null;const v=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Jo,this.toneMapping=Ji,this.toneMappingExposure=1;const x=this;let b=!1,w=0,S=0,_=null,M=-1,E=null;const A=new xl,T=new xl;let C=null;const D=new $u(0);let N=0,R=t.width,k=t.height,I=1,F=null,P=null;const O=new xl(0,0,R,k),B=new xl(0,0,R,k);let L=!1;const z=new ed;let U=!1,H=!1;const q=new ru,V=new ru,j=new Tl,G=new xl,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function Y(){return null===_?I:1}let $,Z,J,K,Q,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,he,de,pe,fe,me,ge,ve,ye,xe=n;function be(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ei}`),t.addEventListener("webglcontextlost",_e,!1),t.addEventListener("webglcontextrestored",Me,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===xe){const t="webgl2";if(xe=be(t,e),null===xe)throw be(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Fw){throw console.error("THREE.WebGLRenderer: "+Fw.message),Fw}function we(){$=new Zv(xe),$.init(),ge=new Wx(xe,$),Z=new Dv(xe,$,e,ge),J=new jx(xe,$),Z.reverseDepthBuffer&&h&&J.buffers.depth.setReversed(!0),K=new Qv(xe),Q=new Rx,ee=new Gx(xe,$,J,Q,Z,ge,K),te=new Rv(x),ne=new $v(x),re=new xv(xe),ve=new Tv(xe,re),ie=new Jv(xe,re,K,ve),ae=new ty(xe,ie,re,K),pe=new ey(xe,Z,ee),ce=new Nv(Q),oe=new Nx(x,te,ne,$,Z,ve,ce),se=new Qx(x,Q),le=new Px,ue=new Hx($),de=new Av(x,te,ne,J,ae,d,s),he=new qx(x,ae,Z),ye=new eb(xe,K,Z,J),fe=new Cv(xe,$,K),me=new Kv(xe,$,K),K.programs=oe.programs,x.capabilities=Z,x.extensions=$,x.properties=Q,x.renderLists=le,x.shadowMap=he,x.state=J,x.info=K}we();const Se=new Zx(x,xe);function _e(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=K.autoReset,t=he.enabled,n=he.autoUpdate,r=he.needsUpdate,i=he.type;we(),K.autoReset=e,he.enabled=t,he.autoUpdate=n,he.needsUpdate=r,he.type=i}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ae(e){const t=e.target;t.removeEventListener("dispose",Ae),function(e){(function(e){const t=Q.get(e).programs;void 0!==t&&(t.forEach((function(e){oe.releaseProgram(e)})),e.isShaderMaterial&&oe.releaseShaderCache(e))})(e),Q.remove(e)}(t)}function Te(e,t,n){!0===e.transparent&&e.side===pi&&!1===e.forceSinglePass?(e.side=di,e.needsUpdate=!0,Be(e,t,n),e.side=hi,e.needsUpdate=!0,Be(e,t,n),e.side=pi):Be(e,t,n)}this.xr=Se,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const e=$.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=$.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e,this.setSize(R,k,!1))},this.getSize=function(e){return e.set(R,k)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Se.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(R=e,k=n,t.width=Math.floor(e*I),t.height=Math.floor(n*I),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(R*I,k*I).floor()},this.setDrawingBufferSize=function(e,n,r){R=e,k=n,I=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),J.viewport(A.copy(O).multiplyScalar(I).round())},this.getScissor=function(e){return e.copy(B)},this.setScissor=function(e,t,n,r){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,n,r),J.scissor(T.copy(B).multiplyScalar(I).round())},this.getScissorTest=function(){return L},this.setScissorTest=function(e){J.setScissorTest(L=e)},this.setOpaqueSort=function(e){F=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==_){const t=_.texture.format;e=t===Za||t===Ya||t===Wa}if(e){const e=_.texture.type,t=e===Aa||e===Ra||e===Da||e===Oa||e===Fa||e===Pa,n=de.getClearColor(),r=de.getClearAlpha(),i=n.r,a=n.g,o=n.b;t?(p[0]=i,p[1]=a,p[2]=o,p[3]=r,xe.clearBufferuiv(xe.COLOR,0,p)):(f[0]=i,f[1]=a,f[2]=o,f[3]=r,xe.clearBufferiv(xe.COLOR,0,f))}else n|=xe.COLOR_BUFFER_BIT}e&&(n|=xe.DEPTH_BUFFER_BIT),t&&(n|=xe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),xe.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",_e,!1),t.removeEventListener("webglcontextrestored",Me,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),de.dispose(),le.dispose(),ue.dispose(),Q.dispose(),te.dispose(),ne.dispose(),ae.dispose(),ve.dispose(),ye.dispose(),oe.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",De),Se.removeEventListener("sessionend",Ne),Re.stop()},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=W);const o=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=W);ee.resetTextureUnits();const a=t.fog,o=r.isMeshStandardMaterial?t.environment:null,s=null===_?x.outputColorSpace:!0===_.isXRRenderTarget?_.texture.colorSpace:Ko,l=(r.isMeshStandardMaterial?ne:te).get(r.envMap||o),u=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=Ji;r.toneMapped&&(null!==_&&!0!==_.isXRRenderTarget||(f=x.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=Q.get(r),b=g.state.lights;if(!0===U&&(!0===H||e!==E)){const t=e===E&&r.id===M;ce.setState(r,e,t)}let w=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==s||i.isBatchedMesh&&!1===y.batching?w=!0:i.isBatchedMesh||!0!==y.batching?i.isBatchedMesh&&!0===y.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===y.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===y.instancing?w=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?w=!0:i.isSkinnedMesh||!0!==y.skinning?i.isInstancedMesh&&!0===y.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===y.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===y.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===y.instancingMorph&&null!==i.morphTexture||y.envMap!==l||!0===r.fog&&y.fog!==a?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ce.numPlanes&&y.numIntersection===ce.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==c||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||y.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,y.__version=r.version);let S=y.currentProgram;!0===w&&(S=Be(r,t,i));let A=!1,T=!1,C=!1;const D=S.getUniforms(),N=y.uniforms;J.useProgram(S.program)&&(A=!0,T=!0,C=!0);r.id!==M&&(M=r.id,T=!0);if(A||E!==e){J.buffers.depth.getReversed()?(q.copy(e.projectionMatrix),function(e){const t=e.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(q),function(e){const t=e.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(q),D.setValue(xe,"projectionMatrix",q)):D.setValue(xe,"projectionMatrix",e.projectionMatrix),D.setValue(xe,"viewMatrix",e.matrixWorldInverse);const t=D.map.cameraPosition;void 0!==t&&t.setValue(xe,j.setFromMatrixPosition(e.matrixWorld)),Z.logarithmicDepthBuffer&&D.setValue(xe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&D.setValue(xe,"isOrthographic",!0===e.isOrthographicCamera),E!==e&&(E=e,T=!0,C=!0)}if(i.isSkinnedMesh){D.setOptional(xe,i,"bindMatrix"),D.setOptional(xe,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),D.setValue(xe,"boneTexture",e.boneTexture,ee))}i.isBatchedMesh&&(D.setOptional(xe,i,"batchingTexture"),D.setValue(xe,"batchingTexture",i._matricesTexture,ee),D.setOptional(xe,i,"batchingIdTexture"),D.setValue(xe,"batchingIdTexture",i._indirectTexture,ee),D.setOptional(xe,i,"batchingColorTexture"),null!==i._colorsTexture&&D.setValue(xe,"batchingColorTexture",i._colorsTexture,ee));const R=n.morphAttributes;void 0===R.position&&void 0===R.normal&&void 0===R.color||pe.update(i,n,S);(T||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,D.setValue(xe,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(N.envMap.value=l,N.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(N.envMapIntensity.value=t.environmentIntensity);T&&(D.setValue(xe,"toneMappingExposure",x.toneMappingExposure),y.needsLights&&(P=C,(F=N).ambientLightColor.needsUpdate=P,F.lightProbe.needsUpdate=P,F.directionalLights.needsUpdate=P,F.directionalLightShadows.needsUpdate=P,F.pointLights.needsUpdate=P,F.pointLightShadows.needsUpdate=P,F.spotLights.needsUpdate=P,F.spotLightShadows.needsUpdate=P,F.rectAreaLights.needsUpdate=P,F.hemisphereLights.needsUpdate=P),a&&!0===r.fog&&se.refreshFogUniforms(N,a),se.refreshMaterialUniforms(N,r,I,k,g.state.transmissionRenderTarget[e.id]),ox.upload(xe,Le(y),N,ee));var F,P;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ox.upload(xe,Le(y),N,ee),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&D.setValue(xe,"center",i.center);if(D.setValue(xe,"modelViewMatrix",i.modelViewMatrix),D.setValue(xe,"normalMatrix",i.normalMatrix),D.setValue(xe,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ye.update(n,S),ye.bind(n,S)}}return S}(e,t,n,r,i);J.setMaterial(r,o);let l=n.index,u=1;if(!0===r.wireframe){if(l=ie.getWireframeAttribute(n),void 0===l)return;u=2}const c=n.drawRange,h=n.attributes.position;let d=c.start*u,p=(c.start+c.count)*u;null!==a&&(d=Math.max(d,a.start*u),p=Math.min(p,(a.start+a.count)*u)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let m;ve.setup(i,r,s,n,l);let v=fe;if(null!==l&&(m=re.get(l),v=me,v.setIndex(m)),i.isMesh)!0===r.wireframe?(J.setLineWidth(r.wireframeLinewidth*Y()),v.setMode(xe.LINES)):v.setMode(xe.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),J.setLineWidth(e*Y()),i.isLineSegments?v.setMode(xe.LINES):i.isLineLoop?v.setMode(xe.LINE_LOOP):v.setMode(xe.LINE_STRIP)}else i.isPoints?v.setMode(xe.POINTS):i.isSprite&&v.setMode(xe.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)v.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if($.get("WEBGL_multi_draw"))v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else{const e=i._multiDrawStarts,t=i._multiDrawCounts,n=i._multiDrawCount,a=l?re.get(l).bytesPerElement:1,o=Q.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)o.setValue(xe,"_gl_DrawID",r),v.render(e[r]/a,t[r])}else if(i.isInstancedMesh)v.renderInstances(d,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,f,t)}else v.render(d,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),g=ue.get(n),g.init(t),y.push(g),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights();const r=new Set;return e.traverse((function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const a=t[i];Te(a,n,e),r.add(a)}else Te(t,n,e),r.add(t)})),y.pop(),g=null,r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){Q.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==$.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ce=null;function De(){Re.stop()}function Ne(){Re.start()}const Re=new yv;function ke(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(V);const t=ae.update(e),i=e.material;i.visible&&m.push(e,t,i,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=ae.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4(V)),Array.isArray(i)){const r=t.groups;for(let a=0,o=r.length;a<o;a++){const o=r[a],s=i[o.materialIndex];s&&s.visible&&m.push(e,t,s,n,G.z,o)}}else i.visible&&m.push(e,t,i,n,G.z,null)}const i=e.children;for(let a=0,o=i.length;a<o;a++)ke(i[a],t,n,r)}function Ie(e,t,n,r){const i=e.opaque,a=e.transmissive,o=e.transparent;g.setupLightsView(n),!0===U&&ce.setGlobalState(x.clippingPlanes,n),r&&J.viewport(A.copy(r)),i.length>0&&Pe(i,t,n),a.length>0&&Pe(a,t,n),o.length>0&&Pe(o,t,n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1)}function Fe(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===g.state.transmissionRenderTarget[r.id]&&(g.state.transmissionRenderTarget[r.id]=new wl(1,1,{generateMipmaps:!0,type:$.has("EXT_color_buffer_half_float")||$.has("EXT_color_buffer_float")?Ia:Aa,minFilter:Ma,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ul.workingColorSpace}));const a=g.state.transmissionRenderTarget[r.id],o=r.viewport||A;a.setSize(o.z,o.w);const s=x.getRenderTarget();x.setRenderTarget(a),x.getClearColor(D),N=x.getClearAlpha(),N<1&&x.setClearColor(16777215,.5),x.clear(),X&&de.render(n);const l=x.toneMapping;x.toneMapping=Ji;const u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),g.setupLightsView(r),!0===U&&ce.setGlobalState(x.clippingPlanes,r),Pe(e,n,r),ee.updateMultisampleRenderTarget(a),ee.updateRenderTargetMipmap(a),!1===$.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,a=t.length;i<a;i++){const a=t[i],o=a.object,s=a.geometry,l=a.material,u=a.group;if(l.side===pi&&o.layers.test(r.layers)){const t=l.side;l.side=di,l.needsUpdate=!0,Oe(o,n,r,s,l,u),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(ee.updateMultisampleRenderTarget(a),ee.updateRenderTargetMipmap(a))}x.setRenderTarget(s),x.setClearColor(D,N),void 0!==u&&(r.viewport=u),x.toneMapping=l}function Pe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,a=e.length;i<a;i++){const a=e[i],o=a.object,s=a.geometry,l=null===r?a.material:r,u=a.group;o.layers.test(n.layers)&&Oe(o,t,n,s,l,u)}}function Oe(e,t,n,r,i,a){e.onBeforeRender(x,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(x,t,n,r,e,a),!0===i.transparent&&i.side===pi&&!1===i.forceSinglePass?(i.side=di,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,a),i.side=hi,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,a),i.side=pi):x.renderBufferDirect(n,t,r,i,e,a),e.onAfterRender(x,t,n,r,i,a)}function Be(e,t,n){!0!==t.isScene&&(t=W);const r=Q.get(e),i=g.state.lights,a=g.state.shadowsArray,o=i.state.version,s=oe.getParameters(e,i.state,a,t,n),l=oe.getProgramCacheKey(s);let u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ne:te).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===u&&(e.addEventListener("dispose",Ae),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===o)return ze(e,s),c}else s.uniforms=oe.getUniforms(e),e.onBeforeCompile(s,x),c=oe.acquireProgram(s,l),u.set(l,c),r.uniforms=s.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ce.uniform),ze(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=c,r.uniformsList=null,c}function Le(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=ox.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ze(e,t){const n=Q.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop((function(e){Ce&&Ce(e)})),"undefined"!==typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){Ce=e,Se.setAnimationLoop(e),null===e?Re.stop():Re.start()},Se.addEventListener("sessionstart",De),Se.addEventListener("sessionend",Ne),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Se.enabled&&!0===Se.isPresenting&&(!0===Se.cameraAutoUpdate&&Se.updateCamera(t),t=Se.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,_),g=ue.get(e,y.length),g.init(t),y.push(g),V.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(V),H=this.localClippingEnabled,U=ce.init(this.clippingPlanes,H),m=le.get(e,v.length),m.init(),v.push(m),!0===Se.enabled&&!0===Se.isPresenting){const e=x.xr.getDepthSensingMesh();null!==e&&ke(e,t,-1/0,x.sortObjects)}ke(e,t,0,x.sortObjects),m.finish(),!0===x.sortObjects&&m.sort(F,P),X=!1===Se.enabled||!1===Se.isPresenting||!1===Se.hasDepthSensing(),X&&de.addToRenderList(m,e),this.info.render.frame++,!0===U&&ce.beginShadows();const n=g.state.shadowsArray;he.render(n,e,t),!0===U&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=m.opaque,i=m.transmissive;if(g.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,a=n.length;t<a;t++){Fe(r,i,e,n[t])}X&&de.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Ie(m,e,r,r.viewport)}}else i.length>0&&Fe(r,i,e,t),X&&de.render(e),Ie(m,e,t);null!==_&&(ee.updateMultisampleRenderTarget(_),ee.updateRenderTargetMipmap(_)),!0===e.isScene&&e.onAfterRender(x,e,t),ve.resetDefaultState(),M=-1,E=null,y.pop(),y.length>0?(g=y[y.length-1],!0===U&&ce.setGlobalState(x.clippingPlanes,g.state.camera)):g=null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(e,t,n){Q.get(e.texture).__webglTexture=t,Q.get(e.depthTexture).__webglTexture=n;const r=Q.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===$.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=Q.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=e,w=t,S=n;let r=!0,i=null,a=!1,o=!1;if(e){const s=Q.get(e);if(void 0!==s.__useDefaultFramebuffer)J.bindFramebuffer(xe.FRAMEBUFFER,null),r=!1;else if(void 0===s.__webglFramebuffer)ee.setupRenderTarget(e);else if(s.__hasExternalTextures)ee.rebindTextures(e,Q.get(e.texture).__webglTexture,Q.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&Q.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const u=Q.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(u[t])?u[t][n]:u[t],a=!0):i=e.samples>0&&!1===ee.useMultisampledRTT(e)?Q.get(e).__webglMultisampledFramebuffer:Array.isArray(u)?u[n]:u,A.copy(e.viewport),T.copy(e.scissor),C=e.scissorTest}else A.copy(O).multiplyScalar(I).floor(),T.copy(B).multiplyScalar(I).floor(),C=L;if(J.bindFramebuffer(xe.FRAMEBUFFER,i)&&r&&J.drawBuffers(e,i),J.viewport(A),J.scissor(T),J.setScissorTest(C),a){const r=Q.get(e.texture);xe.framebufferTexture2D(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=Q.get(e.texture),i=t||0;xe.framebufferTextureLayer(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}M=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){J.bindFramebuffer(xe.FRAMEBUFFER,s);try{const o=e.texture,s=o.format,l=o.type;if(!Z.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&xe.readPixels(t,n,r,i,ge.convert(s),ge.convert(l),a)}finally{const e=null!==_?Q.get(_).__webglFramebuffer:null;J.bindFramebuffer(xe.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,a,o){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=Q.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){const o=e.texture,l=o.format,u=o.type;if(!Z.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Z.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){J.bindFramebuffer(xe.FRAMEBUFFER,s);const e=xe.createBuffer();xe.bindBuffer(xe.PIXEL_PACK_BUFFER,e),xe.bufferData(xe.PIXEL_PACK_BUFFER,a.byteLength,xe.STREAM_READ),xe.readPixels(t,n,r,i,ge.convert(l),ge.convert(u),0);const o=null!==_?Q.get(_).__webglFramebuffer:null;J.bindFramebuffer(xe.FRAMEBUFFER,o);const c=xe.fenceSync(xe.SYNC_GPU_COMMANDS_COMPLETE,0);return xe.flush(),await function(e,t,n){return new Promise((function(r,i){setTimeout((function a(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(a,n);break;default:r()}}),n)}))}(xe,c,4),xe.bindBuffer(xe.PIXEL_PACK_BUFFER,e),xe.getBufferSubData(xe.PIXEL_PACK_BUFFER,0,a),xe.deleteBuffer(e),xe.deleteSync(c),a}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(al("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),a=Math.floor(e.image.height*r),o=null!==t?t.x:0,s=null!==t?t.y:0;ee.setTexture2D(e,0),xe.copyTexSubImage2D(xe.TEXTURE_2D,n,0,0,o,s,i,a),J.unbindTexture()};const Ue=xe.createFramebuffer(),He=xe.createFramebuffer();this.copyTextureToTexture=function(e,t){let n,r,i,a,o,s,l,u,c,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!0!==e.isTexture&&(al("WebGLRenderer: copyTextureToTexture function signature has changed."),d=arguments[0]||null,e=arguments[1],t=arguments[2],f=arguments[3]||0,h=null),null===f&&(0!==p?(al("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),f=p,p=0):f=0);const m=e.isCompressedTexture?e.mipmaps[f]:e.image;if(null!==h)n=h.max.x-h.min.x,r=h.max.y-h.min.y,i=h.isBox3?h.max.z-h.min.z:1,a=h.min.x,o=h.min.y,s=h.isBox3?h.min.z:0;else{const t=Math.pow(2,-p);n=Math.floor(m.width*t),r=Math.floor(m.height*t),i=e.isDataArrayTexture?m.depth:e.isData3DTexture?Math.floor(m.depth*t):1,a=0,o=0,s=0}null!==d?(l=d.x,u=d.y,c=d.z):(l=0,u=0,c=0);const g=ge.convert(t.format),v=ge.convert(t.type);let y;t.isData3DTexture?(ee.setTexture3D(t,0),y=xe.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(ee.setTexture2DArray(t,0),y=xe.TEXTURE_2D_ARRAY):(ee.setTexture2D(t,0),y=xe.TEXTURE_2D),xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,t.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,t.unpackAlignment);const x=xe.getParameter(xe.UNPACK_ROW_LENGTH),b=xe.getParameter(xe.UNPACK_IMAGE_HEIGHT),w=xe.getParameter(xe.UNPACK_SKIP_PIXELS),S=xe.getParameter(xe.UNPACK_SKIP_ROWS),_=xe.getParameter(xe.UNPACK_SKIP_IMAGES);xe.pixelStorei(xe.UNPACK_ROW_LENGTH,m.width),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,m.height),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,a),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,o),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,s);const M=e.isDataArrayTexture||e.isData3DTexture,E=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){const h=Q.get(e),d=Q.get(t),m=Q.get(h.__renderTarget),g=Q.get(d.__renderTarget);J.bindFramebuffer(xe.READ_FRAMEBUFFER,m.__webglFramebuffer),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let v=0;v<i;v++)M&&(xe.framebufferTextureLayer(xe.READ_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,Q.get(e).__webglTexture,p,s+v),xe.framebufferTextureLayer(xe.DRAW_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,Q.get(t).__webglTexture,f,c+v)),xe.blitFramebuffer(a,o,n,r,l,u,n,r,xe.DEPTH_BUFFER_BIT,xe.NEAREST);J.bindFramebuffer(xe.READ_FRAMEBUFFER,null),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,null)}else if(0!==p||e.isRenderTargetTexture||Q.has(e)){const h=Q.get(e),d=Q.get(t);J.bindFramebuffer(xe.READ_FRAMEBUFFER,Ue),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,He);for(let e=0;e<i;e++)M?xe.framebufferTextureLayer(xe.READ_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,h.__webglTexture,p,s+e):xe.framebufferTexture2D(xe.READ_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_2D,h.__webglTexture,p),E?xe.framebufferTextureLayer(xe.DRAW_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,d.__webglTexture,f,c+e):xe.framebufferTexture2D(xe.DRAW_FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_2D,d.__webglTexture,f),0!==p?xe.blitFramebuffer(a,o,n,r,l,u,n,r,xe.COLOR_BUFFER_BIT,xe.NEAREST):E?xe.copyTexSubImage3D(y,f,l,u,c+e,a,o,n,r):xe.copyTexSubImage2D(y,f,l,u,a,o,n,r);J.bindFramebuffer(xe.READ_FRAMEBUFFER,null),J.bindFramebuffer(xe.DRAW_FRAMEBUFFER,null)}else E?e.isDataTexture||e.isData3DTexture?xe.texSubImage3D(y,f,l,u,c,n,r,i,g,v,m.data):t.isCompressedArrayTexture?xe.compressedTexSubImage3D(y,f,l,u,c,n,r,i,g,m.data):xe.texSubImage3D(y,f,l,u,c,n,r,i,g,v,m):e.isDataTexture?xe.texSubImage2D(xe.TEXTURE_2D,f,l,u,n,r,g,v,m.data):e.isCompressedTexture?xe.compressedTexSubImage2D(xe.TEXTURE_2D,f,l,u,m.width,m.height,g,m.data):xe.texSubImage2D(xe.TEXTURE_2D,f,l,u,n,r,g,v,m);xe.pixelStorei(xe.UNPACK_ROW_LENGTH,x),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,b),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,w),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,S),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,_),0===f&&t.generateMipmaps&&xe.generateMipmap(y),J.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return!0!==e.isTexture&&(al("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,e=arguments[2],t=arguments[3],i=arguments[4]||0),al('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(e,t,n,r,i)},this.initRenderTarget=function(e){void 0===Q.get(e).__webglFramebuffer&&ee.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),J.unbindTexture()},this.resetState=function(){w=0,S=0,_=null,J.reset(),ve.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Os}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=ul._getDrawingBufferColorSpace(e),t.unpackColorSpace=ul._getUnpackColorSpace()}}var nb=n(205);function rb(e){let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,a={setState:r,getState:i,subscribe:(e,r,a)=>r||a?function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=r(t);function s(){const n=r(t);if(!a(o,n)){const t=o;e(o=n,t)}}return n.add(s),()=>n.delete(s)}(e,r,a):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,a),a}const ib="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;const ab=[];function ob(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function sb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const o of ab)if(ob(t,o.keys,o.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!n)throw o.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=ab.indexOf(i);-1!==e&&ab.splice(e,1)},promise:(a=e,"object"===typeof a&&"function"===typeof a.then?e:e(...t)).then((e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((e=>i.error=e))};var a;if(ab.push(i),!n)throw i.promise}const lb=(e,t,n)=>sb(e,t,!1,n);var ub=n(579),cb=n(16),hb=n.n(cb),db=n(784);const pb={};var fb,mb;const gb=e=>"colorSpace"in e||"outputColorSpace"in e,vb=()=>{var e;return null!=(e=pb.ColorManagement)?e:null},yb=e=>e&&e.isOrthographicCamera,xb="undefined"!==typeof window&&(null!=(fb=window.document)&&fb.createElement||"ReactNative"===(null==(mb=window.navigator)?void 0:mb.product))?t.useLayoutEffect:t.useEffect;function bb(e){const n=t.useRef(e);return xb((()=>{n.current=e}),[e]),n}function wb(e){let{set:t}=e;return xb((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class Sb extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Sb.getDerivedStateFromError=()=>({error:!0});const _b="__default",Mb=new Map,Eb=e=>e&&!!e.memoized&&!!e.changes;function Ab(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const Tb=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function Cb(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const Db={obj:e=>e===Object(e)&&!Db.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:r="reference",strict:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(Db.str(e)||Db.num(e)||Db.boo(e))return e===t;const a=Db.obj(e);if(a&&"reference"===r)return e===t;const o=Db.arr(e);if(o&&"reference"===n)return e===t;if((o||a)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(a&&"shallow"===n&&"shallow"===r){for(s in i?t:e)if(!Db.equ(e[s],t[s],{strict:i,objects:"reference"}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(Db.und(s)){if(o&&0===e.length&&0===t.length)return!0;if(a&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Nb(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function Rb(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function kb(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const Ib=/-\d+$/;function Fb(e,t,n){if(Db.str(n)){if(Ib.test(n)){const t=n.replace(Ib,""),{target:r,key:i}=kb(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=kb(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function Pb(e,t,n){var r,i;if(Db.str(n)){const{target:r,key:i}=kb(e,n),a=t.__r3f.previousAttach;void 0===a?delete r[i]:r[i]=a}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function Ob(e,t){let{children:n,key:r,ref:i,...a}=t,{children:o,key:s,ref:l,...u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const h=e.__r3f,d=Object.entries(a),p=[];if(c){const e=Object.keys(u);for(let t=0;t<e.length;t++)a.hasOwnProperty(e[t])||d.unshift([e[t],_b+"remove"])}d.forEach((t=>{let[n,r]=t;var i;if(null!=(i=e.__r3f)&&i.primitive&&"object"===n)return;if(Db.equ(r,u[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return p.push([n,r,!0,[]]);let o=[];n.includes("-")&&(o=n.split("-")),p.push([n,r,!1,o]);for(const e in a){const t=a[e];e.startsWith(`${n}-`)&&p.push([e,t,!1,e.split("-")])}}));const f={...a};return null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.args&&(f.args=h.memoizedProps.args),null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.attach&&(f.attach=h.memoizedProps.attach),{memoized:f,changes:p}}const Bb="undefined"!==typeof process&&!1;function Lb(e,t){var n;const r=e.__r3f,i=null==r?void 0:r.root,a=null==i||null==i.getState?void 0:i.getState(),{memoized:o,changes:s}=Eb(t)?t:Ob(e,t),l=null==r?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=o);for(let u=0;u<s.length;u++){let[t,n,i,o]=s[u];if(gb(e)){const e=3001,r="srgb",i="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:i):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:i)}let l=e,c=l[t];if(o.length&&(c=o.reduce(((e,t)=>e[t]),e),!c||!c.set)){const[n,...r]=o.reverse();l=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===_b+"remove")if(l.constructor){let e=Mb.get(l.constructor);e||(e=new l.constructor,Mb.set(l.constructor,e)),n=e[t]}else n=0;if(i&&r)n?r.handlers[t]=n:delete r.handlers[t],r.eventCount=Object.keys(r.handlers).length;else if(c&&c.set&&(c.copy||c instanceof fu)){if(Array.isArray(n))c.fromArray?c.fromArray(n):c.set(...n);else if(c.copy&&n&&n.constructor&&(Bb?c.constructor.name===n.constructor.name:c.constructor===n.constructor))c.copy(n);else if(void 0!==n){const e=c instanceof $u;!e&&c.setScalar?c.setScalar(n):c instanceof fu&&n instanceof fu?c.mask=n.mask:c.set(n),!vb()&&a&&!a.linear&&e&&c.convertSRGBToLinear()}}else if(l[t]=n,l[t]instanceof yl&&l[t].format===Ua&&l[t].type===Aa&&a){const e=l[t];gb(e)&&gb(a.gl)?e.colorSpace=a.gl.outputColorSpace:e.encoding=a.gl.outputEncoding}zb(e)}if(r&&r.parent&&e.raycast&&l!==r.eventCount){const t=Cb(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),r.eventCount&&t.interaction.push(e)}return!(1===s.length&&"onUpdate"===s[0][0])&&s.length&&null!=(n=e.__r3f)&&n.parent&&Ub(e),e}function zb(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function Ub(e){null==e.onUpdate||e.onUpdate(e)}function Hb(e,t){e.manual||(yb(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function qb(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Vb(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function jb(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(qb(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(a){const{onPointerMissed:o,internal:s}=e.getState();s.lastEvent.current=a;const l="onPointerMove"===i,u="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,c=function(t,n){const r=e.getState(),i=new Set,a=[],o=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<o.length;e++){const t=Tb(o[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=o.flatMap((function(e){const n=Tb(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=Tb(e.object),r=Tb(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=qb(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(qb(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),h=u?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(a):0;"onPointerDown"===i&&(s.initialClick=[a.offsetX,a.offsetY],s.initialHits=c.map((e=>e.eventObject))),u&&!c.length&&h<=2&&(r(a,s.interaction),o&&o(a)),l&&n(c),function(t,r,i,a){const o=e.getState();if(t.length){const e={stopped:!1};for(const s of t){const l=Tb(s.object)||o,{raycaster:u,pointer:c,camera:h,internal:d}=l,p=new Tl(c.x,c.y,0).unproject(h),f=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(s.eventObject))&&t},m=e=>{const t={intersection:s,target:r.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(s.eventObject,t):d.capturedMap.set(e,new Map([[s.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&Vb(d.capturedMap,s.eventObject,t,e)};let v={};for(let e in r){let t=r[e];"function"!==typeof t&&(v[e]=t)}let y={...s,...v,pointer:c,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:p,ray:u.ray,camera:h,stopPropagation(){const i="pointerId"in r&&d.capturedMap.get(r.pointerId);(!i||i.has(s.eventObject))&&(y.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((e=>e.eventObject===s.eventObject)))&&n([...t.slice(0,t.indexOf(s)),s])},target:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:f,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r};if(a(y),!0===e.stopped)break}}}(c,a,h,(function(e){const t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){const t=qb(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{const n=o[i];n?u&&!s.initialHits.includes(t)||(r(a,s.interaction.filter((e=>!s.initialHits.includes(e)))),n(e)):u&&s.initialHits.includes(t)&&r(a,s.interaction.filter((e=>!s.initialHits.includes(e))))}}))}}}}const Gb=e=>!(null==e||!e.render),Wb=t.createContext(null),Xb=(e,n)=>{const r=function(e){const n="function"===typeof e?rb(e):e,r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,i]=(0,t.useReducer)((e=>e+1),0),a=n.getState(),o=(0,t.useRef)(a),s=(0,t.useRef)(e),l=(0,t.useRef)(r),u=(0,t.useRef)(!1),c=(0,t.useRef)();let h;void 0===c.current&&(c.current=e(a));let d=!1;(o.current!==a||s.current!==e||l.current!==r||u.current)&&(h=e(a),d=!r(c.current,h)),ib((()=>{d&&(c.current=h),o.current=a,s.current=e,l.current=r,u.current=!1}));const p=(0,t.useRef)(a);ib((()=>{const e=()=>{try{const e=n.getState(),t=s.current(e);l.current(c.current,t)||(o.current=e,c.current=t,i())}catch(Fw){u.current=!0,i()}},t=n.subscribe(e);return n.getState()!==p.current&&e(),t}),[]);const f=d?h:c.current;return(0,t.useDebugValue)(f),f};return Object.assign(r,n),r[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[r,n];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},r}(((r,i)=>{const a=new Tl,o=new Tl,s=new Tl;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i().size;const{width:r,height:l,top:u,left:c}=n,h=r/l;t instanceof Tl?s.copy(t):s.set(...t);const d=e.getWorldPosition(a).distanceTo(s);if(yb(e))return{width:r/e.zoom,height:l/e.zoom,top:u,left:c,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,i=n*(r/l);return{width:i,height:n,top:u,left:c,factor:r/i,distance:d,aspect:h}}}let u;const c=e=>r((t=>({performance:{...t.performance,current:e}}))),h=new Zs,d={set:r,get:i,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(i(),t)},advance:(e,t)=>n(e,t,i()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Xm,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=i();u&&clearTimeout(u),e.performance.current!==e.performance.min&&c(e.performance.min),u=setTimeout((()=>c(i().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>r((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,n,a,s)=>{const u=i().camera,c={width:e,height:t,top:a||0,left:s||0,updateStyle:n};r((e=>({size:c,viewport:{...e.viewport,...l(u,o,c)}})))},setDpr:e=>r((t=>{const n=Ab(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=i().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),r((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const r=i().internal;return r.priority=r.priority+(t>0?1:0),r.subscribers.push({ref:e,priority:t,store:n}),r.subscribers=r.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=i().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return d})),i=r.getState();let a=i.size,o=i.viewport.dpr,s=i.camera;return r.subscribe((()=>{const{camera:e,size:t,viewport:n,gl:i,set:l}=r.getState();if(t.width!==a.width||t.height!==a.height||n.dpr!==o){var u;a=t,o=n.dpr,Hb(e,t),i.setPixelRatio(n.dpr);const r=null!=(u=t.updateStyle)?u:"undefined"!==typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(t.width,t.height,r)}e!==s&&(s=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),r.subscribe((t=>e(t))),r};let Yb,$b=new Set,Zb=new Set,Jb=new Set;function Kb(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function Qb(e,t){switch(e){case"before":return Kb($b,t);case"after":return Kb(Zb,t);case"tail":return Kb(Jb,t)}}let ew,tw;function nw(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),ew=t.internal.subscribers,Yb=0;Yb<ew.length;Yb++)tw=ew[Yb],tw.ref.current(tw.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function rw(){const e=t.useContext(Wb);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function iw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return rw()(e,t)}const aw=new WeakMap;function ow(e,t){return function(n){let r=aw.get(n);r||(r=new n,aw.set(n,r)),e&&e(r);for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];return Promise.all(a.map((e=>new Promise(((n,i)=>r.load(e,(e=>{e.scene&&Object.assign(e,Nb(e.scene)),n(e)}),t,(t=>i(new Error(`Could not load ${e}: ${null==t?void 0:t.message}`)))))))))}}function sw(e,t,n,r){const i=Array.isArray(t)?t:[t],a=lb(ow(n,r),[e,...i],{equal:Db.equ});return Array.isArray(t)?a:a[0]}sw.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return((e,t,n)=>{sb(e,t,!0,n)})(ow(n),[e,...r])},sw.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)ab.splice(0,ab.length);else{const t=ab.find((t=>ob(e,t.keys,t.equal)));t&&t.remove()}})([e,...Array.isArray(t)?t:[t]])};const lw=new Map,{invalidate:uw,advance:cw}=function(e){let t,n,r,i=!1,a=!1;function o(s){n=requestAnimationFrame(o),i=!0,t=0,Qb("before",s),a=!0;for(const n of e.values()){var l;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(l=r.gl.xr)&&l.isPresenting||(t+=nw(s,r))}if(a=!1,Qb("after",s),0===t)return Qb("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:o,invalidate:function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var s;if(!n)return e.forEach((e=>t(e.store.getState(),r)));null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):a?2:1,i||(i=!0,requestAnimationFrame(o)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&Qb("before",t),r)nw(t,r,i);else for(const a of e.values())nw(t,a.store.getState());n&&Qb("after",t)}}}(lw),{reconciler:hw,applyProps:dw}=function(e,t){function n(e,t,n){let r,{args:i=[],attach:a,...o}=t,s=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===o.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=Rb(o.object,{type:e,root:n,attach:a,primitive:!0})}else{const t=pb[s];if(!t)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");r=Rb(new t(...i),{type:e,root:n,attach:a,memoizedProps:{args:i}})}return void 0===r.__r3f.attach&&(r instanceof Mc?r.__r3f.attach="geometry":r instanceof Ku&&(r.__r3f.attach="material")),"inject"!==s&&Lb(r,o),r}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?Fb(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||Rb(t,{}),t.__r3f.parent=e,Ub(t),zb(t))}function i(e,t,n){let r=!1;if(t){var i,a;if(null!=(i=t.__r3f)&&i.attach)Fb(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const i=e.children.filter((e=>e!==t)),a=i.indexOf(n);e.children=[...i.slice(0,a),t,...i.slice(a)],r=!0}r||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||Rb(t,{}),t.__r3f.parent=e,Ub(t),zb(t)}}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach((e=>o(t,e,n)))}function o(e,t,n){if(t){var r,i,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)Pb(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{Vb(n.capturedMap,t,e,r)}))}(Cb(t),t)}const u=null==(o=t.__r3f)?void 0:o.primitive,c=!u&&(void 0===n?null!==t.dispose:n);var l;if(!u)a(null==(l=t.__r3f)?void 0:l.objects,t,c),a(t.children,t,c);if(delete t.__r3f,c&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(vk){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,db.unstable_scheduleCallback)(db.unstable_IdlePriority,e):e()}zb(e)}}const s=()=>{},l=hb()({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&o(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...a}=r,{args:o=[],children:s,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==o[t])))return[!0];const u=Ob(e,a,l,!0);return u.changes.length?[!1,u]:null}},commitUpdate(e,t,i,a,s,l){let[u,c]=t;u?function(e,t,i,a){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const u=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(u,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>r(u,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||o(l,e),u.parent&&(u.__r3f.autoRemovedBeforeAppend=!0),r(l,u),u.raycast&&u.__r3f.eventCount&&Cb(u).getState().internal.interaction.push(u);[a,a.alternate].forEach((e=>{null!==e&&(e.stateNode=u,e.ref&&("function"===typeof e.ref?e.ref(u):e.ref.current=u))}))}(e,i,s,l):Lb(e,c)},commitMount(e,t,n,r){var i;const a=null!=(i=e.__r3f)?i:{};e.raycast&&a.handlers&&a.eventCount&&Cb(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>Rb(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&Pb(r,e,n),e.isObject3D&&(e.visible=!1),zb(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&Fb(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),zb(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():nb.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&Db.fun(performance.now)?performance.now:Db.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Db.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Db.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:Lb}}(0,(function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return nb.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nb.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nb.ContinuousEventPriority;default:return nb.DefaultEventPriority}})),pw={objects:"shallow",strict:!1},fw=(e,t)=>{const n="function"===typeof e?e(t):e;return Gb(n)?n:new tb({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function mw(e){const t=lw.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"===typeof reportError?reportError:console.error,a=r||Xb(uw,cw),o=n||hw.createContainer(a,nb.ConcurrentRoot,null,!1,null,"",i,null);let s;t||lw.set(e,{fiber:o,store:a});let l,u=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:r,scene:i,events:o,onCreated:c,shadows:h=!1,linear:d=!1,flat:p=!1,legacy:f=!1,orthographic:m=!1,frameloop:g="always",dpr:v=[1,2],performance:y,raycaster:x,camera:b,onPointerMissed:w}=t,S=a.getState(),_=S.gl;S.gl||S.set({gl:_=fw(n,e)});let M=S.raycaster;M||S.set({raycaster:M=new Eg});const{params:E,...A}=x||{};if(Db.equ(A,M,pw)||dw(M,{...A}),Db.equ(E,M.params,pw)||dw(M,{params:{...M.params,...E}}),!S.camera||S.camera===l&&!Db.equ(l,b,pw)){l=b;const e=b instanceof jc,t=e?b:m?new _m(0,0,0,0,.1,1e3):new Yc(75,0,.1,1e3);e||(t.position.z=5,b&&(dw(t,b),("aspect"in b||"left"in b||"right"in b||"bottom"in b||"top"in b)&&(t.manual=!0,t.updateProjectionMatrix())),S.camera||null!=b&&b.rotation||t.lookAt(0,0,0)),S.set({camera:t}),M.camera=t}if(!S.scene){let e;i instanceof th?e=i:(e=new th,i&&dw(e,i)),S.set({scene:Rb(e)})}if(!S.xr){var T;const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&cw(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||uw(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(T=_.xr)?void 0:T.addEventListener)&&n.connect(),S.set({xr:n})}if(_.shadowMap){const e=_.shadowMap.enabled,t=_.shadowMap.type;if(_.shadowMap.enabled=!!h,Db.boo(h))_.shadowMap.type=ui;else if(Db.str(h)){var C;const e={basic:si,percentage:li,soft:ui,variance:ci};_.shadowMap.type=null!=(C=e[h])?C:ui}else Db.obj(h)&&Object.assign(_.shadowMap,h);e===_.shadowMap.enabled&&t===_.shadowMap.type||(_.shadowMap.needsUpdate=!0)}const D=vb();if(D&&("enabled"in D?D.enabled=!f:"legacyMode"in D&&(D.legacyMode=f)),!u){dw(_,{outputEncoding:d?3e3:3001,toneMapping:p?Ji:ta})}S.legacy!==f&&S.set((()=>({legacy:f}))),S.linear!==d&&S.set((()=>({linear:d}))),S.flat!==p&&S.set((()=>({flat:p}))),!n||Db.fun(n)||Gb(n)||Db.equ(n,_,pw)||dw(_,n),o&&!S.events.handlers&&S.set({events:o(a)});const N=function(e,t){const n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:r,top:i,left:a,updateStyle:o=n}=t;return{width:e,height:r,top:i,left:a,updateStyle:o}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:r,top:i,left:a}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:a,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,r);return Db.equ(N,S.size,pw)||S.setSize(N.width,N.height,N.updateStyle,N.top,N.left),v&&S.viewport.dpr!==Ab(v)&&S.setDpr(v),S.frameloop!==g&&S.setFrameloop(g),S.onPointerMissed||S.set({onPointerMissed:w}),y&&!Db.equ(y,S.performance,pw)&&S.set((e=>({performance:{...e.performance,...y}}))),s=c,u=!0,this},render(t){return u||this.configure(),hw.updateContainer((0,ub.jsx)(gw,{store:a,children:t,onCreated:s,rootElement:e}),o,null,(()=>{})),a},unmount(){vw(e)}}}function gw(e){let{store:t,children:n,onCreated:r,rootElement:i}=e;return xb((()=>{const e=t.getState();e.set((e=>({internal:{...e.internal,active:!0}}))),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)}),[]),(0,ub.jsx)(Wb.Provider,{value:t,children:n})}function vw(e,t){const n=lw.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),hw.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,a,o;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(a=i.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=i.gl)&&o.xr&&i.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(i),lw.delete(e),t&&t(e)}catch(vk){}}),500)}))}}hw.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version});t.unstable_act;const yw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function xw(e){const{handlePointer:t}=jb(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(yw).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((e=>{let[n,r]=e;const[i,a]=yw[n];t.addEventListener(i,r,{passive:a})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((e=>{let[t,r]=e;if(n&&n.connected instanceof HTMLElement){const[e]=yw[t];n.connected.removeEventListener(e,r)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}var bw,ww,Sw=n(695),_w=n.n(Sw),Mw=Object.defineProperty,Ew=Object.defineProperties,Aw=Object.getOwnPropertyDescriptors,Tw=Object.getOwnPropertySymbols,Cw=Object.prototype.hasOwnProperty,Dw=Object.prototype.propertyIsEnumerable,Nw=(e,t,n)=>t in e?Mw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rw=(e,t)=>{for(var n in t||(t={}))Cw.call(t,n)&&Nw(e,n,t[n]);if(Tw)for(var n of Tw(t))Dw.call(t,n)&&Nw(e,n,t[n]);return e};"undefined"===typeof window||!(null==(bw=window.document)?void 0:bw.createElement)&&"ReactNative"!==(null==(ww=window.navigator)?void 0:ww.product)?t.useEffect:t.useLayoutEffect;function kw(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=kw(r,t,n);if(e)return e;r=t?null:r.sibling}}function Iw(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const Fw=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return Fw.apply(this,arguments);console.error=Fw};const Pw=Iw(t.createContext(null));class Ow extends t.Component{render(){return t.createElement(Pw.Provider,{value:this._reactInternals},this.props.children)}}function Bw(){const e=t.useContext(Pw);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=t.useId();return t.useMemo((()=>{for(const t of[e,null==e?void 0:e.alternate]){if(!t)continue;const e=kw(t,!1,(e=>{let t=e.memoizedState;for(;t;){if(t.memoizedState===n)return!0;t=t.next}}));if(e)return e}}),[e,n])}function Lw(){const e=function(){const e=Bw(),[n]=t.useState((()=>new Map));n.clear();let r=e;for(;r;){if(r.type&&"object"===typeof r.type){const e=void 0===r.type._context&&r.type.Provider===r.type?r.type:r.type._context;e&&e!==Pw&&!n.has(e)&&n.set(e,t.useContext(Iw(e)))}r=r.return}return n}();return t.useMemo((()=>Array.from(e.keys()).reduce(((n,r)=>i=>{return t.createElement(n,null,t.createElement(r.Provider,(a=Rw({},i),o={value:e.get(r)},Ew(a,Aw(o)))));var a,o}),(e=>t.createElement(Ow,Rw({},e))))),[e])}function zw(){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const a=r||"undefined"!==typeof window&&window.ResizeObserver,[o,s]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!a)return o.width=1280,o.height=800,[()=>{},o,()=>{}];const l=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),u=e?"number"===typeof e?e:e.scroll:null,c=e?"number"===typeof e?e:e.resize:null,h=(0,t.useRef)(!1);(0,t.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[d,p,f]=(0,t.useMemo)((()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:r,bottom:a,right:o,x:u,y:c}=l.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:r,bottom:a,right:o,x:u,y:c};l.current.element instanceof HTMLElement&&i&&(d.height=l.current.element.offsetHeight,d.width=l.current.element.offsetWidth),Object.freeze(d),h.current&&!qw(l.current.lastBounds,d)&&s(l.current.lastBounds=d)};return[e,c?_w()(e,c):e,u?_w()(e,u):e]}),[s,i,u,c]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",f,!0))),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){var e;l.current.element&&(l.current.resizeObserver=new a(p),null==(e=l.current.resizeObserver)||e.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach((e=>e.addEventListener("scroll",f,{capture:!0,passive:!0}))),l.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}var v,y,x;return v=f,y=Boolean(n),(0,t.useEffect)((()=>{if(y){const e=v;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[v,y]),x=p,(0,t.useEffect)((()=>{const e=x;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[x]),(0,t.useEffect)((()=>{m(),g()}),[n,f,p]),(0,t.useEffect)((()=>m),[]),[e=>{e&&e!==l.current.element&&(m(),l.current.element=e,l.current.scrollContainers=Uw(e),g())},o,d]}function Uw(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...Uw(e.parentElement)]}const Hw=["x","y","top","bottom","left","right","width","height"],qw=(e,t)=>Hw.every((n=>e[n]===t[n])),Vw=t.forwardRef((function(n,r){let{children:i,fallback:a,resize:o,style:s,gl:l,events:u=xw,eventSource:c,eventPrefix:h,shadows:d,linear:p,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:b,camera:w,scene:S,onPointerMissed:_,onCreated:M,...E}=n;t.useMemo((()=>{return t=e,void Object.assign(pb,t);var t}),[]);const A=Lw(),[T,C]=zw({scroll:!0,debounce:{scroll:50,resize:0},...o}),D=t.useRef(null),N=t.useRef(null);t.useImperativeHandle(r,(()=>D.current));const R=bb(_),[k,I]=t.useState(!1),[F,P]=t.useState(!1);if(k)throw k;if(F)throw F;const O=t.useRef(null);xb((()=>{const e=D.current;C.width>0&&C.height>0&&e&&(O.current||(O.current=mw(e)),O.current.configure({gl:l,events:u,shadows:d,linear:p,flat:f,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:b,camera:w,scene:S,size:C,onPointerMissed:function(){return null==R.current?void 0:R.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(c?(t=c)&&t.hasOwnProperty("current")?c.current:c:N.current),h&&e.setEvents({compute:(e,t)=>{const n=e[h+"X"],r=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==M||M(e)}}),O.current.render((0,ub.jsx)(A,{children:(0,ub.jsx)(Sb,{set:P,children:(0,ub.jsx)(t.Suspense,{fallback:(0,ub.jsx)(wb,{set:I}),children:i})})})))})),t.useEffect((()=>{const e=D.current;if(e)return()=>vw(e)}),[]);const B=c?"none":"auto";return(0,ub.jsx)("div",{ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:B,...s},...E,children:(0,ub.jsx)("div",{ref:T,style:{width:"100%",height:"100%"},children:(0,ub.jsx)("canvas",{ref:D,style:{display:"block"},children:a})})})})),jw=t.forwardRef((function(e,t){return(0,ub.jsx)(Ow,{children:(0,ub.jsx)(Vw,{...e,ref:t})})}));function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gw.apply(null,arguments)}const Ww=new Nl,Xw=new Tl;class Yw extends km{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new gc([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new gc([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Sg(t,6,1);return this.setAttribute("instanceStart",new ih(n,3,0)),this.setAttribute("instanceEnd",new ih(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new Sg(t,2*n,1);return this.setAttribute("instanceColorStart",new ih(r,n,0)),this.setAttribute("instanceColorEnd",new ih(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new gf(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Nl);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),Ww.setFromBufferAttribute(t),this.boundingBox.union(Ww))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Yl),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,a=e.count;i<a;i++)Xw.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Xw)),Xw.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(Xw));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class $w extends Vc{constructor(e){super({type:"LineMaterial",uniforms:qc.clone(qc.merge([wv.common,wv.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Zs(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:"\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\n\t\t\t\tuniform float linewidth;\n\t\t\t\tuniform vec2 resolution;\n\n\t\t\t\tattribute vec3 instanceStart;\n\t\t\t\tattribute vec3 instanceEnd;\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t\tattribute vec4 instanceColorStart;\n\t\t\t\t\t\tattribute vec4 instanceColorEnd;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t\tattribute vec3 instanceColorStart;\n\t\t\t\t\t\tattribute vec3 instanceColorEnd;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashScale;\n\t\t\t\t\tattribute float instanceDistanceStart;\n\t\t\t\t\tattribute float instanceDistanceEnd;\n\t\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#endif\n\n\t\t\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t\t\t// conservative estimate of the near plane\n\t\t\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#ifdef USE_COLOR\n\n\t\t\t\t\t\tvLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t\t\t// camera space\n\t\t\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\tworldStart = start.xyz;\n\t\t\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\t\t\tif ( perspective ) {\n\n\t\t\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// clip space\n\t\t\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t\t\t// ndc space\n\t\t\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t\t\t// direction\n\t\t\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t\t\t// account for clip-space aspect ratio\n\t\t\t\t\tdir.x *= aspect;\n\t\t\t\t\tdir = normalize( dir );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\t\t\tvec3 offset;\n\t\t\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t\t\t// set the world position\n\t\t\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t\t\t// project the worldpos\n\t\t\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t\t\t// segments overlap neatly\n\t\t\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\t\t\tdir.x /= aspect;\n\t\t\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset += - dir;\n\n\t\t\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\t\t\toffset += dir;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth;\n\n\t\t\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t\t\t// select end\n\t\t\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t\t\t// back to clip space\n\t\t\t\t\t\toffset *= clip.w;\n\n\t\t\t\t\t\tclip.xy += offset;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tgl_Position = clip;\n\n\t\t\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:`\n\t\t\t\tuniform vec3 diffuse;\n\t\t\t\tuniform float opacity;\n\t\t\t\tuniform float linewidth;\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashOffset;\n\t\t\t\t\tuniform float dashSize;\n\t\t\t\t\tuniform float gapSize;\n\n\t\t\t\t#endif\n\n\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <clipping_planes_pars_fragment>\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\t\t\tfloat mua;\n\t\t\t\t\tfloat mub;\n\n\t\t\t\t\tvec3 p13 = p1 - p3;\n\t\t\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\t\t\tmua = numer / denom;\n\t\t\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\t\t\treturn vec2( mua, mub );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat alpha = opacity;\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\t\t\tfloat len = length( delta );\n\t\t\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\t\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\t\tdiffuseColor *= vLineColor;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tdiffuseColor.rgb *= vLineColor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\t\t\tgl_FragColor = diffuseColor;\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <${parseInt(ei.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t\t\t}\n\t\t\t`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(e){Boolean(e)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(e){Boolean(e)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const Zw=parseInt(ei.replace(/\D+/g,""))>=125?"uv1":"uv2",Jw=new xl,Kw=new Tl,Qw=new Tl,eS=new xl,tS=new xl,nS=new xl,rS=new Tl,iS=new ru,aS=new Pg,oS=new Tl,sS=new Nl,lS=new Yl,uS=new xl;let cS,hS;function dS(e,t,n){return uS.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),uS.multiplyScalar(1/uS.w),uS.x=hS/n.width,uS.y=hS/n.height,uS.applyMatrix4(e.projectionMatrixInverse),uS.multiplyScalar(1/uS.w),Math.abs(Math.max(uS.x,uS.y))}class pS extends Oc{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yw,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $w({color:16777215*Math.random()})),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,o=0,s=t.count;a<s;a++,o+=2)Kw.fromBufferAttribute(t,a),Qw.fromBufferAttribute(n,a),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+Kw.distanceTo(Qw);const i=new Sg(r,2,1);return e.setAttribute("instanceDistanceStart",new ih(i,1,0)),e.setAttribute("instanceDistanceEnd",new ih(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;null!==r||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=void 0!==e.params.Line2&&e.params.Line2.threshold||0;cS=e.ray;const a=this.matrixWorld,o=this.geometry,s=this.material;let l,u;if(hS=s.linewidth+i,null===o.boundingSphere&&o.computeBoundingSphere(),lS.copy(o.boundingSphere).applyMatrix4(a),n)l=.5*hS;else{l=dS(r,Math.max(r.near,lS.distanceToPoint(cS.origin)),s.resolution)}if(lS.radius+=l,!1!==cS.intersectsSphere(lS)){if(null===o.boundingBox&&o.computeBoundingBox(),sS.copy(o.boundingBox).applyMatrix4(a),n)u=.5*hS;else{u=dS(r,Math.max(r.near,sS.distanceToPoint(cS.origin)),s.resolution)}sS.expandByScalar(u),!1!==cS.intersectsBox(sS)&&(n?function(e,t){const n=e.matrixWorld,r=e.geometry,i=r.attributes.instanceStart,a=r.attributes.instanceEnd;for(let o=0,s=Math.min(r.instanceCount,i.count);o<s;o++){aS.start.fromBufferAttribute(i,o),aS.end.fromBufferAttribute(a,o),aS.applyMatrix4(n);const r=new Tl,s=new Tl;cS.distanceSqToSegment(aS.start,aS.end,s,r),s.distanceTo(r)<.5*hS&&t.push({point:s,pointOnLine:r,distance:cS.origin.distanceTo(s),object:e,face:null,faceIndex:o,uv:null,[Zw]:null})}}(this,t):function(e,t,n){const r=t.projectionMatrix,i=e.material.resolution,a=e.matrixWorld,o=e.geometry,s=o.attributes.instanceStart,l=o.attributes.instanceEnd,u=Math.min(o.instanceCount,s.count),c=-t.near;cS.at(1,nS),nS.w=1,nS.applyMatrix4(t.matrixWorldInverse),nS.applyMatrix4(r),nS.multiplyScalar(1/nS.w),nS.x*=i.x/2,nS.y*=i.y/2,nS.z=0,rS.copy(nS),iS.multiplyMatrices(t.matrixWorldInverse,a);for(let h=0,d=u;h<d;h++){if(eS.fromBufferAttribute(s,h),tS.fromBufferAttribute(l,h),eS.w=1,tS.w=1,eS.applyMatrix4(iS),tS.applyMatrix4(iS),eS.z>c&&tS.z>c)continue;if(eS.z>c){const e=eS.z-tS.z,t=(eS.z-c)/e;eS.lerp(tS,t)}else if(tS.z>c){const e=tS.z-eS.z,t=(tS.z-c)/e;tS.lerp(eS,t)}eS.applyMatrix4(r),tS.applyMatrix4(r),eS.multiplyScalar(1/eS.w),tS.multiplyScalar(1/tS.w),eS.x*=i.x/2,eS.y*=i.y/2,tS.x*=i.x/2,tS.y*=i.y/2,aS.start.copy(eS),aS.start.z=0,aS.end.copy(tS),aS.end.z=0;const t=aS.closestPointToPointParameter(rS,!0);aS.at(t,oS);const o=$s.lerp(eS.z,tS.z,t),u=o>=-1&&o<=1,d=rS.distanceTo(oS)<.5*hS;if(u&&d){aS.start.fromBufferAttribute(s,h),aS.end.fromBufferAttribute(l,h),aS.start.applyMatrix4(a),aS.end.applyMatrix4(a);const t=new Tl,r=new Tl;cS.distanceSqToSegment(aS.start,aS.end,r,t),n.push({point:r,pointOnLine:t,distance:cS.origin.distanceTo(r),object:e,face:null,faceIndex:h,uv:null,[Zw]:null})}}}(this,r,t))}}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Jw),this.material.uniforms.resolution.value.set(Jw.z,Jw.w))}}class fS extends Yw{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=e.length-t,r=new Float32Array(2*n);if(3===t)for(let i=0;i<n;i+=t)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];else for(let i=0;i<n;i+=t)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5],r[2*i+6]=e[i+6],r[2*i+7]=e[i+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class mS extends pS{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fS,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $w({color:16777215*Math.random()})),this.isLine2=!0,this.type="Line2"}}const gS=t.forwardRef((function(e,n){let{points:r,color:i=16777215,vertexColors:a,linewidth:o,lineWidth:s,segments:l,dashed:u,...c}=e;var h,d;const p=iw((e=>e.size)),f=t.useMemo((()=>l?new pS:new mS),[l]),[m]=t.useState((()=>new $w)),g=4===(null==a||null==(h=a[0])?void 0:h.length)?4:3,v=t.useMemo((()=>{const e=l?new Yw:new fS,t=r.map((e=>{const t=Array.isArray(e);return e instanceof Tl||e instanceof xl?[e.x,e.y,e.z]:e instanceof Zs?[e.x,e.y,0]:t&&3===e.length?[e[0],e[1],e[2]]:t&&2===e.length?[e[0],e[1],0]:e}));if(e.setPositions(t.flat()),a){i=16777215;const t=a.map((e=>e instanceof $u?e.toArray():e));e.setColors(t.flat(),g)}return e}),[r,l,a,g]);return t.useLayoutEffect((()=>{f.computeLineDistances()}),[r,f]),t.useLayoutEffect((()=>{u?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0}),[u,m]),t.useEffect((()=>()=>{v.dispose(),m.dispose()}),[v]),t.createElement("primitive",Gw({object:f,ref:n},c),t.createElement("primitive",{object:v,attach:"geometry"}),t.createElement("primitive",Gw({object:m,attach:"material",color:i,vertexColors:Boolean(a),resolution:[p.width,p.height],linewidth:null!==(d=null!==o&&void 0!==o?o:s)&&void 0!==d?d:1,dashed:u,transparent:4===g},c)))}));function vS(){var e=Object.create(null);function t(r,i){var a=r.id,o=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var u=r.getTransferables;if(void 0===u&&(u=null),!e[a])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+o+">.init",l),u&&(u=n("<"+o+">.getTransferables",u));var c=null;"function"===typeof l?c=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[a]={id:a,value:c,getTransferables:u},i(c)}catch(h){h&&h.noLog||console.error(h),i(h)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,a=r.action,o=r.data;try{"registerModule"===a&&t(o,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===a&&function(t,n){var r,i=t.id,a=t.args;e[i]&&"function"===typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var o=(r=e[i]).value.apply(r,a);o&&"function"===typeof o.then?o.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(o)}catch(l){n(l)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(l){console.error(l),n(l)}}}(o,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:i,success:!1,error:s.stack})}}))}var yS=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return yS=function(){return e},e},xS=0,bS=0,wS=!1,SS=Object.create(null),_S=Object.create(null),MS=Object.create(null);function ES(e){if((!e||"function"!==typeof e.init)&&!wS)throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId,a=function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"===typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&(e=e.onMainThread||e)._getInitResult&&(e=e._getInitResult()),e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++xS,s=e.name||o,l=null;function u(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!yS())return a.apply(void 0,e);if(!l){l=TS(i,"registerModule",u.workerModuleData);var n=function(){l=null,_S[i].delete(n)};(_S[i]||(_S[i]=new Set)).add(n)}return l.then((function(t){if(t.isCallable)return TS(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(wS=!0,e=ES({workerId:i,name:"<"+s+"> function dependency: "+e.name,init:"function(){return (\n"+AS(e)+"\n)}"}),wS=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),u.workerModuleData={isWorkerModule:!0,id:o,name:s,dependencies:t,init:AS(n),getTransferables:r&&AS(r)},u.onMainThread=a,u}function AS(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function TS(e,t,n){return new Promise((function(r,i){var a=++bS;MS[a]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=SS[e];if(!t){var n=AS(vS);(t=SS[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=MS[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete MS[n],r(t)}}return t}(e).postMessage({messageId:a,action:t,data:n})}))}function CS(){var e=function(e){function t(e,t,n,r,i,a,o,s){var l=1-o;s.x=l*l*e+2*l*o*n+o*o*i,s.y=l*l*t+2*l*o*r+o*o*a}function n(e,t,n,r,i,a,o,s,l,u){var c=1-l;u.x=c*c*c*e+3*c*c*l*n+3*c*l*l*i+l*l*l*o,u.y=c*c*c*t+3*c*c*l*r+3*c*l*l*a+l*l*l*s}function r(e,t){for(var n,r,i,a,o,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":a=r=l[0],o=i=l[1];break;case"L":l[0]===a&&l[1]===o||t("L",a,o,a=l[0],o=l[1]);break;case"Q":t("Q",a,o,a=l[2],o=l[3],l[0],l[1]);break;case"C":t("C",a,o,a=l[4],o=l[5],l[0],l[1],l[2],l[3]);break;case"Z":a===r&&o===i||t("L",a,o,r,i)}}}function i(e,i,a){void 0===a&&(a=16);var o={x:0,y:0};r(e,(function(e,r,s,l,u,c,h,d,p){switch(e){case"L":i(r,s,l,u);break;case"Q":for(var f=r,m=s,g=1;g<a;g++)t(r,s,c,h,l,u,g/(a-1),o),i(f,m,o.x,o.y),f=o.x,m=o.y;break;case"C":for(var v=r,y=s,x=1;x<a;x++)n(r,s,c,h,d,p,l,u,x/(a-1),o),i(v,y,o.x,o.y),v=o.x,y=o.y}}))}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var n=e.getContext?e.getContext("webgl",s):e,r=o.get(n);if(!r){var i="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,a={},l={},u={},c=-1,h=[];function d(e){var t=a[e];if(!t&&!(t=a[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function p(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function f(e,t,r,a){if(!l[e]){var o={},s={},u=n.createProgram();n.attachShader(u,p(t,n.VERTEX_SHADER)),n.attachShader(u,p(r,n.FRAGMENT_SHADER)),n.linkProgram(u),l[e]={program:u,transaction:function(e){n.useProgram(u),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var a=s[t]||(s[t]=n.getUniformLocation(u,t));n["uniform"+e].apply(n,[a].concat(r))},setAttribute:function(e,t,r,a,s){var l=o[e];l||(l=o[e]={buf:n.createBuffer(),loc:n.getAttribLocation(u,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,a):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,a),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),l.data=s)}})}}}l[e].transaction(a)}function m(e,t){c++;try{n.activeTexture(n.TEXTURE0+c);var r=u[e];r||(r=u[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,c)}finally{c--}}function g(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function v(){a={},l={},u={},c=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){v(),e.preventDefault()}),!1),o.set(n,r={gl:n,isWebGL2:i,getExtension:d,withProgram:f,withTexture:m,withTextureFramebuffer:g,handleContextLoss:v})}t(r)}function u(e,t,n,r,i,o,s,u){void 0===s&&(s=15),void 0===u&&(u=null),l(e,(function(e){var l=e.gl,c=e.withProgram;(0,e.withTexture)("copy",(function(e,h){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,i,o,0,l.RGBA,l.UNSIGNED_BYTE,t),c("copy",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),l.bindFramebuffer(l.FRAMEBUFFER,u||null),l.disable(l.BLEND),l.colorMask(8&s,4&s,2&s,1&s),l.viewport(n,r,i,o),l.scissor(n,r,i,o),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var c=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:u,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;l(e,(function(a){var o=a.gl,s=new Uint8Array(r*i*4);o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,s),e.width=t,e.height=n,u(o,s,0,0,r,i)}))}});function h(e,t,n,r,a,o){void 0===o&&(o=1);var s=new Uint8Array(e*t),l=r[2]-r[0],u=r[3]-r[1],c=[];i(n,(function(e,t,n,r){c.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),c.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var p=g(r[0]+l*(h+.5)/e,r[1]+u*(d+.5)/t),m=Math.pow(1-Math.abs(p)/a,o)/2;p<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[d*e+h]=m}return s;function g(e,t){for(var n=1/0,r=1/0,i=c.length;i--;){var a=c[i];if(a.maxX+r<=e)break;if(e+r>a.minX&&t-r<a.maxY&&t+r>a.minY){var o=f(e,t,a.x1,a.y1,a.x2,a.y2);o<n&&(n=o,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=c.length;r--;){var i=c[r];if(i.maxX<=e)break;i.y1>t!==i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function d(e,t,n,r,i,a,o,s,l,u){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),p(e,t,n,r,i,a,o,null,s,l,u)}function p(e,t,n,r,i,a,o,s,l,c,d){void 0===a&&(a=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===d&&(d=0);for(var p=h(e,t,n,r,i,a),f=new Uint8Array(4*p.length),m=0;m<p.length;m++)f[4*m+d]=p[m];u(o,f,l,c,e,t,1<<3-d,s)}function f(e,t,n,r,i,a){var o=i-n,s=a-r,l=o*o+s*s,u=l?Math.max(0,Math.min(1,((e-n)*o+(t-r)*s)/l)):0,c=e-(n+u*o),h=t-(r+u*s);return c*c+h*h}var m=Object.freeze({__proto__:null,generate:h,generateIntoCanvas:d,generateIntoFramebuffer:p}),g=new Float32Array([0,0,2,0,0,2]),v=null,y=!1,x={},b=new WeakMap;function w(e){if(!y&&!E(e))throw new Error("WebGL generation not supported")}function S(e,t,n,r,i,a,o){if(void 0===a&&(a=1),void 0===o&&(o=null),!o&&!(o=v)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");o=v=s.getContext("webgl",{depth:!1})}w(o);var u=new Uint8Array(e*t*4);l(o,(function(o){var s=o.gl,l=o.withTexture,c=o.withTextureFramebuffer;l("readable",(function(o,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),c(o,l,(function(o){M(e,t,n,r,i,a,s,o,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,u)}))}))}));for(var c=new Uint8Array(e*t),h=0,d=0;h<u.length;h+=4)c[d++]=u[h];return c}function _(e,t,n,r,i,a,o,s,l,u){void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0),M(e,t,n,r,i,a,o,null,s,l,u)}function M(e,t,n,r,o,s,u,c,h,d,p){void 0===s&&(s=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),w(u);var f=[];i(n,(function(e,t,n,r){f.push(e,t,n,r)})),f=new Float32Array(f),l(u,(function(n){var i=n.gl,l=n.isWebGL2,u=n.getExtension,m=n.withProgram,v=n.withTexture,y=n.withTextureFramebuffer,x=n.handleContextLoss;if(v("rawDistances",(function(n,v){e===n._lastWidth&&t===n._lastHeight||i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n._lastWidth=e,n._lastHeight=t,0,i.RGBA,i.UNSIGNED_BYTE,null),m("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(a){var c=a.setAttribute,h=a.setUniform,d=!l&&u("ANGLE_instanced_arrays"),p=!l&&u("EXT_blend_minmax");c("aUV",2,i.STATIC_DRAW,0,g),c("aLineSegment",4,i.DYNAMIC_DRAW,1,f),h.apply(void 0,["4f","uGlyphBounds"].concat(r)),h("1f","uMaxDistance",o),h("1f","uExponent",s),y(n,v,(function(n){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,e,t),i.scissor(0,0,e,t),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,l?i.MAX:p.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),l?i.drawArraysInstanced(i.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(i.TRIANGLES,0,3,f.length/4)}))})),m("post",a,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(n){n.setAttribute("aUV",2,i.STATIC_DRAW,0,g),n.setUniform("1i","tex",v),i.bindFramebuffer(i.FRAMEBUFFER,c),i.disable(i.BLEND),i.colorMask(0===p,1===p,2===p,3===p),i.viewport(h,d,e,t),i.scissor(h,d,e,t),i.drawArrays(i.TRIANGLES,0,3)}))})),i.isContextLost())throw x(),new Error("webgl context lost")}))}function E(e){var t=e&&e!==v?e.canvas||e:x,n=b.get(t);if(void 0===n){y=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],a=S(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=a&&i.length===a.length&&a.every((function(e,t){return e===i[t]})),n||(r="bad trial run results",console.info(i,a))}catch(o){n=!1,r=o.message}r&&console.warn("WebGL SDF generation not supported:",r),y=!1,b.set(t,n)}return n}var A=Object.freeze({__proto__:null,generate:S,generateIntoCanvas:_,generateIntoFramebuffer:M,isSupported:E});return e.forEachPathCommand=r,e.generate=function(e,t,n,r,i,a){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===a&&(a=1);try{return S.apply(A,arguments)}catch(vk){return console.info("WebGL SDF generation failed, falling back to JS",vk),h.apply(m,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,a,o,s,l,u){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===a&&(a=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===u&&(u=0);try{return _.apply(A,arguments)}catch(vk){return console.info("WebGL SDF generation failed, falling back to JS",vk),d.apply(m,arguments)}},e.javascript=m,e.pathToLineSegments=i,e.webgl=A,e.webglUtils=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const DS=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,a=n.L|n.R|n.AL,o=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,u=null;function c(e){return function(){if(!u){u=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),a=i[0],o=i[1];a=parseInt(a,36),o=o?parseInt(o,36):0,u.set(r+=a,n[e]);for(var s=0;s<o;s++)u.set(++r,n[e])}))}};for(var r in t)e(r)}}(),u.get(e.codePointAt(0))||n.L}var h,d,p,f="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",m="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function g(e,t){var n,r=0,i=new Map,a=t&&new Map;return e.split(",").forEach((function e(o){if(-1!==o.indexOf("+"))for(var s=+o;s--;)e(n);else{n=o;var l=o.split(">"),u=l[0],c=l[1];u=String.fromCodePoint(r+=parseInt(u,36)),c=String.fromCodePoint(r+=parseInt(c,36)),i.set(u,c),t&&a.set(c,u)}})),{map:i,reverseMap:a}}function v(){if(!h){var e=g(f,!0),t=e.map,n=e.reverseMap;h=t,d=n,p=g(m,!1).map}}function y(e){return v(),h.get(e)||null}function x(e){return v(),d.get(e)||null}function b(e){return v(),p.get(e)||null}var w=n.L,S=n.R,_=n.EN,M=n.ES,E=n.ET,A=n.AN,T=n.CS,C=n.B,D=n.S,N=n.ON,R=n.BN,k=n.NSM,I=n.AL,F=n.LRO,P=n.RLO,O=n.LRE,B=n.RLE,L=n.PDF,z=n.LRI,U=n.RLI,H=n.FSI,q=n.PDI;var V;function j(e){return function(){if(!V){var e=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),V=t}}(),V.get(e)||null}function G(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var a=[];return t.paragraphs.forEach((function(i){var o=Math.max(n,i.start),s=Math.min(r,i.end);if(o<s){for(var u=t.levels.slice(o,s+1),h=s;h>=o&&c(e[h])&l;h--)u[h]=i.level;for(var d=i.level,p=1/0,f=0;f<u.length;f++){var m=u[f];m>d&&(d=m),m<p&&(p=1|m)}for(var g=d;g>=p;g--)for(var v=0;v<u.length;v++)if(u[v]>=g){for(var y=v;v+1<u.length&&u[v+1]>=g;)v++;v>y&&a.push([y+o,v+o])}}})),a}function W(e,t,n,r){for(var i=G(e,t,n,r),a=[],o=0;o<e.length;o++)a[o]=o;return i.forEach((function(e){for(var t=e[0],n=e[1],r=a.slice(t,n+1),i=r.length;i--;)a[n-i]=r[i]})),a}return e.closingToOpeningBracket=x,e.getBidiCharType=c,e.getBidiCharTypeName=function(e){return r[c(e)]},e.getCanonicalBracket=b,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=c(e[r]);var u=new Map;function h(e,t){var r=n[e];n[e]=t,u.set(r,u.get(r)-1),r&o&&u.set(o,u.get(o)-1),u.set(t,(u.get(t)||0)+1),t&o&&u.set(o,(u.get(o)||0)+1)}for(var d=new Uint8Array(e.length),p=new Map,f=[],m=null,g=0;g<e.length;g++)m||f.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Ht(g,!1)}),n[g]&C&&(m.end=g,m=null);for(var v=B|O|P|F|i|q|L|C,V=function(e){return e+(1&e?1:2)},j=function(e){return e+(1&e?2:1)},G=0;G<f.length;G++){var W=[{_level:(m=f[G]).level,_override:0,_isolate:0}],X=void 0,Y=0,$=0,Z=0;u.clear();for(var J=m.start;J<=m.end;J++){var K=n[J];if(X=W[W.length-1],u.set(K,(u.get(K)||0)+1),K&o&&u.set(o,(u.get(o)||0)+1),K&v)if(K&(B|O)){d[J]=X._level;var Q=(K===B?j:V)(X._level);Q<=125&&!Y&&!$?W.push({_level:Q,_override:0,_isolate:0}):Y||$++}else if(K&(P|F)){d[J]=X._level;var ee=(K===P?j:V)(X._level);ee<=125&&!Y&&!$?W.push({_level:ee,_override:K&P?S:w,_isolate:0}):Y||$++}else if(K&i){K&H&&(K=1===Ht(J+1,!0)?U:z),d[J]=X._level,X._override&&h(J,X._override);var te=(K===U?j:V)(X._level);te<=125&&0===Y&&0===$?(Z++,W.push({_level:te,_override:0,_isolate:1,_isolInitIndex:J})):Y++}else if(K&q){if(Y>0)Y--;else if(Z>0){for($=0;!W[W.length-1]._isolate;)W.pop();var ne=W[W.length-1]._isolInitIndex;null!=ne&&(p.set(ne,J),p.set(J,ne)),W.pop(),Z--}X=W[W.length-1],d[J]=X._level,X._override&&h(J,X._override)}else K&L?(0===Y&&($>0?$--:!X._isolate&&W.length>1&&(W.pop(),X=W[W.length-1])),d[J]=X._level):K&C&&(d[J]=m.level);else d[J]=X._level,X._override&&K!==R&&h(J,X._override)}for(var re=[],ie=null,ae=m.start;ae<=m.end;ae++){var oe=n[ae];if(!(oe&s)){var se=d[ae],le=oe&i,ue=oe===q;ie&&se===ie._level?(ie._end=ae,ie._endsWithIsolInit=le):re.push(ie={_start:ae,_end:ae,_level:se,_startsWithPDI:ue,_endsWithIsolInit:le})}}for(var ce=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!p.has(de._start)){for(var pe=[ie=de],fe=void 0;ie&&ie._endsWithIsolInit&&null!=(fe=p.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===fe){pe.push(ie=re[me]);break}for(var ge=[],ve=0;ve<pe.length;ve++)for(var ye=pe[ve],xe=ye._start;xe<=ye._end;xe++)ge.push(xe);for(var be=d[ge[0]],we=m.level,Se=ge[0]-1;Se>=0;Se--)if(!(n[Se]&s)){we=d[Se];break}var _e=ge[ge.length-1],Me=d[_e],Ee=m.level;if(!(n[_e]&i))for(var Ae=_e+1;Ae<=m.end;Ae++)if(!(n[Ae]&s)){Ee=d[Ae];break}ce.push({_seqIndices:ge,_sosType:Math.max(we,be)%2?S:w,_eosType:Math.max(Ee,Me)%2?S:w})}}for(var Te=0;Te<ce.length;Te++){var Ce=ce[Te],De=Ce._seqIndices,Ne=Ce._sosType,Re=Ce._eosType,ke=1&d[De[0]]?S:w;if(u.get(k))for(var Ie=0;Ie<De.length;Ie++){var Fe=De[Ie];if(n[Fe]&k){for(var Pe=Ne,Oe=Ie-1;Oe>=0;Oe--)if(!(n[De[Oe]]&s)){Pe=n[De[Oe]];break}h(Fe,Pe&(i|q)?N:Pe)}}if(u.get(_))for(var Be=0;Be<De.length;Be++){var Le=De[Be];if(n[Le]&_)for(var ze=Be-1;ze>=-1;ze--){var Ue=-1===ze?Ne:n[De[ze]];if(Ue&a){Ue===I&&h(Le,A);break}}}if(u.get(I))for(var He=0;He<De.length;He++){var qe=De[He];n[qe]&I&&h(qe,S)}if(u.get(M)||u.get(T))for(var Ve=1;Ve<De.length-1;Ve++){var je=De[Ve];if(n[je]&(M|T)){for(var Ge=0,We=0,Xe=Ve-1;Xe>=0&&(Ge=n[De[Xe]])&s;Xe--);for(var Ye=Ve+1;Ye<De.length&&(We=n[De[Ye]])&s;Ye++);Ge===We&&(n[je]===M?Ge===_:Ge&(_|A))&&h(je,Ge)}}if(u.get(_))for(var $e=0;$e<De.length;$e++){var Ze=De[$e];if(n[Ze]&_){for(var Je=$e-1;Je>=0&&n[De[Je]]&(E|s);Je--)h(De[Je],_);for($e++;$e<De.length&&n[De[$e]]&(E|s|_);$e++)n[De[$e]]!==_&&h(De[$e],_)}}if(u.get(E)||u.get(M)||u.get(T))for(var Ke=0;Ke<De.length;Ke++){var Qe=De[Ke];if(n[Qe]&(E|M|T)){h(Qe,N);for(var et=Ke-1;et>=0&&n[De[et]]&s;et--)h(De[et],N);for(var tt=Ke+1;tt<De.length&&n[De[tt]]&s;tt++)h(De[tt],N)}}if(u.get(_))for(var nt=0,rt=Ne;nt<De.length;nt++){var it=De[nt],at=n[it];at&_?rt===w&&h(it,w):at&a&&(rt=at)}if(u.get(o)){for(var ot=S|_|A,st=ot|w,lt=[],ut=[],ct=0;ct<De.length;ct++)if(n[De[ct]]&o){var ht=e[De[ct]],dt=void 0;if(null!==y(ht)){if(!(ut.length<63))break;ut.push({char:ht,seqIndex:ct})}else if(null!==(dt=x(ht)))for(var pt=ut.length-1;pt>=0;pt--){var ft=ut[pt].char;if(ft===dt||ft===x(b(ht))||y(b(ft))===ht){lt.push([ut[pt].seqIndex,ct]),ut.length=pt;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var gt=lt[mt],vt=gt[0],yt=gt[1],xt=!1,bt=0,wt=vt+1;wt<yt;wt++){var St=De[wt];if(n[St]&st){xt=!0;var _t=n[St]&ot?S:w;if(_t===ke){bt=_t;break}}}if(xt&&!bt){bt=Ne;for(var Mt=vt-1;Mt>=0;Mt--){var Et=De[Mt];if(n[Et]&st){var At=n[Et]&ot?S:w;bt=At!==ke?At:ke;break}}}if(bt){if(n[De[vt]]=n[De[yt]]=bt,bt!==ke)for(var Tt=vt+1;Tt<De.length;Tt++)if(!(n[De[Tt]]&s)){c(e[De[Tt]])&k&&(n[De[Tt]]=bt);break}if(bt!==ke)for(var Ct=yt+1;Ct<De.length;Ct++)if(!(n[De[Ct]]&s)){c(e[De[Ct]])&k&&(n[De[Ct]]=bt);break}}}for(var Dt=0;Dt<De.length;Dt++)if(n[De[Dt]]&o){for(var Nt=Dt,Rt=Dt,kt=Ne,It=Dt-1;It>=0;It--){if(!(n[De[It]]&s)){kt=n[De[It]]&ot?S:w;break}Nt=It}for(var Ft=Re,Pt=Dt+1;Pt<De.length;Pt++){if(!(n[De[Pt]]&(o|s))){Ft=n[De[Pt]]&ot?S:w;break}Rt=Pt}for(var Ot=Nt;Ot<=Rt;Ot++)n[De[Ot]]=kt===Ft?kt:ke;Dt=Rt}}}for(var Bt=m.start;Bt<=m.end;Bt++){var Lt=d[Bt],zt=n[Bt];if(1&Lt?zt&(w|_|A)&&d[Bt]++:zt&S?d[Bt]++:zt&(A|_)&&(d[Bt]+=2),zt&s&&(d[Bt]=0===Bt?m.level:d[Bt-1]),Bt===m.end||c(e[Bt])&(D|C))for(var Ut=Bt;Ut>=0&&c(e[Ut])&l;Ut--)d[Ut]=m.level}}return{levels:d,paragraphs:f};function Ht(t,r){for(var a=t;a<e.length;a++){var o=n[a];if(o&(S|I))return 1;if(o&(C|w)||r&&o===q)return 0;if(o&i){var s=qt(a);a=-1===s?e.length:s}}return 0}function qt(t){for(var r=1,a=t+1;a<e.length;a++){var o=n[a];if(o&C)break;if(o&q){if(0===--r)return a}else o&i&&r++}return-1}},e.getMirroredCharacter=j,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var a=new Map,o=n;o<=r;o++)if(1&t[o]){var s=j(e[o]);null!==s&&a.set(o,s)}return a},e.getReorderSegments=G,e.getReorderedIndices=W,e.getReorderedString=function(e,t,n,r){var i=W(e,t,n,r),a=[].concat(e);return i.forEach((function(n,r){a[r]=(1&t.levels[n]?j(e[n]):null)||e[n]})),a.join("")},e.openingToClosingBracket=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e},NS=/\bvoid\s+main\s*\(\s*\)\s*{/g;function RS(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=bv[t];return n?RS(n):e}))}const kS=[];for(let n=0;n<256;n++)kS[n]=(n<16?"0":"")+n.toString(16);const IS=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},FS=Date.now(),PS=new WeakMap,OS=new Map;let BS=1e10;function LS(e,t){const n=function(e){const t=JSON.stringify(e,US);let n=qS.get(t);null==n&&qS.set(t,n=++HS);return n}(t);let r=PS.get(e);if(r||PS.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,a=function(r,a){e.onBeforeCompile.call(this,r,a);const o=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=OS[o];if(!s){const e=function(e,t,n,r){let{vertexShader:i,fragmentShader:a}=t,{vertexDefs:o,vertexMainIntro:s,vertexMainOutro:l,vertexTransform:u,fragmentDefs:c,fragmentMainIntro:h,fragmentMainOutro:d,fragmentColorTransform:p,customRewriter:f,timeUniform:m}=n;o=o||"",s=s||"",l=l||"",c=c||"",h=h||"",d=d||"",(u||f)&&(i=RS(i));(p||f)&&(a=a.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"),a=RS(a));if(f){let e=f({vertexShader:i,fragmentShader:a});i=e.vertexShader,a=e.fragmentShader}if(p){let e=[];a=a.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),d=`${p}\n${e.join("\n")}\n${d}`}if(m){const e=`\nuniform float ${m};\n`;o=e+o,c=e+c}u&&(i=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${i}\n`,o=`${o}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${u}\n}\n`,s=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${s}\n`,i=i.replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`)),e.map&&e.map.channel>0||(i=i.replace(/\bMAP_UV\b/g,`troika_uv_${r}`)));return i=zS(i,r,o,s,l),a=zS(a,r,c,h,d),{vertexShader:i,fragmentShader:a}}(this,r,t,n);s=OS[o]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,IS(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-FS}}),this[i]&&this[i](r)},o=function(){return s(t.chained?e:e.clone())},s=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:BS++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(kS[255&e]+kS[e>>8&255]+kS[e>>16&255]+kS[e>>24&255]+"-"+kS[255&t]+kS[t>>8&255]+"-"+kS[t>>16&15|64]+kS[t>>24&255]+"-"+kS[63&n|128]+kS[n>>8&255]+"-"+kS[n>>16&255]+kS[n>>24&255]+kS[255&r]+kS[r>>8&255]+kS[r>>16&255]+kS[r>>24&255]).toUpperCase()}(),i.uniforms=IS({},r.uniforms,t.uniforms),i.defines=IS({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=IS({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:o},isDerivedMaterial:{value:!0},type:{get:()=>e.type,set:t=>{e.type=t}},isDerivedFrom:{writable:!0,configurable:!0,value:function(e){const t=this.baseMaterial;return e===t||t.isDerivedMaterial&&t.isDerivedFrom(e)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>a,set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(IS(this.extensions,t.extensions),IS(this.defines,t.defines),IS(this.uniforms,qc.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=LS(e.isDerivedMaterial?e.getDepthMaterial():new Tf({depthPacking:Go}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=LS(e.isDerivedMaterial?e.getDistanceMaterial():new Cf,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=o,new o}function zS(e,t,n,r,i){return(r||i||n)&&(e=e.replace(NS,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function US(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}let HS=0;const qS=new Map;const VS=ES({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var a=n.readUint(r,i);i+=4;for(var o=[],s=0;s<a;s++){var l=n.readUint(r,i);i+=4,o.push(t._readFont(r,l))}return o}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},u=0;u<a;u++){var c=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,l[c]={offset:h,length:d}}for(u=0;u<o.length;u++){var p=o[u];l[p]&&(s[p.trim()]=t[p.trim()].parse(e,l[p].offset,l[p].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,a=i.readUshort(e,r+4),o=r+12,s=0;s<a;s++){var l=i.readASCII(e,o,4);o+=4,i.readUint(e,o),o+=4;var u=i.readUint(e,o);if(o+=4,i.readUint(e,o),o+=4,l==n)return u}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],a=0;a<r;a++)i.push(t._bin.readUshort(e,n+2*a));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var a=e[t++]<<8|e[t++];r+=String.fromCharCode(a)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,a){var o=t._bin,s={},l=n;o.readFixed(e,n),n+=4;var u=o.readUshort(e,n);n+=2;var c=o.readUshort(e,n);n+=2;var h=o.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+u),s.featureList=t._lctf.readFeatureList(e,l+c),s.lookupList=t._lctf.readLookupList(e,l+h,a),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,a=n,o=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var u=i.readUshort(e,n);n+=2;var c=t._lctf.readLookupTable(e,a+u,r);o.push(c)}return o},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,a=n,o={tabs:[]};o.ltype=i.readUshort(e,n),n+=2,o.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=o.ltype,u=0;u<s;u++){var c=i.readUshort(e,n);n+=2;var h=r(e,l,a+c,o);o.tabs.push(h)}return o},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],a=r.readUshort(e,n);if(n+=2,1==a){var o=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(o+l),i.push(o+l),i.push(r.readUshort(e,n)),n+=2}if(2==a){var u=r.readUshort(e,n);for(n+=2,l=0;l<u;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,a)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*a)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,a=[],o=r.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2;var c=t._lctf.readFeatureTable(e,i+u);c.tag=l.trim(),a.push(c)}return a},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,a={},o=r.readUshort(e,n);n+=2,o>0&&(a.featureParams=i+o);var s=r.readUshort(e,n);n+=2,a.tab=[];for(var l=0;l<s;l++)a.tab.push(r.readUshort(e,n+2*l));return a},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,a={},o=r.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,a[l.trim()]=t._lctf.readScriptTable(e,i+u)}return a},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,a={},o=r.readUshort(e,n);n+=2,o>0&&(a.default=t._lctf.readLangSysTable(e,i+o));var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var u=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,a[u.trim()]=t._lctf.readLangSysTable(e,i+c)}return a},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,a),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var a=[];n=t.CFF.readIndex(e,n,a);for(var o=[],s=0;s<a.length-1;s++)o.push(i.readASCII(e,n+a[s],a[s+1]-a[s]));n+=a[a.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var u=[];for(s=0;s<l.length-1;s++)u.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var c=u[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(i.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,c),c.CharStrings){n=c.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var p=[];for(s=0;s<h.length-1;s++)p.push(i.readBytes(e,n+h[s],h[s+1]-h[s]));c.CharStrings=p}if(c.ROS){n=c.FDArray;var f=[];for(n=t.CFF.readIndex(e,n,f),c.FDArray=[],s=0;s<f.length-1;s++){var m=t.CFF.readDict(e,n+f[s],n+f[s+1]);t.CFF._readFDict(e,m,d),c.FDArray.push(m)}n+=f[f.length-1],n=c.FDSelect,c.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var v=i.readUshort(e,n);for(n+=2,s=0;s<v+1;s++)c.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return c.Encoding&&(c.Encoding=t.CFF.readEncoding(e,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=t.CFF.readCharset(e,c.charset,c.CharStrings.length)),t.CFF._readFDict(e,c,d),c},t.CFF._readFDict=function(e,n,r){var i;for(var a in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(a)&&(n[a]=r[n[a]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,a=[];n=t.CFF.readIndex(e,n,a);var o,s=a.length;o=s<1240?107:s<33900?1131:32768,r.Bias=o,r.Subrs=[];for(var l=0;l<a.length-1;l++)r.Subrs.push(i.readBytes(e,n+a[l],a[l+1]-a[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],a=e[n];if(n++,0!=a)throw"error: unknown encoding format: "+a;var o=e[n];n++;for(var s=0;s<o;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,a=[".notdef"],o=e[n];if(n++,0==o)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,a.push(l)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;a.length<r;){l=i.readUshort(e,n),n+=2;var u=0;for(1==o?(u=e[n],n++):(u=i.readUshort(e,n),n+=2),s=0;s<=u;s++)a.push(l),l++}}return a},t.CFF.readIndex=function(e,n,r){var i=t._bin,a=i.readUshort(e,n)+1,o=e[n+=2];if(n++,1==o)for(var s=0;s<a;s++)r.push(e[n+s]);else if(2==o)for(s=0;s<a;s++)r.push(i.readUshort(e,n+2*s));else if(3==o)for(s=0;s<a;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=a)throw"unsupported offset size: "+o+", count: "+a;return(n+=a*o)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,a=e[n],o=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,u=null;a<=20&&(l=a,s=1),12==a&&(l=100*a+o,s=2),21<=a&&a<=27&&(l=a,s=1),28==a&&(u=i.readShort(e,n+1),s=3),29<=a&&a<=31&&(l=a,s=1),32<=a&&a<=246&&(u=a-139,s=1),247<=a&&a<=250&&(u=256*(a-247)+o+108,s=2),251<=a&&a<=254&&(u=256*-(a-251)-o-108,s=2),255==a&&(u=i.readInt(e,n+1)/65535,s=5),r.val=null!=u?u:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,a=t._bin,o=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var u=1,c=null,h=null;s<=20&&(c=s,u=1),12==s&&(c=100*s+l,u=2),19!=s&&20!=s||(c=s,u=2),21<=s&&s<=27&&(c=s,u=1),28==s&&(h=a.readShort(e,n+1),u=3),29<=s&&s<=31&&(c=s,u=1),32<=s&&s<=246&&(h=s-139,u=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,u=2),255==s&&(h=a.readInt(e,n+1)/65535,u=5),o.push(null!=h?h:"o"+c),n+=u}return o},t.CFF.readDict=function(e,n,r){for(var i=t._bin,a={},o=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var u=1,c=null,h=null;if(28==s&&(h=i.readShort(e,n+1),u=3),29==s&&(h=i.readInt(e,n+1),u=5),32<=s&&s<=246&&(h=s-139,u=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,u=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,u=2),255==s)throw h=i.readInt(e,n+1)/65535,u=5,"unknown number";if(30==s){var d=[];for(u=1;;){var p=e[n+u];u++;var f=p>>4,m=15&p;if(15!=f&&d.push(f),15!=m&&d.push(m),15==m)break}for(var g="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)g+=v[d[y]];h=parseFloat(g)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],u=1,12==s&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],u=2)),null!=c?(a[c]=1==o.length?o[0]:o,o=[]):o.push(h),n+=u}return a},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,a={};i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2;var s=[];a.tables=[];for(var l=0;l<o;l++){var u=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+u+"e"+c,p=s.indexOf(h);if(-1==p){var f;p=a.tables.length,s.push(h);var m=i.readUshort(e,h);0==m?f=t.cmap.parse0(e,h):4==m?f=t.cmap.parse4(e,h):6==m?f=t.cmap.parse6(e,h):12==m?f=t.cmap.parse12(e,h):console.debug("unknown format: "+m,u,c,h),a.tables.push(f)}if(null!=a[d])throw"multiple tables for one platform+encoding";a[d]=p}return a},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var o=0;o<a-6;o++)i.map.push(e[n+o]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,a={};a.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;a.searchRange=r.readUshort(e,n),n+=2,a.entrySelector=r.readUshort(e,n),n+=2,a.rangeShift=r.readUshort(e,n),n+=2,a.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,a.startCount=r.readUshorts(e,n,l),n+=2*l,a.idDelta=[];for(var u=0;u<l;u++)a.idDelta.push(r.readShort(e,n)),n+=2;for(a.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,a.glyphIdArray=[];n<i+o;)a.glyphIdArray.push(r.readUshort(e,n)),n+=2;return a},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var o=0;o<a;o++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var a=r.readUint(e,n);n+=4,i.groups=[];for(var o=0;o<a;o++){var s=n+12*o,l=r.readUint(e,s+0),u=r.readUint(e,s+4),c=r.readUint(e,s+8);i.groups.push([l,u,c])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],a=0;a<r.maxp.numGlyphs;a++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,a=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var o={};if(o.noc=r.readShort(i,a),a+=2,o.xMin=r.readShort(i,a),a+=2,o.yMin=r.readShort(i,a),a+=2,o.xMax=r.readShort(i,a),a+=2,o.yMax=r.readShort(i,a),a+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var s=0;s<o.noc;s++)o.endPts.push(r.readUshort(i,a)),a+=2;var l=r.readUshort(i,a);if(a+=2,i.length-a<l)return null;o.instructions=r.readBytes(i,a,l),a+=l;var u=o.endPts[o.noc-1]+1;for(o.flags=[],s=0;s<u;s++){var c=i[a];if(a++,o.flags.push(c),0!=(8&c)){var h=i[a];a++;for(var d=0;d<h;d++)o.flags.push(c),s++}}for(o.xs=[],s=0;s<u;s++){var p=0!=(2&o.flags[s]),f=0!=(16&o.flags[s]);p?(o.xs.push(f?i[a]:-i[a]),a++):f?o.xs.push(0):(o.xs.push(r.readShort(i,a)),a+=2)}for(o.ys=[],s=0;s<u;s++)p=0!=(4&o.flags[s]),f=0!=(32&o.flags[s]),p?(o.ys.push(f?i[a]:-i[a]),a++):f?o.ys.push(0):(o.ys.push(r.readShort(i,a)),a+=2);var m=0,g=0;for(s=0;s<u;s++)m+=o.xs[s],g+=o.ys[s],o.xs[s]=m,o.ys[s]=g}else{var v;o.parts=[];do{v=r.readUshort(i,a),a+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(y),y.glyphIndex=r.readUshort(i,a),a+=2,1&v){var x=r.readShort(i,a);a+=2;var b=r.readShort(i,a);a+=2}else x=r.readInt8(i,a),a++,b=r.readInt8(i,a),a++;2&v?(y.m.tx=x,y.m.ty=b):(y.p1=x,y.p2=b),8&v?(y.m.a=y.m.d=r.readF2dot14(i,a),a+=2):64&v?(y.m.a=r.readF2dot14(i,a),a+=2,y.m.d=r.readF2dot14(i,a),a+=2):128&v&&(y.m.a=r.readF2dot14(i,a),a+=2,y.m.b=r.readF2dot14(i,a),a+=2,y.m.c=r.readF2dot14(i,a),a+=2,y.m.d=r.readF2dot14(i,a),a+=2)}while(32&v);if(256&v){var w=r.readUshort(i,a);for(a+=2,o.instr=[],s=0;s<w;s++)o.instr.push(i[a]),a++}}return o},t.GDEF={},t.GDEF.parse=function(e,n,r,i){var a=n;n+=4;var o=t._bin.readUshort(e,n);return{glyphClassDef:0===o?null:t._lctf.readClassDef(e,a+o)}},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var a=t._bin,o=r,s={};if(s.fmt=a.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=a.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+o)}if(1==n&&1==s.fmt){var u=a.readUshort(e,r);r+=2,0!=u&&(s.pos=t.GPOS.readValueRecord(e,r,u))}else if(2==n&&s.fmt>=1&&s.fmt<=2){u=a.readUshort(e,r),r+=2;var c=a.readUshort(e,r);r+=2;var h=t._lctf.numOfOnes(u),d=t._lctf.numOfOnes(c);if(1==s.fmt){s.pairsets=[];var p=a.readUshort(e,r);r+=2;for(var f=0;f<p;f++){var m=o+a.readUshort(e,r);r+=2;var g=a.readUshort(e,m);m+=2;for(var v=[],y=0;y<g;y++){var x=a.readUshort(e,m);m+=2,0!=u&&(E=t.GPOS.readValueRecord(e,m,u),m+=2*h),0!=c&&(A=t.GPOS.readValueRecord(e,m,c),m+=2*d),v.push({gid2:x,val1:E,val2:A})}s.pairsets.push(v)}}if(2==s.fmt){var b=a.readUshort(e,r);r+=2;var w=a.readUshort(e,r);r+=2;var S=a.readUshort(e,r);r+=2;var _=a.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,o+b),s.classDef2=t._lctf.readClassDef(e,o+w),s.matrix=[],f=0;f<S;f++){var M=[];for(y=0;y<_;y++){var E=null,A=null;0!=u&&(E=t.GPOS.readValueRecord(e,r,u),r+=2*h),0!=c&&(A=t.GPOS.readValueRecord(e,r,c),r+=2*d),M.push({val1:E,val2:A})}s.matrix.push(M)}}}else if(4==n&&1==s.fmt)s.markCoverage=t._lctf.readCoverage(e,a.readUshort(e,r)+o),s.baseCoverage=t._lctf.readCoverage(e,a.readUshort(e,r+2)+o),s.markClassCount=a.readUshort(e,r+4),s.markArray=t.GPOS.readMarkArray(e,a.readUshort(e,r+6)+o),s.baseArray=t.GPOS.readBaseArray(e,a.readUshort(e,r+8)+o,s.markClassCount);else if(6==n&&1==s.fmt)s.mark1Coverage=t._lctf.readCoverage(e,a.readUshort(e,r)+o),s.mark2Coverage=t._lctf.readCoverage(e,a.readUshort(e,r+2)+o),s.markClassCount=a.readUshort(e,r+4),s.mark1Array=t.GPOS.readMarkArray(e,a.readUshort(e,r+6)+o),s.mark2Array=t.GPOS.readBaseArray(e,a.readUshort(e,r+8)+o,s.markClassCount);else{if(9==n&&1==s.fmt){var T=a.readUshort(e,r);r+=2;var C=a.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=T;else if(i.ltype!=T)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,o+C)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,a=[];return a.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,a.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,a.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,a.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,a},t.GPOS.readBaseArray=function(e,n,r){var i=t._bin,a=[],o=n,s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){for(var u=[],c=0;c<r;c++)u.push(t.GPOS.readAnchorRecord(e,o+i.readUshort(e,n))),n+=2;a.push(u)}return a},t.GPOS.readMarkArray=function(e,n){var r=t._bin,i=[],a=n,o=r.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=t.GPOS.readAnchorRecord(e,r.readUshort(e,n+2)+a);l.markClass=r.readUshort(e,n),i.push(l),n+=4}return i},t.GPOS.readAnchorRecord=function(e,n){var r=t._bin,i={};return i.fmt=r.readUshort(e,n),i.x=r.readShort(e,n+2),i.y=r.readShort(e,n+4),i},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var a=t._bin,o=r,s={};if(s.fmt=a.readUshort(e,r),r+=2,1!=n&&2!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||2==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=a.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,o+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=a.readShort(e,r),r+=2;else if(2==s.fmt){var u=a.readUshort(e,r);r+=2,s.newg=a.readUshorts(e,r,u),r+=2*s.newg.length}}else if(2==n&&1==s.fmt){u=a.readUshort(e,r),r+=2,s.seqs=[];for(var c=0;c<u;c++){var h=a.readUshort(e,r)+o;r+=2;var d=a.readUshort(e,h);s.seqs.push(a.readUshorts(e,h+2,d))}}else if(4==n)for(s.vals=[],u=a.readUshort(e,r),r+=2,c=0;c<u;c++){var p=a.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,o+p))}else if(5==n&&2==s.fmt){if(2==s.fmt){var f=a.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,o+f),s.scset=[];var m=a.readUshort(e,r);for(r+=2,c=0;c<m;c++){var g=a.readUshort(e,r);r+=2,s.scset.push(0==g?null:t.GSUB.readSubClassSet(e,o+g))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(c=0;c<3;c++){u=a.readUshort(e,r),r+=2;for(var v=[],y=0;y<u;y++)v.push(t._lctf.readCoverage(e,o+a.readUshort(e,r+2*y)));r+=2*u,0==c&&(s.backCvg=v),1==c&&(s.inptCvg=v),2==c&&(s.ahedCvg=v)}u=a.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,u)}}else{if(7==n&&1==s.fmt){var x=a.readUshort(e,r);r+=2;var b=a.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=x;else if(i.ltype!=x)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,o+b)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,a=[],o=r(e,n);n+=2;for(var s=0;s<o;s++){var l=r(e,n);n+=2,a.push(t.GSUB.readSubClassRule(e,i+l))}return a},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},a=r(e,n),o=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<a-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,o),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,a=[],o=0;o<r;o++)a.push(i(e,n),i(e,n+2)),n+=4;return a},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,a=[],o=r.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=r.readUshort(e,n);n+=2,a.push(t.GSUB.readChainSubClassRule(e,i+l))}return a},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},a=["backtrack","input","lookahead"],o=0;o<a.length;o++){var s=r.readUshort(e,n);n+=2,1==o&&s--,i[a[o]]=r.readUshorts(e,n,s),n+=2*i[a[o]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,a=[],o=r.readUshort(e,n);n+=2;for(var s=0;s<o;s++){var l=r.readUshort(e,n);n+=2,a.push(t.GSUB.readLigature(e,i+l))}return a},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2;for(var o=0;o<a-1;o++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,a={};return i.readFixed(e,n),n+=4,a.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,a.flags=i.readUshort(e,n),n+=2,a.unitsPerEm=i.readUshort(e,n),n+=2,a.created=i.readUint64(e,n),n+=8,a.modified=i.readUint64(e,n),n+=8,a.xMin=i.readShort(e,n),n+=2,a.yMin=i.readShort(e,n),n+=2,a.xMax=i.readShort(e,n),n+=2,a.yMax=i.readShort(e,n),n+=2,a.macStyle=i.readUshort(e,n),n+=2,a.lowestRecPPEM=i.readUshort(e,n),n+=2,a.fontDirectionHint=i.readShort(e,n),n+=2,a.indexToLocFormat=i.readShort(e,n),n+=2,a.glyphDataFormat=i.readShort(e,n),n+=2,a},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,a={};return i.readFixed(e,n),n+=4,a.ascender=i.readShort(e,n),n+=2,a.descender=i.readShort(e,n),n+=2,a.lineGap=i.readShort(e,n),n+=2,a.advanceWidthMax=i.readUshort(e,n),n+=2,a.minLeftSideBearing=i.readShort(e,n),n+=2,a.minRightSideBearing=i.readShort(e,n),n+=2,a.xMaxExtent=i.readShort(e,n),n+=2,a.caretSlopeRise=i.readShort(e,n),n+=2,a.caretSlopeRun=i.readShort(e,n),n+=2,a.caretOffset=i.readShort(e,n),n+=2,n+=8,a.metricDataFormat=i.readShort(e,n),n+=2,a.numberOfHMetrics=i.readUshort(e,n),n+=2,a},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var a=t._bin,o={aWidth:[],lsBearing:[]},s=0,l=0,u=0;u<i.maxp.numGlyphs;u++)u<i.hhea.numberOfHMetrics&&(s=a.readUshort(e,n),n+=2,l=a.readShort(e,n),n+=2),o.aWidth.push(s),o.lsBearing.push(l);return o},t.kern={},t.kern.parse=function(e,n,r,i){var a=t._bin,o=a.readUshort(e,n);if(n+=2,1==o)return t.kern.parseV1(e,n-2,r,i);var s=a.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},u=0;u<s;u++){n+=2,r=a.readUshort(e,n),n+=2;var c=a.readUshort(e,n);n+=2;var h=c>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var a=t._bin;a.readFixed(e,n),n+=4;var o=a.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<o;l++){a.readUint(e,n),n+=4;var u=a.readUshort(e,n);n+=2,a.readUshort(e,n),n+=2;var c=u>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,a=-1,o=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<o;s++){var l=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var c=i.readShort(e,n);n+=2,l!=a&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(u),h.vals.push(c),a=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var a=t._bin,o=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var u=0;u<l;u++)o.push(a.readUshort(e,n+(u<<1))<<1);if(1==s)for(u=0;u<l;u++)o.push(a.readUint(e,n+(u<<2)));return o},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,a={},o=i.readUint(e,n);return n+=4,a.numGlyphs=i.readUshort(e,n),n+=2,65536==o&&(a.maxPoints=i.readUshort(e,n),n+=2,a.maxContours=i.readUshort(e,n),n+=2,a.maxCompositePoints=i.readUshort(e,n),n+=2,a.maxCompositeContours=i.readUshort(e,n),n+=2,a.maxZones=i.readUshort(e,n),n+=2,a.maxTwilightPoints=i.readUshort(e,n),n+=2,a.maxStorage=i.readUshort(e,n),n+=2,a.maxFunctionDefs=i.readUshort(e,n),n+=2,a.maxInstructionDefs=i.readUshort(e,n),n+=2,a.maxStackElements=i.readUshort(e,n),n+=2,a.maxSizeOfInstructions=i.readUshort(e,n),n+=2,a.maxComponentElements=i.readUshort(e,n),n+=2,a.maxComponentDepth=i.readUshort(e,n),n+=2),a},t.name={},t.name.parse=function(e,n,r){var i=t._bin,a={};i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],u=n+=2,c=0;c<o;c++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var v,y=l[f],x=u+12*o+g;if(0==h)v=i.readUnicode(e,x,m/2);else if(3==h&&0==d)v=i.readUnicode(e,x,m/2);else if(0==d)v=i.readASCII(e,x,m);else if(1==d)v=i.readUnicode(e,x,m/2);else if(3==d)v=i.readUnicode(e,x,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;v=i.readASCII(e,x,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var b="p"+h+","+p.toString(16);null==a[b]&&(a[b]={}),a[b][void 0!==y?y:f]=v,a[b]._lang=p}for(var w in a)if(null!=a[w].postScriptName&&1033==a[w]._lang)return a[w];for(var w in a)if(null!=a[w].postScriptName&&0==a[w]._lang)return a[w];for(var w in a)if(null!=a[w].postScriptName&&3084==a[w]._lang)return a[w];for(var w in a)if(null!=a[w].postScriptName)return a[w];for(var w in a){s=w;break}return console.debug("returning name table with languageID "+a[s]._lang),a[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var a={};if(0==i)t["OS/2"].version0(e,n,a);else if(1==i)t["OS/2"].version1(e,n,a);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,a);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,a)}return a},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,a={};return a.version=i.readFixed(e,n),n+=4,a.italicAngle=i.readFixed(e,n),n+=4,a.underlinePosition=i.readShort(e,n),n+=2,a.underlineThickness=i.readShort(e,n),n+=2,a},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var a=-1,o=0;o<i.endCount.length;o++)if(t<=i.endCount[o]){a=o;break}return-1==a||i.startCount[a]>t?0:65535&(0!=i.idRangeOffset[a]?i.glyphIdArray[t-i.startCount[a]+(i.idRangeOffset[a]>>1)-(i.idRangeOffset.length-a)]:t+i.idDelta[a])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(o=0;o<i.groups.length;o++){var s=i.groups[o];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var a={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},o=e.CFF,s=e.CFF.Private;if(o.ROS){for(var l=0;o.FDSelect[l+2]<=n;)l+=2;s=o.FDArray[o.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],a,o,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,a=e.endPts[r],o=i;o<=a;o++){var s=o==i?a:o-1,l=o==a?i:o+1,u=1&e.flags[o],c=1&e.flags[s],h=1&e.flags[l],d=e.xs[o],p=e.ys[o];if(o==i)if(u){if(!c){t.U.P.moveTo(n,d,p);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else c?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+p)/2);u?c&&t.U.P.lineTo(n,d,p):h?t.U.P.qcurveTo(n,d,p,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,p,(d+e.xs[l])/2,(p+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var a={cmds:[],crds:[]},o=e.parts[i];t.U._drawGlyf(o.glyphIndex,n,a);for(var s=o.m,l=0;l<a.crds.length;l+=2){var u=a.crds[l],c=a.crds[l+1];r.crds.push(u*s.a+c*s.b+s.tx),r.crds.push(u*s.c+c*s.d+s.ty)}for(l=0;l<a.cmds.length;l++)r.cmds.push(a.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U._applySubs=function(e,n,r,i){for(var a=e.length-n-1,o=0;o<r.tabs.length;o++)if(null!=r.tabs[o]){var s,l=r.tabs[o];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var u=l.vals[s],c=0;c<u.length;c++){var h=u[c],d=h.chain.length;if(!(d>a)){for(var p=!0,f=0,m=0;m<d;m++){for(;-1==e[n+f+(1+m)];)f++;h.chain[m]!=e[n+f+(1+m)]&&(p=!1)}if(p){for(e[n]=h.nglyph,m=0;m<d+f;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var g=t._lctf.getInterval(l.cDef,e[n]),v=l.cDef[g+2],y=l.scset[v],x=0;x<y.length;x++){var b=y[x],w=b.input;if(!(w.length>a)){for(p=!0,m=0;m<w.length;m++){var S=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==g&&l.cDef[S+2]!=w[m]){p=!1;break}}if(p){var _=b.substLookupRecords;for(c=0;c<_.length;c+=2)_[c],_[c+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var M=l.lookupRec;for(x=0;x<M.length;x+=2){g=M[x];var E=i[M[x+1]];t.U._applySubs(e,n+g,E,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},a=0,o=0;o<n.length;o++){var s=n[o];if(-1!=s){for(var l=o<n.length-1&&-1!=n[o+1]?n[o+1]:0,u=t.U.glyphToPath(e,s),c=0;c<u.crds.length;c+=2)i.crds.push(u.crds[c]+a),i.crds.push(u.crds[c+1]);for(r&&i.cmds.push(r),c=0;c<u.cmds.length;c++)i.cmds.push(u.cmds[c]);r&&i.cmds.push("X"),a+=e.hmtx.aWidth[s],o<n.length-1&&(a+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,a,o){e.cmds.push("C"),e.crds.push(t,n,r,i,a,o)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,a){for(var o=n.stack,s=n.nStems,l=n.haveWidth,u=n.width,c=n.open,h=0,d=n.x,p=n.y,f=0,m=0,g=0,v=0,y=0,x=0,b=0,w=0,S=0,_=0,M={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,M);var E=M.val;if(h+=M.size,"o1"==E||"o18"==E)o.length%2!=0&&!l&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o3"==E||"o23"==E)o.length%2!=0&&!l&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0;else if("o4"==E)o.length>1&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),c&&t.U.P.closePath(a),p+=o.pop(),t.U.P.moveTo(a,d,p),c=!0;else if("o5"==E)for(;o.length>0;)d+=o.shift(),p+=o.shift(),t.U.P.lineTo(a,d,p);else if("o6"==E||"o7"==E)for(var A=o.length,T="o6"==E,C=0;C<A;C++){var D=o.shift();T?d+=D:p+=D,T=!T,t.U.P.lineTo(a,d,p)}else if("o8"==E||"o24"==E){A=o.length;for(var N=0;N+6<=A;)f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),d=g+o.shift(),p=v+o.shift(),t.U.P.curveTo(a,f,m,g,v,d,p),N+=6;"o24"==E&&(d+=o.shift(),p+=o.shift(),t.U.P.lineTo(a,d,p))}else{if("o11"==E)break;if("o1234"==E||"o1235"==E||"o1236"==E||"o1237"==E)"o1234"==E&&(m=p,g=(f=d+o.shift())+o.shift(),_=v=m+o.shift(),x=v,w=p,d=(b=(y=(S=g+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(a,f,m,g,v,S,_),t.U.P.curveTo(a,y,x,b,w,d,p)),"o1235"==E&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),S=g+o.shift(),_=v+o.shift(),y=S+o.shift(),x=_+o.shift(),b=y+o.shift(),w=x+o.shift(),d=b+o.shift(),p=w+o.shift(),o.shift(),t.U.P.curveTo(a,f,m,g,v,S,_),t.U.P.curveTo(a,y,x,b,w,d,p)),"o1236"==E&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),_=v=m+o.shift(),x=v,b=(y=(S=g+o.shift())+o.shift())+o.shift(),w=x+o.shift(),d=b+o.shift(),t.U.P.curveTo(a,f,m,g,v,S,_),t.U.P.curveTo(a,y,x,b,w,d,p)),"o1237"==E&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),S=g+o.shift(),_=v+o.shift(),y=S+o.shift(),x=_+o.shift(),b=y+o.shift(),w=x+o.shift(),Math.abs(b-d)>Math.abs(w-p)?d=b+o.shift():p=w+o.shift(),t.U.P.curveTo(a,f,m,g,v,S,_),t.U.P.curveTo(a,y,x,b,w,d,p));else if("o14"==E){if(o.length>0&&!l&&(u=o.shift()+r.nominalWidthX,l=!0),4==o.length){var R=o.shift(),k=o.shift(),I=o.shift(),F=o.shift(),P=t.CFF.glyphBySE(r,I),O=t.CFF.glyphBySE(r,F);t.U._drawCFF(r.CharStrings[P],n,r,i,a),n.x=R,n.y=k,t.U._drawCFF(r.CharStrings[O],n,r,i,a)}c&&(t.U.P.closePath(a),c=!1)}else if("o19"==E||"o20"==E)o.length%2!=0&&!l&&(u=o.shift()+i.nominalWidthX),s+=o.length>>1,o.length=0,l=!0,h+=s+7>>3;else if("o21"==E)o.length>2&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),p+=o.pop(),d+=o.pop(),c&&t.U.P.closePath(a),t.U.P.moveTo(a,d,p),c=!0;else if("o22"==E)o.length>1&&!l&&(u=o.shift()+i.nominalWidthX,l=!0),d+=o.pop(),c&&t.U.P.closePath(a),t.U.P.moveTo(a,d,p),c=!0;else if("o25"==E){for(;o.length>6;)d+=o.shift(),p+=o.shift(),t.U.P.lineTo(a,d,p);f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),d=g+o.shift(),p=v+o.shift(),t.U.P.curveTo(a,f,m,g,v,d,p)}else if("o26"==E)for(o.length%2&&(d+=o.shift());o.length>0;)f=d,m=p+o.shift(),d=g=f+o.shift(),p=(v=m+o.shift())+o.shift(),t.U.P.curveTo(a,f,m,g,v,d,p);else if("o27"==E)for(o.length%2&&(p+=o.shift());o.length>0;)m=p,g=(f=d+o.shift())+o.shift(),v=m+o.shift(),d=g+o.shift(),p=v,t.U.P.curveTo(a,f,m,g,v,d,p);else if("o10"==E||"o29"==E){var B="o10"==E?i:r;if(0==o.length)console.debug("error: empty stack");else{var L=o.pop(),z=B.Subrs[L+B.Bias];n.x=d,n.y=p,n.nStems=s,n.haveWidth=l,n.width=u,n.open=c,t.U._drawCFF(z,n,r,i,a),d=n.x,p=n.y,s=n.nStems,l=n.haveWidth,u=n.width,c=n.open}}else if("o30"==E||"o31"==E){var U=o.length,H=(N=0,"o31"==E);for(N+=U-(A=-3&U);N<A;)H?(m=p,g=(f=d+o.shift())+o.shift(),p=(v=m+o.shift())+o.shift(),A-N==5?(d=g+o.shift(),N++):d=g,H=!1):(f=d,m=p+o.shift(),g=f+o.shift(),v=m+o.shift(),d=g+o.shift(),A-N==5?(p=v+o.shift(),N++):p=v,H=!0),t.U.P.curveTo(a,f,m,g,v,d,p),N+=4}else{if("o"==(E+"").charAt(0))throw console.debug("Unknown operation: "+E,e),E;o.push(E)}}}n.x=d,n.y=p,n.nStems=s,n.haveWidth=l,n.width=u,n.open=c};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),a=0;a<31;++a)i[a]=t+=1<<e[a-1];var o=new r(i[30]);for(a=1;a<30;++a)for(var s=i[a];s<i[a+1];++s)o[s]=s-i[a]<<5|a;return[i,o]},l=s(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var h=s(a,0)[0],d=new n(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,a=0,o=new n(t);a<i;++a)++o[e[a]-1];var s,l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+o[a-1]<<1;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<i;++a)if(e[a])for(var c=a<<4|e[a],h=t-e[a],p=l[e[a]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)s[d[p]>>>u]=c}else for(s=new n(i),a=0;a<i;++a)e[a]&&(s[a]=d[l[e[a]-1]++]>>>15-e[a]);return s},g=new t(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var v=new t(32);for(p=0;p<32;++p)v[p]=5;var y=m(g,9,1),x=m(v,5,1),b=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},w=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},S=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},_=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(e,t,n){var r=new Error(t||_[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,M),!n)throw r;return r},E=function(e,s,l){var c=e.length;if(!c||l&&!l.l&&c<5)return s||new t(0);var d=!s||l,p=!l||l.i;l||(l={}),s||(s=new t(3*c));var f,g=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},v=l.f||0,_=l.p||0,E=l.b||0,A=l.l,T=l.d,C=l.m,D=l.n,N=8*c;do{if(!A){l.f=v=w(e,_,1);var R=w(e,_+1,3);if(_+=3,!R){var k=e[(V=((f=_)/8|0)+(7&f&&1)+4)-4]|e[V-3]<<8,I=V+k;if(I>c){p&&M(0);break}d&&g(E+k),s.set(e.subarray(V,I),E),l.b=E+=k,l.p=_=8*I;continue}if(1==R)A=y,T=x,C=9,D=5;else if(2==R){var F=w(e,_,31)+257,P=w(e,_+10,15)+4,O=F+w(e,_+5,31)+1;_+=14;for(var B=new t(O),L=new t(19),z=0;z<P;++z)L[o[z]]=w(e,_+3*z,7);_+=3*P;var U=b(L),H=(1<<U)-1,q=m(L,U,1);for(z=0;z<O;){var V,j=q[w(e,_,H)];if(_+=15&j,(V=j>>>4)<16)B[z++]=V;else{var G=0,W=0;for(16==V?(W=3+w(e,_,3),_+=2,G=B[z-1]):17==V?(W=3+w(e,_,7),_+=3):18==V&&(W=11+w(e,_,127),_+=7);W--;)B[z++]=G}}var X=B.subarray(0,F),Y=B.subarray(F);C=b(X),D=b(Y),A=m(X,C,1),T=m(Y,D,1)}else M(1);if(_>N){p&&M(0);break}}d&&g(E+131072);for(var $=(1<<C)-1,Z=(1<<D)-1,J=_;;J=_){var K=(G=A[S(e,_)&$])>>>4;if((_+=15&G)>N){p&&M(0);break}if(G||M(2),K<256)s[E++]=K;else{if(256==K){J=_,A=null;break}var Q=K-254;if(K>264){var ee=i[z=K-257];Q=w(e,_,(1<<ee)-1)+u[z],_+=ee}var te=T[S(e,_)&Z],ne=te>>>4;if(te||M(3),_+=15&te,Y=h[ne],ne>3&&(ee=a[ne],Y+=S(e,_)&(1<<ee)-1,_+=ee),_>N){p&&M(0);break}d&&g(E+131072);for(var re=E+Q;E<re;E+=4)s[E]=s[E-Y],s[E+1]=s[E+1-Y],s[E+2]=s[E+2-Y],s[E+3]=s[E+3-Y];E=re}}l.l=A,l.p=J,l.b=E,A&&(v=1,l.m=C,l.d=T,l.n=D)}while(!v);return E==s.length?s:function(e,i,a){(null==i||i<0)&&(i=0),(null==a||a>e.length)&&(a=e.length);var o=new(e instanceof n?n:e instanceof r?r:t)(a-i);return o.set(e.subarray(i,a)),o}(s,0,E)},A=new t(0),T="undefined"!=typeof TextDecoder&&new TextDecoder;try{T.decode(A,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function a(e){v.setUint16(y,e),y+=2}function o(e){v.setUint32(y,e),y+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var u=16*Math.pow(2,l),c=16*s.numTables-u,h=12,d=[],p=0;p<s.numTables;p++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var f,m=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,v=new DataView(g),y=0;return o(s.flavor),a(s.numTables),a(u),a(l),a(c),d.forEach((function(e){o(e.tag),o(e.origChecksum),o(h),o(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),E(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var a=0;(h=t.outOffset+t.origLength)%4!=0&&(a=4-h%4),m.set(new Uint8Array(a).buffer,t.outOffset+t.origLength),f=h+a})),g.slice(0,f)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function a(e){if(!i){const e={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[a,o]=r.split("+");a=parseInt(a,36),o=o?parseInt(o,36):0,i.set(n+=a,e[t]);for(let s=o;s--;)i.set(++n,e[t])}))}}return i.get(e)||32}const o=[null,"isol","init","fina","medi"];function s(e){const t=new Uint8Array(e.length);let n=32,r=1,i=-1;for(let o=0;o<e.length;o++){const s=e.codePointAt(o);let l=0|a(s),u=1;8&l||(21&n?22&l?(u=3,1!==r&&3!==r||t[i]++):33&l&&(2!==r&&4!==r||t[i]--):34&n&&(2!==r&&4!==r||t[i]--),r=t[o]=u,n=l,i=o,s>65535&&o++)}return t}function l(t,n){const r=t.GDEF&&t.GDEF.glyphClassDef;return r?e.U._getGlyphClass(n,r):0}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;r++)if("number"===typeof t[r])return t[r]}function c(t){const r=Object.create(null),i=t["OS/2"],a=t.hhea,c=t.head.unitsPerEm,h=u(i&&i.sTypoAscender,a&&a.ascender,c),d={unitsPerEm:c,ascender:h,descender:u(i&&i.sTypoDescender,a&&a.descender,0),capHeight:u(i&&i.sCapHeight,h),xHeight:u(i&&i.sxHeight,h),lineGap:u(i&&i.sTypoLineGap,a&&a.lineGap),supportsCodePoint:n=>e.U.codeToGlyph(t,n)>0,forEachGlyph(i,a,u,c){let h=0;const p=1/d.unitsPerEm*a,f=function(t,n){const r=[];for(let a=0;a<n.length;a++){const i=n.codePointAt(a);i>65535&&a++,r.push(e.U.codeToGlyph(t,i))}const i=t.GSUB;if(i){const{lookupList:t,featureList:a}=i;let l;const u=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,c=[];a.forEach((i=>{if(u.test(i.tag))for(let a=0;a<i.tab.length;a++){if(c[i.tab[a]])continue;c[i.tab[a]]=!0;const u=t[i.tab[a]],h=/^(isol|init|fina|medi)$/.test(i.tag);h&&!l&&(l=s(n));for(let n=0;n<r.length;n++)l&&h&&o[l[n]]!==i.tag||e.U._applySubs(r,n,u,t)}}))}return r}(t,i);let m=0;const g=function(t,n){const r=new Int16Array(3*n.length);let i=0;for(;i<n.length;i++){const u=n[i];if(-1===u)continue;r[3*i+2]=t.hmtx.aWidth[u];const c=t.GPOS;if(c){const h=c.lookupList;for(let c=0;c<h.length;c++){const d=h[c];for(let c=0;c<d.tabs.length;c++){const h=d.tabs[c];if(1===d.ltype){if(-1!==e._lctf.coverageIndex(h.coverage,u)&&h.pos){s(h.pos,i);break}}else if(2===d.ltype){let t=null,r=a();if(-1!==r){const a=e._lctf.coverageIndex(h.coverage,n[r]);if(-1!==a){if(1===h.fmt){const e=h.pairsets[a];for(let n=0;n<e.length;n++)e[n].gid2===u&&(t=e[n])}else if(2===h.fmt){const i=e.U._getGlyphClass(n[r],h.classDef1),a=e.U._getGlyphClass(u,h.classDef2);t=h.matrix[i][a]}if(t){t.val1&&s(t.val1,r),t.val2&&s(t.val2,i);break}}}}else if(4===d.ltype){const t=e._lctf.coverageIndex(h.markCoverage,u);if(-1!==t){const s=a(o),l=-1===s?-1:e._lctf.coverageIndex(h.baseCoverage,n[s]);if(-1!==l){const e=h.markArray[t],n=h.baseArray[l][e.markClass];r[3*i]=n.x-e.x+r[3*s]-r[3*s+2],r[3*i+1]=n.y-e.y+r[3*s+1];break}}}else if(6===d.ltype){const o=e._lctf.coverageIndex(h.mark1Coverage,u);if(-1!==o){const s=a();if(-1!==s){const a=n[s];if(3===l(t,a)){const t=e._lctf.coverageIndex(h.mark2Coverage,a);if(-1!==t){const e=h.mark1Array[o],n=h.mark2Array[t][e.markClass];r[3*i]=n.x-e.x+r[3*s]-r[3*s+2],r[3*i+1]=n.y-e.y+r[3*s+1];break}}}}}}}}else if(t.kern&&!t.cff){const e=a();if(-1!==e){const i=t.kern.glyph1.indexOf(n[e]);if(-1!==i){const n=t.kern.rval[i].glyph2.indexOf(u);-1!==n&&(r[3*e+2]+=t.kern.rval[i].vals[n])}}}}return r;function a(e){for(let t=i-1;t>=0;t--)if(-1!==n[t]&&(!e||e(n[t])))return t;return-1}function o(e){return 1===l(t,e)}function s(e,t){for(let n=0;n<3;n++)r[3*t+n]+=e[n]||0}}(t,f);return f.forEach(((o,s)=>{if(-1!==o){let i=r[o];if(!i){const{cmds:a,crds:s}=e.U.glyphToPath(t,o);let l,u,c,h,d="",p=0;for(let e=0,t=a.length;e<t;e++){const t=n[a[e]];d+=a[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+s[p++]}if(s.length){l=u=1/0,c=h=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],n=s[e+1];t<l&&(l=t),n<u&&(u=n),t>c&&(c=t),n>h&&(h=n)}}else l=c=u=h=0;i=r[o]={index:o,advanceWidth:t.hmtx.aWidth[o],xMin:l,yMin:u,xMax:c,yMax:h,path:d}}c.call(null,i,h+g[3*s]*p,g[3*s+1]*p,m),h+=g[3*s+2]*p,u&&(h+=u*a)}m+=i.codePointAt(m)>65535?2:1})),h}};return d}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return c(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())});const jS=ES({name:"FontResolver",dependencies:[function(e,t){const n=Object.create(null),r=Object.create(null);function i(t,i){let a=n[t];a?i(a):r[t]?r[t].push(i):(r[t]=[i],function(t,n){const r=e=>{console.error(`Failure loading font ${t}`,e)};try{const i=new XMLHttpRequest;i.open("get",t,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)r(new Error(i.statusText));else if(i.status>0)try{const r=e(i.response);r.src=t,n(r)}catch(vk){r(vk)}},i.onerror=r,i.send()}catch(i){r(i)}}(t,(e=>{e.src=t,n[t]=e,r[t].forEach((t=>t(e))),delete r[t]})))}return function(e,r){let{lang:a,fonts:o=[],style:s="normal",weight:l="normal",unicodeFontsURL:u}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=new Uint8Array(e.length),h=[];e.length||m();const d=new Map,p=[];if("italic"!==s&&(s="normal"),"number"!==typeof l&&(l="bold"===l?700:400),o&&!Array.isArray(o)&&(o=[o]),o=o.slice().filter((e=>!e.lang||e.lang.test(a))).reverse(),o.length){const t=1,r=2;let a=0;!function s(){for(let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=e.length;l<u;l++){const f=e.codePointAt(l);if(a===t&&h[c[l-1]].supportsCodePoint(f)||l>0&&/\s/.test(e[l]))c[l]=c[l-1],a===r&&(p[p.length-1][1]=l);else for(let e=c[l],u=o.length;e<=u;e++)if(e===u){(a===r?p[p.length-1]:p[p.length]=[l,l])[1]=l,a=r}else{c[l]=e;const{src:r,unicodeRange:u}=o[e];if(!u||g(f,u)){const e=n[r];if(!e)return void i(r,(()=>{s(l)}));if(e.supportsCodePoint(f)){let n=d.get(e);"number"!==typeof n&&(n=h.length,h.push(e),d.set(e,n)),c[l]=n,a=t;break}}}f>65535&&l+1<u&&(c[l+1]=c[l],l++,a===r&&(p[p.length-1][1]=l))}f()}()}else p.push([0,e.length-1]),f();function f(){if(p.length){const n=p.map((t=>e.substring(t[0],t[1]+1))).join("\n");t.getFontsForString(n,{lang:a||void 0,style:s,weight:l,dataUrl:u}).then((e=>{let{fontUrls:t,chars:n}=e;const r=h.length;let a=0;p.forEach((e=>{for(let t=0,i=e[1]-e[0];t<=i;t++)c[e[0]+t]=n[a++]+r;a++}));let o=0;t.forEach(((e,n)=>{i(e,(e=>{h[n+r]=e,++o===t.length&&m()}))}))}))}else m()}function m(){r({chars:c,fonts:h})}function g(e,t){for(let n=0;n<t.length;n++){const[r,i=r]=t[n];if(r<=e&&e<=i)return!0}return!1}}},VS,function(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(e){var t=e>>5;this.buckets.set(t,(this.buckets.get(t)||0)|1<<(31&e))},t.prototype.has=function(e){var t=this.buckets.get(e>>5);return void 0!==t&&0!=(t&1<<(31&e))},t.prototype.serialize=function(){var e=[];return this.buckets.forEach((function(t,n){e.push((+n).toString(36)+":"+t.toString(36))})),e.join(",")},t.prototype.deserialize=function(e){var t=this;this.buckets.clear(),e.split(",").forEach((function(e){var n=e.split(":");t.buckets.set(parseInt(n[0],36),parseInt(n[1],36))}))};var n=Math.pow(2,8),r=n-1,i=~r;function a(e){var t=function(e){return e&i}(e).toString(16),r=function(e){return(e&i)+n-1}(e).toString(16);return"codepoint-index/plane"+(e>>16)+"/"+t+"-"+r+".json"}function o(e,t){var n=e&r,i=t.codePointAt(n/6|0);return 0!=((i=(i||48)-48)&1<<n%6)}function s(e,t){!function(e,t){var n;(n=e,n.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(e){return e.split("-").map((function(e){return parseInt(e.trim(),16)}))}))).forEach((function(e){var n=e[0],r=e[1];void 0===r&&(r=n),t(n,r)}))}(e,(function(e,n){for(var r=e;r<=n;r++)t(r)}))}var l={},u={},c=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(e){var n=c.get(e);return n||(n=new t,s(e.ranges,(function(e){return n.add(e)})),c.set(e,n)),n}var p,f=new Map;function m(e,t,n){return e[t]?t:e[n]?n:function(e){for(var t in e)return t}(e)}function g(e,t){var n=t;if(!e.includes(n)){n=1/0;for(var r=0;r<e.length;r++)Math.abs(e[r]-t)<Math.abs(n-t)&&(n=e[r])}return n}function v(e){return p||(p=new Set,s("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(e){p.add(e)}))),p.has(e)}return e.CodePointSet=t,e.clearCache=function(){l={},u={}},e.getFontsForString=function(e,t){void 0===t&&(t={});var n,r=t.lang;void 0===r&&(r=/\p{Script=Hangul}/u.test(n=e)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(n)?"ja":"en");var i=t.category;void 0===i&&(i="sans-serif");var s=t.style;void 0===s&&(s="normal");var c=t.weight;void 0===c&&(c=400);var p=(t.dataUrl||h).replace(/\/$/g,""),y=new Map,x=new Uint8Array(e.length),b={},w={},S=new Array(e.length),_=new Map,M=!1;function E(e){var t=f.get(e);return t||(t=fetch(p+"/"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json().then((function(e){if(!Array.isArray(e)||1!==e[0])throw new Error("Incorrect schema version; need 1, got "+e[0]);return e[1]}))})).catch((function(t){if(p!==h)return M||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+p+'", trying default CDN. '+t.message),M=!0),p=h,f.delete(e),E(e);throw t})),f.set(e,t)),t}for(var A=function(t){var n=e.codePointAt(t),r=a(n);S[t]=r,l[r]||_.has(r)||_.set(r,E(r).then((function(e){l[r]=e}))),n>65535&&(t++,T=t)},T=0;T<e.length;T++)A(T);return Promise.all(_.values()).then((function(){_.clear();for(var t=function(t){var i=e.codePointAt(t),a=null,s=l[S[t]],c=void 0;for(var h in s){var d=w[h];if(void 0===d&&(d=w[h]=new RegExp(h).test(r||"en")),d){for(var p in c=h,s[h])if(o(i,s[h][p])){a=p;break}break}}if(!a)e:for(var f in s)if(f!==c)for(var m in s[f])if(o(i,s[f][m])){a=m;break e}a||(console.debug("No font coverage for U+"+i.toString(16)),a="latin"),S[t]=a,u[a]||_.has(a)||_.set(a,E("font-meta/"+a+".json").then((function(e){u[a]=e}))),i>65535&&(t++,n=t)},n=0;n<e.length;n++)t(n);return Promise.all(_.values())})).then((function(){for(var t,n=null,r=0;r<e.length;r++){var a=e.codePointAt(r);if(n&&(v(a)||d(n).has(a)))x[r]=x[r-1];else{n=u[S[r]];var o=b[n.id];if(!o){var l=n.typeforms,h=m(l,i,"sans-serif"),f=m(l[h],s,"normal"),w=g(null===(t=l[h])||void 0===t?void 0:t[f],c);o=b[n.id]=p+"/font-files/"+n.id+"/"+h+"."+f+"."+w+".woff"}var _=y.get(o);null==_&&(_=y.size,y.set(o,_)),x[r]=_}a>65535&&(r++,x[r]=x[r-1])}return{fontUrls:Array.from(y.keys()),chars:x}}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,n)=>e(t,n())});const GS=()=>(self.performance||Date).now(),WS=CS();let XS;const YS=[];let $S=0;function ZS(){const e=GS();for(;YS.length&&GS()-e<5;)YS.shift()();$S=YS.length?setTimeout(ZS,0):0}const JS=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(((e,n)=>{YS.push((()=>{const r=GS();try{WS.webgl.generateIntoCanvas(...t),e({timing:GS()-r})}catch(i){n(i)}})),$S||($S=setTimeout(ZS,0))}))},KS=4,QS=2e3,e_={};let t_=0;function n_(e,t,n,r,i,a,o,s,l,u){const c="TroikaTextSDFGenerator_JS_"+t_++%KS;let h=e_[c];return h||(h=e_[c]={workerModule:ES({name:c,workerId:c,dependencies:[CS,GS],init(e,t){const n=e().javascript.generate;return function(){const e=t();return{textureData:n(...arguments),timing:t()-e}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,r,i,a).then((n=>{let{textureData:r,timing:i}=n;const a=GS(),d=new Uint8Array(4*r.length);for(let e=0;e<r.length;e++)d[4*e+u]=r[e];return WS.webglUtils.renderImageData(o,d,s,l,e,t,1<<3-u),i+=GS()-a,0===--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){_S[e]&&_S[e].forEach((function(e){e()})),SS[e]&&(SS[e].terminate(),delete SS[e])}(c)}),QS)),{timing:i}}))}const r_=WS.webglUtils.resizeWebGLCanvasWithoutClearing,i_={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048,useWorker:!0},a_=new $u;let o_=!1;function s_(){return(self.performance||Date).now()}const l_=Object.create(null);function u_(e,t){o_=!0,e=h_({},e);const n=s_(),{defaultFontURL:r}=i_,i=[];if(r&&i.push({label:"default",src:p_(r)}),e.font&&i.push({label:"user",src:p_(e.font)}),e.font=i,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||i_.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||i_.unicodeFontsURL,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!==typeof r&&(r=a_.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:a,sdfExponent:o}=i_,{sdfGlyphSize:s}=e,l=a/s*4;let u=l_[s];if(!u){const e=document.createElement("canvas");e.width=a,e.height=256*s/l,u=l_[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:e,sdfTexture:new yl(e,void 0,void 0,void 0,wa,wa),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(c_(t,e,!0))}))})),Promise.all(n).then((()=>{f_(e),e.sdfTexture.needsUpdate=!0}))}))}(u)}const{sdfTexture:c,sdfCanvas:h}=u;(i_.useWorker?g_:v_)(e).then((r=>{const{glyphIds:i,glyphFontIndices:d,fontData:p,glyphPositions:f,fontSize:m,timings:g}=r,v=[],y=new Float32Array(4*i.length);let x=0,b=0;const w=s_(),S=p.map((e=>{let t=u.glyphsByFont.get(e.src);return t||u.glyphsByFont.set(e.src,t=new Map),t}));i.forEach(((e,t)=>{const n=d[t],{src:a,unitsPerEm:o}=p[n];let l=S[n].get(e);if(!l){const{path:t,pathBounds:i}=r.glyphData[a][e],o=Math.max(i[2]-i[0],i[3]-i[1])/s*(i_.sdfMargin*s+.5),c=u.glyphCount++,h=[i[0]-o,i[1]-o,i[2]+o,i[3]+o];S[n].set(e,l={path:t,atlasIndex:c,sdfViewBox:h}),v.push(l)}const{sdfViewBox:c}=l,h=f[b++],g=f[b++],w=m/o;y[x++]=h+c[0]*w,y[x++]=g+c[1]*w,y[x++]=h+c[2]*w,y[x++]=g+c[3]*w,i[t]=l.atlasIndex})),g.quads=(g.quads||0)+(s_()-w);const _=s_();g.sdf={};const M=h.height,E=Math.ceil(u.glyphCount/l),A=Math.pow(2,Math.ceil(Math.log2(E*s)));A>M&&(console.info(`Increasing SDF texture size ${M}->${A}`),r_(h,a,A),c.dispose()),Promise.all(v.map((t=>c_(t,u,e.gpuAccelerateSDF).then((e=>{let{timing:n}=e;g.sdf[t.atlasIndex]=n}))))).then((()=>{v.length&&!u.contextLost&&(f_(u),c.needsUpdate=!0),g.sdfTotal=s_()-_,g.total=s_()-n,t(Object.freeze({parameters:e,sdfTexture:c,sdfGlyphSize:s,sdfExponent:o,glyphBounds:y,glyphAtlasIndices:i,glyphColors:r.glyphColors,caretPositions:r.caretPositions,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,capHeight:r.capHeight,xHeight:r.xHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings}))}))})),Promise.resolve().then((()=>{var e;u.contextLost||(e=h)._warm||(WS.webgl.isSupported(e),e._warm=!0)}))}function c_(e,t,n){let{path:r,atlasIndex:i,sdfViewBox:a}=e,{sdfGlyphSize:o,sdfCanvas:s,contextLost:l}=t;if(l)return Promise.resolve({timing:-1});const{textureWidth:u,sdfExponent:c}=i_,h=Math.max(a[2]-a[0],a[3]-a[1]),d=Math.floor(i/4);return function(e,t,n,r,i,a,o,s,l,u){return arguments.length>10&&void 0!==arguments[10]&&!arguments[10]?n_(e,t,n,r,i,a,o,s,l,u):JS(e,t,n,r,i,a,o,s,l,u).then(null,(c=>(XS||(console.warn("WebGL SDF generation failed, falling back to JS",c),XS=!0),n_(e,t,n,r,i,a,o,s,l,u))))}(o,o,r,a,h,c,s,d%(u/o)*o,Math.floor(d/(u/o))*o,i%4,n)}function h_(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let d_;function p_(e){return d_||(d_="undefined"===typeof document?{}:document.createElement("a")),d_.href=e,d_.href}function f_(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,a=e.sdfCanvas.getContext("webgl");let o=n.image.data;o&&o.length===r*i*4||(o=new Uint8Array(r*i*4),n.image={width:r,height:i,data:o},n.flipY=!1,n.isDataTexture=!0),a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,o)}}const m_=ES({name:"Typesetter",dependencies:[function(e,t){const n=1/0,r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",a=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function o(o,h){let{text:d="",font:p,lang:f,sdfGlyphSize:m=64,fontSize:g=400,fontWeight:v=1,fontStyle:y="normal",letterSpacing:x=0,lineHeight:b="normal",maxWidth:w=n,direction:S,textAlign:_="left",textIndent:M=0,whiteSpace:E="normal",overflowWrap:A="normal",anchorX:T=0,anchorY:C=0,metricsOnly:D=!1,unicodeFontsURL:N,preResolvedFonts:R=null,includeCaretPositions:k=!1,chunkedBoundsSize:I=8192,colorRanges:F=null}=o;const P=u(),O={fontLoad:0,typesetting:0};d.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),d=d.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),g=+g,x=+x,w=+w,b=b||"normal",M=+M,function(t,n){let{text:r,lang:i,fonts:a,style:o,weight:s,preResolvedFonts:l,unicodeFontsURL:u}=t;const c=e=>{let t,r,{chars:i,fonts:a}=e;const o=[];for(let n=0;n<i.length;n++)i[n]!==r?(r=i[n],o.push(t={start:n,end:n,fontObj:a[i[n]]})):t.end=n;n(o)};l?c(l):e(r,c,{lang:i,fonts:a,style:o,weight:s,unicodeFontsURL:u})}({text:d,lang:f,style:y,weight:v,fonts:"string"===typeof p?[{src:p}]:p,unicodeFontsURL:N,preResolvedFonts:R},(e=>{O.fontLoad=u()-P;const o=isFinite(w);let p=null,f=null,m=null,v=null,y=null,N=null,R=null,B=null,L=0,z=0,U="nowrap"!==E;const H=new Map,q=u();let V=M,j=0,G=new c;const W=[G];e.forEach((e=>{const{fontObj:t}=e,{ascender:n,descender:s,unitsPerEm:l,lineGap:u,capHeight:h,xHeight:p}=t;let f=H.get(t);if(!f){const e=g/l,r="normal"===b?(n-s+u)*e:b*g,i=(r-(n-s)*e)/2,a=Math.min(r,(n-s)*e),o=(n+s)/2*e+a/2;f={index:H.size,src:t.src,fontObj:t,fontSizeMult:e,unitsPerEm:l,ascender:n*e,descender:s*e,capHeight:h*e,xHeight:p*e,lineHeight:r,baseline:-i-n*e,caretTop:o,caretBottom:o-a},H.set(t,f)}const{fontSizeMult:m}=f,v=d.slice(e.start,e.end+1);let y,S;t.forEachGlyph(v,g,x,((t,n,s,l)=>{n+=j,l+=e.start,y=n,S=t;const u=d.charAt(l),h=t.advanceWidth*m,p=G.count;let v;if("isEmpty"in t||(t.isWhitespace=!!u&&new RegExp(i).test(u),t.canBreakAfter=!!u&&a.test(u),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||r.test(u)),t.isWhitespace||t.isEmpty||z++,U&&o&&!t.isWhitespace&&n+h+V>w&&p){if(G.glyphAt(p-1).glyphObj.canBreakAfter)v=new c,V=-n;else for(let e=p;e--;){if(0===e&&"break-word"===A){v=new c,V=-n;break}if(G.glyphAt(e).glyphObj.canBreakAfter){v=G.splitAt(e+1);const t=v.glyphAt(0).x;V-=t;for(let e=v.count;e--;)v.glyphAt(e).x-=t;break}}v&&(G.isSoftWrapped=!0,G=v,W.push(G),L=w)}let b=G.glyphAt(G.count);b.glyphObj=t,b.x=n+V,b.y=s,b.width=h,b.charIndex=l,b.fontData=f,"\n"===u&&(G=new c,W.push(G),V=-(n+h+x*g)+M)})),j=y+S.advanceWidth*m+x*g}));let X=0;W.forEach((e=>{let t=!0;for(let n=e.count;n--;){const r=e.glyphAt(n);t&&!r.glyphObj.isWhitespace&&(e.width=r.x+r.width,e.width>L&&(L=e.width),t=!1);let{lineHeight:i,capHeight:a,xHeight:o,baseline:s}=r.fontData;i>e.lineHeight&&(e.lineHeight=i);const l=s-e.baseline;l<0&&(e.baseline+=l,e.cap+=l,e.ex+=l),e.cap=Math.max(e.cap,e.baseline+a),e.ex=Math.max(e.ex,e.baseline+o)}e.baseline-=X,e.cap-=X,e.ex-=X,X+=e.lineHeight}));let Y=0,$=0;if(T&&("number"===typeof T?Y=-T:"string"===typeof T&&(Y=-L*("left"===T?0:"center"===T?.5:"right"===T?1:s(T)))),C&&("number"===typeof C?$=-C:"string"===typeof C&&($="top"===C?0:"top-baseline"===C?-W[0].baseline:"top-cap"===C?-W[0].cap:"top-ex"===C?-W[0].ex:"middle"===C?X/2:"bottom"===C?X:"bottom-baseline"===C?-W[W.length-1].baseline:s(C)*X)),!D){const e=t.getEmbeddingLevels(d,S);p=new Uint16Array(z),f=new Uint8Array(z),m=new Float32Array(2*z),v={},R=[n,n,-n,-n],B=[],k&&(N=new Float32Array(4*d.length)),F&&(y=new Uint8Array(3*z));let r,i,a=0,o=-1,s=-1;if(W.forEach(((u,c)=>{let{count:h,width:g}=u;if(h>0){let c=0;for(let e=h;e--&&u.glyphAt(e).glyphObj.isWhitespace;)c++;let x=0,b=0;if("center"===_)x=(L-g)/2;else if("right"===_)x=L-g;else if("justify"===_&&u.isSoftWrapped){let e=0;for(let t=h-c;t--;)u.glyphAt(t).glyphObj.isWhitespace&&e++;b=(L-g)/e}if(b||x){let e=0;for(let t=0;t<h;t++){let n=u.glyphAt(t);const r=n.glyphObj;n.x+=x+e,0!==b&&r.isWhitespace&&t<h-c&&(e+=b,n.width+=b)}}const w=t.getReorderSegments(d,e,u.glyphAt(0).charIndex,u.glyphAt(u.count-1).charIndex);for(let e=0;e<w.length;e++){const[t,n]=w[e];let r=1/0,i=-1/0;for(let e=0;e<h;e++)if(u.glyphAt(e).charIndex>=t){let t=e,a=e;for(;a<h;a++){let e=u.glyphAt(a);if(e.charIndex>n)break;a<h-c&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<a;e++){const t=u.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let S;const M=e=>S=e;for(let g=0;g<h;g++){const c=u.glyphAt(g);S=c.glyphObj;const h=S.index,x=1&e.levels[c.charIndex];if(x){const e=t.getMirroredCharacter(d[c.charIndex]);e&&c.fontData.fontObj.forEachGlyph(e,0,0,M)}if(k){const{charIndex:e,fontData:t}=c,n=c.x+Y,r=c.x+c.width+Y;N[4*e]=x?r:n,N[4*e+1]=x?n:r,N[4*e+2]=u.baseline+t.caretBottom+$,N[4*e+3]=u.baseline+t.caretTop+$;const i=e-o;i>1&&l(N,o,i),o=e}if(F){const{charIndex:e}=c;for(;e>s;)s++,F.hasOwnProperty(s)&&(i=F[s])}if(!S.isWhitespace&&!S.isEmpty){const e=a++,{fontSizeMult:t,src:o,index:s}=c.fontData,l=v[o]||(v[o]={});l[h]||(l[h]={path:S.path,pathBounds:[S.xMin,S.yMin,S.xMax,S.yMax]});const d=c.x+Y,g=c.y+u.baseline+$;m[2*e]=d,m[2*e+1]=g;const x=d+S.xMin*t,b=g+S.yMin*t,w=d+S.xMax*t,_=g+S.yMax*t;x<R[0]&&(R[0]=x),b<R[1]&&(R[1]=b),w>R[2]&&(R[2]=w),_>R[3]&&(R[3]=_),e%I===0&&(r={start:e,end:e,rect:[n,n,-n,-n]},B.push(r)),r.end++;const M=r.rect;if(x<M[0]&&(M[0]=x),b<M[1]&&(M[1]=b),w>M[2]&&(M[2]=w),_>M[3]&&(M[3]=_),p[e]=h,f[e]=s,F){const t=3*e;y[t]=i>>16&255,y[t+1]=i>>8&255,y[t+2]=255&i}}}}})),N){const e=d.length-o;e>1&&l(N,o,e)}}const Z=[];H.forEach((e=>{let{index:t,src:n,unitsPerEm:r,ascender:i,descender:a,lineHeight:o,capHeight:s,xHeight:l}=e;Z[t]={src:n,unitsPerEm:r,ascender:i,descender:a,lineHeight:o,capHeight:s,xHeight:l}})),O.typesetting=u()-q,h({glyphIds:p,glyphFontIndices:f,glyphPositions:m,glyphData:v,fontData:Z,caretPositions:N,glyphColors:y,chunkedBounds:B,fontSize:g,topBaseline:$+W[0].baseline,blockBounds:[Y,$-X,Y+L,$],visibleBounds:R,timings:O})}))}function s(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function l(e,t,n){const r=e[4*t],i=e[4*t+1],a=e[4*t+2],o=e[4*t+3],s=(i-r)/n;for(let l=0;l<n;l++){const n=4*(t+l);e[n]=r+s*l,e[n+1]=r+s*(l+1),e[n+2]=a,e[n+3]=o}}function u(){return(self.performance||Date).now()}function c(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return c.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(e){let t=c.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new c;return t.data=this.data.splice(e*h.length),t}},c.flyweight=h.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*h.length+n]},set(e){this.data[this.index*h.length+n]=e}}),e)),{data:null,index:0}),{typeset:o,measure:function(e,t){o({...e,metricsOnly:!0},(e=>{const[n,r,i,a]=e.blockBounds;t({width:i-n,height:a-r})}))}}},jS,DS],init:(e,t,n)=>e(t,n())}),g_=ES({name:"Typesetter",dependencies:[m_],init:e=>function(t){return new Promise((n=>{e.typeset(t,n)}))},getTransferables(e){const t=[];for(let n in e)e[n]&&e[n].buffer&&t.push(e[n].buffer);return t}}),v_=g_.onMainThread;const y_={};const x_="aTroikaGlyphBounds",b_="aTroikaGlyphIndex";class w_ extends km{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Yl,this.boundingBox=new Nl}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,("number"!==typeof e||e<1)&&(e=1);let t=function(e){let t=y_[e];return t||(t=y_[e]=new lf(1,1,e,e).translate(.5,.5,0)),t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){this.updateAttributeData(x_,e,4),this.updateAttributeData(b_,t,1),this.updateAttributeData("aTroikaGlyphColor",i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:a,max:o,sin:s,cos:l}=Math,u=r/2,c=2*r,h=Math.abs(t),d=e[0]/h,p=e[2]/h,f=i((d+u)/c)!==i((p+u)/c)?-h:a(s(d)*h,s(p)*h),m=i((d-u)/c)!==i((p-u)/c)?h:o(s(d)*h,s(p)*h),g=i((d+r)/c)!==i((p+r)/c)?2*h:o(h-l(d)*h,h-l(p)*h);n.min.set(f,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(b_).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new zh(t,n)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}function S_(e){const t=LS(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Zs},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new xl(0,0,0,0)},uTroikaClipRect:{value:new xl(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Zs},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new $u},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Js},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaEdgeOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter(e){let{vertexShader:t,fragmentShader:n}=e,r=/\buniform\s+vec3\s+diffuse\b/;return r.test(n)&&(n=n.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(NS,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:n}}});return t.transparent=!0,t.forceSinglePass=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const __=new Qu({color:16777215,side:pi,transparent:!0}),M_=8421504,E_=new ru,A_=new Tl,T_=new Tl,C_=[],D_=new Tl,N_="+x+y";function R_(e){return Array.isArray(e)?e[0]:e}let k_=()=>{const e=new Oc(new lf(1,1),__);return k_=()=>e,e},I_=()=>{const e=new Oc(new lf(1,1,32,1),__);return I_=()=>e,e};const F_={type:"syncstart"},P_={type:"synccomplete"},O_=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],B_=O_.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class L_ extends Oc{constructor(){super(new w_,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=M_,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=N_,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(F_),u_({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(P_),e&&e()}))))}onBeforeRender(e,t,n,r,i,a){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return S_(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=__.clone());if(e&&e.isDerivedFrom(t)||(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.hasOutline()){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return R_(this.material).getDepthMaterial()}get customDistanceMaterial(){return R_(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:e,blockBounds:i}=r;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(i),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let a,o,s,l=0,u=0,c=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,u=Math.max(0,this._parsePercent(r)||0),a=i,h=this._parsePercent(t)||0,d=this._parsePercent(n)||0}else c=Math.max(0,this._parsePercent(this.strokeWidth)||0),c&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?M_:s),o=this.strokeOpacity,null==o&&(o=1)),a=this.fillOpacity;n.uTroikaEdgeOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=u,n.uTroikaStrokeWidth.value=c,n.uTroikaStrokeOpacity.value=o,n.uTroikaFillOpacity.value=null==a?1:a,n.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)n.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(i[0]-e,i[1]-e,i[2]+e,i[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(null==i)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new $u;i===t._input&&"object"!==typeof i||t.set(t._input=i)}let a=this.orientation||N_;if(a!==e._orientation){let t=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let r=a!==N_&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,a]=r;A_.set(0,0,0)[n]="-"===e?1:-1,T_.set(0,0,0)[a]="-"===i?-1:1,E_.lookAt(D_,A_.cross(T_),T_),t.setFromMatrix4(E_)}else t.identity();e._orientation=a}}_parsePercent(e){if("string"===typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs;t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zs;return A_.copy(e),this.localPositionToTextCoords(this.worldToLocal(A_),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,a=r?I_():k_(),o=a.geometry,{position:s,uv:l}=o.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let a=0;r&&(a=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),s.setXYZ(e,t,n,a)}o.boundingSphere=this.geometry.boundingSphere,o.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,C_.length=0,a.raycast(e,C_);for(let e=0;e<C_.length;e++)C_[e].object=this,t.push(C_[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,B_.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}O_.forEach((e=>{const t="_private_"+e;Object.defineProperty(L_.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));new Nl,new $u;new WeakMap;new WeakMap;const z_=t.forwardRef(((e,n)=>{let{sdfGlyphSize:r=64,anchorX:i="center",anchorY:a="middle",font:o,fontSize:s=1,children:l,characters:u,onSync:c,...h}=e;const d=iw((e=>{let{invalidate:t}=e;return t})),[p]=t.useState((()=>new L_)),[f,m]=t.useMemo((()=>{const e=[];let n="";return t.Children.forEach(l,(t=>{"string"===typeof t||"number"===typeof t?n+=t:e.push(t)})),[e,n]}),[l]);return lb((()=>new Promise((e=>function(e,t){let{font:n,characters:r,sdfGlyphSize:i}=e;u_({font:n,sdfGlyphSize:i,text:Array.isArray(r)?r.join("\n"):""+r},t)}({font:o,characters:u},e)))),["troika-text",o,u]),t.useLayoutEffect((()=>{p.sync((()=>{d(),c&&c(p)}))})),t.useEffect((()=>()=>p.dispose()),[p]),t.createElement("primitive",Gw({object:p,ref:n,font:o,text:m,anchorX:i,anchorY:a,fontSize:s,sdfGlyphSize:r},h),f)}));var U_={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null},H_=["Matrix","Array"],q_=["number","BigNumber","Fraction"];var V_=function(e){if(e)throw new Error("The global config is readonly. \nPlease create a mathjs instance if you want to change the default configuration. \nExample:\n\n  import { create, all } from 'mathjs';\n  const mathjs = create(all);\n  mathjs.config({ number: 'BigNumber' });\n");return Object.freeze(U_)};function j_(e){var t=typeof e;if("number"===t||"bigint"===t||"string"===t||"boolean"===t||null===e||void 0===e)return e;if("function"===typeof e.clone)return e.clone();if(Array.isArray(e))return e.map((function(e){return j_(e)}));if(e instanceof Date)return new Date(e.valueOf());if(oM(e))return e;if(EM(e))return function(e,t){var n={};for(var r in e)X_(e,r)&&(n[r]=t(e[r]));return n}(e,j_);if("function"===t)return e;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(e,")"))}function G_(e,t){for(var n in t)X_(t,n)&&(e[n]=t[n]);return e}function W_(e,t){var n,r,i;if(Array.isArray(e)){if(!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(r=0,i=e.length;r<i;r++)if(!W_(e[r],t[r]))return!1;return!0}if("function"===typeof e)return e===t;if(e instanceof Object){if(Array.isArray(t)||!(t instanceof Object))return!1;for(n in e)if(!(n in t)||!W_(e[n],t[n]))return!1;for(n in t)if(!(n in e))return!1;return!0}return e===t}function X_(e,t){return e&&Object.hasOwnProperty.call(e,t)}function Y_(e,t){if(Z_(e,t))return e[t];if("function"===typeof e[t]&&J_(e,t))throw new Error('Cannot access method "'+t+'" as a property');throw new Error('No access to property "'+t+'"')}function $_(e,t,n){if(Z_(e,t))return e[t]=n,n;throw new Error('No access to property "'+t+'"')}function Z_(e,t){return!(!function(e){return"object"===typeof e&&e&&e.constructor===Object}(e)&&!Array.isArray(e))&&(!!X_(K_,t)||!(t in Object.prototype)&&!(t in Function.prototype))}function J_(e,t){return null!==e&&void 0!==e&&"function"===typeof e[t]&&(!(X_(e,t)&&Object.getPrototypeOf&&t in Object.getPrototypeOf(e))&&(!!X_(Q_,t)||!(t in Object.prototype)&&!(t in Function.prototype)))}Gw(V_,U_,{MATRIX_OPTIONS:H_,NUMBER_OPTIONS:q_});var K_={length:!0,name:!0},Q_={toString:!0,valueOf:!0,toLocaleString:!0};class eM{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter((e=>this.has(e))).values()}get(e){return Y_(this.wrappedObject,e)}set(e,t){return $_(this.wrappedObject,e,t),this}has(e){return Z_(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return nM(this.keys(),(e=>[e,this.get(e)]))}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){Z_(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}class tM{constructor(e,t,n){this.a=e,this.b=t,this.bKeys=n,this[Symbol.iterator]=this.entries}get(e){return this.bKeys.has(e)?this.b.get(e):this.a.get(e)}set(e,t){return this.bKeys.has(e)?this.b.set(e,t):this.a.set(e,t),this}has(e){return this.b.has(e)||this.a.has(e)}keys(){return new Set([...this.a.keys(),...this.b.keys()])[Symbol.iterator]()}entries(){return nM(this.keys(),(e=>[e,this.get(e)]))}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){return this.bKeys.has(e)?this.b.delete(e):this.a.delete(e)}clear(){this.a.clear(),this.b.clear()}get size(){return[...this.keys()].length}}function nM(e,t){return{next:()=>{var n=e.next();return n.done?n:{value:t(n.value),done:!1}}}}function rM(){return new Map}function iM(e){if(!e)return rM();if(AM(e))return e;if(EM(e))return new eM(e);throw new Error("createMap can create maps from objects or Maps")}function aM(e){return"number"===typeof e}function oM(e){return!(!e||"object"!==typeof e||"function"!==typeof e.constructor)&&(!0===e.isBigNumber&&"object"===typeof e.constructor.prototype&&!0===e.constructor.prototype.isBigNumber||"function"===typeof e.constructor.isDecimal&&!0===e.constructor.isDecimal(e))}function sM(e){return"bigint"===typeof e}function lM(e){return e&&"object"===typeof e&&!0===Object.getPrototypeOf(e).isComplex||!1}function uM(e){return e&&"object"===typeof e&&!0===Object.getPrototypeOf(e).isFraction||!1}function cM(e){return e&&!0===e.constructor.prototype.isUnit||!1}function hM(e){return"string"===typeof e}var dM=Array.isArray;function pM(e){return e&&!0===e.constructor.prototype.isMatrix||!1}function fM(e){return Array.isArray(e)||pM(e)}function mM(e){return e&&e.isDenseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function gM(e){return e&&e.isSparseMatrix&&!0===e.constructor.prototype.isMatrix||!1}function vM(e){return e&&!0===e.constructor.prototype.isRange||!1}function yM(e){return e&&!0===e.constructor.prototype.isIndex||!1}function xM(e){return"boolean"===typeof e}function bM(e){return e&&!0===e.constructor.prototype.isResultSet||!1}function wM(e){return e&&!0===e.constructor.prototype.isHelp||!1}function SM(e){return"function"===typeof e}function _M(e){return e instanceof Date}function MM(e){return e instanceof RegExp}function EM(e){return!(!e||"object"!==typeof e||e.constructor!==Object||lM(e)||uM(e))}function AM(e){return!!e&&(e instanceof Map||e instanceof eM||"function"===typeof e.set&&"function"===typeof e.get&&"function"===typeof e.keys&&"function"===typeof e.has)}function TM(e){return null===e}function CM(e){return void 0===e}function DM(e){return e&&!0===e.isAccessorNode&&!0===e.constructor.prototype.isNode||!1}function NM(e){return e&&!0===e.isArrayNode&&!0===e.constructor.prototype.isNode||!1}function RM(e){return e&&!0===e.isAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function kM(e){return e&&!0===e.isBlockNode&&!0===e.constructor.prototype.isNode||!1}function IM(e){return e&&!0===e.isConditionalNode&&!0===e.constructor.prototype.isNode||!1}function FM(e){return e&&!0===e.isConstantNode&&!0===e.constructor.prototype.isNode||!1}function PM(e){return FM(e)||HM(e)&&1===e.args.length&&FM(e.args[0])&&"-+~".includes(e.op)}function OM(e){return e&&!0===e.isFunctionAssignmentNode&&!0===e.constructor.prototype.isNode||!1}function BM(e){return e&&!0===e.isFunctionNode&&!0===e.constructor.prototype.isNode||!1}function LM(e){return e&&!0===e.isIndexNode&&!0===e.constructor.prototype.isNode||!1}function zM(e){return e&&!0===e.isNode&&!0===e.constructor.prototype.isNode||!1}function UM(e){return e&&!0===e.isObjectNode&&!0===e.constructor.prototype.isNode||!1}function HM(e){return e&&!0===e.isOperatorNode&&!0===e.constructor.prototype.isNode||!1}function qM(e){return e&&!0===e.isParenthesisNode&&!0===e.constructor.prototype.isNode||!1}function VM(e){return e&&!0===e.isRangeNode&&!0===e.constructor.prototype.isNode||!1}function jM(e){return e&&!0===e.isRelationalNode&&!0===e.constructor.prototype.isNode||!1}function GM(e){return e&&!0===e.isSymbolNode&&!0===e.constructor.prototype.isNode||!1}function WM(e){return e&&!0===e.constructor.prototype.isChain||!1}function XM(e){var t=typeof e;return"object"===t?null===e?"null":oM(e)?"BigNumber":e.constructor&&e.constructor.name?e.constructor.name:"Object":t}var YM=new Set(["end"]);function $M(e,t,n,r){function i(r){var i=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r],a=e[i];void 0!==a&&(n[i]=a)}return n}(r,t.map(ZM));return function(e,t,n){var r=t.filter((e=>!function(e){return e&&"?"===e[0]}(e))).every((e=>void 0!==n[e]));if(!r){var i=t.filter((e=>void 0===n[e]));throw new Error('Cannot create function "'.concat(e,'", ')+"some dependencies are missing: ".concat(i.map((e=>'"'.concat(e,'"'))).join(", "),"."))}}(e,t,r),n(i)}return i.isFactory=!0,i.fn=e,i.dependencies=t.slice().sort(),r&&(i.meta=r),i}function ZM(e){return e&&"?"===e[0]?e.slice(1):e}var JM=$M("Node",["mathWithTransform"],(e=>{var{mathWithTransform:t}=e;return class{get type(){return"Node"}get isNode(){return!0}evaluate(e){return this.compile().evaluate(e)}compile(){var e=this._compile(t,{}),n={};return{evaluate:function(t){var r=iM(t);return function(e){for(var t of[...YM])if(e.has(t))throw new Error('Scope contains an illegal symbol, "'+t+'" is a reserved keyword')}(r),e(r,n,null)}}}_compile(e,t){throw new Error("Method _compile must be implemented by type "+this.type)}forEach(e){throw new Error("Cannot run forEach on a Node interface")}map(e){throw new Error("Cannot run map on a Node interface")}_ifNode(e){if(!zM(e))throw new TypeError("Callback function must return a Node");return e}traverse(e){e(this,null,null),function e(t,n){t.forEach((function(t,r,i){n(t,r,i),e(t,n)}))}(this,e)}transform(e){return function t(n,r,i){var a=e(n,r,i);return a!==n?a:n.map(t)}(this,null,null)}filter(e){var t=[];return this.traverse((function(n,r,i){e(n,r,i)&&t.push(n)})),t}clone(){throw new Error("Cannot clone a Node interface")}cloneDeep(){return this.map((function(e){return e.cloneDeep()}))}equals(e){return!!e&&(this.type===e.type&&W_(this,e))}toString(e){var t=this._getCustomString(e);return"undefined"!==typeof t?t:this._toString(e)}_toString(){throw new Error("_toString not implemented for "+this.type)}toJSON(){throw new Error("Cannot serialize object: toJSON not implemented by "+this.type)}toHTML(e){var t=this._getCustomString(e);return"undefined"!==typeof t?t:this._toHTML(e)}_toHTML(){throw new Error("_toHTML not implemented for "+this.type)}toTex(e){var t=this._getCustomString(e);return"undefined"!==typeof t?t:this._toTex(e)}_toTex(e){throw new Error("_toTex not implemented for "+this.type)}_getCustomString(e){if(e&&"object"===typeof e)switch(typeof e.handler){case"object":case"undefined":return;case"function":return e.handler(this,e);default:throw new TypeError("Object or function expected as callback")}}getIdentifier(){return this.type}getContent(){return this}}}),{isClass:!0,isNode:!0});function KM(e){return KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},KM(e)}function QM(e){var t=function(e,t){if("object"!=KM(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=KM(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==KM(t)?t:t+""}function eE(e,t,n){return(t=QM(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tE(e){return"boolean"===typeof e||!!isFinite(e)&&e===Math.round(e)}function nE(e,t){return"bigint"!==t.number||/^-?\d+$/.test(e)?t.number:t.numberFallback}var rE=Math.sign||function(e){return e>0?1:e<0?-1:0},iE=Math.log2||function(e){return Math.log(e)/Math.LN2},aE=Math.log10||function(e){return Math.log(e)/Math.LN10},oE=Math.log1p||function(e){return Math.log(e+1)},sE=Math.cbrt||function(e){if(0===e)return e;var t,n=e<0;return n&&(e=-e),t=isFinite(e)?(e/((t=Math.exp(Math.log(e)/3))*t)+2*t)/3:e,n?-t:t},lE=Math.expm1||function(e){return e>=2e-4||e<=-2e-4?Math.exp(e)-1:e+e*e/2+e*e*e/6};function uE(e,t,n){var r={2:"0b",8:"0o",16:"0x"}[t],i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!tE(n))throw new Error("size must be an integer");if(e>2**(n-1)-1||e<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!tE(e))throw new Error("Value must be an integer");e<0&&(e+=2**n),i="i".concat(n)}var a="";return e<0&&(e=-e,a="-"),"".concat(a).concat(r).concat(e.toString(t)).concat(i)}function cE(e,t){if("function"===typeof t)return t(e);if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var{notation:n,precision:r,wordSize:i}=hE(t);switch(n){case"fixed":return pE(e,r);case"exponential":return fE(e,r);case"engineering":return function(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=dE(e),r=mE(n,t),i=r.exponent,a=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(aM(t))for(;t>a.length||i-o+1>a.length;)a.push(0);else for(var s=Math.abs(i-o)-(a.length-1),l=0;l<s;l++)a.push(0);var u=Math.abs(i-o),c=1;for(;u>0;)c++,u--;var h=a.slice(c).join(""),d=aM(t)&&h.length||h.match(/[1-9]/)?"."+h:"",p=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+o.toString();return r.sign+p}(e,r);case"bin":return uE(e,2,i);case"oct":return uE(e,8,i);case"hex":return uE(e,16,i);case"auto":return function(e,t,n){if(isNaN(e)||!isFinite(e))return String(e);var r=EE(null===n||void 0===n?void 0:n.lowerExp,-3),i=EE(null===n||void 0===n?void 0:n.upperExp,5),a=dE(e),o=t?mE(a,t):a;if(o.exponent<r||o.exponent>=i)return fE(e,t);var s=o.coefficients,l=o.exponent;s.length<t&&(s=s.concat(gE(t-s.length))),s=s.concat(gE(l-s.length+1+(s.length<t?t-s.length:0)));var u=l>0?l:0;return u<(s=gE(-l).concat(s)).length-1&&s.splice(u+1,0,"."),o.sign+s.join("")}(e,r,t).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function hE(e){var t,n,r="auto";if(void 0!==e)if(aM(e))t=e;else if(oM(e))t=e.toNumber();else{if(!EM(e))throw new Error("Unsupported type of options, number, BigNumber, or object expected");void 0!==e.precision&&(t=ME(e.precision,(()=>{throw new Error('Option "precision" must be a number or BigNumber')}))),void 0!==e.wordSize&&(n=ME(e.wordSize,(()=>{throw new Error('Option "wordSize" must be a number or BigNumber')}))),e.notation&&(r=e.notation)}return{notation:r,precision:t,wordSize:n}}function dE(e){var t=String(e).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!t)throw new SyntaxError("Invalid number "+e);var n=t[1],r=t[2],i=parseFloat(t[4]||"0"),a=r.indexOf(".");i+=-1!==a?a-1:r.length-1;var o=r.replace(".","").replace(/^0*/,(function(e){return i-=e.length,""})).replace(/0*$/,"").split("").map((function(e){return parseInt(e)}));return 0===o.length&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function pE(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=dE(e),r="number"===typeof t?mE(n,n.exponent+1+t):n,i=r.coefficients,a=r.exponent+1,o=a+(t||0);return i.length<o&&(i=i.concat(gE(o-i.length))),a<0&&(i=gE(1-a).concat(i),a=1),a<i.length&&i.splice(a,0,0===a?"0.":"."),r.sign+i.join("")}function fE(e,t){if(isNaN(e)||!isFinite(e))return String(e);var n=dE(e),r=t?mE(n,t):n,i=r.coefficients,a=r.exponent;i.length<t&&(i=i.concat(gE(t-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(a>=0?"+":"")+a}function mE(e,t){for(var n={sign:e.sign,coefficients:e.coefficients,exponent:e.exponent},r=n.coefficients;t<=0;)r.unshift(0),n.exponent++,t++;if(r.length>t&&r.splice(t,r.length-t)[0]>=5){var i=t-1;for(r[i]++;10===r[i];)r.pop(),0===i&&(r.unshift(0),n.exponent++,i++),r[--i]++}return n}function gE(e){for(var t=[],n=0;n<e;n++)t.push(0);return t}Number.EPSILON;function vE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return!isNaN(e)&&!isNaN(t)&&(isFinite(e)&&isFinite(t)?e===t||Math.abs(e-t)<=Math.max(n*Math.max(Math.abs(e),Math.abs(t)),r):e===t)}var yE=Math.acosh||function(e){return Math.log(Math.sqrt(e*e-1)+e)},xE=Math.asinh||function(e){return Math.log(Math.sqrt(e*e+1)+e)},bE=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},wE=Math.cosh||function(e){return(Math.exp(e)+Math.exp(-e))/2},SE=Math.sinh||function(e){return(Math.exp(e)-Math.exp(-e))/2},_E=Math.tanh||function(e){var t=Math.exp(2*e);return(t-1)/(t+1)};function ME(e,t){return aM(e)?e:oM(e)?e.toNumber():void t()}function EE(e,t){return aM(e)?e:oM(e)?e.toNumber():t}function AE(e,t,n){var r=new(0,e.constructor)(2),i="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!tE(n))throw new Error("size must be an integer");if(e.greaterThan(r.pow(n-1).sub(1))||e.lessThan(r.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!e.isInteger())throw new Error("Value must be an integer");e.lessThan(0)&&(e=e.add(r.pow(n))),i="i".concat(n)}switch(t){case 2:return"".concat(e.toBinary()).concat(i);case 8:return"".concat(e.toOctal()).concat(i);case 16:return"".concat(e.toHexadecimal()).concat(i);default:throw new Error("Base ".concat(t," not supported "))}}function TE(e,t){if("function"===typeof t)return t(e);if(!e.isFinite())return e.isNaN()?"NaN":e.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:i}=hE(t);switch(n){case"fixed":return function(e,t){return e.toFixed(t)}(e,r);case"exponential":return CE(e,r);case"engineering":return function(e,t){var n=e.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=e.mul(Math.pow(10,-r)),a=i.toPrecision(t);if(a.includes("e")){a=new(0,e.constructor)(a).toFixed()}return a+"e"+(n>=0?"+":"")+r.toString()}(e,r);case"bin":return AE(e,2,i);case"oct":return AE(e,8,i);case"hex":return AE(e,16,i);case"auto":var a=DE(null===t||void 0===t?void 0:t.lowerExp,-3),o=DE(null===t||void 0===t?void 0:t.upperExp,5);if(e.isZero())return"0";var s=e.toSignificantDigits(r),l=s.e;return(l>=a&&l<o?s.toFixed():CE(e,r)).replace(/((\.\d*?)(0+))($|e)/,(function(){var e=arguments[2],t=arguments[4];return"."!==e?e+t:t}));default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function CE(e,t){return void 0!==t?e.toExponential(t-1):e.toExponential()}function DE(e,t){return aM(e)?e:oM(e)?e.toNumber():t}function NE(e,t){var n=e.length-t.length,r=e.length;return e.substring(n,r)===t}function RE(e,t){var n=function(e,t){if("number"===typeof e)return cE(e,t);if(oM(e))return TE(e,t);if(function(e){return e&&"object"===typeof e&&"bigint"===typeof e.s&&"bigint"===typeof e.n&&"bigint"===typeof e.d||!1}(e))return t&&"decimal"===t.fraction?e.toString():"".concat(e.s*e.n,"/").concat(e.d);if(Array.isArray(e))return PE(e,t);if(hM(e))return kE(e);if("function"===typeof e)return e.syntax?String(e.syntax):"function";if(e&&"object"===typeof e){return"function"===typeof e.format?e.format(t):e&&e.toString(t)!=={}.toString()?e.toString(t):"{"+Object.keys(e).map((n=>kE(n)+": "+RE(e[n],t))).join(", ")+"}"}return String(e)}(e,t);return t&&"object"===typeof t&&"truncate"in t&&n.length>t.truncate?n.substring(0,t.truncate-3)+"...":n}function kE(e){for(var t=String(e),n="",r=0;r<t.length;){var i=t.charAt(r);n+=i in IE?IE[i]:i,r++}return'"'+n+'"'}var IE={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"};function FE(e){var t=String(e);return t=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function PE(e,t){if(Array.isArray(e)){for(var n="[",r=e.length,i=0;i<r;i++)0!==i&&(n+=", "),n+=PE(e[i],t);return n+="]"}return RE(e,t)}function OE(e,t){if(!hM(e))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+XM(e)+", index: 0)");if(!hM(t))throw new TypeError("Unexpected type of argument in function compareText (expected: string or Array or Matrix, actual: "+XM(t)+", index: 1)");return e===t?0:e>t?1:-1}var BE="ObjectNode",LE=$M(BE,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),this.properties=e||{},e&&("object"!==typeof e||!Object.keys(e).every((function(t){return zM(e[t])}))))throw new TypeError("Object containing Nodes expected")}get type(){return BE}get isObjectNode(){return!0}_compile(e,t){var n={};for(var r in this.properties)if(X_(this.properties,r)){var i=kE(r),a=JSON.parse(i),o=Y_(this.properties,r);n[a]=o._compile(e,t)}return function(e,t,r){var i={};for(var a in n)X_(n,a)&&(i[a]=n[a](e,t,r));return i}}forEach(e){for(var t in this.properties)X_(this.properties,t)&&e(this.properties[t],"properties["+kE(t)+"]",this)}map(e){var t={};for(var r in this.properties)X_(this.properties,r)&&(t[r]=this._ifNode(e(this.properties[r],"properties["+kE(r)+"]",this)));return new n(t)}clone(){var e={};for(var t in this.properties)X_(this.properties,t)&&(e[t]=this.properties[t]);return new n(e)}_toString(e){var t=[];for(var n in this.properties)X_(this.properties,n)&&t.push(kE(n)+": "+this.properties[n].toString(e));return"{"+t.join(", ")+"}"}toJSON(){return{mathjs:BE,properties:this.properties}}static fromJSON(e){return new n(e.properties)}_toHTML(e){var t=[];for(var n in this.properties)X_(this.properties,n)&&t.push('<span class="math-symbol math-property">'+FE(n)+'</span><span class="math-operator math-assignment-operator math-property-assignment-operator math-binary-operator">:</span>'+this.properties[n].toHTML(e));return'<span class="math-parenthesis math-curly-parenthesis">{</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-curly-parenthesis">}</span>'}_toTex(e){var t=[];for(var n in this.properties)X_(this.properties,n)&&t.push("\\mathbf{"+n+":} & "+this.properties[n].toTex(e)+"\\\\");return"\\left\\{\\begin{array}{ll}"+t.join("\n")+"\\end{array}\\right\\}"}}return eE(n,"name",BE),n}),{isClass:!0,isNode:!0});function zE(e,t,n){if(!(this instanceof zE))throw new SyntaxError("Constructor must be called with the new operator");this.actual=e,this.expected=t,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(e)?"["+e.join(", ")+"]":e)+" "+(this.relation||"!=")+" "+(Array.isArray(t)?"["+t.join(", ")+"]":t)+")",this.stack=(new Error).stack}function UE(e,t,n){if(!(this instanceof UE))throw new SyntaxError("Constructor must be called with the new operator");this.index=e,arguments.length<3?(this.min=0,this.max=t):(this.min=t,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}function HE(e){for(var t=[];Array.isArray(e);)t.push(e.length),e=e[0];return t}function qE(e,t,n){var r,i=e.length;if(i!==t[n])throw new zE(i,t[n]);if(n<t.length-1){var a=n+1;for(r=0;r<i;r++){var o=e[r];if(!Array.isArray(o))throw new zE(t.length-1,t.length,"<");qE(e[r],t,a)}}else for(r=0;r<i;r++)if(Array.isArray(e[r]))throw new zE(t.length+1,t.length,">")}function VE(e,t){if(0===t.length){if(Array.isArray(e))throw new zE(e.length,0)}else qE(e,t,0)}function jE(e,t){var n=e.isMatrix?e._size:HE(e);t._sourceSize.forEach(((e,t)=>{if(null!==e&&e!==n[t])throw new zE(e,n[t])}))}function GE(e,t){if(void 0!==e){if(!aM(e)||!tE(e))throw new TypeError("Index must be an integer (value: "+e+")");if(e<0||"number"===typeof t&&e>=t)throw new UE(e,t)}}function WE(e){for(var t=0;t<e._dimensions.length;++t){var n=e._dimensions[t];if(n._data&&dM(n._data)){if(0===n._size[0])return!0}else if(n.isRange){if(n.start===n.end)return!0}else if(hM(n)&&0===n.length)return!0}return!1}function XE(e,t,n){if(!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new Error("Resizing to scalar is not supported");return t.forEach((function(e){if(!aM(e)||!tE(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+RE(t)+")")})),(aM(e)||oM(e))&&(e=[e]),YE(e,t,0,void 0!==n?n:0),e}function YE(e,t,n,r){var i,a,o=e.length,s=t[n],l=Math.min(o,s);if(e.length=s,n<t.length-1){var u=n+1;for(i=0;i<l;i++)a=e[i],Array.isArray(a)||(a=[a],e[i]=a),YE(a,t,u,r);for(i=l;i<s;i++)a=[],e[i]=a,YE(a,t,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(e[i]);)e[i]=e[i][0];for(i=l;i<s;i++)e[i]=r}}function $E(e,t){var n=nA(e),r=n.length;if(!Array.isArray(e)||!Array.isArray(t))throw new TypeError("Array expected");if(0===t.length)throw new zE(0,r,"!=");var i=JE(t=ZE(t,r));if(r!==i)throw new zE(i,r,"!=");try{return function(e,t){for(var n,r=e,i=t.length-1;i>0;i--){var a=t[i];n=[];for(var o=r.length/a,s=0;s<o;s++)n.push(r.slice(s*a,(s+1)*a));r=n}return r}(n,t)}catch(vk){if(vk instanceof zE)throw new zE(i,r,"!=");throw vk}}function ZE(e,t){var n=JE(e),r=e.slice(),i=e.indexOf(-1);if(e.indexOf(-1,i+1)>=0)throw new Error("More than one wildcard in sizes");if(i>=0){if(!(t%n===0))throw new Error("Could not replace wildcard, since "+t+" is no multiple of "+-n);r[i]=-t/n}return r}function JE(e){return e.reduce(((e,t)=>e*t),1)}function KE(e,t){for(var n=t||HE(e);Array.isArray(e)&&1===e.length;)e=e[0],n.shift();for(var r=n.length;1===n[r-1];)r--;return r<n.length&&(e=QE(e,r,0),n.length=r),e}function QE(e,t,n){var r,i;if(n<t){var a=n+1;for(r=0,i=e.length;r<i;r++)e[r]=QE(e[r],t,a)}else for(;Array.isArray(e);)e=e[0];return e}function eA(e,t,n,r){var i=r||HE(e);if(n)for(var a=0;a<n;a++)e=[e],i.unshift(1);for(e=tA(e,t,0);i.length<t;)i.push(1);return e}function tA(e,t,n){var r,i;if(Array.isArray(e)){var a=n+1;for(r=0,i=e.length;r<i;r++)e[r]=tA(e[r],t,a)}else for(var o=n;o<t;o++)e=[e];return e}function nA(e){if(!Array.isArray(e))return e;var t=[];return e.forEach((function e(n){Array.isArray(n)?n.forEach(e):t.push(n)})),t}function rA(e,t){return Array.prototype.map.call(e,t)}function iA(e,t){Array.prototype.forEach.call(e,t)}function aA(e,t){if(1!==HE(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,(e=>t.test(e)))}function oA(e,t){return Array.prototype.join.call(e,t)}function sA(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;var t=[],n=0;t[0]={value:e[0],identifier:0};for(var r=1;r<e.length;r++)e[r]===e[r-1]?n++:n=0,t.push({value:e[r],identifier:n});return t}function lA(e){if(!Array.isArray(e))throw new TypeError("Array input expected");if(0===e.length)return e;for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);return t}function uA(e,t){for(var n,r=0,i=0;i<e.length;i++){var a=e[i],o=Array.isArray(a);if(0===i&&o&&(r=a.length),o&&a.length!==r)return;var s=o?uA(a,t):t(a);if(void 0===n)n=s;else if(n!==s)return"mixed"}return n}function cA(e,t,n,r){if(r<n){if(e.length!==t.length)throw new zE(e.length,t.length);for(var i=[],a=0;a<e.length;a++)i[a]=cA(e[a],t[a],n,r+1);return i}return e.concat(t)}function hA(){var e=Array.prototype.slice.call(arguments,0,-1),t=Array.prototype.slice.call(arguments,-1);if(1===e.length)return e[0];if(e.length>1)return e.slice(1).reduce((function(e,n){return cA(e,n,t,0)}),e[0]);throw new Error("Wrong number of arguments in function concat")}function dA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=t.map((e=>e.length)),i=Math.max(...r),a=new Array(i).fill(null),o=0;o<t.length;o++)for(var s=t[o],l=r[o],u=0;u<l;u++){var c=i-l+u;s[u]>a[c]&&(a[c]=s[u])}for(var h=0;h<t.length;h++)pA(t[h],a);return a}function pA(e,t){for(var n=t.length,r=e.length,i=0;i<r;i++){var a=n-r+i;if(e[i]<t[a]&&e[i]>1||e[i]>t[a])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(e,") not possible to broadcast dimension ").concat(r," with size ").concat(e[i]," to size ").concat(t[a]))}}function fA(e,t){var n=HE(e);if(W_(n,t))return e;pA(n,t);var r,i,a,o=dA(n,t),s=o.length,l=[...Array(s-n.length).fill(1),...n],u=function(e){return Gw([],e)}(e);n.length<s&&(n=HE(u=$E(u,l)));for(var c=0;c<s;c++)n[c]<o[c]&&(r=u,i=o[c],a=c,n=HE(u=hA(...Array(i).fill(r),a)));return u}function mA(e,t){if(!Array.isArray(e))throw new Error("Array expected");var n=HE(e);if(t.length!==n.length)throw new zE(t.length,n.length);for(var r=0;r<t.length;r++)GE(t[r],n[r]);return t.reduce(((e,t)=>e[t]),e)}function gA(e,t,n,r){return Array.isArray(e)?e.map((function(e,i){return gA(e,t.concat(i),n,r)})):r(e,t,n)}function vA(e,t){return new tM(e,new eM(t),new Set(Object.keys(t)))}zE.prototype=new RangeError,zE.prototype.constructor=RangeError,zE.prototype.name="DimensionError",zE.prototype.isDimensionError=!0,UE.prototype=new RangeError,UE.prototype.constructor=RangeError,UE.prototype.name="IndexError",UE.prototype.isIndexError=!0;var yA=[{AssignmentNode:{},FunctionAssignmentNode:{}},{ConditionalNode:{latexLeftParens:!1,latexRightParens:!1,latexParens:!1}},{"OperatorNode:or":{op:"or",associativity:"left",associativeWith:[]}},{"OperatorNode:xor":{op:"xor",associativity:"left",associativeWith:[]}},{"OperatorNode:and":{op:"and",associativity:"left",associativeWith:[]}},{"OperatorNode:bitOr":{op:"|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitXor":{op:"^|",associativity:"left",associativeWith:[]}},{"OperatorNode:bitAnd":{op:"&",associativity:"left",associativeWith:[]}},{"OperatorNode:equal":{op:"==",associativity:"left",associativeWith:[]},"OperatorNode:unequal":{op:"!=",associativity:"left",associativeWith:[]},"OperatorNode:smaller":{op:"<",associativity:"left",associativeWith:[]},"OperatorNode:larger":{op:">",associativity:"left",associativeWith:[]},"OperatorNode:smallerEq":{op:"<=",associativity:"left",associativeWith:[]},"OperatorNode:largerEq":{op:">=",associativity:"left",associativeWith:[]},RelationalNode:{associativity:"left",associativeWith:[]}},{"OperatorNode:leftShift":{op:"<<",associativity:"left",associativeWith:[]},"OperatorNode:rightArithShift":{op:">>",associativity:"left",associativeWith:[]},"OperatorNode:rightLogShift":{op:">>>",associativity:"left",associativeWith:[]}},{"OperatorNode:to":{op:"to",associativity:"left",associativeWith:[]}},{RangeNode:{}},{"OperatorNode:add":{op:"+",associativity:"left",associativeWith:["OperatorNode:add","OperatorNode:subtract"]},"OperatorNode:subtract":{op:"-",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{op:"*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]},"OperatorNode:divide":{op:"/",associativity:"left",associativeWith:[],latexLeftParens:!1,latexRightParens:!1,latexParens:!1},"OperatorNode:dotMultiply":{op:".*",associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","OperatorNode:dotMultiply","OperatorNode:doDivide"]},"OperatorNode:dotDivide":{op:"./",associativity:"left",associativeWith:[]},"OperatorNode:mod":{op:"mod",associativity:"left",associativeWith:[]}},{"OperatorNode:multiply":{associativity:"left",associativeWith:["OperatorNode:multiply","OperatorNode:divide","Operator:dotMultiply","Operator:dotDivide"]}},{"OperatorNode:unaryPlus":{op:"+",associativity:"right"},"OperatorNode:unaryMinus":{op:"-",associativity:"right"},"OperatorNode:bitNot":{op:"~",associativity:"right"},"OperatorNode:not":{op:"not",associativity:"right"}},{"OperatorNode:pow":{op:"^",associativity:"right",associativeWith:[],latexRightParens:!1},"OperatorNode:dotPow":{op:".^",associativity:"right",associativeWith:[]}},{"OperatorNode:factorial":{op:"!",associativity:"left"}},{"OperatorNode:ctranspose":{op:"'",associativity:"left"}}];function xA(e,t){if(!t||"auto"!==t)return e;for(var n=e;qM(n);)n=n.content;return n}function bA(e,t,n,r){var i=e;"keep"!==t&&(i=e.getContent());for(var a=i.getIdentifier(),o=null,s=0;s<yA.length;s++)if(a in yA[s]){o=s;break}if("OperatorNode:multiply"===a&&i.implicit&&"show"!==n){var l=xA(i.args[0],t);FM(l)&&r&&"OperatorNode:divide"===r.getIdentifier()&&PM(xA(r.args[0],t))||"OperatorNode:divide"===l.getIdentifier()&&PM(xA(l.args[0],t))&&FM(xA(l.args[1]))||(o+=1)}return o}function wA(e,t){var n=e;"keep"!==t&&(n=e.getContent());var r=n.getIdentifier(),i=bA(n,t);if(null===i)return null;var a=yA[i][r];if(X_(a,"associativity")){if("left"===a.associativity)return"left";if("right"===a.associativity)return"right";throw Error("'"+r+"' has the invalid associativity '"+a.associativity+"'.")}return null}function SA(e,t,n){var r="keep"!==n?e.getContent():e,i="keep"!==n?e.getContent():t,a=r.getIdentifier(),o=i.getIdentifier(),s=bA(r,n);if(null===s)return null;var l=yA[s][a];if(X_(l,"associativeWith")&&l.associativeWith instanceof Array){for(var u=0;u<l.associativeWith.length;u++)if(l.associativeWith[u]===o)return!0;return!1}return null}var _A=n(147),MA={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},EA={transpose:"^\\top",ctranspose:"^H",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"\\~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},AA={abs:{1:"\\left|${args[0]}\\right|"},add:{2:"\\left(${args[0]}".concat(EA.add,"${args[1]}\\right)")},cbrt:{1:"\\sqrt[3]{${args[0]}}"},ceil:{1:"\\left\\lceil${args[0]}\\right\\rceil"},cube:{1:"\\left(${args[0]}\\right)^3"},divide:{2:"\\frac{${args[0]}}{${args[1]}}"},dotDivide:{2:"\\left(${args[0]}".concat(EA.dotDivide,"${args[1]}\\right)")},dotMultiply:{2:"\\left(${args[0]}".concat(EA.dotMultiply,"${args[1]}\\right)")},dotPow:{2:"\\left(${args[0]}".concat(EA.dotPow,"${args[1]}\\right)")},exp:{1:"\\exp\\left(${args[0]}\\right)"},expm1:"\\left(e".concat(EA.pow,"{${args[0]}}-1\\right)"),fix:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},floor:{1:"\\left\\lfloor${args[0]}\\right\\rfloor"},gcd:"\\gcd\\left(${args}\\right)",hypot:"\\hypot\\left(${args}\\right)",log:{1:"\\ln\\left(${args[0]}\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}\\right)"},log10:{1:"\\log_{10}\\left(${args[0]}\\right)"},log1p:{1:"\\ln\\left(${args[0]}+1\\right)",2:"\\log_{${args[1]}}\\left(${args[0]}+1\\right)"},log2:"\\log_{2}\\left(${args[0]}\\right)",mod:{2:"\\left(${args[0]}".concat(EA.mod,"${args[1]}\\right)")},multiply:{2:"\\left(${args[0]}".concat(EA.multiply,"${args[1]}\\right)")},norm:{1:"\\left\\|${args[0]}\\right\\|",2:void 0},nthRoot:{2:"\\sqrt[${args[1]}]{${args[0]}}"},nthRoots:{2:"\\{y : $y^{args[1]} = {${args[0]}}\\}"},pow:{2:"\\left(${args[0]}\\right)".concat(EA.pow,"{${args[1]}}")},round:{1:"\\left\\lfloor${args[0]}\\right\\rceil",2:void 0},sign:{1:"\\mathrm{${name}}\\left(${args[0]}\\right)"},sqrt:{1:"\\sqrt{${args[0]}}"},square:{1:"\\left(${args[0]}\\right)^2"},subtract:{2:"\\left(${args[0]}".concat(EA.subtract,"${args[1]}\\right)")},unaryMinus:{1:"".concat(EA.unaryMinus,"\\left(${args[0]}\\right)")},unaryPlus:{1:"".concat(EA.unaryPlus,"\\left(${args[0]}\\right)")},bitAnd:{2:"\\left(${args[0]}".concat(EA.bitAnd,"${args[1]}\\right)")},bitNot:{1:EA.bitNot+"\\left(${args[0]}\\right)"},bitOr:{2:"\\left(${args[0]}".concat(EA.bitOr,"${args[1]}\\right)")},bitXor:{2:"\\left(${args[0]}".concat(EA.bitXor,"${args[1]}\\right)")},leftShift:{2:"\\left(${args[0]}".concat(EA.leftShift,"${args[1]}\\right)")},rightArithShift:{2:"\\left(${args[0]}".concat(EA.rightArithShift,"${args[1]}\\right)")},rightLogShift:{2:"\\left(${args[0]}".concat(EA.rightLogShift,"${args[1]}\\right)")},bellNumbers:{1:"\\mathrm{B}_{${args[0]}}"},catalan:{1:"\\mathrm{C}_{${args[0]}}"},stirlingS2:{2:"\\mathrm{S}\\left(${args}\\right)"},arg:{1:"\\arg\\left(${args[0]}\\right)"},conj:{1:"\\left(${args[0]}\\right)^*"},im:{1:"\\Im\\left\\lbrace${args[0]}\\right\\rbrace"},re:{1:"\\Re\\left\\lbrace${args[0]}\\right\\rbrace"},and:{2:"\\left(${args[0]}".concat(EA.and,"${args[1]}\\right)")},not:{1:EA.not+"\\left(${args[0]}\\right)"},or:{2:"\\left(${args[0]}".concat(EA.or,"${args[1]}\\right)")},xor:{2:"\\left(${args[0]}".concat(EA.xor,"${args[1]}\\right)")},cross:{2:"\\left(${args[0]}\\right)\\times\\left(${args[1]}\\right)"},ctranspose:{1:"\\left(${args[0]}\\right)".concat(EA.ctranspose)},det:{1:"\\det\\left(${args[0]}\\right)"},dot:{2:"\\left(${args[0]}\\cdot${args[1]}\\right)"},expm:{1:"\\exp\\left(${args[0]}\\right)"},inv:{1:"\\left(${args[0]}\\right)^{-1}"},pinv:{1:"\\left(${args[0]}\\right)^{+}"},sqrtm:{1:"{${args[0]}}".concat(EA.pow,"{\\frac{1}{2}}")},trace:{1:"\\mathrm{tr}\\left(${args[0]}\\right)"},transpose:{1:"\\left(${args[0]}\\right)".concat(EA.transpose)},combinations:{2:"\\binom{${args[0]}}{${args[1]}}"},combinationsWithRep:{2:"\\left(\\!\\!{\\binom{${args[0]}}{${args[1]}}}\\!\\!\\right)"},factorial:{1:"\\left(${args[0]}\\right)".concat(EA.factorial)},gamma:{1:"\\Gamma\\left(${args[0]}\\right)"},lgamma:{1:"\\ln\\Gamma\\left(${args[0]}\\right)"},equal:{2:"\\left(${args[0]}".concat(EA.equal,"${args[1]}\\right)")},larger:{2:"\\left(${args[0]}".concat(EA.larger,"${args[1]}\\right)")},largerEq:{2:"\\left(${args[0]}".concat(EA.largerEq,"${args[1]}\\right)")},smaller:{2:"\\left(${args[0]}".concat(EA.smaller,"${args[1]}\\right)")},smallerEq:{2:"\\left(${args[0]}".concat(EA.smallerEq,"${args[1]}\\right)")},unequal:{2:"\\left(${args[0]}".concat(EA.unequal,"${args[1]}\\right)")},erf:{1:"erf\\left(${args[0]}\\right)"},max:"\\max\\left(${args}\\right)",min:"\\min\\left(${args}\\right)",variance:"\\mathrm{Var}\\left(${args}\\right)",acos:{1:"\\cos^{-1}\\left(${args[0]}\\right)"},acosh:{1:"\\cosh^{-1}\\left(${args[0]}\\right)"},acot:{1:"\\cot^{-1}\\left(${args[0]}\\right)"},acoth:{1:"\\coth^{-1}\\left(${args[0]}\\right)"},acsc:{1:"\\csc^{-1}\\left(${args[0]}\\right)"},acsch:{1:"\\mathrm{csch}^{-1}\\left(${args[0]}\\right)"},asec:{1:"\\sec^{-1}\\left(${args[0]}\\right)"},asech:{1:"\\mathrm{sech}^{-1}\\left(${args[0]}\\right)"},asin:{1:"\\sin^{-1}\\left(${args[0]}\\right)"},asinh:{1:"\\sinh^{-1}\\left(${args[0]}\\right)"},atan:{1:"\\tan^{-1}\\left(${args[0]}\\right)"},atan2:{2:"\\mathrm{atan2}\\left(${args}\\right)"},atanh:{1:"\\tanh^{-1}\\left(${args[0]}\\right)"},cos:{1:"\\cos\\left(${args[0]}\\right)"},cosh:{1:"\\cosh\\left(${args[0]}\\right)"},cot:{1:"\\cot\\left(${args[0]}\\right)"},coth:{1:"\\coth\\left(${args[0]}\\right)"},csc:{1:"\\csc\\left(${args[0]}\\right)"},csch:{1:"\\mathrm{csch}\\left(${args[0]}\\right)"},sec:{1:"\\sec\\left(${args[0]}\\right)"},sech:{1:"\\mathrm{sech}\\left(${args[0]}\\right)"},sin:{1:"\\sin\\left(${args[0]}\\right)"},sinh:{1:"\\sinh\\left(${args[0]}\\right)"},tan:{1:"\\tan\\left(${args[0]}\\right)"},tanh:{1:"\\tanh\\left(${args[0]}\\right)"},to:{2:"\\left(${args[0]}".concat(EA.to,"${args[1]}\\right)")},numeric:function(e,t){return e.args[0].toTex()},number:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},string:{0:'\\mathtt{""}',1:"\\mathrm{string}\\left(${args[0]}\\right)"},bignumber:{0:"0",1:"\\left(${args[0]}\\right)"},bigint:{0:"0",1:"\\left(${args[0]}\\right)"},complex:{0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)+".concat(MA.i,"\\cdot\\left(${args[1]}\\right)\\right)")},matrix:{0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},sparse:{0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},unit:{1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"}},TA={deg:"^\\circ"};function CA(e){return _A(e,{preserveFormatting:!0})}function DA(e,t){return(t="undefined"!==typeof t&&t)?X_(TA,e)?TA[e]:"\\mathrm{"+CA(e)+"}":X_(MA,e)?MA[e]:CA(e)}var NA="OperatorNode",RA=$M(NA,["Node"],(e=>{var{Node:t}=e;function n(e,t){var r=e;if("auto"===t)for(;qM(r);)r=r.content;return!!FM(r)||!!HM(r)&&n(r.args[0],t)}function r(e,t,r,i,a){var o,s=bA(e,t,r),l=wA(e,t);if("all"===t||i.length>2&&"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier())return i.map((function(e){switch(e.getContent().type){case"ArrayNode":case"ConstantNode":case"SymbolNode":case"ParenthesisNode":return!1;default:return!0}}));switch(i.length){case 0:o=[];break;case 1:var u=bA(i[0],t,r,e);if(a&&null!==u){var c,h;if("keep"===t?(c=i[0].getIdentifier(),h=e.getIdentifier()):(c=i[0].getContent().getIdentifier(),h=e.getContent().getIdentifier()),!1===yA[s][h].latexLeftParens){o=[!1];break}if(!1===yA[u][c].latexParens){o=[!1];break}}if(null===u){o=[!1];break}if(u<=s){o=[!0];break}o=[!1];break;case 2:var d,p,f=bA(i[0],t,r,e),m=SA(e,i[0],t);d=null!==f&&(f===s&&"right"===l&&!m||f<s);var g,v,y,x=bA(i[1],t,r,e),b=SA(e,i[1],t);if(p=null!==x&&(x===s&&"left"===l&&!b||x<s),a)"keep"===t?(g=e.getIdentifier(),v=e.args[0].getIdentifier(),y=e.args[1].getIdentifier()):(g=e.getContent().getIdentifier(),v=e.args[0].getContent().getIdentifier(),y=e.args[1].getContent().getIdentifier()),null!==f&&(!1===yA[s][g].latexLeftParens&&(d=!1),!1===yA[f][v].latexParens&&(d=!1)),null!==x&&(!1===yA[s][g].latexRightParens&&(p=!1),!1===yA[x][y].latexParens&&(p=!1));o=[d,p];break;default:"OperatorNode:add"!==e.getIdentifier()&&"OperatorNode:multiply"!==e.getIdentifier()||(o=i.map((function(n){var i=bA(n,t,r,e),a=SA(e,n,t),o=wA(n,t);return null!==i&&(s===i&&l===o&&!a||i<s)})))}if(i.length>=2&&"OperatorNode:multiply"===e.getIdentifier()&&e.implicit&&"all"!==t&&"hide"===r)for(var w=1;w<o.length;++w)!n(i[w],t)||o[w-1]||"keep"===t&&qM(i[w-1])||(o[w]=!0);return o}class i extends t{constructor(e,t,n,r,i){if(super(),"string"!==typeof e)throw new TypeError('string expected for parameter "op"');if("string"!==typeof t)throw new TypeError('string expected for parameter "fn"');if(!Array.isArray(n)||!n.every(zM))throw new TypeError('Array containing Nodes expected for parameter "args"');this.implicit=!0===r,this.isPercentage=!0===i,this.op=e,this.fn=t,this.args=n||[]}get type(){return NA}get isOperatorNode(){return!0}_compile(e,t){if("string"!==typeof this.fn||!J_(e,this.fn))throw e[this.fn]?new Error('No access to function "'+this.fn+'"'):new Error("Function "+this.fn+' missing in provided namespace "math"');var n=Y_(e,this.fn),r=rA(this.args,(function(n){return n._compile(e,t)}));if("function"===typeof n&&!0===n.rawArgs){var i=this.args;return function(t,r,a){return n(i,e,vA(t,r))}}if(1===r.length){var a=r[0];return function(e,t,r){return n(a(e,t,r))}}if(2===r.length){var o=r[0],s=r[1];return function(e,t,r){return n(o(e,t,r),s(e,t,r))}}return function(e,t,i){return n.apply(null,rA(r,(function(n){return n(e,t,i)})))}}forEach(e){for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=[],n=0;n<this.args.length;n++)t[n]=this._ifNode(e(this.args[n],"args["+n+"]",this));return new i(this.op,this.fn,t,this.implicit,this.isPercentage)}clone(){return new i(this.op,this.fn,this.args.slice(0),this.implicit,this.isPercentage)}isUnary(){return 1===this.args.length}isBinary(){return 2===this.args.length}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,a=r(this,t,n,i,!1);if(1===i.length){var o=wA(this,t),s=i[0].toString(e);a[0]&&(s="("+s+")");var l=/[a-zA-Z]+/.test(this.op);return"right"===o?this.op+(l?" ":"")+s:"left"===o?s+(l?" ":"")+this.op:s+this.op}if(2===i.length){var u=i[0].toString(e),c=i[1].toString(e);return a[0]&&(u="("+u+")"),a[1]&&(c="("+c+")"),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?u+" "+c:u+" "+this.op+" "+c}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var h=i.map((function(t,n){return t=t.toString(e),a[n]&&(t="("+t+")"),t}));return this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?h.join(" "):h.join(" "+this.op+" ")}return this.fn+"("+this.args.join(", ")+")"}toJSON(){return{mathjs:NA,op:this.op,fn:this.fn,args:this.args,implicit:this.implicit,isPercentage:this.isPercentage}}static fromJSON(e){return new i(e.op,e.fn,e.args,e.implicit,e.isPercentage)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,a=r(this,t,n,i,!1);if(1===i.length){var o=wA(this,t),s=i[0].toHTML(e);return a[0]&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),"right"===o?'<span class="math-operator math-unary-operator math-lefthand-unary-operator">'+FE(this.op)+"</span>"+s:s+'<span class="math-operator math-unary-operator math-righthand-unary-operator">'+FE(this.op)+"</span>"}if(2===i.length){var l=i[0].toHTML(e),u=i[1].toHTML(e);return a[0]&&(l='<span class="math-parenthesis math-round-parenthesis">(</span>'+l+'<span class="math-parenthesis math-round-parenthesis">)</span>'),a[1]&&(u='<span class="math-parenthesis math-round-parenthesis">(</span>'+u+'<span class="math-parenthesis math-round-parenthesis">)</span>'),this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?l+'<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'+u:l+'<span class="math-operator math-binary-operator math-explicit-binary-operator">'+FE(this.op)+"</span>"+u}var c=i.map((function(t,n){return t=t.toHTML(e),a[n]&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t}));return i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())?this.implicit&&"OperatorNode:multiply"===this.getIdentifier()&&"hide"===n?c.join('<span class="math-operator math-binary-operator math-implicit-binary-operator"></span>'):c.join('<span class="math-operator math-binary-operator math-explicit-binary-operator">'+FE(this.op)+"</span>"):'<span class="math-function">'+FE(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+c.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=e&&e.implicit?e.implicit:"hide",i=this.args,a=r(this,t,n,i,!0),o=EA[this.fn];if(o="undefined"===typeof o?this.op:o,1===i.length){var s=wA(this,t),l=i[0].toTex(e);return a[0]&&(l="\\left(".concat(l,"\\right)")),"right"===s?o+l:l+o}if(2===i.length){var u=i[0],c=u.toTex(e);a[0]&&(c="\\left(".concat(c,"\\right)"));var h,d=i[1].toTex(e);switch(a[1]&&(d="\\left(".concat(d,"\\right)")),h="keep"===t?u.getIdentifier():u.getContent().getIdentifier(),this.getIdentifier()){case"OperatorNode:divide":return o+"{"+c+"}{"+d+"}";case"OperatorNode:pow":switch(c="{"+c+"}",d="{"+d+"}",h){case"ConditionalNode":case"OperatorNode:divide":c="\\left(".concat(c,"\\right)")}break;case"OperatorNode:multiply":if(this.implicit&&"hide"===n)return c+"~"+d}return c+o+d}if(i.length>2&&("OperatorNode:add"===this.getIdentifier()||"OperatorNode:multiply"===this.getIdentifier())){var p=i.map((function(t,n){return t=t.toTex(e),a[n]&&(t="\\left(".concat(t,"\\right)")),t}));return"OperatorNode:multiply"===this.getIdentifier()&&this.implicit&&"hide"===n?p.join("~"):p.join(o)}return"\\mathrm{"+this.fn+"}\\left("+i.map((function(t){return t.toTex(e)})).join(",")+"\\right)"}getIdentifier(){return this.type+":"+this.fn}}return eE(i,"name",NA),i}),{isClass:!0,isNode:!0}),kA="ParenthesisNode",IA=$M(kA,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),!zM(e))throw new TypeError('Node expected for parameter "content"');this.content=e}get type(){return kA}get isParenthesisNode(){return!0}_compile(e,t){return this.content._compile(e,t)}getContent(){return this.content.getContent()}forEach(e){e(this.content,"content",this)}map(e){var t=e(this.content,"content",this);return new n(t)}clone(){return new n(this.content)}_toString(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"("+this.content.toString(e)+")":this.content.toString(e)}toJSON(){return{mathjs:kA,content:this.content}}static fromJSON(e){return new n(e.content)}_toHTML(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?'<span class="math-parenthesis math-round-parenthesis">(</span>'+this.content.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':this.content.toHTML(e)}_toTex(e){return!e||e&&!e.parenthesis||e&&"keep"===e.parenthesis?"\\left(".concat(this.content.toTex(e),"\\right)"):this.content.toTex(e)}}return eE(n,"name",kA),n}),{isClass:!0,isNode:!0}),FA="RelationalNode",PA=$M(FA,["Node"],(e=>{var{Node:t}=e,n={equal:"==",unequal:"!=",smaller:"<",larger:">",smallerEq:"<=",largerEq:">="};class r extends t{constructor(e,t){if(super(),!Array.isArray(e))throw new TypeError("Parameter conditionals must be an array");if(!Array.isArray(t))throw new TypeError("Parameter params must be an array");if(e.length!==t.length-1)throw new TypeError("Parameter params must contain exactly one more element than parameter conditionals");this.conditionals=e,this.params=t}get type(){return FA}get isRelationalNode(){return!0}_compile(e,t){var n=this,r=this.params.map((n=>n._compile(e,t)));return function(t,i,a){for(var o,s=r[0](t,i,a),l=0;l<n.conditionals.length;l++){if(o=s,s=r[l+1](t,i,a),!Y_(e,n.conditionals[l])(o,s))return!1}return!0}}forEach(e){this.params.forEach(((t,n)=>e(t,"params["+n+"]",this)),this)}map(e){return new r(this.conditionals.slice(),this.params.map(((t,n)=>this._ifNode(e(t,"params["+n+"]",this))),this))}clone(){return new r(this.conditionals,this.params)}_toString(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=bA(this,t,e&&e.implicit),i=this.params.map((function(n,i){var a=bA(n,t,e&&e.implicit);return"all"===t||null!==a&&a<=r?"("+n.toString(e)+")":n.toString(e)})),a=i[0],o=0;o<this.conditionals.length;o++)a+=" "+n[this.conditionals[o]],a+=" "+i[o+1];return a}toJSON(){return{mathjs:FA,conditionals:this.conditionals,params:this.params}}static fromJSON(e){return new r(e.conditionals,e.params)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",r=bA(this,t,e&&e.implicit),i=this.params.map((function(n,i){var a=bA(n,t,e&&e.implicit);return"all"===t||null!==a&&a<=r?'<span class="math-parenthesis math-round-parenthesis">(</span>'+n.toHTML(e)+'<span class="math-parenthesis math-round-parenthesis">)</span>':n.toHTML(e)})),a=i[0],o=0;o<this.conditionals.length;o++)a+='<span class="math-operator math-binary-operator math-explicit-binary-operator">'+FE(n[this.conditionals[o]])+"</span>"+i[o+1];return a}_toTex(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=bA(this,t,e&&e.implicit),r=this.params.map((function(r,i){var a=bA(r,t,e&&e.implicit);return"all"===t||null!==a&&a<=n?"\\left("+r.toTex(e)+"\right)":r.toTex(e)})),i=r[0],a=0;a<this.conditionals.length;a++)i+=EA[this.conditionals[a]]+r[a+1];return i}}return eE(r,"name",FA),r}),{isClass:!0,isNode:!0}),OA="ArrayNode",BA=$M(OA,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){if(super(),this.items=e||[],!Array.isArray(this.items)||!this.items.every(zM))throw new TypeError("Array containing Nodes expected")}get type(){return OA}get isArrayNode(){return!0}_compile(e,t){var n=rA(this.items,(function(n){return n._compile(e,t)}));if("Array"!==e.config.matrix){var r=e.matrix;return function(e,t,i){return r(rA(n,(function(n){return n(e,t,i)})))}}return function(e,t,r){return rA(n,(function(n){return n(e,t,r)}))}}forEach(e){for(var t=0;t<this.items.length;t++){e(this.items[t],"items["+t+"]",this)}}map(e){for(var t=[],r=0;r<this.items.length;r++)t[r]=this._ifNode(e(this.items[r],"items["+r+"]",this));return new n(t)}clone(){return new n(this.items.slice(0))}_toString(e){return"["+this.items.map((function(t){return t.toString(e)})).join(", ")+"]"}toJSON(){return{mathjs:OA,items:this.items}}static fromJSON(e){return new n(e.items)}_toHTML(e){return'<span class="math-parenthesis math-square-parenthesis">[</span>'+this.items.map((function(t){return t.toHTML(e)})).join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){return function t(n,r){var i=n.some(NM)&&!n.every(NM),a=r||i,o=a?"&":"\\\\",s=n.map((function(n){return n.items?t(n.items,!r):n.toTex(e)})).join(o);return i||!a||a&&!r?"\\begin{bmatrix}"+s+"\\end{bmatrix}":s}(this.items,!1)}}return eE(n,"name",OA),n}),{isClass:!0,isNode:!0}),LA="BlockNode",zA=$M(LA,["ResultSet","Node"],(e=>{var{ResultSet:t,Node:n}=e;class r extends n{constructor(e){if(super(),!Array.isArray(e))throw new Error("Array expected");this.blocks=e.map((function(e){var t=e&&e.node,n=!e||void 0===e.visible||e.visible;if(!zM(t))throw new TypeError('Property "node" must be a Node');if("boolean"!==typeof n)throw new TypeError('Property "visible" must be a boolean');return{node:t,visible:n}}))}get type(){return LA}get isBlockNode(){return!0}_compile(e,n){var r=rA(this.blocks,(function(t){return{evaluate:t.node._compile(e,n),visible:t.visible}}));return function(e,n,i){var a=[];return iA(r,(function(t){var r=t.evaluate(e,n,i);t.visible&&a.push(r)})),new t(a)}}forEach(e){for(var t=0;t<this.blocks.length;t++)e(this.blocks[t].node,"blocks["+t+"].node",this)}map(e){for(var t=[],n=0;n<this.blocks.length;n++){var i=this.blocks[n],a=this._ifNode(e(i.node,"blocks["+n+"].node",this));t[n]={node:a,visible:i.visible}}return new r(t)}clone(){var e=this.blocks.map((function(e){return{node:e.node,visible:e.visible}}));return new r(e)}_toString(e){return this.blocks.map((function(t){return t.node.toString(e)+(t.visible?"":";")})).join("\n")}toJSON(){return{mathjs:LA,blocks:this.blocks}}static fromJSON(e){return new r(e.blocks)}_toHTML(e){return this.blocks.map((function(t){return t.node.toHTML(e)+(t.visible?"":'<span class="math-separator">;</span>')})).join('<span class="math-separator"><br /></span>')}_toTex(e){return this.blocks.map((function(t){return t.node.toTex(e)+(t.visible?"":";")})).join("\\;\\;\n")}}return eE(r,"name",LA),r}),{isClass:!0,isNode:!0}),UA="ConditionalNode",HA=$M(UA,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e,t,n){if(super(),!zM(e))throw new TypeError("Parameter condition must be a Node");if(!zM(t))throw new TypeError("Parameter trueExpr must be a Node");if(!zM(n))throw new TypeError("Parameter falseExpr must be a Node");this.condition=e,this.trueExpr=t,this.falseExpr=n}get type(){return UA}get isConditionalNode(){return!0}_compile(e,t){var n=this.condition._compile(e,t),r=this.trueExpr._compile(e,t),i=this.falseExpr._compile(e,t);return function(e,t,a){return function(e){if("number"===typeof e||"boolean"===typeof e||"string"===typeof e)return!!e;if(e){if(oM(e))return!e.isZero();if(lM(e))return!(!e.re&&!e.im);if(cM(e))return!!e.value}if(null===e||void 0===e)return!1;throw new TypeError('Unsupported type of condition "'+XM(e)+'"')}(n(e,t,a))?r(e,t,a):i(e,t,a)}}forEach(e){e(this.condition,"condition",this),e(this.trueExpr,"trueExpr",this),e(this.falseExpr,"falseExpr",this)}map(e){return new n(this._ifNode(e(this.condition,"condition",this)),this._ifNode(e(this.trueExpr,"trueExpr",this)),this._ifNode(e(this.falseExpr,"falseExpr",this)))}clone(){return new n(this.condition,this.trueExpr,this.falseExpr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=bA(this,t,e&&e.implicit),r=this.condition.toString(e),i=bA(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r="("+r+")");var a=this.trueExpr.toString(e),o=bA(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(a="("+a+")");var s=this.falseExpr.toString(e),l=bA(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==l&&l<=n)&&(s="("+s+")"),r+" ? "+a+" : "+s}toJSON(){return{mathjs:UA,condition:this.condition,trueExpr:this.trueExpr,falseExpr:this.falseExpr}}static fromJSON(e){return new n(e.condition,e.trueExpr,e.falseExpr)}_toHTML(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=bA(this,t,e&&e.implicit),r=this.condition.toHTML(e),i=bA(this.condition,t,e&&e.implicit);("all"===t||"OperatorNode"===this.condition.type||null!==i&&i<=n)&&(r='<span class="math-parenthesis math-round-parenthesis">(</span>'+r+'<span class="math-parenthesis math-round-parenthesis">)</span>');var a=this.trueExpr.toHTML(e),o=bA(this.trueExpr,t,e&&e.implicit);("all"===t||"OperatorNode"===this.trueExpr.type||null!==o&&o<=n)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>');var s=this.falseExpr.toHTML(e),l=bA(this.falseExpr,t,e&&e.implicit);return("all"===t||"OperatorNode"===this.falseExpr.type||null!==l&&l<=n)&&(s='<span class="math-parenthesis math-round-parenthesis">(</span>'+s+'<span class="math-parenthesis math-round-parenthesis">)</span>'),r+'<span class="math-operator math-conditional-operator">?</span>'+a+'<span class="math-operator math-conditional-operator">:</span>'+s}_toTex(e){return"\\begin{cases} {"+this.trueExpr.toTex(e)+"}, &\\quad{\\text{if }\\;"+this.condition.toTex(e)+"}\\\\{"+this.falseExpr.toTex(e)+"}, &\\quad{\\text{otherwise}}\\end{cases}"}}return eE(n,"name",UA),n}),{isClass:!0,isNode:!0}),qA="ConstantNode",VA=$M(qA,["Node"],(e=>{var{Node:t}=e;class n extends t{constructor(e){super(),this.value=e}get type(){return qA}get isConstantNode(){return!0}_compile(e,t){var n=this.value;return function(){return n}}forEach(e){}map(e){return this.clone()}clone(){return new n(this.value)}_toString(e){return RE(this.value,e)}_toHTML(e){var t=this._toString(e);switch(XM(this.value)){case"number":case"bigint":case"BigNumber":case"Fraction":return'<span class="math-number">'+t+"</span>";case"string":return'<span class="math-string">'+t+"</span>";case"boolean":return'<span class="math-boolean">'+t+"</span>";case"null":return'<span class="math-null-symbol">'+t+"</span>";case"undefined":return'<span class="math-undefined">'+t+"</span>";default:return'<span class="math-symbol">'+t+"</span>"}}toJSON(){return{mathjs:qA,value:this.value}}static fromJSON(e){return new n(e.value)}_toTex(e){var t=this._toString(e),n=XM(this.value);switch(n){case"string":return"\\mathtt{"+CA(t)+"}";case"number":case"BigNumber":if(!("BigNumber"===n?this.value.isFinite():isFinite(this.value)))return this.value.valueOf()<0?"-\\infty":"\\infty";var r=t.toLowerCase().indexOf("e");return-1!==r?t.substring(0,r)+"\\cdot10^{"+t.substring(r+1)+"}":t;case"bigint":return t.toString();case"Fraction":return this.value.toLatex();default:return t}}}return eE(n,"name",qA),n}),{isClass:!0,isNode:!0}),jA="RangeNode",GA=$M(jA,["Node"],(e=>{var{Node:t}=e;function n(e,t,n){var r=bA(e,t,n),i={},a=bA(e.start,t,n);if(i.start=null!==a&&a<=r||"all"===t,e.step){var o=bA(e.step,t,n);i.step=null!==o&&o<=r||"all"===t}var s=bA(e.end,t,n);return i.end=null!==s&&s<=r||"all"===t,i}class r extends t{constructor(e,t,n){if(super(),!zM(e))throw new TypeError("Node expected");if(!zM(t))throw new TypeError("Node expected");if(n&&!zM(n))throw new TypeError("Node expected");if(arguments.length>3)throw new Error("Too many arguments");this.start=e,this.end=t,this.step=n||null}get type(){return jA}get isRangeNode(){return!0}needsEnd(){return this.filter((function(e){return GM(e)&&"end"===e.name})).length>0}_compile(e,t){var n=e.range,r=this.start._compile(e,t),i=this.end._compile(e,t);if(this.step){var a=this.step._compile(e,t);return function(e,t,o){return n(r(e,t,o),i(e,t,o),a(e,t,o))}}return function(e,t,a){return n(r(e,t,a),i(e,t,a))}}forEach(e){e(this.start,"start",this),e(this.end,"end",this),this.step&&e(this.step,"step",this)}map(e){return new r(this._ifNode(e(this.start,"start",this)),this._ifNode(e(this.end,"end",this)),this.step&&this._ifNode(e(this.step,"step",this)))}clone(){return new r(this.start,this.end,this.step&&this.step)}_toString(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toString(e);if(r.start&&(i="("+i+")"),t=i,this.step){var a=this.step.toString(e);r.step&&(a="("+a+")"),t+=":"+a}var o=this.end.toString(e);return r.end&&(o="("+o+")"),t+=":"+o}toJSON(){return{mathjs:jA,start:this.start,end:this.end,step:this.step}}static fromJSON(e){return new r(e.start,e.end,e.step)}_toHTML(e){var t,r=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),i=this.start.toHTML(e);if(r.start&&(i='<span class="math-parenthesis math-round-parenthesis">(</span>'+i+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t=i,this.step){var a=this.step.toHTML(e);r.step&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+a}var o=this.end.toHTML(e);return r.end&&(o='<span class="math-parenthesis math-round-parenthesis">(</span>'+o+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+='<span class="math-operator math-range-operator">:</span>'+o}_toTex(e){var t=n(this,e&&e.parenthesis?e.parenthesis:"keep",e&&e.implicit),r=this.start.toTex(e);if(t.start&&(r="\\left(".concat(r,"\\right)")),this.step){var i=this.step.toTex(e);t.step&&(i="\\left(".concat(i,"\\right)")),r+=":"+i}var a=this.end.toTex(e);return t.end&&(a="\\left(".concat(a,"\\right)")),r+=":"+a}}return eE(r,"name",jA),r}),{isClass:!0,isNode:!0}),WA=$M("reviver",["classes"],(e=>{var{classes:t}=e;return function(e,n){var r=t[n&&n.mathjs];return r&&"function"===typeof r.fromJSON?r.fromJSON(n):n}})),XA=$M("Chain",["?on","math","typed"],(e=>{var{on:t,math:n,typed:r}=e;function i(e){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");WM(e)?this.value=e.value:this.value=e}function a(e,t){!function(e,t,n){var r,i=!0;Object.defineProperty(e,t,{get:function(){return i&&(r=n(),i=!1),r},set:function(e){r=e,i=!1},configurable:!0,enumerable:!0})}(i.prototype,e,(function(){var e=t();if("function"===typeof e)return o(e)}))}function o(e){return function(){if(0===arguments.length)return new i(e(this.value));for(var t=[this.value],n=0;n<arguments.length;n++)t[n+1]=arguments[n];if(r.isTypedFunction(e)){var a=r.resolve(e,t);if(1===a.params.length)throw new Error("chain function "+e.name+" cannot match rest parameter between chain value and additional arguments.");return new i(a.implementation.apply(e,t))}return new i(e.apply(e,t))}}i.prototype.type="Chain",i.prototype.isChain=!0,i.prototype.done=function(){return this.value},i.prototype.valueOf=function(){return this.value},i.prototype.toString=function(){return RE(this.value)},i.prototype.toJSON=function(){return{mathjs:"Chain",value:this.value}},i.fromJSON=function(e){return new i(e.value)},i.createProxy=function(e,t){if("string"===typeof e)l=e,"function"===typeof(u=t)&&(i.prototype[l]=o(u));else{var n=function(t){X_(e,t)&&void 0===s[t]&&a(t,(()=>e[t]))};for(var r in e)n(r)}var l,u};var s={expression:!0,docs:!0,type:!0,classes:!0,json:!0,error:!0,isChain:!0};return i.createProxy(n),t&&t("import",(function(e,t,n){n||a(e,t)})),i}),{isClass:!0}),YA="FunctionAssignmentNode",$A=$M(YA,["typed","Node"],(e=>{var{typed:t,Node:n}=e;function r(e,t,n){var r=bA(e,t,n),i=bA(e.expr,t,n);return"all"===t||null!==i&&i<=r}class i extends n{constructor(e,t,n){if(super(),"string"!==typeof e)throw new TypeError('String expected for parameter "name"');if(!Array.isArray(t))throw new TypeError('Array containing strings or objects expected for parameter "params"');if(!zM(n))throw new TypeError('Node expected for parameter "expr"');if(YM.has(e))throw new Error('Illegal function name, "'+e+'" is a reserved keyword');var r=new Set;for(var i of t){var a="string"===typeof i?i:i.name;if(r.has(a))throw new Error('Duplicate parameter name "'.concat(a,'"'));r.add(a)}this.name=e,this.params=t.map((function(e){return e&&e.name||e})),this.types=t.map((function(e){return e&&e.type||"any"})),this.expr=n}get type(){return YA}get isFunctionAssignmentNode(){return!0}_compile(e,n){var r=Object.create(n);iA(this.params,(function(e){r[e]=!0}));var i=this.expr._compile(e,r),a=this.name,o=this.params,s=oA(this.types,","),l=a+"("+oA(this.params,", ")+")";return function(e,n,r){var u={};u[s]=function(){for(var t=Object.create(n),a=0;a<o.length;a++)t[o[a]]=arguments[a];return i(e,t,r)};var c=t(a,u);return c.syntax=l,e.set(a,c),c}}forEach(e){e(this.expr,"expr",this)}map(e){var t=this._ifNode(e(this.expr,"expr",this));return new i(this.name,this.params.slice(0),t)}clone(){return new i(this.name,this.params.slice(0),this.expr)}_toString(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toString(e);return r(this,t,e&&e.implicit)&&(n="("+n+")"),this.name+"("+this.params.join(", ")+") = "+n}toJSON(){var e=this.types;return{mathjs:YA,name:this.name,params:this.params.map((function(t,n){return{name:t,type:e[n]}})),expr:this.expr}}static fromJSON(e){return new i(e.name,e.params,e.expr)}_toHTML(e){for(var t=e&&e.parenthesis?e.parenthesis:"keep",n=[],i=0;i<this.params.length;i++)n.push('<span class="math-symbol math-parameter">'+FE(this.params[i])+"</span>");var a=this.expr.toHTML(e);return r(this,t,e&&e.implicit)&&(a='<span class="math-parenthesis math-round-parenthesis">(</span>'+a+'<span class="math-parenthesis math-round-parenthesis">)</span>'),'<span class="math-function">'+FE(this.name)+'</span><span class="math-parenthesis math-round-parenthesis">(</span>'+n.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-round-parenthesis">)</span><span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+a}_toTex(e){var t=e&&e.parenthesis?e.parenthesis:"keep",n=this.expr.toTex(e);return r(this,t,e&&e.implicit)&&(n="\\left(".concat(n,"\\right)")),"\\mathrm{"+this.name+"}\\left("+this.params.map(DA).join(",")+"\\right)="+n}}return eE(i,"name",YA),i}),{isClass:!0,isNode:!0}),ZA="chain",JA=$M(ZA,["typed","Chain"],(e=>{var{typed:t,Chain:n}=e;return t(ZA,{"":function(){return new n},any:function(e){return new n(e)}})})),KA="IndexNode",QA=$M(KA,["Node","size"],(e=>{var{Node:t,size:n}=e;class r extends t{constructor(e,t){if(super(),this.dimensions=e,this.dotNotation=t||!1,!Array.isArray(e)||!e.every(zM))throw new TypeError('Array containing Nodes expected for parameter "dimensions"');if(this.dotNotation&&!this.isObjectProperty())throw new Error("dotNotation only applicable for object properties")}get type(){return KA}get isIndexNode(){return!0}_compile(e,t){var r=rA(this.dimensions,(function(r,i){if(r.filter((e=>e.isSymbolNode&&"end"===e.name)).length>0){var a=Object.create(t);a.end=!0;var o=r._compile(e,a);return function(e,t,r){if(!pM(r)&&!dM(r)&&!hM(r))throw new TypeError('Cannot resolve "end": context must be a Matrix, Array, or string but is '+XM(r));var a=n(r).valueOf(),s=Object.create(t);return s.end=a[i],o(e,s,r)}}return r._compile(e,t)})),i=Y_(e,"index");return function(e,t,n){var a=rA(r,(function(r){return r(e,t,n)}));return i(...a)}}forEach(e){for(var t=0;t<this.dimensions.length;t++)e(this.dimensions[t],"dimensions["+t+"]",this)}map(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this._ifNode(e(this.dimensions[n],"dimensions["+n+"]",this));return new r(t,this.dotNotation)}clone(){return new r(this.dimensions.slice(0),this.dotNotation)}isObjectProperty(){return 1===this.dimensions.length&&FM(this.dimensions[0])&&"string"===typeof this.dimensions[0].value}getObjectProperty(){return this.isObjectProperty()?this.dimensions[0].value:null}_toString(e){return this.dotNotation?"."+this.getObjectProperty():"["+this.dimensions.join(", ")+"]"}toJSON(){return{mathjs:KA,dimensions:this.dimensions,dotNotation:this.dotNotation}}static fromJSON(e){return new r(e.dimensions,e.dotNotation)}_toHTML(e){for(var t=[],n=0;n<this.dimensions.length;n++)t[n]=this.dimensions[n].toHTML();return this.dotNotation?'<span class="math-operator math-accessor-operator">.</span><span class="math-symbol math-property">'+FE(this.getObjectProperty())+"</span>":'<span class="math-parenthesis math-square-parenthesis">[</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-parenthesis math-square-parenthesis">]</span>'}_toTex(e){var t=this.dimensions.map((function(t){return t.toTex(e)}));return this.dotNotation?"."+this.getObjectProperty():"_{"+t.join(",")+"}"}}return eE(r,"name",KA),r}),{isClass:!0,isNode:!0});function eT(e){return e&&e.isIndexError?new UE(e.index+1,e.min+1,void 0!==e.max?e.max+1:void 0):e}function tT(e){var{subset:t}=e;return function(e,n){try{if(Array.isArray(e))return t(e,n);if(e&&"function"===typeof e.subset)return e.subset(n);if("string"===typeof e)return t(e,n);if("object"===typeof e){if(!n.isObjectProperty())throw new TypeError("Cannot apply a numeric index as object property");return Y_(e,n.getObjectProperty())}throw new TypeError("Cannot apply index: unsupported type of object")}catch(r){throw eT(r)}}}var nT="AccessorNode",rT=$M(nT,["subset","Node"],(e=>{var{subset:t,Node:n}=e,r=tT({subset:t});function i(e){return!(DM(e)||NM(e)||FM(e)||BM(e)||UM(e)||qM(e)||GM(e))}class a extends n{constructor(e,t){if(super(),!zM(e))throw new TypeError('Node expected for parameter "object"');if(!LM(t))throw new TypeError('IndexNode expected for parameter "index"');this.object=e,this.index=t}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return nT}get isAccessorNode(){return!0}_compile(e,t){var n=this.object._compile(e,t),i=this.index._compile(e,t);if(this.index.isObjectProperty()){var a=this.index.getObjectProperty();return function(e,t,r){return Y_(n(e,t,r),a)}}return function(e,t,a){var o=n(e,t,a),s=i(e,t,o);return r(o,s)}}forEach(e){e(this.object,"object",this),e(this.index,"index",this)}map(e){return new a(this._ifNode(e(this.object,"object",this)),this._ifNode(e(this.index,"index",this)))}clone(){return new a(this.object,this.index)}_toString(e){var t=this.object.toString(e);return i(this.object)&&(t="("+t+")"),t+this.index.toString(e)}_toHTML(e){var t=this.object.toHTML(e);return i(this.object)&&(t='<span class="math-parenthesis math-round-parenthesis">(</span>'+t+'<span class="math-parenthesis math-round-parenthesis">)</span>'),t+this.index.toHTML(e)}_toTex(e){var t=this.object.toTex(e);return i(this.object)&&(t="\\left(' + object + '\\right)"),t+this.index.toTex(e)}toJSON(){return{mathjs:nT,object:this.object,index:this.index}}static fromJSON(e){return new a(e.object,e.index)}}return eE(a,"name",nT),a}),{isClass:!0,isNode:!0});var iT="AssignmentNode",aT=$M(iT,["subset","?matrix","Node"],(e=>{var{subset:t,matrix:n,Node:r}=e,i=tT({subset:t}),a=function(e){var{subset:t,matrix:n}=e;return function(e,r,i){try{if(Array.isArray(e))return n(e).subset(r,i).valueOf().forEach(((t,n)=>{e[n]=t})),e;if(e&&"function"===typeof e.subset)return e.subset(r,i);if("string"===typeof e)return t(e,r,i);if("object"===typeof e){if(!r.isObjectProperty())throw TypeError("Cannot apply a numeric index as object property");return $_(e,r.getObjectProperty(),i),e}throw new TypeError("Cannot apply index: unsupported type of object")}catch(a){throw eT(a)}}}({subset:t,matrix:n});function o(e,t,n){t||(t="keep");var r=bA(e,t,n),i=bA(e.value,t,n);return"all"===t||null!==i&&i<=r}class s extends r{constructor(e,t,n){if(super(),this.object=e,this.index=n?t:null,this.value=n||t,!GM(e)&&!DM(e))throw new TypeError('SymbolNode or AccessorNode expected as "object"');if(GM(e)&&"end"===e.name)throw new Error('Cannot assign to symbol "end"');if(this.index&&!LM(this.index))throw new TypeError('IndexNode expected as "index"');if(!zM(this.value))throw new TypeError('Node expected as "value"')}get name(){return this.index?this.index.isObjectProperty()?this.index.getObjectProperty():"":this.object.name||""}get type(){return iT}get isAssignmentNode(){return!0}_compile(e,t){var n=this.object._compile(e,t),r=this.index?this.index._compile(e,t):null,o=this.value._compile(e,t),s=this.object.name;if(this.index){if(this.index.isObjectProperty()){var l=this.index.getObjectProperty();return function(e,t,r){var i=n(e,t,r),a=o(e,t,r);return $_(i,l,a),a}}if(GM(this.object))return function(e,t,i){var l=n(e,t,i),u=o(e,t,i),c=r(e,t,l);return e.set(s,a(l,c,u)),u};var u=this.object.object._compile(e,t);if(this.object.index.isObjectProperty()){var c=this.object.index.getObjectProperty();return function(e,t,n){var i=u(e,t,n),s=Y_(i,c),l=r(e,t,s),h=o(e,t,n);return $_(i,c,a(s,l,h)),h}}var h=this.object.index._compile(e,t);return function(e,t,n){var s=u(e,t,n),l=h(e,t,s),c=i(s,l),d=r(e,t,c),p=o(e,t,n);return a(s,l,a(c,d,p)),p}}if(!GM(this.object))throw new TypeError("SymbolNode expected as object");return function(e,t,n){var r=o(e,t,n);return e.set(s,r),r}}forEach(e){e(this.object,"object",this),this.index&&e(this.index,"index",this),e(this.value,"value",this)}map(e){var t=this._ifNode(e(this.object,"object",this)),n=this.index?this._ifNode(e(this.index,"index",this)):null,r=this._ifNode(e(this.value,"value",this));return new s(t,n,r)}clone(){return new s(this.object,this.index,this.value)}_toString(e){var t=this.object.toString(e),n=this.index?this.index.toString(e):"",r=this.value.toString(e);return o(this,e&&e.parenthesis,e&&e.implicit)&&(r="("+r+")"),t+n+" = "+r}toJSON(){return{mathjs:iT,object:this.object,index:this.index,value:this.value}}static fromJSON(e){return new s(e.object,e.index,e.value)}_toHTML(e){var t=this.object.toHTML(e),n=this.index?this.index.toHTML(e):"",r=this.value.toHTML(e);return o(this,e&&e.parenthesis,e&&e.implicit)&&(r='<span class="math-paranthesis math-round-parenthesis">(</span>'+r+'<span class="math-paranthesis math-round-parenthesis">)</span>'),t+n+'<span class="math-operator math-assignment-operator math-variable-assignment-operator math-binary-operator">=</span>'+r}_toTex(e){var t=this.object.toTex(e),n=this.index?this.index.toTex(e):"",r=this.value.toTex(e);return o(this,e&&e.parenthesis,e&&e.implicit)&&(r="\\left(".concat(r,"\\right)")),t+n+"="+r}}return eE(s,"name",iT),s}),{isClass:!0,isNode:!0}),oT=$M("SymbolNode",["math","?Unit","Node"],(e=>{var{math:t,Unit:n,Node:r}=e;function i(e){return!!n&&n.isValuelessUnit(e)}class a extends r{constructor(e){if(super(),"string"!==typeof e)throw new TypeError('String expected for parameter "name"');this.name=e}get type(){return"SymbolNode"}get isSymbolNode(){return!0}_compile(e,t){var r=this.name;if(!0===t[r])return function(e,t,n){return Y_(t,r)};if(r in e)return function(t,n,i){return t.has(r)?t.get(r):Y_(e,r)};var o=i(r);return function(e,t,i){return e.has(r)?e.get(r):o?new n(null,r):a.onUndefinedSymbol(r)}}forEach(e){}map(e){return this.clone()}static onUndefinedSymbol(e){throw new Error("Undefined symbol "+e)}clone(){return new a(this.name)}_toString(e){return this.name}_toHTML(e){var t=FE(this.name);return"true"===t||"false"===t?'<span class="math-symbol math-boolean">'+t+"</span>":"i"===t?'<span class="math-symbol math-imaginary-symbol">'+t+"</span>":"Infinity"===t?'<span class="math-symbol math-infinity-symbol">'+t+"</span>":"NaN"===t?'<span class="math-symbol math-nan-symbol">'+t+"</span>":"null"===t?'<span class="math-symbol math-null-symbol">'+t+"</span>":"undefined"===t?'<span class="math-symbol math-undefined-symbol">'+t+"</span>":'<span class="math-symbol">'+t+"</span>"}toJSON(){return{mathjs:"SymbolNode",name:this.name}}static fromJSON(e){return new a(e.name)}_toTex(e){var n=!1;"undefined"===typeof t[this.name]&&i(this.name)&&(n=!0);var r=DA(this.name,n);return"\\"===r[0]?r:" "+r}}return a}),{isClass:!0,isNode:!0}),sT="FunctionNode",lT=$M(sT,["math","Node","SymbolNode"],(e=>{var t,{math:n,Node:r,SymbolNode:i}=e,a=e=>RE(e,{truncate:78});function o(e,t,n){for(var r,i="",a=/\$(?:\{([a-z_][a-z_0-9]*)(?:\[([0-9]+)\])?\}|\$)/gi,o=0;null!==(r=a.exec(e));)if(i+=e.substring(o,r.index),o=r.index,"$$"===r[0])i+="$",o++;else{o+=r[0].length;var s=t[r[1]];if(!s)throw new ReferenceError("Template: Property "+r[1]+" does not exist.");if(void 0===r[2])switch(typeof s){case"string":i+=s;break;case"object":if(zM(s))i+=s.toTex(n);else{if(!Array.isArray(s))throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes");i+=s.map((function(e,t){if(zM(e))return e.toTex(n);throw new TypeError("Template: "+r[1]+"["+t+"] is not a Node.")})).join(",")}break;default:throw new TypeError("Template: "+r[1]+" has to be a Node, String or array of Nodes")}else{if(!zM(s[r[2]]&&s[r[2]]))throw new TypeError("Template: "+r[1]+"["+r[2]+"] is not a Node.");i+=s[r[2]].toTex(n)}}return i+=e.slice(o)}class s extends r{constructor(e,t){if(super(),"string"===typeof e&&(e=new i(e)),!zM(e))throw new TypeError('Node expected as parameter "fn"');if(!Array.isArray(t)||!t.every(zM))throw new TypeError('Array containing Nodes expected for parameter "args"');this.fn=e,this.args=t||[]}get name(){return this.fn.name||""}get type(){return sT}get isFunctionNode(){return!0}_compile(e,t){var n=this.args.map((n=>n._compile(e,t)));if(!GM(this.fn)){if(DM(this.fn)&&LM(this.fn.index)&&this.fn.index.isObjectProperty()){var r=this.fn.object._compile(e,t),i=this.fn.index.getObjectProperty(),o=this.args;return function(t,a,s){var l=r(t,a,s),u=function(e,t){if(!J_(e,t))throw new Error('No access to method "'+t+'"');return e[t]}(l,i);if(null!==u&&void 0!==u&&u.rawArgs)return u(o,e,vA(t,a));var c=n.map((e=>e(t,a,s)));return u.apply(l,c)}}var l=this.fn.toString(),u=this.fn._compile(e,t),c=this.args;return function(t,r,i){var o=u(t,r,i);if("function"!==typeof o)throw new TypeError("Expression '".concat(l,"' did not evaluate to a function; value is:")+"\n  ".concat(a(o)));if(o.rawArgs)return o(c,e,vA(t,r));var s=n.map((e=>e(t,r,i)));return o.apply(o,s)}}var h=this.fn.name;if(t[h]){var d=this.args;return function(t,r,i){var o=Y_(r,h);if("function"!==typeof o)throw new TypeError("Argument '".concat(h,"' was not a function; received: ").concat(a(o)));if(o.rawArgs)return o(d,e,vA(t,r));var s=n.map((e=>e(t,r,i)));return o.apply(o,s)}}var p=h in e?Y_(e,h):void 0,f="function"===typeof p&&!0===p.rawArgs,m=t=>{var n;if(t.has(h))n=t.get(h);else{if(!(h in e))return s.onUndefinedFunction(h);n=Y_(e,h)}if("function"===typeof n)return n;throw new TypeError("'".concat(h,"' is not a function; its value is:\n  ").concat(a(n)))};if(f){var g=this.args;return function(t,r,i){var a=m(t);return!0===a.rawArgs?a(g,e,vA(t,r)):a(...n.map((e=>e(t,r,i))))}}switch(n.length){case 0:return function(e,t,n){return m(e)()};case 1:return function(e,t,r){return m(e)((0,n[0])(e,t,r))};case 2:return function(e,t,r){var i=m(e),a=n[0],o=n[1];return i(a(e,t,r),o(e,t,r))};default:return function(e,t,r){return m(e)(...n.map((n=>n(e,t,r))))}}}forEach(e){e(this.fn,"fn",this);for(var t=0;t<this.args.length;t++)e(this.args[t],"args["+t+"]",this)}map(e){for(var t=this._ifNode(e(this.fn,"fn",this)),n=[],r=0;r<this.args.length;r++)n[r]=this._ifNode(e(this.args[r],"args["+r+"]",this));return new s(t,n)}clone(){return new s(this.fn,this.args.slice(0))}toString(e){var t,n=this.fn.toString(e);return e&&"object"===typeof e.handler&&X_(e.handler,n)&&(t=e.handler[n](this,e)),"undefined"!==typeof t?t:super.toString(e)}_toString(e){var t=this.args.map((function(t){return t.toString(e)}));return(OM(this.fn)?"("+this.fn.toString(e)+")":this.fn.toString(e))+"("+t.join(", ")+")"}toJSON(){return{mathjs:sT,fn:this.fn,args:this.args}}_toHTML(e){var t=this.args.map((function(t){return t.toHTML(e)}));return'<span class="math-function">'+FE(this.fn)+'</span><span class="math-paranthesis math-round-parenthesis">(</span>'+t.join('<span class="math-separator">,</span>')+'<span class="math-paranthesis math-round-parenthesis">)</span>'}toTex(e){var t;return e&&"object"===typeof e.handler&&X_(e.handler,this.name)&&(t=e.handler[this.name](this,e)),"undefined"!==typeof t?t:super.toTex(e)}_toTex(e){var t,r,i=this.args.map((function(t){return t.toTex(e)}));switch(AA[this.name]&&(t=AA[this.name]),!n[this.name]||"function"!==typeof n[this.name].toTex&&"object"!==typeof n[this.name].toTex&&"string"!==typeof n[this.name].toTex||(t=n[this.name].toTex),typeof t){case"function":r=t(this,e);break;case"string":r=o(t,this,e);break;case"object":switch(typeof t[i.length]){case"function":r=t[i.length](this,e);break;case"string":r=o(t[i.length],this,e)}}return"undefined"!==typeof r?r:o("\\mathrm{${name}}\\left(${args}\\right)",this,e)}getIdentifier(){return this.type+":"+this.name}}return t=s,eE(s,"name",sT),eE(s,"onUndefinedFunction",(function(e){throw new Error("Undefined function "+e)})),eE(s,"fromJSON",(function(e){return new t(e.fn,e.args)})),s}),{isClass:!0,isNode:!0});function uT(e){var t,n,r=e.length,i=e[0].length,a=[];for(n=0;n<i;n++){var o=[];for(t=0;t<r;t++)o.push(e[t][n]);a.push(o)}return a}function cT(e){for(var t=0;t<e.length;t++)if(fM(e[t]))return!0;return!1}function hT(e,t){pM(e)&&(e=e.valueOf());for(var n=0,r=e.length;n<r;n++){var i=e[n];Array.isArray(i)?hT(i,t):t(i)}}function dT(e,t,n){return e&&"function"===typeof e.map?e.map((function(e){return dT(e,t,n)})):t(e)}function pT(e,t,n){var r=Array.isArray(e)?HE(e):e.size();if(t<0||t>=r.length)throw new UE(t,r.length);return pM(e)?e.create(fT(e.valueOf(),t,n),e.datatype()):fT(e,t,n)}function fT(e,t,n){var r,i,a,o;if(t<=0){if(Array.isArray(e[0])){for(o=uT(e),i=[],r=0;r<o.length;r++)i[r]=fT(o[r],t-1,n);return i}for(a=e[0],r=1;r<e.length;r++)a=n(a,e[r]);return a}for(i=[],r=0;r<e.length;r++)i[r]=fT(e[r],t-1,n);return i}function mT(e,t,n,r,i,a,o,s,l,u,c){var h,d,p,f,m=e._values,g=e._index,v=e._ptr;if(r)for(d=v[t],p=v[t+1],h=d;h<p;h++)n[f=g[h]]!==a?(n[f]=a,o.push(f),u?(r[f]=l?s(m[h],c):s(c,m[h]),i[f]=a):r[f]=m[h]):(r[f]=l?s(m[h],r[f]):s(r[f],m[h]),i[f]=a);else for(d=v[t],p=v[t+1],h=d;h<p;h++)n[f=g[h]]!==a?(n[f]=a,o.push(f)):i[f]=a}var gT="parse",vT=$M(gT,["typed","numeric","config","AccessorNode","ArrayNode","AssignmentNode","BlockNode","ConditionalNode","ConstantNode","FunctionAssignmentNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","RangeNode","RelationalNode","SymbolNode"],(e=>{var{typed:t,numeric:n,config:r,AccessorNode:i,ArrayNode:a,AssignmentNode:o,BlockNode:s,ConditionalNode:l,ConstantNode:u,FunctionAssignmentNode:c,FunctionNode:h,IndexNode:d,ObjectNode:p,OperatorNode:f,ParenthesisNode:m,RangeNode:g,RelationalNode:v,SymbolNode:y}=e,x=t(gT,{string:function(e){return O(e,{})},"Array | Matrix":function(e){return b(e,{})},"string, Object":function(e,t){return O(e,void 0!==t.nodes?t.nodes:{})},"Array | Matrix, Object":b});function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0!==t.nodes?t.nodes:{};return dT(e,(function(e){if("string"!==typeof e)throw new TypeError("String expected");return O(e,n)}))}var w={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},S={",":!0,"(":!0,")":!0,"[":!0,"]":!0,"{":!0,"}":!0,'"':!0,"'":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"~":!0,"!":!0,"&":!0,"|":!0,"^|":!0,"=":!0,":":!0,"?":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0,"<<":!0,">>":!0,">>>":!0},_={mod:!0,to:!0,in:!0,and:!0,xor:!0,or:!0,not:!0},M={true:!0,false:!1,null:null,undefined:void 0},E=["NaN","Infinity"],A={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function T(e,t){return e.expression.substr(e.index,t)}function C(e){return T(e,1)}function D(e){e.index++}function N(e){return e.expression.charAt(e.index-1)}function R(e){return e.expression.charAt(e.index+1)}function k(e){for(e.tokenType=w.NULL,e.token="",e.comment="";;){if("#"===C(e))for(;"\n"!==C(e)&&""!==C(e);)e.comment+=C(e),D(e);if(!x.isWhitespace(C(e),e.nestingLevel))break;D(e)}if(""!==C(e)){if("\n"===C(e)&&!e.nestingLevel)return e.tokenType=w.DELIMITER,e.token=C(e),void D(e);var t=C(e),n=T(e,2),r=T(e,3);if(3===r.length&&S[r])return e.tokenType=w.DELIMITER,e.token=r,D(e),D(e),void D(e);if(2===n.length&&S[n])return e.tokenType=w.DELIMITER,e.token=n,D(e),void D(e);if(S[t])return e.tokenType=w.DELIMITER,e.token=t,void D(e);if(x.isDigitDot(t)){e.tokenType=w.NUMBER;var i=T(e,2);if("0b"===i||"0o"===i||"0x"===i){for(e.token+=C(e),D(e),e.token+=C(e),D(e);x.isHexDigit(C(e));)e.token+=C(e),D(e);if("."===C(e))for(e.token+=".",D(e);x.isHexDigit(C(e));)e.token+=C(e),D(e);else if("i"===C(e))for(e.token+="i",D(e);x.isDigit(C(e));)e.token+=C(e),D(e);return}if("."===C(e)){if(e.token+=C(e),D(e),!x.isDigit(C(e)))return void(e.tokenType=w.DELIMITER)}else{for(;x.isDigit(C(e));)e.token+=C(e),D(e);x.isDecimalMark(C(e),R(e))&&(e.token+=C(e),D(e))}for(;x.isDigit(C(e));)e.token+=C(e),D(e);if("E"===C(e)||"e"===C(e))if(x.isDigit(R(e))||"-"===R(e)||"+"===R(e)){if(e.token+=C(e),D(e),"+"!==C(e)&&"-"!==C(e)||(e.token+=C(e),D(e)),!x.isDigit(C(e)))throw ne(e,'Digit expected, got "'+C(e)+'"');for(;x.isDigit(C(e));)e.token+=C(e),D(e);if(x.isDecimalMark(C(e),R(e)))throw ne(e,'Digit expected, got "'+C(e)+'"')}else if("."===R(e))throw D(e),ne(e,'Digit expected, got "'+C(e)+'"')}else{if(!x.isAlpha(C(e),N(e),R(e))){for(e.tokenType=w.UNKNOWN;""!==C(e);)e.token+=C(e),D(e);throw ne(e,'Syntax error in part "'+e.token+'"')}for(;x.isAlpha(C(e),N(e),R(e))||x.isDigit(C(e));)e.token+=C(e),D(e);X_(_,e.token)?e.tokenType=w.DELIMITER:e.tokenType=w.SYMBOL}}else e.tokenType=w.DELIMITER}function I(e){do{k(e)}while("\n"===e.token)}function F(e){e.nestingLevel++}function P(e){e.nestingLevel--}function O(e,t){var n={extraNodes:{},expression:"",comment:"",index:0,token:"",tokenType:w.NULL,nestingLevel:0,conditionalLevel:null};Gw(n,{expression:e,extraNodes:t}),k(n);var r=function(e){var t,n,r=[];""!==e.token&&"\n"!==e.token&&";"!==e.token&&(t=B(e),e.comment&&(t.comment=e.comment));for(;"\n"===e.token||";"===e.token;)0===r.length&&t&&(n=";"!==e.token,r.push({node:t,visible:n})),k(e),"\n"!==e.token&&";"!==e.token&&""!==e.token&&(t=B(e),e.comment&&(t.comment=e.comment),n=";"!==e.token,r.push({node:t,visible:n}));return r.length>0?new s(r):(t||(t=new u(void 0),e.comment&&(t.comment=e.comment)),t)}(n);if(""!==n.token)throw n.tokenType===w.DELIMITER?re(n,"Unexpected operator "+n.token):ne(n,'Unexpected part "'+n.token+'"');return r}function B(e){var t,n,r,i,a=function(e){var t=function(e){var t=L(e);for(;"or"===e.token;)I(e),t=new f("or","or",[t,L(e)]);return t}(e);for(;"?"===e.token;){var n=e.conditionalLevel;e.conditionalLevel=e.nestingLevel,I(e);var r=t,i=B(e);if(":"!==e.token)throw ne(e,"False part of conditional expression expected");e.conditionalLevel=null,I(e);var a=B(e);t=new l(r,i,a),e.conditionalLevel=n}return t}(e);if("="===e.token){if(GM(a))return t=a.name,I(e),r=B(e),new o(new y(t),r);if(DM(a))return I(e),r=B(e),new o(a.object,a.index,r);if(BM(a)&&GM(a.fn)&&(i=!0,n=[],t=a.name,a.args.forEach((function(e,t){GM(e)?n[t]=e.name:i=!1})),i))return I(e),r=B(e),new c(t,n,r);throw ne(e,"Invalid left hand side of assignment operator =")}return a}function L(e){for(var t=z(e);"xor"===e.token;)I(e),t=new f("xor","xor",[t,z(e)]);return t}function z(e){for(var t=U(e);"and"===e.token;)I(e),t=new f("and","and",[t,U(e)]);return t}function U(e){for(var t=H(e);"|"===e.token;)I(e),t=new f("|","bitOr",[t,H(e)]);return t}function H(e){for(var t=q(e);"^|"===e.token;)I(e),t=new f("^|","bitXor",[t,q(e)]);return t}function q(e){for(var t=V(e);"&"===e.token;)I(e),t=new f("&","bitAnd",[t,V(e)]);return t}function V(e){for(var t=[j(e)],n=[],r={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallerEq",">=":"largerEq"};X_(r,e.token);){var i={name:e.token,fn:r[e.token]};n.push(i),I(e),t.push(j(e))}return 1===t.length?t[0]:2===t.length?new f(n[0].name,n[0].fn,t):new v(n.map((e=>e.fn)),t)}function j(e){var t,n,r,i;t=G(e);for(var a={"<<":"leftShift",">>":"rightArithShift",">>>":"rightLogShift"};X_(a,e.token);)r=a[n=e.token],I(e),i=[t,G(e)],t=new f(n,r,i);return t}function G(e){var t,n,r,i;t=W(e);for(var a={to:"to",in:"to"};X_(a,e.token);)r=a[n=e.token],I(e),"in"===n&&""===e.token?t=new f("*","multiply",[t,new y("in")],!0):(i=[t,W(e)],t=new f(n,r,i));return t}function W(e){var t,n=[];if(t=":"===e.token?new u(1):X(e),":"===e.token&&e.conditionalLevel!==e.nestingLevel){for(n.push(t);":"===e.token&&n.length<3;)I(e),")"===e.token||"]"===e.token||","===e.token||""===e.token?n.push(new y("end")):n.push(X(e));t=3===n.length?new g(n[0],n[2],n[1]):new g(n[0],n[1])}return t}function X(e){var t,n,r,i;t=Y(e);for(var a={"+":"add","-":"subtract"};X_(a,e.token);){r=a[n=e.token],I(e);var o=Y(e);i=o.isPercentage?[t,new f("*","multiply",[t,o])]:[t,o],t=new f(n,r,i)}return t}function Y(e){var t,n,r,i;n=t=$(e);for(var a={"*":"multiply",".*":"dotMultiply","/":"divide","./":"dotDivide","%":"mod",mod:"mod"};X_(a,e.token);)if(i=a[r=e.token],I(e),"%"===r&&e.tokenType===w.DELIMITER&&"("!==e.token)if(""!==e.token&&a[e.token]){var o=new f("/","divide",[t,new u(100)],!1,!0);i=a[r=e.token],I(e),n=$(e),t=new f(r,i,[o,n])}else t=new f("/","divide",[t,new u(100)],!1,!0);else n=$(e),t=new f(r,i,[t,n]);return t}function $(e){var t,n;for(n=t=Z(e);e.tokenType===w.SYMBOL||"in"===e.token&&FM(t)||"in"===e.token&&HM(t)&&"unaryMinus"===t.fn&&FM(t.args[0])||!(e.tokenType!==w.NUMBER||FM(n)||HM(n)&&"!"!==n.op)||"("===e.token;)n=Z(e),t=new f("*","multiply",[t,n],!0);return t}function Z(e){for(var t=J(e),n=t,r=[];"/"===e.token&&PM(n);){if(r.push(Gw({},e)),I(e),e.tokenType!==w.NUMBER){Gw(e,r.pop());break}if(r.push(Gw({},e)),I(e),e.tokenType!==w.SYMBOL&&"("!==e.token&&"in"!==e.token){r.pop(),Gw(e,r.pop());break}Gw(e,r.pop()),r.pop(),n=J(e),t=new f("/","divide",[t,n])}return t}function J(e){var t,i,o,s={"-":"unaryMinus","+":"unaryPlus","~":"bitNot",not:"not"};return X_(s,e.token)?(o=s[e.token],t=e.token,I(e),i=[J(e)],new f(t,o,i)):function(e){var t,i,o,s;t=function(e){var t,i,o;t=function(e){var t=[];if(e.tokenType===w.SYMBOL&&X_(e.extraNodes,e.token)){var i=e.extraNodes[e.token];if(k(e),"("===e.token){if(t=[],F(e),k(e),")"!==e.token)for(t.push(B(e));","===e.token;)k(e),t.push(B(e));if(")"!==e.token)throw ne(e,"Parenthesis ) expected");P(e),k(e)}return new i(t)}return function(e){var t;if(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in _)return t=e.token,k(e),K(e,X_(M,t)?new u(M[t]):E.includes(t)?new u(n(t,"number")):new y(t));return function(e){var t;if('"'===e.token||"'"===e.token)return t=Q(e,e.token),K(e,new u(t));return function(e){var t,i,o,s;if("["===e.token){if(F(e),k(e),"]"!==e.token){var l=ee(e);if(";"===e.token){for(o=1,i=[l];";"===e.token;)k(e),"]"!==e.token&&(i[o]=ee(e),o++);if("]"!==e.token)throw ne(e,"End of matrix ] expected");P(e),k(e),s=i[0].items.length;for(var c=1;c<o;c++)if(i[c].items.length!==s)throw re(e,"Column dimensions mismatch ("+i[c].items.length+" !== "+s+")");t=new a(i)}else{if("]"!==e.token)throw ne(e,"End of matrix ] expected");P(e),k(e),t=l}}else P(e),k(e),t=new a([]);return K(e,t)}return function(e){if("{"===e.token){var t;F(e);var i={};do{if(k(e),"}"!==e.token){if('"'===e.token||"'"===e.token)t=Q(e,e.token);else{if(!(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in _))throw ne(e,"Symbol or string expected as object key");t=e.token,k(e)}if(":"!==e.token)throw ne(e,"Colon : expected after object key");k(e),i[t]=B(e)}}while(","===e.token);if("}"!==e.token)throw ne(e,"Comma , or bracket } expected after object value");P(e),k(e);var a=new p(i);return a=K(e,a)}return function(e){var t;if(e.tokenType===w.NUMBER){t=e.token,k(e);var i=nE(t,r),a=n(t,i);return new u(a)}return function(e){var t;if("("===e.token){if(F(e),k(e),t=B(e),")"!==e.token)throw ne(e,"Parenthesis ) expected");return P(e),k(e),t=K(e,t=new m(t))}return function(e){throw""===e.token?ne(e,"Unexpected end of expression"):ne(e,"Value expected")}(e)}(e)}(e)}(e)}(e)}(e)}(e)}(e);var s={"!":"factorial","'":"ctranspose"};for(;X_(s,e.token);)o=s[i=e.token],k(e),t=K(e,t=new f(i,o,[t]));return t}(e),("^"===e.token||".^"===e.token)&&(o="^"===(i=e.token)?"pow":"dotPow",I(e),s=[t,J(e)],t=new f(i,o,s));return t}(e)}function K(e,t,n){for(var r;("("===e.token||"["===e.token||"."===e.token)&&(!n||n.includes(e.token));)if(r=[],"("===e.token){if(!GM(t)&&!DM(t))return t;if(F(e),k(e),")"!==e.token)for(r.push(B(e));","===e.token;)k(e),r.push(B(e));if(")"!==e.token)throw ne(e,"Parenthesis ) expected");P(e),k(e),t=new h(t,r)}else if("["===e.token){if(F(e),k(e),"]"!==e.token)for(r.push(B(e));","===e.token;)k(e),r.push(B(e));if("]"!==e.token)throw ne(e,"Parenthesis ] expected");P(e),k(e),t=new i(t,new d(r))}else{if(k(e),!(e.tokenType===w.SYMBOL||e.tokenType===w.DELIMITER&&e.token in _))throw ne(e,"Property name expected after dot");r.push(new u(e.token)),k(e);t=new i(t,new d(r,!0))}return t}function Q(e,t){for(var n="";""!==C(e)&&C(e)!==t;)if("\\"===C(e)){D(e);var r=C(e),i=A[r];if(void 0!==i)n+=i,e.index+=1;else{if("u"!==r)throw ne(e,"Bad escape character \\".concat(r));var a=e.expression.slice(e.index+1,e.index+5);if(!/^[0-9A-Fa-f]{4}$/.test(a))throw ne(e,"Invalid unicode character \\u".concat(a));n+=String.fromCharCode(parseInt(a,16)),e.index+=5}}else n+=C(e),D(e);if(k(e),e.token!==t)throw ne(e,"End of string ".concat(t," expected"));return k(e),n}function ee(e){for(var t=[B(e)],n=1;","===e.token;)k(e),"]"!==e.token&&";"!==e.token&&(t[n]=B(e),n++);return new a(t)}function te(e){return e.index-e.token.length+1}function ne(e,t){var n=te(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}function re(e,t){var n=te(e),r=new SyntaxError(t+" (char "+n+")");return r.char=n,r}return x.isAlpha=function(e,t,n){return x.isValidLatinOrGreek(e)||x.isValidMathSymbol(e,n)||x.isValidMathSymbol(t,e)},x.isValidLatinOrGreek=function(e){return/^[a-zA-Z_$\u00C0-\u02AF\u0370-\u03FF\u2100-\u214F]$/.test(e)},x.isValidMathSymbol=function(e,t){return/^[\uD835]$/.test(e)&&/^[\uDC00-\uDFFF]$/.test(t)&&/^[^\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDFCC\uDFCD]$/.test(t)},x.isWhitespace=function(e,t){return" "===e||"\t"===e||"\n"===e&&t>0},x.isDecimalMark=function(e,t){return"."===e&&"/"!==t&&"*"!==t&&"^"!==t},x.isDigitDot=function(e){return e>="0"&&e<="9"||"."===e},x.isDigit=function(e){return e>="0"&&e<="9"},x.isHexDigit=function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},t.addConversion({from:"string",to:"Node",convert:x}),x})),yT=$M("resolve",["typed","parse","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode"],(e=>{var{typed:t,parse:n,ConstantNode:r,FunctionNode:i,OperatorNode:a,ParenthesisNode:o}=e;function s(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(!t)return e;if(GM(e)){if(l.has(e.name)){var u=Array.from(l).join(", ");throw new ReferenceError("recursive loop of variable definitions among {".concat(u,"}"))}var c=t.get(e.name);if(zM(c)){var h=new Set(l);return h.add(e.name),s(c,t,h)}return"number"===typeof c?n(String(c)):void 0!==c?new r(c):e}if(HM(e)){var d=e.args.map((function(e){return s(e,t,l)}));return new a(e.op,e.fn,d,e.implicit)}if(qM(e))return new o(s(e.content,t,l));if(BM(e)){var p=e.args.map((function(e){return s(e,t,l)}));return new i(e.name,p)}return e.map((e=>s(e,t,l)))}return t("resolve",{Node:s,"Node, Map | null | undefined":s,"Node, Object":(e,t)=>s(e,iM(t)),"Array | Matrix":t.referToSelf((e=>t=>t.map((t=>e(t))))),"Array | Matrix, null | undefined":t.referToSelf((e=>t=>t.map((t=>e(t))))),"Array, Object":t.referTo("Array,Map",(e=>(t,n)=>e(t,iM(n)))),"Matrix, Object":t.referTo("Matrix,Map",(e=>(t,n)=>e(t,iM(n)))),"Array | Matrix, Map":t.referToSelf((e=>(t,n)=>t.map((t=>e(t,n)))))})}));function xT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xT(Object(n),!0).forEach((function(t){eE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wT=$M("simplifyUtil",["FunctionNode","OperatorNode","SymbolNode"],(e=>{var{FunctionNode:t,OperatorNode:n,SymbolNode:r}=e,i=!0,a=!1,o="defaultF",s={add:{trivial:i,total:i,commutative:i,associative:i},unaryPlus:{trivial:i,total:i,commutative:i,associative:i},subtract:{trivial:a,total:i,commutative:a,associative:a},multiply:{trivial:i,total:i,commutative:i,associative:i},divide:{trivial:a,total:i,commutative:a,associative:a},paren:{trivial:i,total:i,commutative:i,associative:a},defaultF:{trivial:a,total:i,commutative:a,associative:a}};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,r=o;if("string"===typeof e?r=e:HM(e)?r=e.fn.toString():BM(e)?r=e.name:qM(e)&&(r="paren"),X_(n,r)){var i=n[r];if(X_(i,t))return i[t];if(X_(s,r))return s[r][t]}if(X_(n,o)){var a=n[o];return X_(a,t)?a[t]:s[o][t]}if(X_(s,r)){var l=s[r];if(X_(l,t))return l[t]}return s[o][t]}function u(e){return l(e,"associative",arguments.length>1&&void 0!==arguments[1]?arguments[1]:s)}function c(e,t){var n,r=[],i=function(e){for(var t=0;t<e.args.length;t++){var a=e.args[t];HM(a)&&n===a.op?i(a):r.push(a)}};return u(e,t)?(n=e.op,i(e),r):e.args}function h(e){return HM(e)?function(t){try{return new n(e.op,e.fn,t,e.implicit)}catch(r){return console.error(r),[]}}:function(n){return new t(new r(e.name),n)}}return{createMakeNodeFunction:h,hasProperty:l,isCommutative:function(e){return l(e,"commutative",arguments.length>1&&void 0!==arguments[1]?arguments[1]:s)},isAssociative:u,mergeContext:function(e,t){var n=bT({},e);for(var r in t)X_(e,r)?n[r]=bT(bT({},t[r]),e[r]):n[r]=t[r];return n},flatten:function e(t,n){if(!t.args||0===t.args.length)return t;t.args=c(t,n);for(var r=0;r<t.args.length;r++)e(t.args[r],n)},allChildren:c,unflattenr:function e(t,n){if(t.args&&0!==t.args.length){for(var r=h(t),i=t.args.length,a=0;a<i;a++)e(t.args[a],n);if(i>2&&u(t,n)){for(var o=t.args.pop();t.args.length>0;)o=r([t.args.pop(),o]);t.args=o.args}}},unflattenl:function e(t,n){if(t.args&&0!==t.args.length){for(var r=h(t),i=t.args.length,a=0;a<i;a++)e(t.args[a],n);if(i>2&&u(t,n)){for(var o=t.args.shift();t.args.length>0;)o=r([o,t.args.shift()]);t.args=o.args}}},defaultContext:s,realContext:{divide:{total:a},log:{total:a}},positiveContext:{subtract:{total:a},abs:{trivial:i},log:{total:i}}}}));function ST(){throw new Error('No "bignumber" implementation available')}function _T(){throw new Error('No "fraction" implementation available')}function MT(){throw new Error('No "matrix" implementation available')}var ET=$M("simplifyConstant",["typed","config","mathWithTransform","matrix","?fraction","?bignumber","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode"],(e=>{var{typed:t,config:n,mathWithTransform:r,matrix:i,fraction:a,bignumber:o,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:p,SymbolNode:f}=e,{isCommutative:m,isAssociative:g,allChildren:v,createMakeNodeFunction:y}=wT({FunctionNode:c,OperatorNode:p,SymbolNode:f}),x=t("simplifyConstant",{Node:e=>_(C(e,{})),"Node, Object":function(e,t){return _(C(e,t))}});function b(e){return uM(e)?e.valueOf():e instanceof Array?e.map(b):pM(e)?i(b(e.valueOf())):e}function w(e,t,n){try{return r[e].apply(null,t)}catch(i){return t=t.map(b),E(r[e].apply(null,t),n)}}var S=t({Fraction:function(e){var t=e=>"BigNumber"===n.number&&o?o(e):Number(e),r=e.s*e.n,i=r<0n?new p("-","unaryMinus",[new u(-t(r))]):new u(t(r));return 1n===e.d?i:new p("/","divide",[i,new u(t(e.d))])},number:function(e){return e<0?A(new u(-e)):new u(e)},BigNumber:function(e){return e<0?A(new u(-e)):new u(e)},bigint:function(e){return e<0n?A(new u(-e)):new u(e)},Complex:function(e){throw new Error("Cannot convert Complex number to Node")},string:function(e){return new u(e)},Matrix:function(e){return new l(e.valueOf().map((e=>S(e))))}});function _(e){return zM(e)?e:S(e)}function M(e,t){if(t&&!1!==t.exactFractions&&isFinite(e)&&a){var n=a(e),r=t&&"number"===typeof t.fractionsLimit?t.fractionsLimit:1/0;if(n.valueOf()===e&&n.n<r&&n.d<r)return n}return e}var E=t({"string, Object":function(e,t){var r=nE(e,n);return"BigNumber"===r?(void 0===o&&ST(),o(e)):"bigint"===r?BigInt(e):"Fraction"===r?(void 0===a&&_T(),a(e)):M(parseFloat(e),t)},"Fraction, Object":function(e,t){return e},"BigNumber, Object":function(e,t){return e},"number, Object":function(e,t){return M(e,t)},"bigint, Object":function(e,t){return e},"Complex, Object":function(e,t){return 0!==e.im?e:M(e.re,t)},"Matrix, Object":function(e,t){return i(M(e.valueOf()))},"Array, Object":function(e,t){return e.map(M)}});function A(e){return new p("-","unaryMinus",[e])}function T(e,t,n,r){var i=t.shift(),a=t.reduce(((t,i)=>{if(!zM(i)){var a=t.pop();if(zM(a))return[a,i];try{return t.push(w(e,[a,i],r)),t}catch(s){t.push(a)}}t.push(_(t.pop()));var o=1===t.length?t[0]:n(t);return[n([o,_(i)])]}),[i]);return 1===a.length?a[0]:n([a[0],S(a[1])])}function C(e,t){switch(e.type){case"SymbolNode":return e;case"ConstantNode":switch(typeof e.value){case"number":case"bigint":return E(e.value,t);case"string":return e.value;default:if(!isNaN(e.value))return E(e.value,t)}return e;case"FunctionNode":if(r[e.name]&&r[e.name].rawArgs)return e;if(!["add","multiply"].includes(e.name)){var n=e.args.map((e=>C(e,t)));if(!n.some(zM))try{return w(e.name,n,t)}catch(I){}if("size"===e.name&&1===n.length&&NM(n[0])){for(var a=[],o=n[0];NM(o);)a.push(o.items.length),o=o.items[0];return i(a)}return new c(e.name,n.map(_))}case"OperatorNode":var p,f,b=e.fn.toString(),S=y(e);if(HM(e)&&e.isUnary())f=zM((p=[C(e.args[0],t)])[0])?S(p):w(b,p,t);else if(g(e,t.context))if(p=(p=v(e,t.context)).map((e=>C(e,t))),m(b,t.context)){for(var M=[],A=[],D=0;D<p.length;D++)zM(p[D])?A.push(p[D]):M.push(p[D]);M.length>1?(f=T(b,M,S,t),A.unshift(f),f=T(b,A,S,t)):f=T(b,p,S,t)}else f=T(b,p,S,t);else p=e.args.map((e=>C(e,t))),f=T(b,p,S,t);return f;case"ParenthesisNode":return C(e.content,t);case"AccessorNode":return function(e,t,n){if(!LM(t))return new s(_(e),_(t));if(NM(e)||pM(e)){for(var r=Array.from(t.dimensions);r.length>0;)if(FM(r[0])&&"string"!==typeof r[0].value){var a=E(r.shift().value,n);NM(e)?e=e.items[a-1]:(e=e.valueOf()[a-1])instanceof Array&&(e=i(e))}else{if(!(r.length>1&&FM(r[1])&&"string"!==typeof r[1].value))break;var o=E(r[1].value,n),c=[],d=NM(e)?e.items:e.valueOf();for(var p of d)if(NM(p))c.push(p.items[o-1]);else{if(!pM(e))break;c.push(p[o-1])}if(c.length!==d.length)break;e=NM(e)?new l(c):i(c),r.splice(1,1)}return r.length===t.dimensions.length?new s(_(e),t):r.length>0?(t=new h(r),new s(_(e),t)):e}if(UM(e)&&1===t.dimensions.length&&FM(t.dimensions[0])){var f=t.dimensions[0].value;return f in e.properties?e.properties[f]:new u}return new s(_(e),t)}(C(e.object,t),C(e.index,t),t);case"ArrayNode":var N=e.items.map((e=>C(e,t)));return N.some(zM)?new l(N.map(_)):i(N);case"IndexNode":return new h(e.dimensions.map((e=>x(e,t))));case"ObjectNode":var R={};for(var k in e.properties)R[k]=x(e.properties[k],t);return new d(R);default:throw new Error("Unimplemented node type in simplifyConstant: ".concat(e.type))}}return x})),AT="compile",TT=$M(AT,["typed","parse"],(e=>{var{typed:t,parse:n}=e;return t(AT,{string:function(e){return n(e).compile()},"Array | Matrix":function(e){return dT(e,(function(e){return n(e).compile()}))}})})),CT="simplifyCore",DT=$M(CT,["typed","parse","equal","isZero","add","subtract","multiply","divide","pow","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode"],(e=>{var{typed:t,parse:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,AccessorNode:c,ArrayNode:h,ConstantNode:d,FunctionNode:p,IndexNode:f,ObjectNode:m,OperatorNode:g,ParenthesisNode:v,SymbolNode:y}=e,x=new d(0),b=new d(1),w=new d(!0),S=new d(!1);function _(e){return HM(e)&&["and","not","or"].includes(e.op)}var{hasProperty:M,isCommutative:E}=wT({FunctionNode:p,OperatorNode:g,SymbolNode:y});function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?t.context:void 0;if(M(e,"trivial",n)){if(BM(e)&&1===e.args.length)return A(e.args[0],t);var a=!1,o=0;if(e.forEach((e=>{1===++o&&(a=A(e,t))})),1===o)return a}var s=e;if(BM(s)){var l=function(e){var t="OperatorNode:"+e;for(var n of yA)if(t in n)return n[t].op;return null}(s.name);if(!l)return new p(A(s.fn),s.args.map((e=>A(e,t))));if(s.args.length>2&&M(s,"associative",n))for(;s.args.length>2;){var u=s.args.pop(),d=s.args.pop();s.args.push(new g(l,s.name,[u,d]))}s=new g(l,s.name,s.args)}if(HM(s)&&s.isUnary()){var v=A(s.args[0],t);if("~"===s.op&&HM(v)&&v.isUnary()&&"~"===v.op)return v.args[0];if("not"===s.op&&HM(v)&&v.isUnary()&&"not"===v.op&&_(v.args[0]))return v.args[0];var y=!0;if("-"===s.op&&HM(v)&&(v.isBinary()&&"subtract"===v.fn&&(s=new g("-","subtract",[v.args[1],v.args[0]]),y=!1),v.isUnary()&&"-"===v.op))return v.args[0];if(y)return new g(s.op,s.fn,[v])}if(HM(s)&&s.isBinary()){var T=A(s.args[0],t),C=A(s.args[1],t);if("+"===s.op){if(FM(T)&&i(T.value))return C;if(FM(C)&&i(C.value))return T;HM(C)&&C.isUnary()&&"-"===C.op&&(C=C.args[0],s=new g("-","subtract",[T,C]))}if("-"===s.op)return HM(C)&&C.isUnary()&&"-"===C.op?A(new g("+","add",[T,C.args[0]]),t):FM(T)&&i(T.value)?A(new g("-","unaryMinus",[C])):FM(C)&&i(C.value)?T:new g(s.op,s.fn,[T,C]);if("*"===s.op){if(FM(T)){if(i(T.value))return x;if(r(T.value,1))return C}if(FM(C)){if(i(C.value))return x;if(r(C.value,1))return T;if(E(s,n))return new g(s.op,s.fn,[C,T],s.implicit)}return new g(s.op,s.fn,[T,C],s.implicit)}if("/"===s.op)return FM(T)&&i(T.value)?x:FM(C)&&r(C.value,1)?T:new g(s.op,s.fn,[T,C]);if("^"===s.op&&FM(C)){if(i(C.value))return b;if(r(C.value,1))return T}if("and"===s.op){if(FM(T)){if(!T.value)return S;if(_(C))return C;if(FM(C))return C.value?w:S}if(FM(C)){if(!C.value)return S;if(_(T))return T}}if("or"===s.op){if(FM(T)){if(T.value)return w;if(_(C))return C}if(FM(C)){if(C.value)return w;if(_(T))return T}}return new g(s.op,s.fn,[T,C])}if(HM(s))return new g(s.op,s.fn,s.args.map((e=>A(e,t))));if(NM(s))return new h(s.items.map((e=>A(e,t))));if(DM(s))return new c(A(s.object,t),A(s.index,t));if(LM(s))return new f(s.dimensions.map((e=>A(e,t))));if(UM(s)){var D={};for(var N in s.properties)D[N]=A(s.properties[N],t);return new m(D)}return s}return t(CT,{Node:A,"Node,Object":A})})),NT="evaluate",RT=$M(NT,["typed","parse"],(e=>{var{typed:t,parse:n}=e;return t(NT,{string:function(e){var t=rM();return n(e).compile().evaluate(t)},"string, Map | Object":function(e,t){return n(e).compile().evaluate(t)},"Array | Matrix":function(e){var t=rM();return dT(e,(function(e){return n(e).compile().evaluate(t)}))},"Array | Matrix, Map | Object":function(e,t){return dT(e,(function(e){return n(e).compile().evaluate(t)}))}})})),kT=$M("Help",["evaluate"],(e=>{var{evaluate:t}=e;function n(e){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(!e)throw new Error('Argument "doc" missing');this.doc=e}return n.prototype.type="Help",n.prototype.isHelp=!0,n.prototype.toString=function(){var e=this.doc||{},n="\n";if(e.name&&(n+="Name: "+e.name+"\n\n"),e.category&&(n+="Category: "+e.category+"\n\n"),e.description&&(n+="Description:\n    "+e.description+"\n\n"),e.syntax&&(n+="Syntax:\n    "+e.syntax.join("\n    ")+"\n\n"),e.examples){n+="Examples:\n";for(var r=!1,i=t("config()"),a={config:e=>(r=!0,t("config(newConfig)",{newConfig:e}))},o=0;o<e.examples.length;o++){var s=e.examples[o];n+="    "+s+"\n";var l=void 0;try{l=t(s,a)}catch(vk){l=vk}void 0===l||wM(l)||(n+="        "+RE(l,{precision:14})+"\n")}n+="\n",r&&t("config(originalConfig)",{originalConfig:i})}return e.mayThrow&&e.mayThrow.length&&(n+="Throws: "+e.mayThrow.join(", ")+"\n\n"),e.seealso&&e.seealso.length&&(n+="See also: "+e.seealso.join(", ")+"\n"),n},n.prototype.toJSON=function(){var e=j_(this.doc);return e.mathjs="Help",e},n.fromJSON=function(e){var t={};return Object.keys(e).filter((e=>"mathjs"!==e)).forEach((n=>{t[n]=e[n]})),new n(t)},n.prototype.valueOf=n.prototype.toString,n}),{isClass:!0}),IT=$M("Parser",["evaluate","parse"],(e=>{var{evaluate:t,parse:n}=e;function r(){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");Object.defineProperty(this,"scope",{value:rM(),writable:!1})}return r.prototype.type="Parser",r.prototype.isParser=!0,r.prototype.evaluate=function(e){return t(e,this.scope)},r.prototype.get=function(e){if(this.scope.has(e))return this.scope.get(e)},r.prototype.getAll=function(){return function(e){if(e instanceof eM)return e.wrappedObject;var t={};for(var n of e.keys())$_(t,n,e.get(n));return t}(this.scope)},r.prototype.getAllAsMap=function(){return this.scope},r.prototype.set=function(e,t){if(!function(e){if(0===e.length)return!1;for(var t=0;t<e.length;t++){var r=e.charAt(t-1),i=e.charAt(t),a=e.charAt(t+1);if(!(n.isAlpha(i,r,a)||t>0&&n.isDigit(i)))return!1}return!0}(e))throw new Error("Invalid variable name: '".concat(e,"'. Variable names must follow the specified rules."));return this.scope.set(e,t),t},r.prototype.remove=function(e){this.scope.delete(e)},r.prototype.clear=function(){this.scope.clear()},r}),{isClass:!0});function FT(e){return FM(e)||HM(e)&&e.isUnary()&&FM(e.args[0])}function PT(e){return!!FM(e)||(!(!BM(e)&&!HM(e)||!e.args.every(PT))||!(!qM(e)||!PT(e.content)))}var OT=["typed","parse","equal","resolve","simplifyConstant","simplifyCore","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","ParenthesisNode","SymbolNode","replacer"],BT=$M("simplify",OT,(e=>{var{typed:t,parse:n,equal:r,resolve:i,simplifyConstant:a,simplifyCore:o,AccessorNode:s,ArrayNode:l,ConstantNode:u,FunctionNode:c,IndexNode:h,ObjectNode:d,OperatorNode:p,ParenthesisNode:f,SymbolNode:m,replacer:g}=e,{hasProperty:v,isCommutative:y,isAssociative:x,mergeContext:b,flatten:w,unflattenr:S,unflattenl:_,createMakeNodeFunction:M,defaultContext:E,realContext:A,positiveContext:T}=wT({FunctionNode:c,OperatorNode:p,SymbolNode:m});t.addConversion({from:"Object",to:"Map",convert:iM});var C=t("simplify",{Node:F,"Node, Map":(e,t)=>F(e,!1,t),"Node, Map, Object":(e,t,n)=>F(e,!1,t,n),"Node, Array":F,"Node, Array, Map":F,"Node, Array, Map, Object":F});function D(e){return e.transform((function(e){return qM(e)?D(e.content):e}))}t.removeConversion({from:"Object",to:"Map",convert:iM}),C.defaultContext=E,C.realContext=A,C.positiveContext=T;var N={true:!0,false:!0,e:!0,i:!0,Infinity:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,NaN:!0,phi:!0,pi:!0,SQRT1_2:!0,SQRT2:!0,tau:!0};function R(e,t){var r={};if(e.s){var i=e.s.split("->");if(2!==i.length)throw SyntaxError("Could not parse rule: "+e.s);r.l=i[0],r.r=i[1]}else r.l=e.l,r.r=e.r;for(var a of(r.l=D(n(r.l)),r.r=D(n(r.r)),["imposeContext","repeat","assuming"]))a in e&&(r[a]=e[a]);if(e.evaluate&&(r.evaluate=n(e.evaluate)),x(r.l,t)){var o,s=!y(r.l,t);s&&(o=I());var l=M(r.l),u=I();r.expanded={},r.expanded.l=l([r.l,u]),w(r.expanded.l,t),S(r.expanded.l,t),r.expanded.r=l([r.r,u]),s&&(r.expandedNC1={},r.expandedNC1.l=l([o,r.l]),r.expandedNC1.r=l([o,r.r]),r.expandedNC2={},r.expandedNC2.l=l([o,r.expanded.l]),r.expandedNC2.r=l([o,r.expanded.r]))}return r}C.rules=[o,{l:"log(e)",r:"1"},{s:"n-n1 -> n+-n1",assuming:{subtract:{total:!0}}},{s:"n-n -> 0",assuming:{subtract:{total:!1}}},{s:"-(cl*v) -> v * (-cl)",assuming:{multiply:{commutative:!0},subtract:{total:!0}}},{s:"-(cl*v) -> (-cl) * v",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{s:"-(v*cl) -> v * (-cl)",assuming:{multiply:{commutative:!1},subtract:{total:!0}}},{l:"-(n1/n2)",r:"-n1/n2"},{l:"-v",r:"v * (-1)"},{l:"(n1 + n2)*(-1)",r:"n1*(-1) + n2*(-1)",repeat:!0},{l:"n/n1^n2",r:"n*n1^-n2"},{l:"n/n1",r:"n*n1^-1"},{s:"(n1*n2)^n3 -> n1^n3 * n2^n3",assuming:{multiply:{commutative:!0}}},{s:"(n1*n2)^(-1) -> n2^(-1) * n1^(-1)",assuming:{multiply:{commutative:!1}}},{s:"(n ^ n1) ^ n2 -> n ^ (n1 * n2)",assuming:{divide:{total:!0}}},{l:" vd   * ( vd   * n1 + n2)",r:"vd^2       * n1 +  vd   * n2"},{s:" vd   * (vd^n4 * n1 + n2)   ->  vd^(1+n4)  * n1 +  vd   * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * ( vd   * n1 + n2)   ->  vd^(n3+1)  * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{s:"vd^n3 * (vd^n4 * n1 + n2)   ->  vd^(n3+n4) * n1 + vd^n3 * n2",assuming:{divide:{total:!0}}},{l:"n*n",r:"n^2"},{s:"n * n^n1 -> n^(n1+1)",assuming:{divide:{total:!0}}},{s:"n^n1 * n^n2 -> n^(n1+n2)",assuming:{divide:{total:!0}}},a,{s:"n+n -> 2*n",assuming:{add:{total:!0}}},{l:"n+-n",r:"0"},{l:"vd*n + vd",r:"vd*(n+1)"},{l:"n3*n1 + n3*n2",r:"n3*(n1+n2)"},{l:"n3^(-n4)*n1 +   n3  * n2",r:"n3^(-n4)*(n1 + n3^(n4+1) *n2)"},{l:"n3^(-n4)*n1 + n3^n5 * n2",r:"n3^(-n4)*(n1 + n3^(n4+n5)*n2)"},{s:"n*vd + vd -> (n+1)*vd",assuming:{multiply:{commutative:!1}}},{s:"vd + n*vd -> (1+n)*vd",assuming:{multiply:{commutative:!1}}},{s:"n1*n3 + n2*n3 -> (n1+n2)*n3",assuming:{multiply:{commutative:!1}}},{s:"n^n1 * n -> n^(n1+1)",assuming:{divide:{total:!0},multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3    -> (n1 + n2*n3^(n4 +  1))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{s:"n1*n3^(-n4) + n2 * n3^n5 -> (n1 + n2*n3^(n4 + n5))*n3^(-n4)",assuming:{multiply:{commutative:!1}}},{l:"n*cd + cd",r:"(n+1)*cd"},{s:"cd*n + cd -> cd*(n+1)",assuming:{multiply:{commutative:!1}}},{s:"cd + cd*n -> cd*(1+n)",assuming:{multiply:{commutative:!1}}},a,{s:"(-n)*n1 -> -(n*n1)",assuming:{subtract:{total:!0}}},{s:"n1*(-n) -> -(n1*n)",assuming:{subtract:{total:!0},multiply:{commutative:!1}}},{s:"ce+ve -> ve+ce",assuming:{add:{commutative:!0}},imposeContext:{add:{commutative:!1}}},{s:"vd*cd -> cd*vd",assuming:{multiply:{commutative:!0}},imposeContext:{multiply:{commutative:!1}}},{l:"n+-n1",r:"n-n1"},{l:"n+-(n1)",r:"n-(n1)"},{s:"n*(n1^-1) -> n/n1",assuming:{multiply:{commutative:!0}}},{s:"n*n1^-n2 -> n/n1^n2",assuming:{multiply:{commutative:!0}}},{s:"n^-1 -> 1/n",assuming:{multiply:{commutative:!0}}},{l:"n^1",r:"n"},{s:"n*(n1/n2) -> (n*n1)/n2",assuming:{multiply:{associative:!0}}},{s:"n-(n1+n2) -> n-n1-n2",assuming:{addition:{associative:!0,commutative:!0}}},{l:"1*n",r:"n",imposeContext:{multiply:{commutative:!0}}},{s:"n1/(n2/n3) -> (n1*n3)/n2",assuming:{multiply:{associative:!0}}},{l:"n1/(-n2)",r:"-n1/n2"}];var k=0;function I(){return new m("_p"+k++)}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:rM(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.consoleDebug;t=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=void 0,o=typeof i;switch(o){case"string":i={s:i};case"object":a=R(i,t);break;case"function":a=i;break;default:throw TypeError("Unsupported type of rule: "+o)}n.push(a)}return n}(t||C.rules,r.context);for(var o=i(e,n),s={},l=(o=D(o)).toString({parenthesis:"all"});!s[l];){s[l]=!0,k=0;var u=l;a&&console.log("Working on: ",l);for(var c=0;c<t.length;c++){var h="";if("function"===typeof t[c]?(o=t[c](o,r),a&&(h=t[c].name)):(w(o,r.context),o=O(o,t[c],r.context),a&&(h="".concat(t[c].l.toString()," -> ").concat(t[c].r.toString()))),a){var d=o.toString({parenthesis:"all"});d!==u&&(console.log("Applying",h,"produced",d),u=d)}_(o,r.context)}l=o.toString({parenthesis:"all"})}return o}function P(e,t,n){var r=e;if(e)for(var i=0;i<e.length;++i){var a=O(e[i],t,n);a!==e[i]&&(r===e&&(r=e.slice()),r[i]=a)}return r}function O(e,t,n){if(t.assuming)for(var r in t.assuming)for(var i in t.assuming[r])if(v(r,i,n)!==t.assuming[r][i])return e;var a=b(t.imposeContext,n),o=e;if(o instanceof p||o instanceof c){var u=P(o.args,t,n);u!==o.args&&((o=o.clone()).args=u)}else if(o instanceof f){if(o.content){var m=O(o.content,t,n);m!==o.content&&(o=new f(m))}}else if(o instanceof l){var g=P(o.items,t,n);g!==o.items&&(o=new l(g))}else if(o instanceof s){var y=o.object;o.object&&(y=O(o.object,t,n));var x=o.index;o.index&&(x=O(o.index,t,n)),y===o.object&&x===o.index||(o=new s(y,x))}else if(o instanceof h){var w=P(o.dimensions,t,n);w!==o.dimensions&&(o=new h(w))}else if(o instanceof d){var S=!1,_={};for(var M in o.properties)_[M]=O(o.properties[M],t,n),_[M]!==o.properties[M]&&(S=!0);S&&(o=new d(_))}var E=t.r,A=z(t.l,o,a)[0];if(!A&&t.expanded&&(E=t.expanded.r,A=z(t.expanded.l,o,a)[0]),!A&&t.expandedNC1&&(E=t.expandedNC1.r,(A=z(t.expandedNC1.l,o,a)[0])||(E=t.expandedNC2.r,A=z(t.expandedNC2.l,o,a)[0])),A){var T=o.implicit;o=E.clone(),T&&"implicit"in E&&(o.implicit=!0),o=o.transform((function(e){return e.isSymbolNode&&X_(A.placeholders,e.name)?A.placeholders[e.name].clone():e}))}return t.repeat&&o!==e&&(o=O(o,t,n)),o}function B(e,t){var n={placeholders:{}};if(!e.placeholders&&!t.placeholders)return n;if(!e.placeholders)return t;if(!t.placeholders)return e;for(var r in e.placeholders)if(X_(e.placeholders,r)&&(n.placeholders[r]=e.placeholders[r],X_(t.placeholders,r)&&!U(e.placeholders[r],t.placeholders[r])))return null;for(var i in t.placeholders)X_(t.placeholders,i)&&(n.placeholders[i]=t.placeholders[i]);return n}function L(e,t){var n,r=[];if(0===e.length||0===t.length)return r;for(var i=0;i<e.length;i++)for(var a=0;a<t.length;a++)(n=B(e[i],t[a]))&&r.push(n);return r}function z(e,t,n,i){var a=[{placeholders:{}}];if(e instanceof p&&t instanceof p||e instanceof c&&t instanceof c){if(e instanceof p){if(e.op!==t.op||e.fn!==t.fn)return[]}else if(e instanceof c&&e.name!==t.name)return[];if(!(1===t.args.length&&1===e.args.length||!x(t,n)&&t.args.length===e.args.length||i)){if(t.args.length>=2&&2===e.args.length){for(var o=function(e,t){var n,r,i=[],a=M(e);if(y(e,t))for(var o=0;o<e.args.length;o++)(r=e.args.slice(0)).splice(o,1),n=1===r.length?r[0]:a(r),i.push(a([e.args[o],n]));else for(var s=1;s<e.args.length;s++){var l=e.args[0];s>1&&(l=a(e.args.slice(0,s))),n=1===(r=e.args.slice(s)).length?r[0]:a(r),i.push(a([l,n]))}return i}(t,n),s=[],l=0;l<o.length;l++){var h=z(e,o[l],n,!0);s=s.concat(h)}return s}if(e.args.length>2)throw Error("Unexpected non-binary associative function: "+e.toString());return[]}for(var d=[],f=0;f<e.args.length;f++){var v=z(e.args[f],t.args[f],n);if(0===v.length)break;d.push(v)}if(d.length!==e.args.length){if(!y(t,n)||1===e.args.length)return[];if(e.args.length>2)throw new Error("permuting >2 commutative non-associative rule arguments not yet implemented");var b=z(e.args[0],t.args[1],n);if(0===b.length)return[];var w=z(e.args[1],t.args[0],n);if(0===w.length)return[];d=[b,w]}a=function(e){if(0===e.length)return e;for(var t=e.reduce(L),n=[],r={},i=0;i<t.length;i++){var a=JSON.stringify(t[i],g);r[a]||(r[a]=!0,n.push(t[i]))}return n}(d)}else if(e instanceof m){if(0===e.name.length)throw new Error("Symbol in rule has 0 length...!?");if(N[e.name]){if(e.name!==t.name)return[]}else switch(e.name[1]>="a"&&e.name[1]<="z"?e.name.substring(0,2):e.name[0]){case"n":case"_p":a[0].placeholders[e.name]=t;break;case"c":case"cl":if(!FM(t))return[];a[0].placeholders[e.name]=t;break;case"v":if(FM(t))return[];a[0].placeholders[e.name]=t;break;case"vl":if(!GM(t))return[];a[0].placeholders[e.name]=t;break;case"cd":if(!FT(t))return[];a[0].placeholders[e.name]=t;break;case"vd":if(FT(t))return[];a[0].placeholders[e.name]=t;break;case"ce":if(!PT(t))return[];a[0].placeholders[e.name]=t;break;case"ve":if(PT(t))return[];a[0].placeholders[e.name]=t;break;default:throw new Error("Invalid symbol in rule: "+e.name)}}else{if(!(e instanceof u))return[];if(!r(e.value,t.value))return[]}return a}function U(e,t){if(e instanceof u&&t instanceof u){if(!r(e.value,t.value))return!1}else if(e instanceof m&&t instanceof m){if(e.name!==t.name)return!1}else{if(!(e instanceof p&&t instanceof p||e instanceof c&&t instanceof c))return!1;if(e instanceof p){if(e.op!==t.op||e.fn!==t.fn)return!1}else if(e instanceof c&&e.name!==t.name)return!1;if(e.args.length!==t.args.length)return!1;for(var n=0;n<e.args.length;n++)if(!U(e.args[n],t.args[n]))return!1}return!0}return C})),LT="symbolicEqual",zT=["parse","simplify","typed","OperatorNode"],UT=$M(LT,zT,(e=>{var{parse:t,simplify:n,typed:r,OperatorNode:i}=e;function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new i("-","subtract",[e,t]),o=n(a,{},r);return FM(o)&&!o.value}return r(LT,{"Node, Node":a,"Node, Node, Object":a})})),HT="leafCount",qT=["parse","typed"],VT=$M(HT,qT,(e=>{var{parse:t,typed:n}=e;function r(e){var t=0;return e.forEach((e=>{t+=r(e)})),t||1}return n(HT,{Node:function(e){return r(e)}})})),jT="parser",GT=["typed","Parser"],WT=$M(jT,GT,(e=>{var{typed:t,Parser:n}=e;return t(jT,{"":function(){return new n}})})),XT="rationalize",YT=["config","typed","equal","isZero","add","subtract","multiply","divide","pow","parse","simplifyConstant","simplifyCore","simplify","?bignumber","?fraction","mathWithTransform","matrix","AccessorNode","ArrayNode","ConstantNode","FunctionNode","IndexNode","ObjectNode","OperatorNode","SymbolNode","ParenthesisNode"],$T=$M(XT,YT,(e=>{var{config:t,typed:n,equal:r,isZero:i,add:a,subtract:o,multiply:s,divide:l,pow:u,parse:c,simplifyConstant:h,simplifyCore:d,simplify:p,fraction:f,bignumber:m,mathWithTransform:g,matrix:v,AccessorNode:y,ArrayNode:x,ConstantNode:b,FunctionNode:w,IndexNode:S,ObjectNode:_,OperatorNode:M,SymbolNode:E,ParenthesisNode:A}=e;function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(){var e=[d,{l:"n+n",r:"2*n"},{l:"n+-n",r:"0"},h,{l:"n*(n1^-1)",r:"n/n1"},{l:"n*n1^-n2",r:"n/n1^n2"},{l:"n1^-1",r:"1/n1"},{l:"n*(n1/n2)",r:"(n*n1)/n2"},{l:"1*n",r:"n"}],t=[{l:"(-n1)/(-n2)",r:"n1/n2"},{l:"(-n1)*(-n2)",r:"n1*n2"},{l:"n1--n2",r:"n1+n2"},{l:"n1-n2",r:"n1+(-n2)"},{l:"(n1+n2)*n3",r:"(n1*n3 + n2*n3)"},{l:"n1*(n2+n3)",r:"(n1*n2+n1*n3)"},{l:"c1*n + c2*n",r:"(c1+c2)*n"},{l:"c1*n + n",r:"(c1+1)*n"},{l:"c1*n - c2*n",r:"(c1-c2)*n"},{l:"c1*n - n",r:"(c1-1)*n"},{l:"v/c",r:"(1/c)*v"},{l:"v/-c",r:"-(1/c)*v"},{l:"-v*-c",r:"c*v"},{l:"-v*c",r:"-c*v"},{l:"v*-c",r:"-c*v"},{l:"v*c",r:"c*v"},{l:"-(-n1*n2)",r:"(n1*n2)"},{l:"-(n1*n2)",r:"(-n1*n2)"},{l:"-(-n1+n2)",r:"(n1-n2)"},{l:"-(n1+n2)",r:"(-n1-n2)"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"},{l:"-(-n1/n2)",r:"(n1/n2)"},{l:"-(n1/n2)",r:"(-n1/n2)"}],n=[{l:"(n1/n2 + n3/n4)",r:"((n1*n4 + n3*n2)/(n2*n4))"},{l:"(n1/n2 + n3)",r:"((n1 + n3*n2)/n2)"},{l:"(n1 + n2/n3)",r:"((n1*n3 + n2)/n3)"}],r=[{l:"(n1/(n2/n3))",r:"((n1*n3)/n2)"},{l:"(n1/n2/n3)",r:"(n1/(n2*n3))"}],i={};return i.firstRules=e.concat(t,r),i.distrDivRules=n,i.sucDivRules=r,i.firstRulesAgain=e.concat(t),i.finalRules=[d,{l:"n*-n",r:"-n^2"},{l:"n*n",r:"n^2"},h,{l:"n*-n^n1",r:"-n^(n1+1)"},{l:"n*n^n1",r:"n^(n1+1)"},{l:"n^n1*-n^n2",r:"-n^(n1+n2)"},{l:"n^n1*n^n2",r:"n^(n1+n2)"},{l:"n^n1*-n",r:"-n^(n1+1)"},{l:"n^n1*n",r:"n^(n1+1)"},{l:"n^n1/-n",r:"-n^(n1-1)"},{l:"n^n1/n",r:"n^(n1-1)"},{l:"n/-n^n1",r:"-n^(1-n1)"},{l:"n/n^n1",r:"n^(1-n1)"},{l:"n^n1/-n^n2",r:"n^(n1-n2)"},{l:"n^n1/n^n2",r:"n^(n1-n2)"},{l:"n1+(-n2*n3)",r:"n1-n2*n3"},{l:"v*(-c)",r:"-c*v"},{l:"n1+-n2",r:"n1-n2"},{l:"v*c",r:"c*v"},{l:"(n1^n2)^n3",r:"(n1^(n2*n3))"}],i}(),i=function(e,t,n,r){var i=[],a=p(e,r,t,{exactFractions:!1}),o="+-*"+((n=!!n)?"/":"");l(a);var s={};return s.expression=a,s.variables=i,s;function l(e){var t=e.type;if("FunctionNode"===t)throw new Error("There is an unsolved function call");if("OperatorNode"===t)if("^"===e.op){if("ConstantNode"!==e.args[1].type||!tE(parseFloat(e.args[1].value)))throw new Error("There is a non-integer exponent");l(e.args[0])}else{if(!o.includes(e.op))throw new Error("Operator "+e.op+" invalid in polynomial expression");for(var n=0;n<e.args.length;n++)l(e.args[n])}else if("SymbolNode"===t){var r=e.name;-1===i.indexOf(r)&&i.push(r)}else if("ParenthesisNode"===t)l(e.content);else if("ConstantNode"!==t)throw new Error("type "+t+" is not allowed in polynomial expression")}}(e,t,!0,r.firstRules),a=i.variables.length,o={exactFractions:!1},s={exactFractions:!0};if(e=i.expression,a>=1){var l,u;e=C(e);var c,f=!0,m=!1;for(e=p(e,r.firstRules,{},o);u=f?r.distrDivRules:r.sucDivRules,f=!f,(c=(e=p(e,u,{},s)).toString())!==l;)m=!0,l=c;m&&(e=p(e,r.firstRulesAgain,{},o)),e=p(e,r.finalRules,{},o)}var g=[],v={};return"OperatorNode"===e.type&&e.isBinary()&&"/"===e.op?(1===a&&(e.args[0]=D(e.args[0],g),e.args[1]=D(e.args[1])),n&&(v.numerator=e.args[0],v.denominator=e.args[1])):(1===a&&(e=D(e,g)),n&&(v.numerator=e,v.denominator=null)),n?(v.coefficients=g,v.variables=i.variables,v.expression=e,v):e}return n(XT,{Node:T,"Node, boolean":(e,t)=>T(e,{},t),"Node, Object":T,"Node, Object, boolean":T});function C(e,t,n){var r=e.type,i=arguments.length>1;if("OperatorNode"===r&&e.isBinary()){var a,o=!1;if("^"===e.op&&("ParenthesisNode"!==e.args[0].type&&"OperatorNode"!==e.args[0].type||"ConstantNode"!==e.args[1].type||(o=(a=parseFloat(e.args[1].value))>=2&&tE(a))),o){if(a>2){var s=e.args[0],l=new M("^","pow",[e.args[0].cloneDeep(),new b(a-1)]);e=new M("*","multiply",[s,l])}else e=new M("*","multiply",[e.args[0],e.args[0].cloneDeep()]);i&&("content"===n?t.content=e:t.args[n]=e)}}if("ParenthesisNode"===r)C(e.content,e,"content");else if("ConstantNode"!==r&&"SymbolNode"!==r)for(var u=0;u<e.args.length;u++)C(e.args[u],e,u);if(!i)return e}function D(e,t){void 0===t&&(t=[]),t[0]=0;var n={cte:1,oper:"+",fire:""},r=0,i="";!function e(n,a,o){var s=n.type;if("FunctionNode"===s)throw new Error("There is an unsolved function call");if("OperatorNode"===s){if(!"+-*^".includes(n.op))throw new Error("Operator "+n.op+" invalid");if(null!==a){if(("unaryMinus"===n.fn||"pow"===n.fn)&&"add"!==a.fn&&"subtract"!==a.fn&&"multiply"!==a.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"multiply"===n.fn)&&"add"!==a.fn&&"subtract"!==a.fn)throw new Error("Invalid "+n.op+" placing");if(("subtract"===n.fn||"add"===n.fn||"unaryMinus"===n.fn)&&0!==o.noFil)throw new Error("Invalid "+n.op+" placing")}"^"!==n.op&&"*"!==n.op||(o.fire=n.op);for(var l=0;l<n.args.length;l++)"unaryMinus"===n.fn&&(o.oper="-"),"+"!==n.op&&"subtract"!==n.fn||(o.fire="",o.cte=1,o.oper=0===l?"+":n.op),o.noFil=l,e(n.args[l],n,o)}else if("SymbolNode"===s){if(n.name!==i&&""!==i)throw new Error("There is more than one variable");if(i=n.name,null===a)return void(t[1]=1);if("^"===a.op&&0!==o.noFil)throw new Error("In power the variable should be the first parameter");if("*"===a.op&&1!==o.noFil)throw new Error("In multiply the variable should be the second parameter");""!==o.fire&&"*"!==o.fire||(r<1&&(t[1]=0),t[1]+=o.cte*("+"===o.oper?1:-1),r=Math.max(1,r))}else{if("ConstantNode"!==s)throw new Error("Type "+s+" is not allowed");var u=parseFloat(n.value);if(null===a)return void(t[0]=u);if("^"===a.op){if(1!==o.noFil)throw new Error("Constant cannot be powered");if(!tE(u)||u<=0)throw new Error("Non-integer exponent is not allowed");for(var c=r+1;c<u;c++)t[c]=0;return u>r&&(t[u]=0),t[u]+=o.cte*("+"===o.oper?1:-1),void(r=Math.max(u,r))}o.cte=u,""===o.fire&&(t[0]+=o.cte*("+"===o.oper?1:-1))}}(e,null,n);for(var a,o=!0,s=r=t.length-1;s>=0;s--)if(0!==t[s]){var l=new b(o?t[s]:Math.abs(t[s])),u=t[s]<0?"-":"+";if(s>0){var c=new E(i);if(s>1){var h=new b(s);c=new M("^","pow",[c,h])}l=-1===t[s]&&o?new M("-","unaryMinus",[c]):1===Math.abs(t[s])?c:new M("*","multiply",[l,c])}a=o?l:"+"===u?new M("+","add",[a,l]):new M("-","subtract",[a,l]),o=!1}return o?new b(0):a}})),ZT="derivative",JT=["typed","config","parse","simplify","equal","isZero","numeric","ConstantNode","FunctionNode","OperatorNode","ParenthesisNode","SymbolNode"],KT=$M(ZT,JT,(e=>{var{typed:t,config:n,parse:r,simplify:i,equal:a,isZero:o,numeric:s,ConstantNode:l,FunctionNode:u,OperatorNode:c,ParenthesisNode:h,SymbolNode:d}=e;function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{simplify:!0},r={};v(r,e,t.name);var a=y(e,r);return n.simplify?i(a):a}function f(e){var t=r(e);if(!t.isSymbolNode)throw new TypeError("Invalid variable. "+"Cannot parse ".concat(JSON.stringify(e)," into a variable in function derivative"));return t}var m=t(ZT,{"Node, SymbolNode":p,"Node, SymbolNode, Object":p,"Node, string":(e,t)=>p(e,f(t)),"Node, string, Object":(e,t,n)=>p(e,f(t),n)});m._simplify=!0,m.toTex=function(e){return g.apply(null,e.args)};var g=t("_derivTex",{"Node, SymbolNode":function(e,t){return FM(e)&&"string"===XM(e.value)?g(r(e.value).toString(),t.toString(),1):g(e.toTex(),t.toString(),1)},"Node, ConstantNode":function(e,t){if("string"===XM(t.value))return g(e,r(t.value));throw new Error("The second parameter to 'derivative' is a non-string constant")},"Node, SymbolNode, ConstantNode":function(e,t,n){return g(e.toString(),t.name,n.value)},"string, string, number":function(e,t,n){return(1===n?"{d\\over d"+t+"}":"{d^{"+n+"}\\over d"+t+"^{"+n+"}}")+"\\left[".concat(e,"\\right]")}}),v=t("constTag",{"Object, ConstantNode, string":function(e,t){return e[t]=!0,!0},"Object, SymbolNode, string":function(e,t,n){return t.name!==n&&(e[t]=!0,!0)},"Object, ParenthesisNode, string":function(e,t,n){return v(e,t.content,n)},"Object, FunctionAssignmentNode, string":function(e,t,n){return t.params.includes(n)?v(e,t.expr,n):(e[t]=!0,!0)},"Object, FunctionNode | OperatorNode, string":function(e,t,n){if(t.args.length>0){for(var r=v(e,t.args[0],n),i=1;i<t.args.length;++i)r=v(e,t.args[i],n)&&r;if(r)return e[t]=!0,!0}return!1}}),y=t("_derivative",{"ConstantNode, Object":function(e){return x(0)},"SymbolNode, Object":function(e,t){return void 0!==t[e]?x(0):x(1)},"ParenthesisNode, Object":function(e,t){return new h(y(e.content,t))},"FunctionAssignmentNode, Object":function(e,t){return void 0!==t[e]?x(0):y(e.expr,t)},"FunctionNode, Object":function(e,t){if(void 0!==t[e])return x(0);var n,r,i,a,o=e.args[0],s=!1,l=!1;switch(e.name){case"cbrt":s=!0,r=new c("*","multiply",[x(3),new c("^","pow",[o,new c("/","divide",[x(2),x(3)])])]);break;case"sqrt":case"nthRoot":if(1===e.args.length)s=!0,r=new c("*","multiply",[x(2),new u("sqrt",[o])]);else if(2===e.args.length)return t[n=new c("/","divide",[x(1),e.args[1]])]=t[e.args[1]],y(new c("^","pow",[o,n]),t);break;case"log10":n=x(10);case"log":if(n||1!==e.args.length){if(1===e.args.length&&n||2===e.args.length&&void 0!==t[e.args[1]])r=new c("*","multiply",[o.clone(),new u("log",[n||e.args[1]])]),s=!0;else if(2===e.args.length)return y(new c("/","divide",[new u("log",[o]),new u("log",[e.args[1]])]),t)}else r=o.clone(),s=!0;break;case"pow":if(2===e.args.length)return t[n]=t[e.args[1]],y(new c("^","pow",[o,e.args[1]]),t);break;case"exp":r=new u("exp",[o.clone()]);break;case"sin":r=new u("cos",[o.clone()]);break;case"cos":r=new c("-","unaryMinus",[new u("sin",[o.clone()])]);break;case"tan":r=new c("^","pow",[new u("sec",[o.clone()]),x(2)]);break;case"sec":r=new c("*","multiply",[e,new u("tan",[o.clone()])]);break;case"csc":l=!0,r=new c("*","multiply",[e,new u("cot",[o.clone()])]);break;case"cot":l=!0,r=new c("^","pow",[new u("csc",[o.clone()]),x(2)]);break;case"asin":s=!0,r=new u("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[o.clone(),x(2)])])]);break;case"acos":s=!0,l=!0,r=new u("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[o.clone(),x(2)])])]);break;case"atan":s=!0,r=new c("+","add",[new c("^","pow",[o.clone(),x(2)]),x(1)]);break;case"asec":s=!0,r=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),x(2)]),x(1)])])]);break;case"acsc":s=!0,l=!0,r=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),x(2)]),x(1)])])]);break;case"acot":s=!0,l=!0,r=new c("+","add",[new c("^","pow",[o.clone(),x(2)]),x(1)]);break;case"sinh":r=new u("cosh",[o.clone()]);break;case"cosh":r=new u("sinh",[o.clone()]);break;case"tanh":r=new c("^","pow",[new u("sech",[o.clone()]),x(2)]);break;case"sech":l=!0,r=new c("*","multiply",[e,new u("tanh",[o.clone()])]);break;case"csch":l=!0,r=new c("*","multiply",[e,new u("coth",[o.clone()])]);break;case"coth":l=!0,r=new c("^","pow",[new u("csch",[o.clone()]),x(2)]);break;case"asinh":s=!0,r=new u("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),x(2)]),x(1)])]);break;case"acosh":s=!0,r=new u("sqrt",[new c("-","subtract",[new c("^","pow",[o.clone(),x(2)]),x(1)])]);break;case"atanh":s=!0,r=new c("-","subtract",[x(1),new c("^","pow",[o.clone(),x(2)])]);break;case"asech":s=!0,l=!0,r=new c("*","multiply",[o.clone(),new u("sqrt",[new c("-","subtract",[x(1),new c("^","pow",[o.clone(),x(2)])])])]);break;case"acsch":s=!0,l=!0,r=new c("*","multiply",[new u("abs",[o.clone()]),new u("sqrt",[new c("+","add",[new c("^","pow",[o.clone(),x(2)]),x(1)])])]);break;case"acoth":s=!0,l=!0,r=new c("-","subtract",[x(1),new c("^","pow",[o.clone(),x(2)])]);break;case"abs":r=new c("/","divide",[new u(new d("abs"),[o.clone()]),o.clone()]);break;default:throw new Error('Cannot process function "'+e.name+'" in derivative: the function is not supported, undefined, or the number of arguments passed to it are not supported')}s?(i="/",a="divide"):(i="*",a="multiply");var h=y(o,t);return l&&(h=new c("-","unaryMinus",[h])),new c(i,a,[h,r])},"OperatorNode, Object":function(e,t){if(void 0!==t[e])return x(0);if("+"===e.op)return new c(e.op,e.fn,e.args.map((function(e){return y(e,t)})));if("-"===e.op){if(e.isUnary())return new c(e.op,e.fn,[y(e.args[0],t)]);if(e.isBinary())return new c(e.op,e.fn,[y(e.args[0],t),y(e.args[1],t)])}if("*"===e.op){var n=e.args.filter((function(e){return void 0!==t[e]}));if(n.length>0){var r=e.args.filter((function(e){return void 0===t[e]})),i=1===r.length?r[0]:new c("*","multiply",r),s=n.concat(y(i,t));return new c("*","multiply",s)}return new c("+","add",e.args.map((function(n){return new c("*","multiply",e.args.map((function(e){return e===n?y(e,t):e.clone()})))})))}if("/"===e.op&&e.isBinary()){var l=e.args[0],h=e.args[1];return void 0!==t[h]?new c("/","divide",[y(l,t),h]):void 0!==t[l]?new c("*","multiply",[new c("-","unaryMinus",[l]),new c("/","divide",[y(h,t),new c("^","pow",[h.clone(),x(2)])])]):new c("/","divide",[new c("-","subtract",[new c("*","multiply",[y(l,t),h.clone()]),new c("*","multiply",[l.clone(),y(h,t)])]),new c("^","pow",[h.clone(),x(2)])])}if("^"===e.op&&e.isBinary()){var d=e.args[0],p=e.args[1];if(void 0!==t[d])return FM(d)&&(o(d.value)||a(d.value,1))?x(0):new c("*","multiply",[e,new c("*","multiply",[new u("log",[d.clone()]),y(p.clone(),t)])]);if(void 0!==t[p]){if(FM(p)){if(o(p.value))return x(0);if(a(p.value,1))return y(d,t)}var f=new c("^","pow",[d.clone(),new c("-","subtract",[p,x(1)])]);return new c("*","multiply",[p.clone(),new c("*","multiply",[y(d,t),f])])}return new c("*","multiply",[new c("^","pow",[d.clone(),p.clone()]),new c("+","add",[new c("*","multiply",[y(d,t),new c("/","divide",[p.clone(),d.clone()])]),new c("*","multiply",[y(p,t),new u("log",[d.clone()])])])])}throw new Error('Cannot process operator "'+e.op+'" in derivative: the operator is not supported, undefined, or the number of arguments passed to it are not supported')}});function x(e,t){return new l(s(e,t||nE(String(e),n)))}return m})),QT={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},eC={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},tC={bignumber:{name:"bignumber",category:"Construction",syntax:["bignumber(x)"],description:"Create a big number from a number or string.",examples:["0.1 + 0.2","bignumber(0.1) + bignumber(0.2)",'bignumber("7.2")','bignumber("7.2e500")',"bignumber([0.1, 0.2, 0.3])"],seealso:["boolean","bigint","complex","fraction","index","matrix","string","unit"]},bigint:{name:"bigint",category:"Construction",syntax:["bigint(x)"],description:"Create a bigint, an integer with an arbitrary number of digits, from a number or string.",examples:["123123123123123123 # a large number will lose digits",'bigint("123123123123123123")','bignumber(["1", "3", "5"])'],seealso:["boolean","bignumber","number","complex","fraction","index","matrix","string","unit"]},boolean:{name:"boolean",category:"Construction",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")',"boolean([1, 0, 1, 1])"],seealso:["bignumber","complex","index","matrix","number","string","unit"]},complex:{name:"complex",category:"Construction",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["bignumber","boolean","index","matrix","number","string","unit"]},createUnit:{name:"createUnit",category:"Construction",syntax:["createUnit(definitions)","createUnit(name, definition)"],description:"Create a user-defined unit and register it with the Unit type.",examples:['createUnit("foo")','createUnit("knot", {definition: "0.514444444 m/s", aliases: ["knots", "kt", "kts"]})','createUnit("mph", "1 mile/hour")'],seealso:["unit","splitUnit"]},fraction:{name:"fraction",category:"Construction",syntax:["fraction(num)","fraction(matrix)","fraction(num,den)","fraction({n: num, d: den})"],description:"Create a fraction from a number or from integer numerator and denominator.",examples:["fraction(0.125)","fraction(1, 3) + fraction(2, 5)","fraction({n: 333, d: 53})","fraction([sqrt(9), sqrt(10), sqrt(11)])"],seealso:["bignumber","boolean","complex","index","matrix","string","unit"]},index:{name:"index",category:"Construction",syntax:["[start]","[start:end]","[start:step:end]","[start1, start 2, ...]","[start1:end1, start2:end2, ...]","[start1:step1:end1, start2:step2:end2, ...]"],description:"Create an index to get or replace a subset of a matrix",examples:["A = [1, 2, 3; 4, 5, 6]","A[1, :]","A[1, 2] = 50","A[1:2, 1:2] = 1","B = [1, 2, 3]","B[B>1 and B<3]"],seealso:["bignumber","boolean","complex","matrix,","number","range","string","unit"]},matrix:{name:"matrix",category:"Construction",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()",'matrix("dense")',"matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])",'matrix([3, 4; 5, 6], "sparse")','matrix([3, 4; 5, 6], "sparse", "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","sparse"]},number:{name:"number",category:"Construction",syntax:["x","number(x)","number(unit, valuelessUnit)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)","number([true, false, true, true])",'number(unit("52cm"), "m")'],seealso:["bignumber","bigint","boolean","complex","fraction","index","matrix","string","unit"]},sparse:{name:"sparse",category:"Construction",syntax:["sparse()","sparse([a1, b1, ...; a1, b2, ...])",'sparse([a1, b1, ...; a1, b2, ...], "number")'],description:"Create a sparse matrix.",examples:["sparse()","sparse([3, 4; 5, 6])",'sparse([3, 0; 5, 0], "number")'],seealso:["bignumber","boolean","complex","index","number","string","unit","matrix"]},splitUnit:{name:"splitUnit",category:"Construction",syntax:["splitUnit(unit: Unit, parts: Unit[])"],description:"Split a unit in an array of units whose sum is equal to the original unit.",examples:['splitUnit(1 m, ["feet", "inch"])'],seealso:["unit","createUnit"]},string:{name:"string",category:"Construction",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["bignumber","boolean","complex","index","matrix","number","unit"]},unit:{name:"unit",category:"Construction",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["bignumber","boolean","complex","index","matrix","number","string"]},e:QT,E:QT,false:{name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},i:{name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},Infinity:{name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},LN2:{name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},LN10:{name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},LOG2E:{name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},LOG10E:{name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},NaN:{name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},null:{name:"null",category:"Constants",syntax:["null"],description:"Value null",examples:["null"],seealso:["true","false"]},pi:eC,PI:eC,phi:{name:"phi",category:"Constants",syntax:["phi"],description:"Phi is the golden ratio. Two quantities are in the golden ratio if their ratio is the same as the ratio of their sum to the larger of the two quantities. Phi is defined as `(1 + sqrt(5)) / 2` and is approximately 1.618034...",examples:["phi"],seealso:[]},SQRT1_2:{name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},SQRT2:{name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},tau:{name:"tau",category:"Constants",syntax:["tau"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},true:{name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},version:{name:"version",category:"Constants",syntax:["version"],description:"A string with the version number of math.js",examples:["version"],seealso:[]},speedOfLight:{description:"Speed of light in vacuum",examples:["speedOfLight"]},gravitationConstant:{description:"Newtonian constant of gravitation",examples:["gravitationConstant"]},planckConstant:{description:"Planck constant",examples:["planckConstant"]},reducedPlanckConstant:{description:"Reduced Planck constant",examples:["reducedPlanckConstant"]},magneticConstant:{description:"Magnetic constant (vacuum permeability)",examples:["magneticConstant"]},electricConstant:{description:"Electric constant (vacuum permeability)",examples:["electricConstant"]},vacuumImpedance:{description:"Characteristic impedance of vacuum",examples:["vacuumImpedance"]},coulomb:{description:"Coulomb's constant",examples:["coulomb"]},elementaryCharge:{description:"Elementary charge",examples:["elementaryCharge"]},bohrMagneton:{description:"Bohr magneton",examples:["bohrMagneton"]},conductanceQuantum:{description:"Conductance quantum",examples:["conductanceQuantum"]},inverseConductanceQuantum:{description:"Inverse conductance quantum",examples:["inverseConductanceQuantum"]},magneticFluxQuantum:{description:"Magnetic flux quantum",examples:["magneticFluxQuantum"]},nuclearMagneton:{description:"Nuclear magneton",examples:["nuclearMagneton"]},klitzing:{description:"Von Klitzing constant",examples:["klitzing"]},bohrRadius:{description:"Bohr radius",examples:["bohrRadius"]},classicalElectronRadius:{description:"Classical electron radius",examples:["classicalElectronRadius"]},electronMass:{description:"Electron mass",examples:["electronMass"]},fermiCoupling:{description:"Fermi coupling constant",examples:["fermiCoupling"]},fineStructure:{description:"Fine-structure constant",examples:["fineStructure"]},hartreeEnergy:{description:"Hartree energy",examples:["hartreeEnergy"]},protonMass:{description:"Proton mass",examples:["protonMass"]},deuteronMass:{description:"Deuteron Mass",examples:["deuteronMass"]},neutronMass:{description:"Neutron mass",examples:["neutronMass"]},quantumOfCirculation:{description:"Quantum of circulation",examples:["quantumOfCirculation"]},rydberg:{description:"Rydberg constant",examples:["rydberg"]},thomsonCrossSection:{description:"Thomson cross section",examples:["thomsonCrossSection"]},weakMixingAngle:{description:"Weak mixing angle",examples:["weakMixingAngle"]},efimovFactor:{description:"Efimov factor",examples:["efimovFactor"]},atomicMass:{description:"Atomic mass constant",examples:["atomicMass"]},avogadro:{description:"Avogadro's number",examples:["avogadro"]},boltzmann:{description:"Boltzmann constant",examples:["boltzmann"]},faraday:{description:"Faraday constant",examples:["faraday"]},firstRadiation:{description:"First radiation constant",examples:["firstRadiation"]},loschmidt:{description:"Loschmidt constant at T=273.15 K and p=101.325 kPa",examples:["loschmidt"]},gasConstant:{description:"Gas constant",examples:["gasConstant"]},molarPlanckConstant:{description:"Molar Planck constant",examples:["molarPlanckConstant"]},molarVolume:{description:"Molar volume of an ideal gas at T=273.15 K and p=101.325 kPa",examples:["molarVolume"]},sackurTetrode:{description:"Sackur-Tetrode constant at T=1 K and p=101.325 kPa",examples:["sackurTetrode"]},secondRadiation:{description:"Second radiation constant",examples:["secondRadiation"]},stefanBoltzmann:{description:"Stefan-Boltzmann constant",examples:["stefanBoltzmann"]},wienDisplacement:{description:"Wien displacement law constant",examples:["wienDisplacement"]},molarMass:{description:"Molar mass constant",examples:["molarMass"]},molarMassC12:{description:"Molar mass constant of carbon-12",examples:["molarMassC12"]},gravity:{description:"Standard acceleration of gravity (standard acceleration of free-fall on Earth)",examples:["gravity"]},planckLength:{description:"Planck length",examples:["planckLength"]},planckMass:{description:"Planck mass",examples:["planckMass"]},planckTime:{description:"Planck time",examples:["planckTime"]},planckCharge:{description:"Planck charge",examples:["planckCharge"]},planckTemperature:{description:"Planck temperature",examples:["planckTemperature"]},derivative:{name:"derivative",category:"Algebra",syntax:["derivative(expr, variable)","derivative(expr, variable, {simplify: boolean})"],description:"Takes the derivative of an expression expressed in parser Nodes. The derivative will be taken over the supplied variable in the second parameter. If there are multiple variables in the expression, it will return a partial derivative.",examples:['derivative("2x^3", "x")','derivative("2x^3", "x", {simplify: false})','derivative("2x^2 + 3x + 4", "x")','derivative("sin(2x)", "x")','f = parse("x^2 + x")','x = parse("x")',"df = derivative(f, x)","df.evaluate({x: 3})"],seealso:["simplify","parse","evaluate"]},lsolve:{name:"lsolve",category:"Algebra",syntax:["x=lsolve(L, b)"],description:"Finds one solution of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolveAll","lup","lusolve","usolve","matrix","sparse"]},lsolveAll:{name:"lsolveAll",category:"Algebra",syntax:["x=lsolveAll(L, b)"],description:"Finds all solutions of the linear system L * x = b where L is an [n x n] lower triangular matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lsolve(a, b)"],seealso:["lsolve","lup","lusolve","usolve","matrix","sparse"]},lup:{name:"lup",category:"Algebra",syntax:["lup(m)"],description:"Calculate the Matrix LU decomposition with partial pivoting. Matrix A is decomposed in three matrices (L, U, P) where P * A = L * U",examples:["lup([[2, 1], [1, 4]])","lup(matrix([[2, 1], [1, 4]]))","lup(sparse([[2, 1], [1, 4]]))"],seealso:["lusolve","lsolve","usolve","matrix","sparse","slu","qr"]},lusolve:{name:"lusolve",category:"Algebra",syntax:["x=lusolve(A, b)","x=lusolve(lu, b)"],description:"Solves the linear system A * x = b where A is an [n x n] matrix and b is a [n] column vector.",examples:["a = [-2, 3; 2, 1]","b = [11, 9]","x = lusolve(a, b)"],seealso:["lup","slu","lsolve","usolve","matrix","sparse"]},leafCount:{name:"leafCount",category:"Algebra",syntax:["leafCount(expr)"],description:"Computes the number of leaves in the parse tree of the given expression",examples:['leafCount("e^(i*pi)-1")','leafCount(parse("{a: 22/7, b: 10^(1/2)}"))'],seealso:["simplify"]},polynomialRoot:{name:"polynomialRoot",category:"Algebra",syntax:["x=polynomialRoot(-6, 3)","x=polynomialRoot(4, -4, 1)","x=polynomialRoot(-8, 12, -6, 1)"],description:"Finds the roots of a univariate polynomial given by its coefficients starting from constant, linear, and so on, increasing in degree.",examples:["a = polynomialRoot(-6, 11, -6, 1)"],seealso:["cbrt","sqrt"]},resolve:{name:"resolve",category:"Algebra",syntax:["resolve(node, scope)"],description:"Recursively substitute variables in an expression tree.",examples:['resolve(parse("1 + x"), { x: 7 })','resolve(parse("size(text)"), { text: "Hello World" })','resolve(parse("x + y"), { x: parse("3z") })','resolve(parse("3x"), { x: parse("y+z"), z: parse("w^y") })'],seealso:["simplify","evaluate"],mayThrow:["ReferenceError"]},simplify:{name:"simplify",category:"Algebra",syntax:["simplify(expr)","simplify(expr, rules)"],description:"Simplify an expression tree.",examples:['simplify("3 + 2 / 4")','simplify("2x + x")','f = parse("x * (x + 2 + x)")',"simplified = simplify(f)","simplified.evaluate({x: 2})"],seealso:["simplifyCore","derivative","evaluate","parse","rationalize","resolve"]},simplifyConstant:{name:"simplifyConstant",category:"Algebra",syntax:["simplifyConstant(expr)","simplifyConstant(expr, options)"],description:"Replace constant subexpressions of node with their values.",examples:['simplifyConstant("(3-3)*x")','simplifyConstant(parse("z-cos(tau/8)"))'],seealso:["simplify","simplifyCore","evaluate"]},simplifyCore:{name:"simplifyCore",category:"Algebra",syntax:["simplifyCore(node)"],description:"Perform simple one-pass simplifications on an expression tree.",examples:['simplifyCore(parse("0*x"))','simplifyCore(parse("(x+0)*2"))'],seealso:["simplify","simplifyConstant","evaluate"]},symbolicEqual:{name:"symbolicEqual",category:"Algebra",syntax:["symbolicEqual(expr1, expr2)","symbolicEqual(expr1, expr2, options)"],description:"Returns true if the difference of the expressions simplifies to 0",examples:['symbolicEqual("x*y","y*x")','symbolicEqual("abs(x^2)", "x^2")','symbolicEqual("abs(x)", "x", {context: {abs: {trivial: true}}})'],seealso:["simplify","evaluate"]},rationalize:{name:"rationalize",category:"Algebra",syntax:["rationalize(expr)","rationalize(expr, scope)","rationalize(expr, scope, detailed)"],description:"Transform a rationalizable expression in a rational fraction. If rational fraction is one variable polynomial then converts the numerator and denominator in canonical form, with decreasing exponents, returning the coefficients of numerator.",examples:['rationalize("2x/y - y/(x+1)")','rationalize("2x/y - y/(x+1)", true)'],seealso:["simplify"]},slu:{name:"slu",category:"Algebra",syntax:["slu(A, order, threshold)"],description:"Calculate the Matrix LU decomposition with full pivoting. Matrix A is decomposed in two matrices (L, U) and two permutation vectors (pinv, q) where P * A * Q = L * U",examples:["slu(sparse([4.5, 0, 3.2, 0; 3.1, 2.9, 0, 0.9; 0, 1.7, 3, 0; 3.5, 0.4, 0, 1]), 1, 0.001)"],seealso:["lusolve","lsolve","usolve","matrix","sparse","lup","qr"]},usolve:{name:"usolve",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds one solution of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolveAll","lup","lusolve","lsolve","matrix","sparse"]},usolveAll:{name:"usolveAll",category:"Algebra",syntax:["x=usolve(U, b)"],description:"Finds all solutions of the linear system U * x = b where U is an [n x n] upper triangular matrix and b is a [n] column vector.",examples:["x=usolve(sparse([1, 1, 1, 1; 0, 1, 1, 1; 0, 0, 1, 1; 0, 0, 0, 1]), [1; 2; 3; 4])"],seealso:["usolve","lup","lusolve","lsolve","matrix","sparse"]},qr:{name:"qr",category:"Algebra",syntax:["qr(A)"],description:"Calculates the Matrix QR decomposition. Matrix `A` is decomposed in two matrices (`Q`, `R`) where `Q` is an orthogonal matrix and `R` is an upper triangular matrix.",examples:["qr([[1, -1,  4], [1,  4, -2], [1,  4,  2], [1,  -1, 0]])"],seealso:["lup","slu","matrix"]},abs:{name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},add:{name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["a = 2.1 + 3.6","a - 3.6","3 + 2i","3 cm + 2 inch",'"2.3" + "4"'],seealso:["subtract"]},cbrt:{name:"cbrt",category:"Arithmetic",syntax:["cbrt(x)","cbrt(x, allRoots)"],description:"Compute the cubic root value. If x = y * y * y, then y is the cubic root of x. When `x` is a number or complex number, an optional second argument `allRoots` can be provided to return all three cubic roots. If not provided, the principal root is returned",examples:["cbrt(64)","cube(4)","cbrt(-8)","cbrt(2 + 3i)","cbrt(8i)","cbrt(8i, true)","cbrt(27 m^3)"],seealso:["square","sqrt","cube","multiply"]},ceil:{name:"ceil",category:"Arithmetic",syntax:["ceil(x)","ceil(x, n)","ceil(unit, valuelessUnit)","ceil(unit, n, valuelessUnit)"],description:"Round a value towards plus infinity. If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)","ceil(3.241cm, cm)","ceil(3.241cm, 2, cm)"],seealso:["floor","fix","round"]},cube:{name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},divide:{name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["a = 2 / 3","a * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},dotDivide:{name:"dotDivide",category:"Operators",syntax:["x ./ y","dotDivide(x, y)"],description:"Divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","dotMultiply","divide"]},dotMultiply:{name:"dotMultiply",category:"Operators",syntax:["x .* y","dotMultiply(x, y)"],description:"Multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","dotDivide"]},dotPow:{name:"dotPow",category:"Operators",syntax:["x .^ y","dotPow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},exp:{name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["expm","expm1","pow","log"]},expm:{name:"expm",category:"Arithmetic",syntax:["exp(x)"],description:"Compute the matrix exponential, expm(A) = e^A. The matrix must be square. Not to be confused with exp(a), which performs element-wise exponentiation.",examples:["expm([[0,2],[0,0]])"],seealso:["exp"]},expm1:{name:"expm1",category:"Arithmetic",syntax:["expm1(x)"],description:"Calculate the value of subtracting 1 from the exponential value.",examples:["expm1(2)","pow(e, 2) - 1","log(expm1(2) + 1)"],seealso:["exp","pow","log"]},fix:{name:"fix",category:"Arithmetic",syntax:["fix(x)","fix(x, n)","fix(unit, valuelessUnit)","fix(unit, n, valuelessUnit)"],description:"Round a value towards zero. If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)","fix(3.241cm, cm)","fix(3.241cm, 2, cm)"],seealso:["ceil","floor","round"]},floor:{name:"floor",category:"Arithmetic",syntax:["floor(x)","floor(x, n)","floor(unit, valuelessUnit)","floor(unit, n, valuelessUnit)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)","floor(3.241cm, cm)","floor(3.241cm, 2, cm)"],seealso:["ceil","fix","round"]},gcd:{name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},hypot:{name:"hypot",category:"Arithmetic",syntax:["hypot(a, b, c, ...)","hypot([a, b, c, ...])"],description:"Calculate the hypotenuse of a list with values.",examples:["hypot(3, 4)","sqrt(3^2 + 4^2)","hypot(-2)","hypot([3, 4, 5])"],seealso:["abs","norm"]},lcm:{name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},log:{name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 4","log(10000, 10)","log(10000) / log(10)","b = log(1024, 2)","2 ^ b"],seealso:["exp","log1p","log2","log10"]},log2:{name:"log2",category:"Arithmetic",syntax:["log2(x)"],description:"Calculate the 2-base of a value. This is the same as calculating `log(x, 2)`.",examples:["log2(0.03125)","log2(16)","log2(16) / log2(2)","pow(2, 4)"],seealso:["exp","log1p","log","log10"]},log1p:{name:"log1p",category:"Arithmetic",syntax:["log1p(x)","log1p(x, base)"],description:"Calculate the logarithm of a `value+1`",examples:["log1p(2.5)","exp(log1p(1.4))","pow(10, 4)","log1p(9999, 10)","log1p(9999) / log(10)"],seealso:["exp","log","log2","log10"]},log10:{name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(0.00001)","log10(10000)","10 ^ 4","log(10000) / log(10)","log(10000, 10)"],seealso:["exp","log"]},mod:{name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:["divide"]},multiply:{name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["a = 2.1 * 3.4","a / 3.4","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},norm:{name:"norm",category:"Arithmetic",syntax:["norm(x)","norm(x, p)"],description:"Calculate the norm of a number, vector or matrix.",examples:["abs(-3.5)","norm(-3.5)","norm(3 - 4i)","norm([1, 2, -3], Infinity)","norm([1, 2, -3], -Infinity)","norm([3, 4], 2)","norm([[1, 2], [3, 4]], 1)",'norm([[1, 2], [3, 4]], "inf")','norm([[1, 2], [3, 4]], "fro")']},nthRoot:{name:"nthRoot",category:"Arithmetic",syntax:["nthRoot(a)","nthRoot(a, root)"],description:'Calculate the nth root of a value. The principal nth root of a positive real number A, is the positive real solution of the equation "x^root = A".',examples:["4 ^ 3","nthRoot(64, 3)","nthRoot(9, 2)","sqrt(9)"],seealso:["nthRoots","pow","sqrt"]},nthRoots:{name:"nthRoots",category:"Arithmetic",syntax:["nthRoots(A)","nthRoots(A, root)"],description:'Calculate the nth roots of a value. An nth root of a positive real number A, is a positive real solution of the equation "x^root = A". This function returns an array of complex values.',examples:["nthRoots(1)","nthRoots(1, 3)"],seealso:["sqrt","pow","nthRoot"]},pow:{name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3","2*2*2","1 + e ^ (pi * i)","pow([[1, 2], [4, 3]], 2)","pow([[1, 2], [4, 3]], -1)"],seealso:["multiply","nthRoot","nthRoots","sqrt"]},round:{name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)","round(unit, valuelessUnit)","round(unit, n, valuelessUnit)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)","round(3.241cm, 2, cm)","round([3.2, 3.8, -4.7])"],seealso:["ceil","floor","fix"]},sign:{name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},sqrt:{name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","sqrtm","multiply","nthRoot","nthRoots","pow"]},sqrtm:{name:"sqrtm",category:"Arithmetic",syntax:["sqrtm(x)"],description:"Calculate the principal square root of a square matrix. The principal square root matrix `X` of another matrix `A` is such that `X * X = A`.",examples:["sqrtm([[33, 24], [48, 57]])"],seealso:["sqrt","abs","square","multiply"]},square:{name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},subtract:{name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["a = 5.3 - 2","a + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},unaryMinus:{name:"unaryMinus",category:"Operators",syntax:["-x","unaryMinus(x)"],description:"Inverse the sign of a value. Converts booleans and strings to numbers.",examples:["-4.5","-(-5.6)",'-"22"'],seealso:["add","subtract","unaryPlus"]},unaryPlus:{name:"unaryPlus",category:"Operators",syntax:["+x","unaryPlus(x)"],description:"Converts booleans and strings to numbers.",examples:["+true",'+"2"'],seealso:["add","subtract","unaryMinus"]},xgcd:{name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values. The result is an array [d, x, y] with 3 entries, where d is the greatest common divisor, and d = x * a + y * b.",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},invmod:{name:"invmod",category:"Arithmetic",syntax:["invmod(a, b)"],description:"Calculate the (modular) multiplicative inverse of a modulo b. Solution to the equation ax \u2263 1 (mod b)",examples:["invmod(8, 12)","invmod(7, 13)","invmod(15151, 15122)"],seealso:["gcd","xgcd"]},bitAnd:{name:"bitAnd",category:"Bitwise",syntax:["x & y","bitAnd(x, y)"],description:"Bitwise AND operation. Performs the logical AND operation on each pair of the corresponding bits of the two given values by multiplying them. If both bits in the compared position are 1, the bit in the resulting binary representation is 1, otherwise, the result is 0",examples:["5 & 3","bitAnd(53, 131)","[1, 12, 31] & 42"],seealso:["bitNot","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitNot:{name:"bitNot",category:"Bitwise",syntax:["~x","bitNot(x)"],description:"Bitwise NOT operation. Performs a logical negation on each bit of the given value. Bits that are 0 become 1, and those that are 1 become 0.",examples:["~1","~2","bitNot([2, -3, 4])"],seealso:["bitAnd","bitOr","bitXor","leftShift","rightArithShift","rightLogShift"]},bitOr:{name:"bitOr",category:"Bitwise",syntax:["x | y","bitOr(x, y)"],description:"Bitwise OR operation. Performs the logical inclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if the first bit is 1 or the second bit is 1 or both bits are 1, otherwise, the result is 0.",examples:["5 | 3","bitOr([1, 2, 3], 4)"],seealso:["bitAnd","bitNot","bitXor","leftShift","rightArithShift","rightLogShift"]},bitXor:{name:"bitXor",category:"Bitwise",syntax:["bitXor(x, y)"],description:"Bitwise XOR operation, exclusive OR. Performs the logical exclusive OR operation on each pair of corresponding bits of the two given values. The result in each position is 1 if only the first bit is 1 or only the second bit is 1, but will be 0 if both are 0 or both are 1.",examples:["bitOr(1, 2)","bitXor([2, 3, 4], 4)"],seealso:["bitAnd","bitNot","bitOr","leftShift","rightArithShift","rightLogShift"]},leftShift:{name:"leftShift",category:"Bitwise",syntax:["x << y","leftShift(x, y)"],description:"Bitwise left logical shift of a value x by y number of bits.",examples:["4 << 1","8 >> 1"],seealso:["bitAnd","bitNot","bitOr","bitXor","rightArithShift","rightLogShift"]},rightArithShift:{name:"rightArithShift",category:"Bitwise",syntax:["x >> y","rightArithShift(x, y)"],description:"Bitwise right arithmetic shift of a value x by y number of bits.",examples:["8 >> 1","4 << 1","-12 >> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightLogShift"]},rightLogShift:{name:"rightLogShift",category:"Bitwise",syntax:["x >>> y","rightLogShift(x, y)"],description:"Bitwise right logical shift of a value x by y number of bits.",examples:["8 >>> 1","4 << 1","-12 >>> 2"],seealso:["bitAnd","bitNot","bitOr","bitXor","leftShift","rightArithShift"]},bellNumbers:{name:"bellNumbers",category:"Combinatorics",syntax:["bellNumbers(n)"],description:"The Bell Numbers count the number of partitions of a set. A partition is a pairwise disjoint subset of S whose union is S. `bellNumbers` only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["bellNumbers(3)","bellNumbers(8)"],seealso:["stirlingS2"]},catalan:{name:"catalan",category:"Combinatorics",syntax:["catalan(n)"],description:"The Catalan Numbers enumerate combinatorial structures of many different types. catalan only takes integer arguments. The following condition must be enforced: n >= 0.",examples:["catalan(3)","catalan(8)"],seealso:["bellNumbers"]},composition:{name:"composition",category:"Combinatorics",syntax:["composition(n, k)"],description:"The composition counts of n into k parts. composition only takes integer arguments. The following condition must be enforced: k <= n.",examples:["composition(5, 3)"],seealso:["combinations"]},stirlingS2:{name:"stirlingS2",category:"Combinatorics",syntax:["stirlingS2(n, k)"],description:"he Stirling numbers of the second kind, counts the number of ways to partition a set of n labelled objects into k nonempty unlabelled subsets. `stirlingS2` only takes integer arguments. The following condition must be enforced: k <= n. If n = k or k = 1, then s(n,k) = 1.",examples:["stirlingS2(5, 3)"],seealso:["bellNumbers"]},config:{name:"config",category:"Core",syntax:["config()","config(options)"],description:"Get configuration or change configuration.",examples:["config()","1/3 + 1/4",'config({number: "Fraction"})',"1/3 + 1/4"],seealso:[]},import:{name:"import",category:"Core",syntax:["import(functions)","import(functions, options)"],description:"Import functions or constants from an object.",examples:["import({myFn: f(x)=x^2, myConstant: 32 })","myFn(2)","myConstant"],seealso:[]},typed:{name:"typed",category:"Core",syntax:["typed(signatures)","typed(name, signatures)"],description:"Create a typed function.",examples:['double = typed({ "number": f(x)=x+x, "string": f(x)=concat(x,x) })',"double(2)",'double("hello")'],seealso:[]},arg:{name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 + 3i)"],seealso:["re","im","conj","abs"]},conj:{name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},re:{name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},im:{name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},evaluate:{name:"evaluate",category:"Expression",syntax:["evaluate(expression)","evaluate(expression, scope)","evaluate([expr1, expr2, expr3, ...])","evaluate([expr1, expr2, expr3, ...], scope)"],description:"Evaluate an expression or an array with expressions.",examples:['evaluate("2 + 3")','evaluate("sqrt(16)")','evaluate("2 inch to cm")','evaluate("sin(x * pi)", { "x": 1/2 })','evaluate(["width=2", "height=4","width*height"])'],seealso:[]},help:{name:"help",category:"Expression",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},distance:{name:"distance",category:"Geometry",syntax:["distance([x1, y1], [x2, y2])","distance([[x1, y1], [x2, y2]])"],description:"Calculates the Euclidean distance between two points.",examples:["distance([0,0], [4,4])","distance([[0,0], [4,4]])"],seealso:[]},intersect:{name:"intersect",category:"Geometry",syntax:["intersect(expr1, expr2, expr3, expr4)","intersect(expr1, expr2, expr3)"],description:"Computes the intersection point of lines and/or planes.",examples:["intersect([0, 0], [10, 10], [10, 0], [0, 10])","intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])"],seealso:[]},and:{name:"and",category:"Logical",syntax:["x and y","and(x, y)"],description:"Logical and. Test whether two values are both defined with a nonzero/nonempty value.",examples:["true and false","true and true","2 and 4"],seealso:["not","or","xor"]},not:{name:"not",category:"Logical",syntax:["not x","not(x)"],description:"Logical not. Flips the boolean value of given argument.",examples:["not true","not false","not 2","not 0"],seealso:["and","or","xor"]},or:{name:"or",category:"Logical",syntax:["x or y","or(x, y)"],description:"Logical or. Test if at least one value is defined with a nonzero/nonempty value.",examples:["true or false","false or false","0 or 4"],seealso:["not","and","xor"]},xor:{name:"xor",category:"Logical",syntax:["x xor y","xor(x, y)"],description:"Logical exclusive or, xor. Test whether one and only one value is defined with a nonzero/nonempty value.",examples:["true xor false","false xor false","true xor true","0 xor 4"],seealso:["not","and","or"]},concat:{name:"concat",category:"Matrix",syntax:["concat(A, B, C, ...)","concat(A, B, C, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the last dimension. The dimension on which to concatenate can be provided as last argument.",examples:["A = [1, 2; 5, 6]","B = [3, 4; 7, 8]","concat(A, B)","concat(A, B, 1)","concat(A, B, 2)"],seealso:["det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},count:{name:"count",category:"Matrix",syntax:["count(x)"],description:"Count the number of elements of a matrix, array or string.",examples:["a = [1, 2; 3, 4; 5, 6]","count(a)","size(a)",'count("hello world")'],seealso:["size"]},cross:{name:"cross",category:"Matrix",syntax:["cross(A, B)"],description:"Calculate the cross product for two vectors in three dimensional space.",examples:["cross([1, 1, 0],  [0, 1, 1])","cross([3, -3, 1], [4, 9, 2])","cross([2, 3, 4],  [5, 6, 7])"],seealso:["multiply","dot"]},column:{name:"column",category:"Matrix",syntax:["column(x, index)"],description:"Return a column from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","column(A, 1)","column(A, 2)"],seealso:["row","matrixFromColumns"]},ctranspose:{name:"ctranspose",category:"Matrix",syntax:["x'","ctranspose(x)"],description:"Complex Conjugate and Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","ctranspose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},det:{name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diag:{name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned. When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:3)","diag(1:3, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","identity","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},diff:{name:"diff",category:"Matrix",syntax:["diff(arr)","diff(arr, dim)"],description:["Create a new matrix or array with the difference of the passed matrix or array.","Dim parameter is optional and used to indicate the dimension of the array/matrix to apply the difference","If no dimension parameter is passed it is assumed as dimension 0","Dimension is zero-based in javascript and one-based in the parser","Arrays must be 'rectangular' meaning arrays like [1, 2]","If something is passed as a matrix it will be returned as a matrix but other than that all matrices are converted to arrays"],examples:["A = [1, 2, 4, 7, 0]","diff(A)","diff(A, 1)","B = [[1, 2], [3, 4]]","diff(B)","diff(B, 1)","diff(B, 2)","diff(B, bignumber(2))","diff([[1, 2], matrix([3, 4])], 2)"],seealso:["subtract","partitionSelect"]},dot:{name:"dot",category:"Matrix",syntax:["dot(A, B)","A * B"],description:"Calculate the dot product of two vectors. The dot product of A = [a1, a2, a3, ..., an] and B = [b1, b2, b3, ..., bn] is defined as dot(A, B) = a1 * b1 + a2 * b2 + a3 * b3 + ... + an * bn",examples:["dot([2, 4, 1], [2, 2, 3])","[2, 4, 1] * [2, 2, 3]"],seealso:["multiply","cross"]},getMatrixDataType:{name:"getMatrixDataType",category:"Matrix",syntax:["getMatrixDataType(x)"],description:'Find the data type of all elements in a matrix or array, for example "number" if all items are a number and "Complex" if all values are complex numbers. If a matrix contains more than one data type, it will return "mixed".',examples:["getMatrixDataType([1, 2, 3])","getMatrixDataType([[5 cm], [2 inch]])",'getMatrixDataType([1, "text"])',"getMatrixDataType([1, bignumber(4)])"],seealso:["matrix","sparse","typeOf"]},identity:{name:"identity",category:"Matrix",syntax:["identity(n)","identity(m, n)","identity([m, n])"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["identity(3)","identity(3, 5)","a = [1, 2, 3; 4, 5, 6]","identity(size(a))"],seealso:["concat","det","diag","inv","ones","range","size","squeeze","subset","trace","transpose","zeros"]},filter:{name:"filter",category:"Matrix",syntax:["filter(x, test)"],description:"Filter items in a matrix.",examples:["isPositive(x) = x > 0","filter([6, -2, -1, 4, 3], isPositive)","filter([6, -2, 0, 1, 0], x != 0)"],seealso:["sort","map","forEach"]},flatten:{name:"flatten",category:"Matrix",syntax:["flatten(x)"],description:"Flatten a multi dimensional matrix into a single dimensional matrix.",examples:["a = [1, 2, 3; 4, 5, 6]","size(a)","b = flatten(a)","size(b)"],seealso:["concat","resize","size","squeeze"]},forEach:{name:"forEach",category:"Matrix",syntax:["forEach(x, callback)"],description:"Iterates over all elements of a matrix/array, and executes the given callback function.",examples:["numberOfPets = {}","addPet(n) = numberOfPets[n] = (numberOfPets[n] ? numberOfPets[n]:0 ) + 1;",'forEach(["Dog","Cat","Cat"], addPet)',"numberOfPets"],seealso:["map","sort","filter"]},inv:{name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","identity","ones","range","size","squeeze","subset","trace","transpose","zeros"]},pinv:{name:"pinv",category:"Matrix",syntax:["pinv(x)"],description:"Calculate the Moore\u2013Penrose inverse of a matrix",examples:["pinv([1, 2; 3, 4])","pinv([[1, 0], [0, 1], [0, 1]])","pinv(4)"],seealso:["inv"]},eigs:{name:"eigs",category:"Matrix",syntax:["eigs(x)"],description:"Calculate the eigenvalues and optionally eigenvectors of a square matrix",examples:["eigs([[5, 2.3], [2.3, 1]])","eigs([[1, 2, 3], [4, 5, 6], [7, 8, 9]], { precision: 1e-6, eigenvectors: false })"],seealso:["inv"]},kron:{name:"kron",category:"Matrix",syntax:["kron(x, y)"],description:"Calculates the Kronecker product of 2 matrices or vectors.",examples:["kron([[1, 0], [0, 1]], [[1, 2], [3, 4]])","kron([1,1], [2,3,4])"],seealso:["multiply","dot","cross"]},matrixFromFunction:{name:"matrixFromFunction",category:"Matrix",syntax:["matrixFromFunction(size, fn)","matrixFromFunction(size, fn, format)","matrixFromFunction(size, fn, format, datatype)","matrixFromFunction(size, format, fn)","matrixFromFunction(size, format, datatype, fn)"],description:"Create a matrix by evaluating a generating function at each index.",examples:["f(I) = I[1] - I[2]","matrixFromFunction([3,3], f)","g(I) = I[1] - I[2] == 1 ? 4 : 0",'matrixFromFunction([100, 100], "sparse", g)',"matrixFromFunction([5], random)"],seealso:["matrix","matrixFromRows","matrixFromColumns","zeros"]},matrixFromRows:{name:"matrixFromRows",category:"Matrix",syntax:["matrixFromRows(...arr)","matrixFromRows(row1, row2)","matrixFromRows(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual rows.",examples:["matrixFromRows([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromColumns","matrixFromFunction","zeros"]},matrixFromColumns:{name:"matrixFromColumns",category:"Matrix",syntax:["matrixFromColumns(...arr)","matrixFromColumns(row1, row2)","matrixFromColumns(row1, row2, row3)"],description:"Create a dense matrix from vectors as individual columns.",examples:["matrixFromColumns([1, 2, 3], [[4],[5],[6]])"],seealso:["matrix","matrixFromRows","matrixFromFunction","zeros"]},map:{name:"map",category:"Matrix",syntax:["map(x, callback)","map(x, y, ..., callback)"],description:"Create a new matrix or array with the results of the callback function executed on each entry of the matrix/array or the matrices/arrays.",examples:["map([1, 2, 3], square)","map([1, 2], [3, 4], f(a,b) = a + b)"],seealso:["filter","forEach"]},ones:{name:"ones",category:"Matrix",syntax:["ones(m)","ones(m, n)","ones(m, n, p, ...)","ones([m])","ones([m, n])","ones([m, n, p, ...])"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","identity","inv","range","size","squeeze","subset","trace","transpose","zeros"]},partitionSelect:{name:"partitionSelect",category:"Matrix",syntax:["partitionSelect(x, k)","partitionSelect(x, k, compare)"],description:"Partition-based selection of an array or 1D matrix. Will find the kth smallest value, and mutates the input array. Uses Quickselect.",examples:["partitionSelect([5, 10, 1], 2)",'partitionSelect(["C", "B", "A", "D"], 1, compareText)',"arr = [5, 2, 1]","partitionSelect(arr, 0) # returns 1, arr is now: [1, 2, 5]","arr","partitionSelect(arr, 1, 'desc') # returns 2, arr is now: [5, 2, 1]","arr"],seealso:["sort"]},range:{name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, end, step)","range(string)"],description:"Create a range. Lower bound of the range is included, upper bound is excluded.",examples:["1:5","3:-1:-3","range(3, 7)","range(0, 12, 2)",'range("4:10")',"range(1m, 1m, 3m)","a = [1, 2, 3, 4; 5, 6, 7, 8]","a[1:2, 1:2]"],seealso:["concat","det","diag","identity","inv","ones","size","squeeze","subset","trace","transpose","zeros"]},resize:{name:"resize",category:"Matrix",syntax:["resize(x, size)","resize(x, size, defaultValue)"],description:"Resize a matrix.",examples:["resize([1,2,3,4,5], [3])","resize([1,2,3], [5])","resize([1,2,3], [5], -1)","resize(2, [2, 3])",'resize("hello", [8], "!")'],seealso:["size","subset","squeeze","reshape"]},reshape:{name:"reshape",category:"Matrix",syntax:["reshape(x, sizes)"],description:"Reshape a multi dimensional array to fit the specified dimensions.",examples:["reshape([1, 2, 3, 4, 5, 6], [2, 3])","reshape([[1, 2], [3, 4]], [1, 4])","reshape([[1, 2], [3, 4]], [4])","reshape([1, 2, 3, 4], [-1, 2])"],seealso:["size","squeeze","resize"]},rotate:{name:"rotate",category:"Matrix",syntax:["rotate(w, theta)","rotate(w, theta, v)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotate([1, 0], pi / 2)",'rotate(matrix([1, 0]), unit("35deg"))','rotate([1, 0, 0], unit("90deg"), [0, 0, 1])','rotate(matrix([1, 0, 0]), unit("90deg"), matrix([0, 0, 1]))'],seealso:["matrix","rotationMatrix"]},rotationMatrix:{name:"rotationMatrix",category:"Matrix",syntax:["rotationMatrix(theta)","rotationMatrix(theta, v)","rotationMatrix(theta, v, format)"],description:"Returns a 2-D rotation matrix (2x2) for a given angle (in radians). Returns a 2-D rotation matrix (3x3) of a given angle (in radians) around given axis.",examples:["rotationMatrix(pi / 2)",'rotationMatrix(unit("45deg"), [0, 0, 1])','rotationMatrix(1, matrix([0, 0, 1]), "sparse")'],seealso:["cos","sin"]},row:{name:"row",category:"Matrix",syntax:["row(x, index)"],description:"Return a row from a matrix or array.",examples:["A = [[1, 2], [3, 4]]","row(A, 1)","row(A, 2)"],seealso:["column","matrixFromRows"]},size:{name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","count","det","diag","identity","inv","ones","range","squeeze","subset","trace","transpose","zeros"]},sort:{name:"sort",category:"Matrix",syntax:["sort(x)","sort(x, compare)"],description:'Sort the items in a matrix. Compare can be a string "asc", "desc", "natural", or a custom sort function.',examples:["sort([5, 10, 1])",'sort(["C", "B", "A", "D"], "natural")',"sortByLength(a, b) = size(a)[1] - size(b)[1]",'sort(["Langdon", "Tom", "Sara"], sortByLength)','sort(["10", "1", "2"], "natural")'],seealso:["map","filter","forEach"]},squeeze:{name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove inner and outer singleton dimensions from a matrix.",examples:["a = zeros(3,2,1)","size(squeeze(a))","b = zeros(1,1,3)","size(squeeze(b))"],seealso:["concat","det","diag","identity","inv","ones","range","size","subset","trace","transpose","zeros"]},subset:{name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of the entries of a matrix or characters of a string. Indexes are one-based. There should be one index specification for each dimension of the target. Each specification can be a single index, a list of indices, or a range in colon notation `l:u`. In a range, both the lower bound l and upper bound u are included; and if a bound is omitted it defaults to the most extreme valid value. The cartesian product of the indices specified in each dimension determines the target of the operation.",examples:["d = [1, 2; 3, 4]","e = []","e[1, 1:2] = [5, 6]","e[2, :] = [7, 8]","f = d * e","f[2, 1]","f[:, 1]","f[[1,2], [1,3]] = [9, 10; 11, 12]","f"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","trace","transpose","zeros"]},trace:{name:"trace",category:"Matrix",syntax:["trace(A)"],description:"Calculate the trace of a matrix: the sum of the elements on the main diagonal of a square matrix.",examples:["A = [1, 2, 3; -1, 2, 3; 2, 0, 3]","trace(A)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","transpose","zeros"]},transpose:{name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","zeros"]},zeros:{name:"zeros",category:"Matrix",syntax:["zeros(m)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m])","zeros([m, n])","zeros([m, n, p, ...])"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","identity","inv","ones","range","size","squeeze","subset","trace","transpose"]},fft:{name:"fft",category:"Matrix",syntax:["fft(x)"],description:"Calculate N-dimensional Fourier transform",examples:["fft([[1, 0], [1, 0]])"],seealso:["ifft"]},ifft:{name:"ifft",category:"Matrix",syntax:["ifft(x)"],description:"Calculate N-dimensional inverse Fourier transform",examples:["ifft([[2, 2], [0, 0]])"],seealso:["fft"]},sylvester:{name:"sylvester",category:"Algebra",syntax:["sylvester(A,B,C)"],description:"Solves the real-valued Sylvester equation AX+XB=C for X",examples:["sylvester([[-1, -2], [1, 1]], [[-2, 1], [-1, 2]], [[-3, 2], [3, 0]])","A = [[-1, -2], [1, 1]]; B = [[2, -1], [1, -2]]; C = [[-3, 2], [3, 0]]","sylvester(A, B, C)"],seealso:["schur","lyap"]},schur:{name:"schur",category:"Algebra",syntax:["schur(A)"],description:"Performs a real Schur decomposition of the real matrix A = UTU'",examples:["schur([[1, 0], [-4, 3]])","A = [[1, 0], [-4, 3]]","schur(A)"],seealso:["lyap","sylvester"]},lyap:{name:"lyap",category:"Algebra",syntax:["lyap(A,Q)"],description:"Solves the Continuous-time Lyapunov equation AP+PA'+Q=0 for P",examples:["lyap([[-2, 0], [1, -4]], [[3, 1], [1, 3]])","A = [[-2, 0], [1, -4]]","Q = [[3, 1], [1, 3]]","lyap(A,Q)"],seealso:["schur","sylvester"]},solveODE:{name:"solveODE",category:"Numeric",syntax:["solveODE(func, tspan, y0)","solveODE(func, tspan, y0, options)"],description:"Numerical Integration of Ordinary Differential Equations.",examples:["f(t,y) = y","tspan = [0, 4]","solveODE(f, tspan, 1)","solveODE(f, tspan, [1, 2])",'solveODE(f, tspan, 1, { method:"RK23", maxStep:0.1 })'],seealso:["derivative","simplifyCore"]},combinations:{name:"combinations",category:"Probability",syntax:["combinations(n, k)"],description:"Compute the number of combinations of n items taken k at a time",examples:["combinations(7, 5)"],seealso:["combinationsWithRep","permutations","factorial"]},combinationsWithRep:{name:"combinationsWithRep",category:"Probability",syntax:["combinationsWithRep(n, k)"],description:"Compute the number of combinations of n items taken k at a time with replacements.",examples:["combinationsWithRep(7, 5)"],seealso:["combinations","permutations","factorial"]},factorial:{name:"factorial",category:"Probability",syntax:["n!","factorial(n)"],description:"Compute the factorial of a value",examples:["5!","5 * 4 * 3 * 2 * 1","3!"],seealso:["combinations","combinationsWithRep","permutations","gamma"]},gamma:{name:"gamma",category:"Probability",syntax:["gamma(n)"],description:"Compute the gamma function. For small values, the Lanczos approximation is used, and for large values the extended Stirling approximation.",examples:["gamma(4)","3!","gamma(1/2)","sqrt(pi)"],seealso:["factorial"]},kldivergence:{name:"kldivergence",category:"Probability",syntax:["kldivergence(x, y)"],description:"Calculate the Kullback-Leibler (KL) divergence  between two distributions.",examples:["kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])"],seealso:[]},lgamma:{name:"lgamma",category:"Probability",syntax:["lgamma(n)"],description:"Logarithm of the gamma function for real, positive numbers and complex numbers, using Lanczos approximation for numbers and Stirling series for complex numbers.",examples:["lgamma(4)","lgamma(1/2)","lgamma(i)","lgamma(complex(1.1, 2))"],seealso:["gamma"]},multinomial:{name:"multinomial",category:"Probability",syntax:["multinomial(A)"],description:"Multinomial Coefficients compute the number of ways of picking a1, a2, ..., ai unordered outcomes from `n` possibilities. multinomial takes one array of integers as an argument. The following condition must be enforced: every ai > 0.",examples:["multinomial([1, 2, 1])"],seealso:["combinations","factorial"]},permutations:{name:"permutations",category:"Probability",syntax:["permutations(n)","permutations(n, k)"],description:"Compute the number of permutations of n items taken k at a time",examples:["permutations(5)","permutations(5, 3)"],seealso:["combinations","combinationsWithRep","factorial"]},pickRandom:{name:"pickRandom",category:"Probability",syntax:["pickRandom(array)","pickRandom(array, number)","pickRandom(array, weights)","pickRandom(array, number, weights)","pickRandom(array, weights, number)"],description:"Pick a random entry from a given array.",examples:["pickRandom(0:10)","pickRandom([1, 3, 1, 6])","pickRandom([1, 3, 1, 6], 2)","pickRandom([1, 3, 1, 6], [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], 2, [2, 3, 2, 1])","pickRandom([1, 3, 1, 6], [2, 3, 2, 1], 2)"],seealso:["random","randomInt"]},random:{name:"random",category:"Probability",syntax:["random()","random(max)","random(min, max)","random(size)","random(size, max)","random(size, min, max)"],description:"Return a random number.",examples:["random()","random(10, 20)","random([2, 3])"],seealso:["pickRandom","randomInt"]},randomInt:{name:"randomInt",category:"Probability",syntax:["randomInt(max)","randomInt(min, max)","randomInt(size)","randomInt(size, max)","randomInt(size, min, max)"],description:"Return a random integer number",examples:["randomInt(10, 20)","randomInt([2, 3], 10)"],seealso:["pickRandom","random"]},compare:{name:"compare",category:"Relational",syntax:["compare(x, y)"],description:"Compare two values. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compare(2, 3)","compare(3, 2)","compare(2, 2)","compare(5cm, 40mm)","compare(2, [1, 2, 3])"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compareNatural","compareText"]},compareNatural:{name:"compareNatural",category:"Relational",syntax:["compareNatural(x, y)"],description:"Compare two values of any type in a deterministic, natural way. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:["compareNatural(2, 3)","compareNatural(3, 2)","compareNatural(2, 2)","compareNatural(5cm, 40mm)",'compareNatural("2", "10")',"compareNatural(2 + 3i, 2 + 4i)","compareNatural([1, 2, 4], [1, 2, 3])","compareNatural([1, 5], [1, 2, 3])","compareNatural([1, 2], [1, 2])","compareNatural({a: 2}, {a: 4})"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare","compareText"]},compareText:{name:"compareText",category:"Relational",syntax:["compareText(x, y)"],description:"Compare two strings lexically. Comparison is case sensitive. Returns 1 when x > y, -1 when x < y, and 0 when x == y.",examples:['compareText("B", "A")','compareText("A", "B")','compareText("A", "A")','compareText("2", "10")','compare("2", "10")',"compare(2, 10)",'compareNatural("2", "10")','compareText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural"]},deepEqual:{name:"deepEqual",category:"Relational",syntax:["deepEqual(x, y)"],description:"Check equality of two matrices element wise. Returns true if the size of both matrices is equal and when and each of the elements are equal.",examples:["deepEqual([1,3,4], [1,3,4])","deepEqual([1,3,4], [1,3])"],seealso:["equal","unequal","smaller","larger","smallerEq","largerEq","compare"]},equal:{name:"equal",category:"Relational",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns true if the values are equal, and false if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallerEq","largerEq","compare","deepEqual","equalText"]},equalText:{name:"equalText",category:"Relational",syntax:["equalText(x, y)"],description:"Check equality of two strings. Comparison is case sensitive. Returns true if the values are equal, and false if not.",examples:['equalText("Hello", "Hello")','equalText("a", "A")','equal("2e3", "2000")','equalText("2e3", "2000")','equalText("B", ["A", "B", "C"])'],seealso:["compare","compareNatural","compareText","equal"]},larger:{name:"larger",category:"Relational",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns true if x is larger than y, and false if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallerEq","largerEq","compare"]},largerEq:{name:"largerEq",category:"Relational",syntax:["x >= y","largerEq(x, y)"],description:"Check if value x is larger or equal to y. Returns true if x is larger or equal to y, and false if not.",examples:["2 >= 1+1","2 > 1+1","a = 3.2","b = 6-2.8","(a >= b)"],seealso:["equal","unequal","smallerEq","smaller","compare"]},smaller:{name:"smaller",category:"Relational",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns true if x is smaller than y, and false if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallerEq","largerEq","compare"]},smallerEq:{name:"smallerEq",category:"Relational",syntax:["x <= y","smallerEq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns true if x is smaller than y, and false if not.",examples:["2 <= 1+1","2 < 1+1","a = 3.2","b = 6-2.8","(a <= b)"],seealso:["equal","unequal","larger","smaller","largerEq","compare"]},unequal:{name:"unequal",category:"Relational",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns true if the values are unequal, and false if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallerEq","largerEq","compare","deepEqual"]},setCartesian:{name:"setCartesian",category:"Set",syntax:["setCartesian(set1, set2)"],description:"Create the cartesian product of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays and the values will be sorted in ascending order before the operation.",examples:["setCartesian([1, 2], [3, 4])"],seealso:["setUnion","setIntersect","setDifference","setPowerset"]},setDifference:{name:"setDifference",category:"Set",syntax:["setDifference(set1, set2)"],description:"Create the difference of two (multi)sets: every element of set1, that is not the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setDifference([1, 2, 3, 4], [3, 4, 5, 6])","setDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setSymDifference"]},setDistinct:{name:"setDistinct",category:"Set",syntax:["setDistinct(set)"],description:"Collect the distinct elements of a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setDistinct([1, 1, 1, 2, 2, 3])"],seealso:["setMultiplicity"]},setIntersect:{name:"setIntersect",category:"Set",syntax:["setIntersect(set1, set2)"],description:"Create the intersection of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIntersect([1, 2, 3, 4], [3, 4, 5, 6])","setIntersect([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setDifference"]},setIsSubset:{name:"setIsSubset",category:"Set",syntax:["setIsSubset(set1, set2)"],description:"Check whether a (multi)set is a subset of another (multi)set: every element of set1 is the element of set2. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setIsSubset([1, 2], [3, 4, 5, 6])","setIsSubset([3, 4], [3, 4, 5, 6])"],seealso:["setUnion","setIntersect","setDifference"]},setMultiplicity:{name:"setMultiplicity",category:"Set",syntax:["setMultiplicity(element, set)"],description:"Count the multiplicity of an element in a multiset. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setMultiplicity(1, [1, 2, 2, 4])","setMultiplicity(2, [1, 2, 2, 4])"],seealso:["setDistinct","setSize"]},setPowerset:{name:"setPowerset",category:"Set",syntax:["setPowerset(set)"],description:"Create the powerset of a (multi)set: the powerset contains very possible subsets of a (multi)set. A multi-dimension array will be converted to a single-dimension array before the operation.",examples:["setPowerset([1, 2, 3])"],seealso:["setCartesian"]},setSize:{name:"setSize",category:"Set",syntax:["setSize(set)","setSize(set, unique)"],description:'Count the number of elements of a (multi)set. When the second parameter "unique" is true, count only the unique values. A multi-dimension array will be converted to a single-dimension array before the operation.',examples:["setSize([1, 2, 2, 4])","setSize([1, 2, 2, 4], true)"],seealso:["setUnion","setIntersect","setDifference"]},setSymDifference:{name:"setSymDifference",category:"Set",syntax:["setSymDifference(set1, set2)"],description:"Create the symmetric difference of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setSymDifference([1, 2, 3, 4], [3, 4, 5, 6])","setSymDifference([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setUnion","setIntersect","setDifference"]},setUnion:{name:"setUnion",category:"Set",syntax:["setUnion(set1, set2)"],description:"Create the union of two (multi)sets. Multi-dimension arrays will be converted to single-dimension arrays before the operation.",examples:["setUnion([1, 2, 3, 4], [3, 4, 5, 6])","setUnion([[1, 2], [3, 4]], [[3, 4], [5, 6]])"],seealso:["setIntersect","setDifference"]},zpk2tf:{name:"zpk2tf",category:"Signal",syntax:["zpk2tf(z, p, k)"],description:"Compute the transfer function of a zero-pole-gain model.",examples:["zpk2tf([1, 2], [-1, -2], 1)","zpk2tf([1, 2], [-1, -2])","zpk2tf([1 - 3i, 2 + 2i], [-1, -2])"],seealso:[]},freqz:{name:"freqz",category:"Signal",syntax:["freqz(b, a)","freqz(b, a, w)"],description:"Calculates the frequency response of a filter given its numerator and denominator coefficients.",examples:["freqz([1, 2], [1, 2, 3])","freqz([1, 2], [1, 2, 3], [0, 1])","freqz([1, 2], [1, 2, 3], 512)"],seealso:[]},erf:{name:"erf",category:"Special",syntax:["erf(x)"],description:"Compute the erf function of a value using a rational Chebyshev approximations for different intervals of x",examples:["erf(0.2)","erf(-0.5)","erf(4)"],seealso:[]},zeta:{name:"zeta",category:"Special",syntax:["zeta(s)"],description:"Compute the Riemann Zeta Function using an infinite series and Riemann's Functional Equation for the entire complex plane",examples:["zeta(0.2)","zeta(-0.5)","zeta(4)"],seealso:[]},cumsum:{name:"cumsum",category:"Statistics",syntax:["cumsum(a, b, c, ...)","cumsum(A)"],description:"Compute the cumulative sum of all values.",examples:["cumsum(2, 3, 4, 1)","cumsum([2, 3, 4, 1])","cumsum([1, 2; 3, 4])","cumsum([1, 2; 3, 4], 1)","cumsum([1, 2; 3, 4], 2)"],seealso:["max","mean","median","min","prod","std","sum","variance"]},mad:{name:"mad",category:"Statistics",syntax:["mad(a, b, c, ...)","mad(A)"],description:"Compute the median absolute deviation of a matrix or a list with values. The median absolute deviation is defined as the median of the absolute deviations from the median.",examples:["mad(10, 20, 30)","mad([1, 2, 3])"],seealso:["mean","median","std","abs"]},max:{name:"max",category:"Statistics",syntax:["max(a, b, c, ...)","max(A)","max(A, dimension)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max([2, 3, 4, 1])","max([2, 5; 4, 3])","max([2, 5; 4, 3], 1)","max([2, 5; 4, 3], 2)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["mean","median","min","prod","std","sum","variance"]},mean:{name:"mean",category:"Statistics",syntax:["mean(a, b, c, ...)","mean(A)","mean(A, dimension)"],description:"Compute the arithmetic mean of a list of values.",examples:["mean(2, 3, 4, 1)","mean([2, 3, 4, 1])","mean([2, 5; 4, 3])","mean([2, 5; 4, 3], 1)","mean([2, 5; 4, 3], 2)","mean([1.0, 2.7, 3.2, 4.0])"],seealso:["max","median","min","prod","std","sum","variance"]},median:{name:"median",category:"Statistics",syntax:["median(a, b, c, ...)","median(A)"],description:"Compute the median of all values. The values are sorted and the middle value is returned. In case of an even number of values, the average of the two middle values is returned.",examples:["median(5, 2, 7)","median([3, -1, 5, 7])"],seealso:["max","mean","min","prod","std","sum","variance","quantileSeq"]},min:{name:"min",category:"Statistics",syntax:["min(a, b, c, ...)","min(A)","min(A, dimension)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min([2, 3, 4, 1])","min([2, 5; 4, 3])","min([2, 5; 4, 3], 1)","min([2, 5; 4, 3], 2)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max","mean","median","prod","std","sum","variance"]},mode:{name:"mode",category:"Statistics",syntax:["mode(a, b, c, ...)","mode(A)","mode(A, a, b, B, c, ...)"],description:"Computes the mode of all values as an array. In case mode being more than one, multiple values are returned in an array.",examples:["mode(2, 1, 4, 3, 1)","mode([1, 2.7, 3.2, 4, 2.7])","mode(1, 4, 6, 1, 6)"],seealso:["max","mean","min","median","prod","std","sum","variance"]},prod:{name:"prod",category:"Statistics",syntax:["prod(a, b, c, ...)","prod(A)"],description:"Compute the product of all values.",examples:["prod(2, 3, 4)","prod([2, 3, 4])","prod([2, 5; 4, 3])"],seealso:["max","mean","min","median","min","std","sum","variance"]},quantileSeq:{name:"quantileSeq",category:"Statistics",syntax:["quantileSeq(A, prob[, sorted])","quantileSeq(A, [prob1, prob2, ...][, sorted])","quantileSeq(A, N[, sorted])"],description:"Compute the prob order quantile of a matrix or a list with values. The sequence is sorted and the middle value is returned. Supported types of sequence values are: Number, BigNumber, Unit Supported types of probability are: Number, BigNumber. \n\nIn case of a (multi dimensional) array or matrix, the prob order quantile of all elements will be calculated.",examples:["quantileSeq([3, -1, 5, 7], 0.5)","quantileSeq([3, -1, 5, 7], [1/3, 2/3])","quantileSeq([3, -1, 5, 7], 2)","quantileSeq([-1, 3, 5, 7], 0.5, true)"],seealso:["mean","median","min","max","prod","std","sum","variance"]},std:{name:"std",category:"Statistics",syntax:["std(a, b, c, ...)","std(A)","std(A, dimension)","std(A, normalization)","std(A, dimension, normalization)"],description:'Compute the standard deviation of all values, defined as std(A) = sqrt(variance(A)). Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["std(2, 4, 6)","std([2, 4, 6, 8])",'std([2, 4, 6, 8], "uncorrected")','std([2, 4, 6, 8], "biased")',"std([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","prod","sum","variance"]},sum:{name:"sum",category:"Statistics",syntax:["sum(a, b, c, ...)","sum(A)","sum(A, dimension)"],description:"Compute the sum of all values.",examples:["sum(2, 3, 4, 1)","sum([2, 3, 4, 1])","sum([2, 5; 4, 3])"],seealso:["max","mean","median","min","prod","std","sum","variance"]},variance:{name:"variance",category:"Statistics",syntax:["variance(a, b, c, ...)","variance(A)","variance(A, dimension)","variance(A, normalization)","variance(A, dimension, normalization)"],description:'Compute the variance of all values. Optional parameter normalization can be "unbiased" (default), "uncorrected", or "biased".',examples:["variance(2, 4, 6)","variance([2, 4, 6, 8])",'variance([2, 4, 6, 8], "uncorrected")','variance([2, 4, 6, 8], "biased")',"variance([1, 2, 3; 4, 5, 6])"],seealso:["max","mean","min","median","min","prod","std","sum"]},corr:{name:"corr",category:"Statistics",syntax:["corr(A,B)"],description:"Compute the correlation coefficient of a two list with values, For matrices, the matrix correlation coefficient is calculated.",examples:["corr([2, 4, 6, 8],[1, 2, 3, 6])","corr(matrix([[1, 2.2, 3, 4.8, 5], [1, 2, 3, 4, 5]]), matrix([[4, 5.3, 6.6, 7, 8], [1, 2, 3, 4, 5]]))"],seealso:["max","mean","min","median","min","prod","std","sum"]},acos:{name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","atan","asin"]},acosh:{name:"acosh",category:"Trigonometry",syntax:["acosh(x)"],description:"Calculate the hyperbolic arccos of a value, defined as `acosh(x) = ln(sqrt(x^2 - 1) + x)`.",examples:["acosh(1.5)"],seealso:["cosh","asinh","atanh"]},acot:{name:"acot",category:"Trigonometry",syntax:["acot(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acot(0.5)","acot(cot(0.5))","acot(2)"],seealso:["cot","atan"]},acoth:{name:"acoth",category:"Trigonometry",syntax:["acoth(x)"],description:"Calculate the inverse hyperbolic tangent of a value, defined as `acoth(x) = (ln((x+1)/x) + ln(x/(x-1))) / 2`.",examples:["acoth(2)","acoth(0.5)"],seealso:["acsch","asech"]},acsc:{name:"acsc",category:"Trigonometry",syntax:["acsc(x)"],description:"Calculate the inverse cotangent of a value.",examples:["acsc(2)","acsc(csc(0.5))","acsc(0.5)"],seealso:["csc","asin","asec"]},acsch:{name:"acsch",category:"Trigonometry",syntax:["acsch(x)"],description:"Calculate the inverse hyperbolic cosecant of a value, defined as `acsch(x) = ln(1/x + sqrt(1/x^2 + 1))`.",examples:["acsch(0.5)"],seealso:["asech","acoth"]},asec:{name:"asec",category:"Trigonometry",syntax:["asec(x)"],description:"Calculate the inverse secant of a value.",examples:["asec(0.5)","asec(sec(0.5))","asec(2)"],seealso:["acos","acot","acsc"]},asech:{name:"asech",category:"Trigonometry",syntax:["asech(x)"],description:"Calculate the inverse secant of a value.",examples:["asech(0.5)"],seealso:["acsch","acoth"]},asin:{name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(0.5))"],seealso:["sin","acos","atan"]},asinh:{name:"asinh",category:"Trigonometry",syntax:["asinh(x)"],description:"Calculate the hyperbolic arcsine of a value, defined as `asinh(x) = ln(x + sqrt(x^2 + 1))`.",examples:["asinh(0.5)"],seealso:["acosh","atanh"]},atan:{name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(0.5))"],seealso:["tan","acos","asin"]},atanh:{name:"atanh",category:"Trigonometry",syntax:["atanh(x)"],description:"Calculate the hyperbolic arctangent of a value, defined as `atanh(x) = ln((1 + x)/(1 - x)) / 2`.",examples:["atanh(0.5)"],seealso:["acosh","asinh"]},atan2:{name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},cos:{name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},cosh:{name:"cosh",category:"Trigonometry",syntax:["cosh(x)"],description:"Compute the hyperbolic cosine of x in radians.",examples:["cosh(0.5)"],seealso:["sinh","tanh","coth"]},cot:{name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},coth:{name:"coth",category:"Trigonometry",syntax:["coth(x)"],description:"Compute the hyperbolic cotangent of x in radians.",examples:["coth(2)","1 / tanh(2)"],seealso:["sech","csch","tanh"]},csc:{name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},csch:{name:"csch",category:"Trigonometry",syntax:["csch(x)"],description:"Compute the hyperbolic cosecant of x in radians. Defined as 1/sinh(x)",examples:["csch(2)","1 / sinh(2)"],seealso:["sech","coth","sinh"]},sec:{name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},sech:{name:"sech",category:"Trigonometry",syntax:["sech(x)"],description:"Compute the hyperbolic secant of x in radians. Defined as 1/cosh(x)",examples:["sech(2)","1 / cosh(2)"],seealso:["coth","csch","cosh"]},sin:{name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},sinh:{name:"sinh",category:"Trigonometry",syntax:["sinh(x)"],description:"Compute the hyperbolic sine of x in radians.",examples:["sinh(0.5)"],seealso:["cosh","tanh"]},tan:{name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},tanh:{name:"tanh",category:"Trigonometry",syntax:["tanh(x)"],description:"Compute the hyperbolic tangent of x in radians.",examples:["tanh(0.5)","sinh(0.5) / cosh(0.5)"],seealso:["sinh","cosh"]},to:{name:"to",category:"Units",syntax:["x to unit","to(x, unit)"],description:"Change the unit of a value.",examples:["5 inch to cm","3.2kg to g","16 bytes in bits"],seealso:[]},clone:{name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables, and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},format:{name:"format",category:"Utils",syntax:["format(value)","format(value, precision)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])","format(pi, 3)"],seealso:["print"]},bin:{name:"bin",category:"Utils",syntax:["bin(value)"],description:"Format a number as binary",examples:["bin(2)"],seealso:["oct","hex"]},oct:{name:"oct",category:"Utils",syntax:["oct(value)"],description:"Format a number as octal",examples:["oct(56)"],seealso:["bin","hex"]},hex:{name:"hex",category:"Utils",syntax:["hex(value)"],description:"Format a number as hexadecimal",examples:["hex(240)"],seealso:["bin","oct"]},isNaN:{name:"isNaN",category:"Utils",syntax:["isNaN(x)"],description:"Test whether a value is NaN (not a number)",examples:["isNaN(2)","isNaN(0 / 0)","isNaN(NaN)","isNaN(Infinity)"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isInteger:{name:"isInteger",category:"Utils",syntax:["isInteger(x)"],description:"Test whether a value is an integer number.",examples:["isInteger(2)","isInteger(3.5)","isInteger([3, 0.5, -2])"],seealso:["isNegative","isNumeric","isPositive","isZero"]},isNegative:{name:"isNegative",category:"Utils",syntax:["isNegative(x)"],description:"Test whether a value is negative: smaller than zero.",examples:["isNegative(2)","isNegative(0)","isNegative(-4)","isNegative([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isPositive","isZero"]},isNumeric:{name:"isNumeric",category:"Utils",syntax:["isNumeric(x)"],description:"Test whether a value is a numeric value. Returns true when the input is a number, BigNumber, Fraction, or boolean.",examples:["isNumeric(2)",'isNumeric("2")','hasNumericValue("2")',"isNumeric(0)","isNumeric(bignumber(500))","isNumeric(fraction(0.125))","isNumeric(2 + 3i)",'isNumeric([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","hasNumericValue"]},hasNumericValue:{name:"hasNumericValue",category:"Utils",syntax:["hasNumericValue(x)"],description:"Test whether a value is an numeric value. In case of a string, true is returned if the string contains a numeric value.",examples:["hasNumericValue(2)",'hasNumericValue("2")','isNumeric("2")',"hasNumericValue(0)","hasNumericValue(bignumber(500))","hasNumericValue(fraction(0.125))","hasNumericValue(2 + 3i)",'hasNumericValue([2.3, "foo", false])'],seealso:["isInteger","isZero","isNegative","isPositive","isNaN","isNumeric"]},isPositive:{name:"isPositive",category:"Utils",syntax:["isPositive(x)"],description:"Test whether a value is positive: larger than zero.",examples:["isPositive(2)","isPositive(0)","isPositive(-4)","isPositive([3, 0.5, -2])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isPrime:{name:"isPrime",category:"Utils",syntax:["isPrime(x)"],description:"Test whether a value is prime: has no divisors other than itself and one.",examples:["isPrime(3)","isPrime(-2)","isPrime([2, 17, 100])"],seealso:["isInteger","isNumeric","isNegative","isZero"]},isZero:{name:"isZero",category:"Utils",syntax:["isZero(x)"],description:"Test whether a value is zero.",examples:["isZero(2)","isZero(0)","isZero(-4)","isZero([3, 0, -2, 0])"],seealso:["isInteger","isNumeric","isNegative","isPositive"]},print:{name:"print",category:"Utils",syntax:["print(template, values)","print(template, values, precision)"],description:"Interpolate values into a string template.",examples:['print("Lucy is $age years old", {age: 5})','print("The value of pi is $pi", {pi: pi}, 3)','print("Hello, $user.name!", {user: {name: "John"}})','print("Values: $1, $2, $3", [6, 9, 4])'],seealso:["format"]},typeOf:{name:"typeOf",category:"Utils",syntax:["typeOf(x)"],description:"Get the type of a variable.",examples:["typeOf(3.5)","typeOf(2 - 4i)","typeOf(45 deg)",'typeOf("hello world")'],seealso:["getMatrixDataType"]},numeric:{name:"numeric",category:"Utils",syntax:["numeric(x)"],description:"Convert a numeric input to a specific numeric type: number, BigNumber, bigint, or Fraction.",examples:['numeric("4")','numeric("4", "number")','numeric("4", "bigint")','numeric("4", "BigNumber")','numeric("4", "Fraction")','numeric(4, "Fraction")','numeric(fraction(2, 5), "number")'],seealso:["number","bigint","fraction","bignumber","string","format"]}},nC="help",rC=$M(nC,["typed","mathWithTransform","Help"],(e=>{var{typed:t,mathWithTransform:n,Help:r}=e;return t(nC,{any:function(e){var t,i=e;if("string"!==typeof e)for(t in n)if(X_(n,t)&&e===n[t]){i=t;break}var a=Y_(tC,i);if(!a){var o="function"===typeof i?i.name:i;throw new Error('No documentation found on "'+o+'"')}return new r(a)}})})),iC=n(422);function aC(e,t,n){if(iC.isTypedFunction(e)){var r=(t.isMatrix?t.size():HE(t)).map((()=>0)),i=t.isMatrix?t.get(r):mA(t,r),a=1===Object.keys(e.signatures).length,o=function(e,t,n,r){for(var i=[t,n,r],a=3;a>0;a--){var o=i.slice(0,a);if(null!==iC.resolve(e,o))return a}}(e,i,r,t),s=a?Object.values(e.signatures)[0]:e;return o>=1&&o<=3?function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return oC(s,r.slice(0,o),n,e.name)}:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return oC(s,r,n,e.name)}}return e}function oC(e,t,n,r){try{return e(...t)}catch(i){!function(e,t,n,r){var i;if(e instanceof TypeError&&"wrongType"===(null===(i=e.data)||void 0===i?void 0:i.category)){var a=[];throw a.push("value: ".concat(XM(t[0]))),t.length>=2&&a.push("index: ".concat(XM(t[1]))),t.length>=3&&a.push("array: ".concat(XM(t[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(a.join(", "),") at index ").concat(JSON.stringify(t[1])))}throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(e.message))}(i,t,n,r)}}var sC=$M("filter",["typed"],(e=>{var{typed:t}=e;return t("filter",{"Array, function":lC,"Matrix, function":function(e,t){return e.create(lC(e.valueOf(),t),e.datatype())},"Array, RegExp":aA,"Matrix, RegExp":function(e,t){return e.create(aA(e.valueOf(),t),e.datatype())}})}));function lC(e,t){var n=aC(t,e,"filter");return function(e,t){if(1!==HE(e).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(e,t)}(e,(function(e,t,r){return n(e,[t],r)}))}function uC(e,t,n){var r=e.filter((function(e){return GM(e)&&!(e.name in t)&&!n.has(e.name)}))[0];if(!r)throw new Error('No undefined variable found in inline expression "'+e+'"');var i=r.name,a=new Map,o=new tM(n,a,new Set([i])),s=e.compile();return function(e){return a.set(i,e),s.evaluate(o)}}var cC=$M("transformCallback",["typed"],(e=>{var{typed:t}=e;return function(e,r){return t.isTypedFunction(e)?n(e,r):hC(e,e.length,r)};function n(e,r){var i=Object.fromEntries(Object.entries(e.signatures).map((e=>{var[i,a]=e,o=i.split(",").length;return t.isTypedFunction(a)?[i,n(a,r)]:[i,hC(a,o,r)]})));return"string"===typeof e.name?t(e.name,i):t(i)}}));function hC(e,t,n){return t===n?e:t===n+1?function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r.slice(0,n),o=dC(r[n]);return e(...a,o)}:t>n+1?function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r.slice(0,n),o=dC(r[n]),s=r.slice(n+1);return e(...a,o,...s)}:e}function dC(e){return e.map((e=>e+1))}var pC=$M("filter",["typed"],(e=>{var{typed:t}=e;function n(e,n,i){var a=sC({typed:t}),o=cC({typed:t});if(0===e.length)return a();var s=e[0];if(1===e.length)return a(s);var l=e.length-1,u=e[l];return s&&(s=r(s,i)),u&&(u=GM(u)||OM(u)?r(u,i):uC(u,n,i)),a(s,o(u,l))}function r(e,t){return e.compile().evaluate(t)}return n.rawArgs=!0,n}),{isTransformFunction:!0}),fC="forEach",mC=$M(fC,["typed"],(e=>{var{typed:t}=e;return t(fC,{"Array, function":gC,"Matrix, function":function(e,t){e.forEach(t)}})}));function gC(e,t){gA(e,[],e,aC(t,e,fC))}var vC=$M("forEach",["typed"],(e=>{var{typed:t}=e,n=mC({typed:t}),r=cC({typed:t});function i(e,t,i){if(0===e.length)return n();var o=e[0];if(1===e.length)return n(o);var s=e.length-1,l=e[s];return o&&(o=a(o,i)),l&&(l=GM(l)||OM(l)?a(l,i):uC(l,t,i)),n(o,r(l,s))}function a(e,t){return e.compile().evaluate(t)}return i.rawArgs=!0,i}),{isTransformFunction:!0}),yC="map",xC=$M(yC,["typed"],(e=>{var{typed:t}=e;return t(yC,{"Array, function":n,"Matrix, function":function(e,t){return e.map(t)},"Array|Matrix, Array|Matrix, ...Array|Matrix|function":(e,r,i)=>function(e,r){if("function"!==typeof r)throw new Error("Last argument must be a callback function");var i,a=e[0].isMatrix,o=dA(...e.map((e=>e.isMatrix?e.size():HE(e)))),s=a?(e,t)=>e.get(t):mA,l=a?e.map((t=>t.isMatrix?t.create(fA(t.toArray(),o),t.datatype()):e[0].create(fA(t.valueOf(),o)))):e.map((e=>e.isMatrix?fA(e.toArray(),o):fA(e,o)));if(t.isTypedFunction(r)){var u=o.map((()=>0)),c=l.map((e=>s(e,u))),h=v(r,c,u,l);i=m(h)}else{var d=e.length,p=g(r,d);i=m(p)}var f=(e,t)=>i([e,...l.slice(1).map((e=>s(e,t)))],t);return a?l[0].map(f):n(l[0],f);function m(e){switch(e){case 0:return e=>r(...e);case 1:return(e,t)=>r(...e,t);case 2:return(e,t)=>r(...e,t,...l)}}function g(e,t){return e.length>t+1?2:e.length===t+1?1:0}function v(e,n,r,i){return null!==t.resolve(e,[...n,r,...i])?2:null!==t.resolve(e,[...n,r])?1:(t.resolve(e,n),0)}}([e,r,...i.slice(0,i.length-1)],i[i.length-1])});function n(e,t){return gA(e,[],e,aC(t,e,yC))}})),bC=$M("map",["typed"],(e=>{var{typed:t}=e,n=xC({typed:t}),r=cC({typed:t});function i(e,t,i){if(0===e.length)return n();if(1===e.length)return n(e[0]);var a=e.length-1,o=e.slice(0,a),s=e[a];return o=o.map((e=>l(e,i))),s&&(s=GM(s)||OM(s)?l(s,i):uC(s,t,i)),n(...o,r(s,a));function l(e,t){return e.compile().evaluate(t)}}return i.rawArgs=!0,i}),{isTransformFunction:!0}),wC="apply",SC=$M(wC,["typed","isInteger"],(e=>{var{typed:t,isInteger:n}=e;return t(wC,{"Array | Matrix, number | BigNumber, function":function(e,t,r){if(!n(t))throw new TypeError("Integer number expected for dimension");var i=Array.isArray(e)?HE(e):e.size();if(t<0||t>=i.length)throw new UE(t,i.length);return pM(e)?e.create(_C(e.valueOf(),t,r),e.datatype()):_C(e,t,r)}})}));function _C(e,t,n){var r,i,a;if(t<=0){if(Array.isArray(e[0])){for(a=function(e){var t,n,r=e.length,i=e[0].length,a=[];for(n=0;n<i;n++){var o=[];for(t=0;t<r;t++)o.push(e[t][n]);a.push(o)}return a}(e),i=[],r=0;r<a.length;r++)i[r]=_C(a[r],t-1,n);return i}return n(e)}for(i=[],r=0;r<e.length;r++)i[r]=_C(e[r],t-1,n);return i}var MC=$M("apply",["typed","isInteger"],(e=>{var{typed:t,isInteger:n}=e,r=SC({typed:t,isInteger:n});return t("apply",{"...any":function(e){var t=e[1];aM(t)?e[1]=t-1:oM(t)&&(e[1]=t.minus(1));try{return r.apply(null,e)}catch(n){throw eT(n)}}})}),{isTransformFunction:!0}),EC=$M("matAlgo03xDSf",["typed"],(e=>{var{typed:t}=e;return function(e,n,r,i){var a=e._data,o=e._size,s=e._datatype||e.getDataType(),l=n._values,u=n._index,c=n._ptr,h=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(o.length!==h.length)throw new zE(o.length,h.length);if(o[0]!==h[0]||o[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+h+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,f=o[0],m=o[1],g=0,v=r;"string"===typeof s&&s===d&&"mixed"!==s&&(p=s,g=t.convert(0,p),v=t.find(r,[p,p]));for(var y=[],x=0;x<f;x++)y[x]=[];for(var b=[],w=[],S=0;S<m;S++){for(var _=S+1,M=c[S],E=c[S+1],A=M;A<E;A++){var T=u[A];b[T]=i?v(l[A],a[T][S]):v(a[T][S],l[A]),w[T]=_}for(var C=0;C<f;C++)w[C]===_?y[C][S]=b[C]:y[C][S]=i?v(g,a[C][S]):v(a[C][S],g)}return e.createDenseMatrix({data:y,size:[f,m],datatype:s===e._datatype&&d===n._datatype?p:void 0})}})),AC=$M("matAlgo12xSfs",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,a){var o=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=u[0],p=u[1],f=i;"string"===typeof c&&(h=c,r=t.convert(r,h),f=t.find(i,[h,h]));for(var m=[],g=[],v=[],y=0;y<p;y++){for(var x=y+1,b=l[y],w=l[y+1],S=b;S<w;S++){var _=s[S];g[_]=o[S],v[_]=x}for(var M=0;M<d;M++)0===y&&(m[M]=[]),v[M]===x?m[M][y]=a?f(r,g[M]):f(g[M],r):m[M][y]=a?f(r,0):f(0,r)}return new n({data:m,size:[d,p],datatype:h})}})),TC=$M("matAlgo05xSfSf",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==p.length)throw new zE(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");var m,g=l[0],v=l[1],y=n,x=0,b=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,S,_,M,E=a&&c?[]:void 0,A=[],T=[],C=E?[]:void 0,D=E?[]:void 0,N=[],R=[];for(S=0;S<v;S++){T[S]=A.length;var k=S+1;for(_=s[S],M=s[S+1];_<M;_++)w=o[_],A.push(w),N[w]=k,C&&(C[w]=a[_]);for(_=d[S],M=d[S+1];_<M;_++)N[w=h[_]]!==k&&A.push(w),R[w]=k,D&&(D[w]=c[_]);if(E)for(_=T[S];_<A.length;){var I=N[w=A[_]],F=R[w];if(I===k||F===k){var P=b(I===k?C[w]:x,F===k?D[w]:x);y(P,x)?A.splice(_,1):(E.push(P),_++)}}}return T[v]=A.length,e.createSparseMatrix({values:E,index:A,ptr:T,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),CC=$M("matAlgo13xDD",["typed"],(e=>{var{typed:t}=e;return function(e,r,i){var a,o=e._data,s=e._size,l=e._datatype,u=r._data,c=r._size,h=r._datatype,d=[];if(s.length!==c.length)throw new zE(s.length,c.length);for(var p=0;p<s.length;p++){if(s[p]!==c[p])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+c+")");d[p]=s[p]}var f=i;"string"===typeof l&&l===h&&(a=l,f=t.find(i,[a,a]));var m=d.length>0?n(f,0,d,d[0],o,u):[];return e.createDenseMatrix({data:m,size:d,datatype:a})};function n(e,t,r,i,a,o){var s=[];if(t===r.length-1)for(var l=0;l<i;l++)s[l]=e(a[l],o[l]);else for(var u=0;u<i;u++)s[u]=n(e,t+1,r,r[t+1],a[u],o[u]);return s}})),DC=$M("matAlgo14xDs",["typed"],(e=>{var{typed:t}=e;return function(e,r,i,a){var o,s=e._data,l=e._size,u=e._datatype,c=i;"string"===typeof u&&(o=u,r=t.convert(r,o),c=t.find(i,[o,o]));var h=l.length>0?n(c,0,l,l[0],s,r,a):[];return e.createDenseMatrix({data:h,size:j_(l),datatype:o})};function n(e,t,r,i,a,o,s){var l=[];if(t===r.length-1)for(var u=0;u<i;u++)l[u]=s?e(o,a[u]):e(a[u],o);else for(var c=0;c<i;c++)l[c]=n(e,t+1,r,r[t+1],a[c],o,s);return l}}));function NC(e,t){if(W_(e.size(),t.size()))return[e,t];var n=dA(e.size(),t.size());return[e,t].map((e=>function(e,t){if(W_(e.size(),t))return e;return e.create(fA(e.valueOf(),t),e.datatype())}(e,n)))}var RC=$M("matrixAlgorithmSuite",["typed","matrix"],(e=>{var{typed:t,matrix:n}=e,r=CC({typed:t}),i=DC({typed:t});return function(e){var a,o=e.elop,s=e.SD||e.DS;o?(a={"DenseMatrix, DenseMatrix":(e,t)=>r(...NC(e,t),o),"Array, Array":(e,t)=>r(...NC(n(e),n(t)),o).valueOf(),"Array, DenseMatrix":(e,t)=>r(...NC(n(e),t),o),"DenseMatrix, Array":(e,t)=>r(...NC(e,n(t)),o)},e.SS&&(a["SparseMatrix, SparseMatrix"]=(t,n)=>e.SS(...NC(t,n),o,!1)),e.DS&&(a["DenseMatrix, SparseMatrix"]=(t,n)=>e.DS(...NC(t,n),o,!1),a["Array, SparseMatrix"]=(t,r)=>e.DS(...NC(n(t),r),o,!1)),s&&(a["SparseMatrix, DenseMatrix"]=(e,t)=>s(...NC(t,e),o,!0),a["SparseMatrix, Array"]=(e,t)=>s(...NC(n(t),e),o,!0))):(a={"DenseMatrix, DenseMatrix":t.referToSelf((e=>(t,n)=>r(...NC(t,n),e))),"Array, Array":t.referToSelf((e=>(t,i)=>r(...NC(n(t),n(i)),e).valueOf())),"Array, DenseMatrix":t.referToSelf((e=>(t,i)=>r(...NC(n(t),i),e))),"DenseMatrix, Array":t.referToSelf((e=>(t,i)=>r(...NC(t,n(i)),e)))},e.SS&&(a["SparseMatrix, SparseMatrix"]=t.referToSelf((t=>(n,r)=>e.SS(...NC(n,r),t,!1)))),e.DS&&(a["DenseMatrix, SparseMatrix"]=t.referToSelf((t=>(n,r)=>e.DS(...NC(n,r),t,!1))),a["Array, SparseMatrix"]=t.referToSelf((t=>(r,i)=>e.DS(...NC(n(r),i),t,!1)))),s&&(a["SparseMatrix, DenseMatrix"]=t.referToSelf((e=>(t,n)=>s(...NC(n,t),e,!0))),a["SparseMatrix, Array"]=t.referToSelf((e=>(t,r)=>s(...NC(n(r),t),e,!0)))));var l=e.scalar||"any";(e.Ds||e.Ss)&&(o?(a["DenseMatrix,"+l]=(e,t)=>i(e,t,o,!1),a[l+", DenseMatrix"]=(e,t)=>i(t,e,o,!0),a["Array,"+l]=(e,t)=>i(n(e),t,o,!1).valueOf(),a[l+", Array"]=(e,t)=>i(n(t),e,o,!0).valueOf()):(a["DenseMatrix,"+l]=t.referToSelf((e=>(t,n)=>i(t,n,e,!1))),a[l+", DenseMatrix"]=t.referToSelf((e=>(t,n)=>i(n,t,e,!0))),a["Array,"+l]=t.referToSelf((e=>(t,r)=>i(n(t),r,e,!1).valueOf())),a[l+", Array"]=t.referToSelf((e=>(t,r)=>i(n(r),t,e,!0).valueOf()))));var u=void 0!==e.sS?e.sS:e.Ss;return o?(e.Ss&&(a["SparseMatrix,"+l]=(t,n)=>e.Ss(t,n,o,!1)),u&&(a[l+", SparseMatrix"]=(e,t)=>u(t,e,o,!0))):(e.Ss&&(a["SparseMatrix,"+l]=t.referToSelf((t=>(n,r)=>e.Ss(n,r,t,!1)))),u&&(a[l+", SparseMatrix"]=t.referToSelf((e=>(t,n)=>u(n,t,e,!0))))),o&&o.signatures&&G_(a,o.signatures),a}})),kC="number, number";function IC(e){return!e}function FC(e,t){return!(!e&&!t)}function PC(e,t){return!!e!==!!t}function OC(e,t){return!(!e||!t)}IC.signature="number",FC.signature=kC,PC.signature=kC,OC.signature=kC;var BC=$M("or",["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=EC({typed:t}),s=TC({typed:t,equalScalar:r}),l=AC({typed:t,DenseMatrix:i}),u=RC({typed:t,matrix:n,concat:a});return t("or",{"number, number":FC,"Complex, Complex":function(e,t){return 0!==e.re||0!==e.im||0!==t.re||0!==t.im},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!e.isNaN()||!t.isZero()&&!t.isNaN()},"bigint, bigint":FC,"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0)))},u({SS:s,DS:o,Ss:l}))})),LC=$M("or",["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=BC({typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(e,t,n){var r=e[0].compile().evaluate(n);if(!fM(r)&&o(r,!1))return!0;var i=e[1].compile().evaluate(n);return o(r,i)}return s.rawArgs=!0,s}),{isTransformFunction:!0}),zC=$M("matAlgo02xDS0",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,a){var o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=r._values,c=r._index,h=r._ptr,d=r._size,p=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(s.length!==d.length)throw new zE(s.length,d.length);if(s[0]!==d[0]||s[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+s+") must match Matrix B ("+d+")");if(!u)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var f,m=s[0],g=s[1],v=n,y=0,x=i;"string"===typeof l&&l===p&&"mixed"!==l&&(f=l,v=t.find(n,[f,f]),y=t.convert(0,f),x=t.find(i,[f,f]));for(var b=[],w=[],S=[],_=0;_<g;_++){S[_]=w.length;for(var M=h[_],E=h[_+1],A=M;A<E;A++){var T=c[A],C=a?x(u[A],o[T][_]):x(o[T][_],u[A]);v(C,y)||(w.push(T),b.push(C))}}return S[g]=w.length,r.createSparseMatrix({values:b,index:w,ptr:S,size:[m,g],datatype:l===e._datatype&&p===r._datatype?f:void 0})}})),UC=$M("matAlgo11xS0s",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i,a){var o=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=u[0],p=u[1],f=n,m=0,g=i;"string"===typeof c&&(h=c,f=t.find(n,[h,h]),m=t.convert(0,h),r=t.convert(r,h),g=t.find(i,[h,h]));for(var v=[],y=[],x=[],b=0;b<p;b++){x[b]=y.length;for(var w=l[b],S=l[b+1],_=w;_<S;_++){var M=s[_],E=a?g(r,o[_]):g(o[_],r);f(E,m)||(y.push(M),v.push(E))}}return x[p]=y.length,e.createSparseMatrix({values:v,index:y,ptr:x,size:[d,p],datatype:h})}})),HC=$M("matAlgo06xS0S0",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._size,s=e._datatype||void 0===e._data?e._datatype:e.getDataType(),l=r._values,u=r._size,c=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(o.length!==u.length)throw new zE(o.length,u.length);if(o[0]!==u[0]||o[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+u+")");var h,d=o[0],p=o[1],f=n,m=0,g=i;"string"===typeof s&&s===c&&"mixed"!==s&&(h=s,f=t.find(n,[h,h]),m=t.convert(0,h),g=t.find(i,[h,h]));for(var v=a&&l?[]:void 0,y=[],x=[],b=v?[]:void 0,w=[],S=[],_=0;_<p;_++){x[_]=y.length;var M=_+1;if(mT(e,_,w,b,S,M,y,g),mT(r,_,w,b,S,M,y,g),b)for(var E=x[_];E<y.length;){var A=y[E];if(S[A]===M){var T=b[A];f(T,m)?y.splice(E,1):(v.push(T),E++)}else y.splice(E,1)}else for(var C=x[_];C<y.length;){S[y[C]]!==M?y.splice(C,1):C++}}return x[p]=y.length,e.createSparseMatrix({values:v,index:y,ptr:x,size:[d,p],datatype:s===e._datatype&&c===r._datatype?h:void 0})}})),qC=$M("and",["typed","matrix","equalScalar","zeros","not","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=e,s=zC({typed:t,equalScalar:r}),l=HC({typed:t,equalScalar:r}),u=UC({typed:t,equalScalar:r}),c=DC({typed:t}),h=RC({typed:t,matrix:n,concat:o});return t("and",{"number, number":OC,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)&&(0!==t.re||0!==t.im)},"BigNumber, BigNumber":function(e,t){return!e.isZero()&&!t.isZero()&&!e.isNaN()&&!t.isNaN()},"bigint, bigint":OC,"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0))),"SparseMatrix, any":t.referToSelf((e=>(t,n)=>a(n)?i(t.size(),t.storage()):u(t,n,e,!1))),"DenseMatrix, any":t.referToSelf((e=>(t,n)=>a(n)?i(t.size(),t.storage()):c(t,n,e,!1))),"any, SparseMatrix":t.referToSelf((e=>(t,n)=>a(t)?i(t.size(),t.storage()):u(n,t,e,!0))),"any, DenseMatrix":t.referToSelf((e=>(t,n)=>a(t)?i(t.size(),t.storage()):c(n,t,e,!0))),"Array, any":t.referToSelf((e=>(t,r)=>e(n(t),r).valueOf())),"any, Array":t.referToSelf((e=>(t,r)=>e(t,n(r)).valueOf()))},h({SS:l,DS:s}))})),VC=$M("and",["typed","matrix","zeros","add","equalScalar","not","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=e,s=qC({typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function l(e,t,n){var r=e[0].compile().evaluate(n);if(!fM(r)&&!s(r,!0))return!1;var i=e[1].compile().evaluate(n);return s(r,i)}return l.rawArgs=!0,l}),{isTransformFunction:!0}),jC="concat",GC=$M(jC,["typed","matrix","isInteger"],(e=>{var{typed:t,matrix:n,isInteger:r}=e;return t(jC,{"...Array | Matrix | number | BigNumber":function(e){var t,i,a=e.length,o=-1,s=!1,l=[];for(t=0;t<a;t++){var u=e[t];if(pM(u)&&(s=!0),aM(u)||oM(u)){if(t!==a-1)throw new Error("Dimension must be specified as last argument");if(i=o,o=u.valueOf(),!r(o))throw new TypeError("Integer number expected for dimension");if(o<0||t>0&&o>i)throw new UE(o,i+1)}else{var c=j_(u).valueOf(),h=HE(c);if(l[t]=c,i=o,o=h.length-1,t>0&&o!==i)throw new zE(i+1,o+1)}}if(0===l.length)throw new SyntaxError("At least one matrix expected");for(var d=l.shift();l.length;)d=hA(d,l.shift(),o);return s?n(d):d},"...string":function(e){return e.join("")}})})),WC=$M("concat",["typed","matrix","isInteger"],(e=>{var{typed:t,matrix:n,isInteger:r}=e,i=GC({typed:t,matrix:n,isInteger:r});return t("concat",{"...any":function(e){var t=e.length-1,n=e[t];aM(n)?e[t]=n-1:oM(n)&&(e[t]=n.minus(1));try{return i.apply(null,e)}catch(r){throw eT(r)}}})}),{isTransformFunction:!0});function XC(e,t,n){var r;return String(e).includes("Unexpected type")?(r=arguments.length>2?" (type: "+XM(n)+", value: "+JSON.stringify(n)+")":" (type: "+e.data.actual+")",new TypeError("Cannot calculate "+t+", unexpected type of argument"+r)):String(e).includes("complex numbers")?(r=arguments.length>2?" (type: "+XM(n)+", value: "+JSON.stringify(n)+")":"",new TypeError("Cannot calculate "+t+", no ordering relation is defined for complex numbers"+r)):e}var YC=$M("max",["typed","config","numeric","larger"],(e=>{var{typed:t,config:n,numeric:r,larger:i}=e;return t("max",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){return pT(e,t.valueOf(),a)},"...":function(e){if(cT(e))throw new TypeError("Scalar values expected in function max");return o(e)}});function a(e,t){try{return i(e,t)?e:t}catch(n){throw XC(n,"max",t)}}function o(e){var t;if(hT(e,(function(e){try{isNaN(e)&&"number"===typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e)}catch(n){throw XC(n,"max",e)}})),void 0===t)throw new Error("Cannot calculate max of an empty array");return"string"===typeof t&&(t=r(t,nE(t,n))),t}}));function $C(e){if(2===e.length&&fM(e[0])){var t=(e=e.slice())[1];(aM(n=t)||oM(n))&&(e[1]=function(e){return aM(e)?e-1:oM(e)?e.minus(1):e}(t))}var n;return e}var ZC=$M("max",["typed","config","numeric","larger"],(e=>{var{typed:t,config:n,numeric:r,larger:i}=e,a=YC({typed:t,config:n,numeric:r,larger:i});return t("max",{"...any":function(e){e=$C(e);try{return a.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),JC=/\$([\w.]+)/g,KC="print",QC=$M(KC,["typed"],(e=>{var{typed:t}=e;return t(KC,{"string, Object | Array":eD,"string, Object | Array, number | Object":eD})}));function eD(e,t,n){return e.replace(JC,(function(e,r){var i=r.split("."),a=t[i.shift()];for(void 0!==a&&a.isMatrix&&(a=a.toArray());i.length&&void 0!==a;){var o=i.shift();a=o?a[o]:a+"."}return void 0!==a?hM(a)?a:RE(a,n):e}))}var tD="print",nD=$M(tD,["typed","matrix","zeros","add"],(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e,a=QC({typed:t,matrix:n,zeros:r,add:i});return t(tD,{"string, Object | Array":function(e,t){return a(o(e),t)},"string, Object | Array, number | Object":function(e,t,n){return a(o(e),t,n)}});function o(e){return e.replace(JC,(e=>"$"+e.slice(1).split(".").map((function(e){return!isNaN(e)&&e.length>0?parseInt(e)-1:e})).join(".")))}}),{isTransformFunction:!0});function rD(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitAnd");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero()||t.eq(-1)||e.eq(t))return e;if(t.isZero()||e.eq(-1))return t;if(!e.isFinite()||!t.isFinite()){if(!e.isFinite()&&!t.isFinite())return e.isNegative()===t.isNegative()?e:new n(0);if(!e.isFinite())return t.isNegative()?e:e.isNegative()?new n(0):t;if(!t.isFinite())return e.isNegative()?t:t.isNegative()?new n(0):e}return oD(e,t,(function(e,t){return e&t}))}function iD(e){if(e.isFinite()&&!e.isInteger())throw new Error("Integer expected in function bitNot");var t=e.constructor,n=t.precision;t.config({precision:1e9});var r=e.plus(new t(1));return r.s=-r.s||null,t.config({precision:n}),r}function aD(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitOr");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);var r=new n(-1);return e.isZero()||t.eq(r)||e.eq(t)?t:t.isZero()||e.eq(r)?e:e.isFinite()&&t.isFinite()?oD(e,t,(function(e,t){return e|t})):!e.isFinite()&&!e.isNegative()&&t.isNegative()||e.isNegative()&&!t.isNegative()&&!t.isFinite()?r:e.isNegative()&&t.isNegative()?e.isFinite()?e:t:e.isFinite()?t:e}function oD(e,t,n){var r,i,a,o,s,l=e.constructor,u=+(e.s<0),c=+(t.s<0);if(u){r=sD(iD(e));for(var h=0;h<r.length;++h)r[h]^=1}else r=sD(e);if(c){i=sD(iD(t));for(var d=0;d<i.length;++d)i[d]^=1}else i=sD(t);r.length<=i.length?(a=r,o=i,s=u):(a=i,o=r,s=c);var p=a.length,f=o.length,m=1^n(u,c),g=new l(1^m),v=new l(1),y=new l(2),x=l.precision;for(l.config({precision:1e9});p>0;)n(a[--p],o[--f])===m&&(g=g.plus(v)),v=v.times(y);for(;f>0;)n(s,o[--f])===m&&(g=g.plus(v)),v=v.times(y);return l.config({precision:x}),0===m&&(g.s=-g.s),g}function sD(e){for(var t=e.d,n=t[0]+"",r=1;r<t.length;++r){for(var i=t[r]+"",a=7-i.length;a--;)i="0"+i;n+=i}for(var o=n.length;"0"===n.charAt(o);)o--;var s=e.e,l=n.slice(0,o+1||1),u=l.length;if(s>0)if(++s>u)for(s-=u;s--;)l+="0";else s<u&&(l=l.slice(0,s)+"."+l.slice(s));for(var c=[0],h=0;h<l.length;){for(var d=c.length;d--;)c[d]*=10;c[0]+=parseInt(l.charAt(h++));for(var p=0;p<c.length;++p)c[p]>1&&(null!==c[p+1]&&void 0!==c[p+1]||(c[p+1]=0),c[p+1]+=c[p]>>1,c[p]&=1)}return c.reverse()}function lD(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function bitXor");var n=e.constructor;if(e.isNaN()||t.isNaN())return new n(NaN);if(e.isZero())return t;if(t.isZero())return e;if(e.eq(t))return new n(0);var r=new n(-1);return e.eq(r)?iD(t):t.eq(r)?iD(e):e.isFinite()&&t.isFinite()?oD(e,t,(function(e,t){return e^t})):e.isFinite()||t.isFinite()?new n(e.isNegative()===t.isNegative()?1/0:-1/0):r}function uD(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function leftShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:e.isFinite()||t.isFinite()?t.lt(55)?e.times(Math.pow(2,t.toNumber())+""):e.times(new n(2).pow(t)):new n(NaN)}function cD(e,t){if(e.isFinite()&&!e.isInteger()||t.isFinite()&&!t.isInteger())throw new Error("Integers expected in function rightArithShift");var n=e.constructor;return e.isNaN()||t.isNaN()||t.isNegative()&&!t.isZero()?new n(NaN):e.isZero()||t.isZero()?e:t.isFinite()?t.lt(55)?e.div(Math.pow(2,t.toNumber())+"").floor():e.div(new n(2).pow(t)).floor():e.isNegative()?new n(-1):e.isFinite()?new n(0):new n(NaN)}var hD="number, number";function dD(e,t){if(!tE(e)||!tE(t))throw new Error("Integers expected in function bitAnd");return e&t}function pD(e){if(!tE(e))throw new Error("Integer expected in function bitNot");return~e}function fD(e,t){if(!tE(e)||!tE(t))throw new Error("Integers expected in function bitOr");return e|t}function mD(e,t){if(!tE(e)||!tE(t))throw new Error("Integers expected in function bitXor");return e^t}function gD(e,t){if(!tE(e)||!tE(t))throw new Error("Integers expected in function leftShift");return e<<t}function vD(e,t){if(!tE(e)||!tE(t))throw new Error("Integers expected in function rightArithShift");return e>>t}function yD(e,t){if(!tE(e)||!tE(t))throw new Error("Integers expected in function rightLogShift");return e>>>t}dD.signature=hD,pD.signature="number",fD.signature=hD,mD.signature=hD,gD.signature=hD,vD.signature=hD,yD.signature=hD;var xD="bitAnd",bD=$M(xD,["typed","matrix","equalScalar","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,concat:i}=e,a=zC({typed:t,equalScalar:r}),o=HC({typed:t,equalScalar:r}),s=UC({typed:t,equalScalar:r}),l=RC({typed:t,matrix:n,concat:i});return t(xD,{"number, number":dD,"BigNumber, BigNumber":rD,"bigint, bigint":(e,t)=>e&t},l({SS:o,DS:a,Ss:s}))})),wD=$M("bitAnd",["typed","matrix","zeros","add","equalScalar","not","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o}=e,s=bD({typed:t,matrix:n,equalScalar:r,zeros:i,not:a,concat:o});function l(e,t,n){var r=e[0].compile().evaluate(n);if(!fM(r)){if(isNaN(r))return NaN;if(0===r||!1===r)return 0}var i=e[1].compile().evaluate(n);return s(r,i)}return l.rawArgs=!0,l}),{isTransformFunction:!0}),SD="diff",_D=$M(SD,["typed","matrix","subtract","number"],(e=>{var{typed:t,matrix:n,subtract:r,number:i}=e;return t(SD,{"Array | Matrix":function(e){return pM(e)?n(o(e.toArray())):o(e)},"Array | Matrix, number":function(e,t){if(!tE(t))throw new RangeError("Dimension must be a whole number");return pM(e)?n(a(e.toArray(),t)):a(e,t)},"Array, BigNumber":t.referTo("Array,number",(e=>(t,n)=>e(t,i(n)))),"Matrix, BigNumber":t.referTo("Matrix,number",(e=>(t,n)=>e(t,i(n))))});function a(e,t){if(pM(e)&&(e=e.toArray()),!Array.isArray(e))throw RangeError("Array/Matrix does not have that many dimensions");if(t>0){var n=[];return e.forEach((e=>{n.push(a(e,t-1))})),n}if(0===t)return o(e);throw RangeError("Cannot have negative dimension")}function o(e){for(var t=[],n=e.length,r=1;r<n;r++)t.push(s(e[r-1],e[r]));return t}function s(e,t){pM(e)&&(e=e.toArray()),pM(t)&&(t=t.toArray());var n=Array.isArray(e),i=Array.isArray(t);if(n&&i)return function(e,t){if(e.length!==t.length)throw RangeError("Not all sub-arrays have the same length");for(var n=[],r=e.length,i=0;i<r;i++)n.push(s(e[i],t[i]));return n}(e,t);if(!n&&!i)return r(t,e);throw TypeError("Cannot calculate difference between 1 array and 1 non-array")}})),MD="diff",ED=$M(MD,["typed","matrix","subtract","number","bignumber"],(e=>{var{typed:t,matrix:n,subtract:r,number:i,bignumber:a}=e,o=_D({typed:t,matrix:n,subtract:r,number:i,bignumber:a});return t(MD,{"...any":function(e){e=$C(e);try{return o.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),AD=$M("min",["typed","config","numeric","smaller"],(e=>{var{typed:t,config:n,numeric:r,smaller:i}=e;return t("min",{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){return pT(e,t.valueOf(),a)},"...":function(e){if(cT(e))throw new TypeError("Scalar values expected in function min");return o(e)}});function a(e,t){try{return i(e,t)?e:t}catch(n){throw XC(n,"min",t)}}function o(e){var t;if(hT(e,(function(e){try{isNaN(e)&&"number"===typeof e?t=NaN:(void 0===t||i(e,t))&&(t=e)}catch(n){throw XC(n,"min",e)}})),void 0===t)throw new Error("Cannot calculate min of an empty array");return"string"===typeof t&&(t=r(t,nE(t,n))),t}})),TD=$M("min",["typed","config","numeric","smaller"],(e=>{var{typed:t,config:n,numeric:r,smaller:i}=e,a=AD({typed:t,config:n,numeric:r,smaller:i});return t("min",{"...any":function(e){e=$C(e);try{return a.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),CD="subset",DD=$M(CD,["typed","matrix","zeros","add"],(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e;return t(CD,{"Matrix, Index":function(e,t){return WE(t)?n():(jE(e,t),e.subset(t))},"Array, Index":t.referTo("Matrix, Index",(function(e){return function(t,r){var i=e(n(t),r);return r.isScalar()?i:i.valueOf()}})),"Object, Index":kD,"string, Index":ND,"Matrix, Index, any, any":function(e,t,n,a){return WE(t)?e:(jE(e,t),e.clone().subset(t,function(e,t){if("string"===typeof e)throw new Error("can't boradcast a string");if(t._isScalar)return e;var n=t.size();if(!n.every((e=>e>0)))return e;try{return i(e,r(n))}catch(Fw){return e}}(n,t),a))},"Array, Index, any, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,r,i,a){var o=e(n(t),r,i,a);return o.isMatrix?o.valueOf():o}})),"Array, Index, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,r,i){return e(n(t),r,i,void 0).valueOf()}})),"Matrix, Index, any":t.referTo("Matrix, Index, any, any",(function(e){return function(t,n,r){return e(t,n,r,void 0)}})),"string, Index, string":RD,"string, Index, string, string":RD,"Object, Index, any":ID})}));function ND(e,t){if(!yM(t))throw new TypeError("Index expected");if(WE(t))return"";if(jE(Array.from(e),t),1!==t.size().length)throw new zE(t.size().length,1);var n=e.length;GE(t.min()[0],n),GE(t.max()[0],n);var r=t.dimension(0),i="";return r.forEach((function(t){i+=e.charAt(t)})),i}function RD(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Index expected");if(WE(t))return e;if(jE(Array.from(e),t),1!==t.size().length)throw new zE(t.size().length,1);if(void 0!==r){if("string"!==typeof r||1!==r.length)throw new TypeError("Single character expected as defaultValue")}else r=" ";var i=t.dimension(0);if(i.size()[0]!==n.length)throw new zE(i.size()[0],n.length);var a=e.length;GE(t.min()[0]),GE(t.max()[0]);for(var o=[],s=0;s<a;s++)o[s]=e.charAt(s);if(i.forEach((function(e,t){o[e]=n.charAt(t[0])})),o.length>a)for(var l=a-1,u=o.length;l<u;l++)o[l]||(o[l]=r);return o.join("")}function kD(e,t){if(!WE(t)){if(1!==t.size().length)throw new zE(t.size(),1);var n=t.dimension(0);if("string"!==typeof n)throw new TypeError("String expected as index to retrieve an object property");return Y_(e,n)}}function ID(e,t,n){if(WE(t))return e;if(1!==t.size().length)throw new zE(t.size(),1);var r=t.dimension(0);if("string"!==typeof r)throw new TypeError("String expected as index to retrieve an object property");var i=j_(e);return $_(i,r,n),i}var FD,PD,OD=$M("subset",["typed","matrix","zeros","add"],(e=>{var{typed:t,matrix:n,zeros:r,add:i}=e,a=DD({typed:t,matrix:n,zeros:r,add:i});return t("subset",{"...any":function(e){try{return a.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),BD=$M("matAlgo10xSids",["typed","DenseMatrix"],(e=>{var{typed:t,DenseMatrix:n}=e;return function(e,r,i,a){var o=e._values,s=e._index,l=e._ptr,u=e._size,c=e._datatype;if(!o)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var h,d=u[0],p=u[1],f=i;"string"===typeof c&&(h=c,r=t.convert(r,h),f=t.find(i,[h,h]));for(var m=[],g=[],v=[],y=0;y<p;y++){for(var x=y+1,b=l[y],w=l[y+1],S=b;S<w;S++){var _=s[S];g[_]=o[S],v[_]=x}for(var M=0;M<d;M++)0===y&&(m[M]=[]),v[M]===x?m[M][y]=a?f(r,g[M]):f(g[M],r):m[M][y]=r}return new n({data:m,size:[d,p],datatype:h})}})),LD=$M("matAlgo04xSidSid",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==p.length)throw new zE(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");var m,g=l[0],v=l[1],y=n,x=0,b=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,S,_,M,E,A=a&&c?[]:void 0,T=[],C=[],D=a&&c?[]:void 0,N=a&&c?[]:void 0,R=[],k=[];for(S=0;S<v;S++){C[S]=T.length;var I=S+1;for(M=s[S],E=s[S+1],_=M;_<E;_++)w=o[_],T.push(w),R[w]=I,D&&(D[w]=a[_]);for(M=d[S],E=d[S+1],_=M;_<E;_++)if(R[w=h[_]]===I){if(D){var F=b(D[w],c[_]);y(F,x)?R[w]=null:D[w]=F}}else T.push(w),k[w]=I,N&&(N[w]=c[_]);if(D&&N)for(_=C[S];_<T.length;)R[w=T[_]]===I?(A[_]=D[w],_++):k[w]===I?(A[_]=N[w],_++):T.splice(_,1)}return C[v]=T.length,e.createSparseMatrix({values:A,index:T,ptr:C,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),zD=$M("matAlgo01xDSid",["typed"],(e=>{var{typed:t}=e;return function(e,n,r,i){var a=e._data,o=e._size,s=e._datatype||e.getDataType(),l=n._values,u=n._index,c=n._ptr,h=n._size,d=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(o.length!==h.length)throw new zE(o.length,h.length);if(o[0]!==h[0]||o[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+h+")");if(!l)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var p,f,m=o[0],g=o[1],v="string"===typeof s&&"mixed"!==s&&s===d?s:void 0,y=v?t.find(r,[v,v]):r,x=[];for(p=0;p<m;p++)x[p]=[];var b=[],w=[];for(f=0;f<g;f++){for(var S=f+1,_=c[f],M=c[f+1],E=_;E<M;E++)b[p=u[E]]=i?y(l[E],a[p][f]):y(a[p][f],l[E]),w[p]=S;for(p=0;p<m;p++)w[p]===S?x[p][f]=b[p]:x[p][f]=a[p][f]}return e.createDenseMatrix({data:x,size:[m,g],datatype:s===e._datatype&&d===n._datatype?v:void 0})}})),UD="bitOr",HD=$M(UD,["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=zD({typed:t}),s=LD({typed:t,equalScalar:r}),l=BD({typed:t,DenseMatrix:i}),u=RC({typed:t,matrix:n,concat:a});return t(UD,{"number, number":fD,"BigNumber, BigNumber":aD,"bigint, bigint":(e,t)=>e|t},u({SS:s,DS:o,Ss:l}))})),qD=$M("bitOr",["typed","matrix","equalScalar","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a}=e,o=HD({typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a});function s(e,t,n){var r=e[0].compile().evaluate(n);if(!fM(r)){if(isNaN(r))return NaN;if(-1===r)return-1;if(!0===r)return 1}var i=e[1].compile().evaluate(n);return o(r,i)}return s.rawArgs=!0,s}),{isTransformFunction:!0}),VD="cumsum",jD=$M(VD,["typed","add","unaryPlus"],(e=>{var{typed:t,add:n,unaryPlus:r}=e;return t(VD,{Array:i,Matrix:function(e){return e.create(i(e.valueOf(),e.datatype()))},"Array, number | BigNumber":o,"Matrix, number | BigNumber":function(e,t){return e.create(o(e.valueOf(),t),e.datatype())},"...":function(e){if(cT(e))throw new TypeError("All values expected to be scalar in function cumsum");return i(e)}});function i(e){try{return a(e)}catch(t){throw XC(t,VD)}}function a(e){if(0===e.length)return[];for(var t=[r(e[0])],i=1;i<e.length;++i)t.push(n(t[i-1],e[i]));return t}function o(e,t){var n=HE(e);if(t<0||t>=n.length)throw new UE(t,n.length);try{return s(e,t)}catch(r){throw XC(r,VD)}}function s(e,t){var n,r,i;if(t<=0){var o=e[0][0];if(Array.isArray(o)){for(i=uT(e),r=[],n=0;n<i.length;n++)r[n]=s(i[n],t-1);return r}return a(e)}for(r=[],n=0;n<e.length;n++)r[n]=s(e[n],t-1);return r}})),GD="cumsum",WD=$M(GD,["typed","add","unaryPlus"],(e=>{var{typed:t,add:n,unaryPlus:r}=e,i=jD({typed:t,add:n,unaryPlus:r});return t(GD,{"...any":function(e){if(2===e.length&&fM(e[0])){var t=e[1];aM(t)?e[1]=t-1:oM(t)&&(e[1]=t.minus(1))}try{return i.apply(null,e)}catch(n){throw eT(n)}}})}),{isTransformFunction:!0}),XD=$M("index",["Index","getMatrixDataType"],(e=>{var{Index:t,getMatrixDataType:n}=e;return function(){for(var e=[],r=0,i=arguments.length;r<i;r++){var a=arguments[r];if(vM(a))a.start--,a.end-=a.step>0?0:2;else if(a&&!0===a.isSet)a=a.map((function(e){return e-1}));else if(dM(a)||pM(a))"boolean"!==n(a)&&(a=a.map((function(e){return e-1})));else if(aM(a))a--;else if(oM(a))a=a.toNumber()-1;else if("string"!==typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");e[r]=a}var o=new t;return t.apply(o,e),o}}),{isTransformFunction:!0}),YD=$M("sum",["typed","config","add","numeric"],(e=>{var{typed:t,config:n,add:r,numeric:i}=e;return t("sum",{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){try{return pT(e,t,r)}catch(n){throw XC(n,"sum")}},"...":function(e){if(cT(e))throw new TypeError("Scalar values expected in function sum");return a(e)}});function a(e){var t;return hT(e,(function(e){try{t=void 0===t?e:r(t,e)}catch(n){throw XC(n,"sum",e)}})),void 0===t&&(t=i(0,n.number)),"string"===typeof t&&(t=i(t,nE(t,n))),t}})),$D=$M("sum",["typed","config","add","numeric"],(e=>{var{typed:t,config:n,add:r,numeric:i}=e,a=YD({typed:t,config:n,add:r,numeric:i});return t("sum",{"...any":function(e){e=$C(e);try{return a.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),ZD="range",JD=$M(ZD,["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],(e=>{var{typed:t,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=e;return t(ZD,{string:d,"string, boolean":d,"number, number":function(e,t){return h(p(e,t,1,!1))},"number, number, number":function(e,t,n){return h(p(e,t,n,!1))},"number, number, boolean":function(e,t,n){return h(p(e,t,1,n))},"number, number, number, boolean":function(e,t,n,r){return h(p(e,t,n,r))},"BigNumber, BigNumber":function(e,t){return h(p(e,t,new(0,e.constructor)(1),!1))},"BigNumber, BigNumber, BigNumber":function(e,t,n){return h(p(e,t,n,!1))},"BigNumber, BigNumber, boolean":function(e,t,n){return h(p(e,t,new(0,e.constructor)(1),n))},"BigNumber, BigNumber, BigNumber, boolean":function(e,t,n,r){return h(p(e,t,n,r))},"Unit, Unit, Unit":function(e,t,n){return h(p(e,t,n,!1))},"Unit, Unit, Unit, boolean":function(e,t,n,r){return h(p(e,t,n,r))}});function h(e){return"Matrix"===n.matrix?r?r(e):MT():e}function d(e,t){var r=function(e){var t=e.split(":"),n=t.map((function(e){return Number(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return{start:n[0],end:n[1],step:1};case 3:return{start:n[0],end:n[2],step:n[1]};default:return null}}(e);if(!r)throw new SyntaxError('String "'+e+'" is no valid range');return"BigNumber"===n.number?(void 0===i&&ST(),h(p(i(r.start),i(r.end),i(r.step)))):h(p(r.start,r.end,r.step,t))}function p(e,t,n,r){for(var i=[],h=c(n)?r?o:a:r?l:s,d=e;h(d,t);)i.push(d),d=u(d,n);return i}})),KD=$M("range",["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],(e=>{var{typed:t,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c}=e,h=JD({typed:t,config:n,matrix:r,bignumber:i,smaller:a,smallerEq:o,larger:s,largerEq:l,add:u,isPositive:c});return t("range",{"...any":function(e){return"boolean"!==typeof e[e.length-1]&&e.push(!0),h.apply(null,e)}})}),{isTransformFunction:!0}),QD=$M("row",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e;return t("row",{"Matrix, number":a,"Array, number":function(e,t){return a(r(j_(e)),t).valueOf()}});function a(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");GE(t,e.size()[0]);var a=i(0,e.size()[1]),o=new n(t,a),s=e.subset(o);return pM(s)?s:r([[s]])}})),eN=$M("row",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e,a=QD({typed:t,Index:n,matrix:r,range:i});return t("row",{"...any":function(e){var t=e.length-1,n=e[t];aM(n)&&(e[t]=n-1);try{return a.apply(null,e)}catch(r){throw eT(r)}}})}),{isTransformFunction:!0}),tN="column",nN=$M(tN,["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e;return t(tN,{"Matrix, number":a,"Array, number":function(e,t){return a(r(j_(e)),t).valueOf()}});function a(e,t){if(2!==e.size().length)throw new Error("Only two dimensional matrix is supported");GE(t,e.size()[1]);var a=i(0,e.size()[0]),o=new n(a,t),s=e.subset(o);return pM(s)?s:r([[s]])}})),rN=$M("column",["typed","Index","matrix","range"],(e=>{var{typed:t,Index:n,matrix:r,range:i}=e,a=nN({typed:t,Index:n,matrix:r,range:i});return t("column",{"...any":function(e){var t=e.length-1,n=e[t];aM(n)&&(e[t]=n-1);try{return a.apply(null,e)}catch(r){throw eT(r)}}})}),{isTransformFunction:!0}),iN="mean",aN=$M(iN,["typed","add","divide"],(e=>{var{typed:t,add:n,divide:r}=e;return t(iN,{"Array | Matrix":i,"Array | Matrix, number | BigNumber":function(e,t){try{var i=pT(e,t,n),a=Array.isArray(e)?HE(e):e.size();return r(i,a[t])}catch(o){throw XC(o,"mean")}},"...":function(e){if(cT(e))throw new TypeError("Scalar values expected in function mean");return i(e)}});function i(e){var t,i=0;if(hT(e,(function(e){try{t=void 0===t?e:n(t,e),i++}catch(r){throw XC(r,"mean",e)}})),0===i)throw new Error("Cannot calculate the mean of an empty array");return r(t,i)}})),oN=$M("mean",["typed","add","divide"],(e=>{var{typed:t,add:n,divide:r}=e,i=aN({typed:t,add:n,divide:r});return t("mean",{"...any":function(e){e=$C(e);try{return i.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),sN="quantileSeq",lN=$M(sN,["typed","?bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],(e=>{var{typed:t,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d}=e,p=SC({typed:t,isInteger:u});return t(sN,{"Array | Matrix, number | BigNumber":(e,t)=>m(e,t,!1),"Array | Matrix, number | BigNumber, number":(e,t,n)=>f(e,t,!1,n,m),"Array | Matrix, number | BigNumber, boolean":m,"Array | Matrix, number | BigNumber, boolean, number":(e,t,n,r)=>f(e,t,n,r,m),"Array | Matrix, Array | Matrix":(e,t)=>g(e,t,!1),"Array | Matrix, Array | Matrix, number":(e,t,n)=>f(e,t,!1,n,g),"Array | Matrix, Array | Matrix, boolean":g,"Array | Matrix, Array | Matrix, boolean, number":(e,t,n,r)=>f(e,t,n,r,g)});function f(e,t,n,r,i){return p(e,r,(e=>i(e,t,n)))}function m(e,t,i){var o,s=e.valueOf();if(c(t,0))throw new Error("N/prob must be non-negative");if(h(t,1))return aM(t)?v(s,t,i):n(v(s,t,i));if(d(t,1)){if(!u(t))throw new Error("N must be a positive integer");if(d(t,4294967295))throw new Error("N must be less than or equal to 2^32-1, as that is the maximum length of an Array");var l=r(t,1);o=[];for(var p=0;c(p,t);p++){var f=a(p+1,l);o.push(v(s,f,i))}return aM(t)?o:n(o)}}function g(e,t,n){for(var r=e.valueOf(),i=t.valueOf(),a=[],o=0;o<i.length;++o)a.push(v(r,i[o],n));return a}function v(e,t,n){var a=nA(e),c=a.length;if(0===c)throw new Error("Cannot calculate quantile of an empty sequence");var h,d,p=aM(t)?t*(c-1):t.times(c-1),f=aM(t)?Math.floor(p):p.floor().toNumber(),m=aM(t)?p%1:p.minus(f);if(u(p))return n?a[p]:s(a,aM(t)?p:p.valueOf());if(n)h=a[f],d=a[f+1];else{d=s(a,f+1),h=a[f];for(var g=0;g<f;++g)l(a[g],h)>0&&(h=a[g])}return r(o(h,i(1,m)),o(d,m))}})),uN=$M("quantileSeq",["typed","bignumber","add","subtract","divide","multiply","partitionSelect","compare","isInteger","smaller","smallerEq","larger"],(e=>{var{typed:t,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d}=e,p=lN({typed:t,bignumber:n,add:r,subtract:i,divide:a,multiply:o,partitionSelect:s,compare:l,isInteger:u,smaller:c,smallerEq:h,larger:d});return t("quantileSeq",{"Array | Matrix, number | BigNumber":p,"Array | Matrix, number | BigNumber, number":(e,t,n)=>p(e,t,f(n)),"Array | Matrix, number | BigNumber, boolean":p,"Array | Matrix, number | BigNumber, boolean, number":(e,t,n,r)=>p(e,t,n,f(r)),"Array | Matrix, Array | Matrix":p,"Array | Matrix, Array | Matrix, number":(e,t,n)=>p(e,t,f(n)),"Array | Matrix, Array | Matrix, boolean":p,"Array | Matrix, Array | Matrix, boolean, number":(e,t,n,r)=>p(e,t,n,f(r))});function f(e){return $C([[],e])[1]}}),{isTransformFunction:!0}),cN="unbiased",hN="variance",dN=$M(hN,["typed","add","subtract","multiply","divide","apply","isNaN"],(e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=e;return t(hN,{"Array | Matrix":function(e){return l(e,cN)},"Array | Matrix, string":l,"Array | Matrix, number | BigNumber":function(e,t){return u(e,t,cN)},"Array | Matrix, number | BigNumber, string":u,"...":function(e){return l(e,cN)}});function l(e,t){var o,l=0;if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");if(hT(e,(function(e){try{o=void 0===o?e:n(o,e),l++}catch(t){throw XC(t,"variance",e)}})),0===l)throw new Error("Cannot calculate variance of an empty array");var u=a(o,l);if(o=void 0,hT(e,(function(e){var t=r(e,u);o=void 0===o?i(t,t):n(o,i(t,t))})),s(o))return o;switch(t){case"uncorrected":return a(o,l);case"biased":return a(o,l+1);case"unbiased":var c=oM(o)?o.mul(0):0;return 1===l?c:a(o,l-1);default:throw new Error('Unknown normalization "'+t+'". Choose "unbiased" (default), "uncorrected", or "biased".')}}function u(e,t,n){try{if(0===e.length)throw new SyntaxError("Function variance requires one or more parameters (0 provided)");return o(e,t,(e=>l(e,n)))}catch(r){throw XC(r,"variance")}}})),pN="variance",fN=$M(pN,["typed","add","subtract","multiply","divide","apply","isNaN"],(e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s}=e,l=dN({typed:t,add:n,subtract:r,multiply:i,divide:a,apply:o,isNaN:s});return t(pN,{"...any":function(e){e=$C(e);try{return l.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),mN=$M("std",["typed","map","sqrt","variance"],(e=>{var{typed:t,map:n,sqrt:r,variance:i}=e;return t("std",{"Array | Matrix":a,"Array | Matrix, string":a,"Array | Matrix, number | BigNumber":a,"Array | Matrix, number | BigNumber, string":a,"...":function(e){return a(e)}});function a(e,t){if(0===e.length)throw new SyntaxError("Function std requires one or more parameters (0 provided)");try{var a=i.apply(null,arguments);return fM(a)?n(a,r):r(a)}catch(o){throw o instanceof TypeError&&o.message.includes(" variance")?new TypeError(o.message.replace(" variance"," std")):o}}})),gN=$M("std",["typed","map","sqrt","variance"],(e=>{var{typed:t,map:n,sqrt:r,variance:i}=e,a=mN({typed:t,map:n,sqrt:r,variance:i});return t("std",{"...any":function(e){e=$C(e);try{return a.apply(null,e)}catch(t){throw eT(t)}}})}),{isTransformFunction:!0}),vN=9e15,yN=1e9,xN="0123456789abcdef",bN="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",wN="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",SN={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-vN,maxE:vN,crypto:!1},_N=!0,MN="[DecimalError] ",EN=MN+"Invalid argument: ",AN=MN+"Precision limit exceeded",TN=MN+"crypto unavailable",CN="[object Decimal]",DN=Math.floor,NN=Math.pow,RN=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,kN=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,IN=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,FN=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,PN=1e7,ON=bN.length-1,BN=wN.length-1,LN={toStringTag:CN};function zN(e){var t,n,r,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(a+=ZN(n)),a+=r;(n=7-(r=(o=e[t])+"").length)&&(a+=ZN(n))}else if(0===o)return"0";for(;o%10===0;)o/=10;return a+o}function UN(e,t,n){if(e!==~~e||e<t||e>n)throw Error(EN+e)}function HN(e,t,n,r){var i,a,o,s;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=NN(10,7-t),s=e[i]%a|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),o=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):o=(n<4&&s+1==a||n>3&&s+1==a/2)&&(e[i+1]/a/100|0)==NN(10,t-2)-1||(s==a/2||0==s)&&0==(e[i+1]/a/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),o=(r||n<4)&&9999==s||!r&&n>3&&4999==s):o=((r||n<4)&&s+1==a||!r&&n>3&&s+1==a/2)&&(e[i+1]/a/1e3|0)==NN(10,t-3)-1,o}function qN(e,t,n){for(var r,i,a=[0],o=0,s=e.length;o<s;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=xN.indexOf(e.charAt(o++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}LN.absoluteValue=LN.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),jN(e)},LN.ceil=function(){return jN(new this.constructor(this),this.e+1,2)},LN.clampedTo=LN.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(EN+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},LN.comparedTo=LN.cmp=function(e){var t,n,r,i,a=this,o=a.d,s=(e=new a.constructor(e)).d,l=a.s,u=e.s;if(!o||!s)return l&&u?l!==u?l:o===s?0:!o^l<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?l:s[0]?-u:0;if(l!==u)return l;if(a.e!==e.e)return a.e>e.e^l<0?1:-1;for(t=0,n=(r=o.length)<(i=s.length)?r:i;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},LN.cosine=LN.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/oR(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=aR(e,1,t.times(i),new e(1));for(var a=n;a--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,sR(r,n)),r.precision=e,r.rounding=t,jN(2==PD||3==PD?n.neg():n,e,t,!0)):new r(1):new r(NaN)},LN.cubeRoot=LN.cbrt=function(){var e,t,n,r,i,a,o,s,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(_N=!1,(a=c.s*NN(c.s*c,1/3))&&Math.abs(a)!=1/0?r=new h(a.toString()):(n=zN(c.d),(a=((e=c.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=NN(n,1/3),e=DN((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(n=a==1/0?"5e"+e:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),o=(e=h.precision)+3;;)if(u=(l=(s=r).times(s).times(s)).plus(c),r=VN(u.plus(c).times(s),u.plus(l),o+2,1),zN(s.d).slice(0,o)===(n=zN(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(jN(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(jN(s,e+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,i=1}return _N=!0,jN(r,e,h.rounding,t)},LN.decimalPlaces=LN.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-DN(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},LN.dividedBy=LN.div=function(e){return VN(this,new this.constructor(e))},LN.dividedToIntegerBy=LN.divToInt=function(e){var t=this.constructor;return jN(VN(this,new t(e),0,1,1),t.precision,t.rounding)},LN.equals=LN.eq=function(e){return 0===this.cmp(e)},LN.floor=function(){return jN(new this.constructor(this),this.e+1,3)},LN.greaterThan=LN.gt=function(e){return this.cmp(e)>0},LN.greaterThanOrEqualTo=LN.gte=function(e){var t=this.cmp(e);return 1==t||0===t},LN.hyperbolicCosine=LN.cosh=function(){var e,t,n,r,i,a=this,o=a.constructor,s=new o(1);if(!a.isFinite())return new o(a.s?1/0:NaN);if(a.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(a.e,a.sd())+4,o.rounding=1,(i=a.d.length)<32?t=(1/oR(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=aR(o,1,a.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=a.times(a),a=s.minus(l.times(c.minus(l.times(c))));return jN(a,o.precision=n,o.rounding=r,!0)},LN.hyperbolicSine=LN.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=aR(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=aR(a,2,i=i.times(1/oR(5,e)),i,!0);for(var o,s=new a(5),l=new a(16),u=new a(20);e--;)o=i.times(i),i=i.times(s.plus(o.times(l.times(o).plus(u))))}return a.precision=t,a.rounding=n,jN(i,t,n,!0)},LN.hyperbolicTangent=LN.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,VN(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},LN.inverseCosine=LN.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?YN(n,i,a):new n(0):new n(NaN):t.isZero()?YN(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=YN(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},LN.inverseHyperbolicCosine=LN.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,_N=!1,n=n.times(n).minus(1).sqrt().plus(n),_N=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},LN.inverseHyperbolicSine=LN.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,_N=!1,n=n.times(n).plus(1).sqrt().plus(n),_N=!0,r.precision=e,r.rounding=t,n.ln())},LN.inverseHyperbolicTangent=LN.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?jN(new a(i),e,t,!0):(a.precision=n=r-i.e,i=VN(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},LN.inverseSine=LN.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=YN(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},LN.inverseTangent=LN.atan=function(){var e,t,n,r,i,a,o,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=BN)return(o=YN(c,h+4,d).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(h+4<=BN)return(o=YN(c,h+4,d).times(.5)).s=u.s,o}for(c.precision=s=h+10,c.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(_N=!1,t=Math.ceil(s/7),r=1,l=u.times(u),o=new c(u),i=u;-1!==e;)if(i=i.times(l),a=o.minus(i.div(r+=2)),i=i.times(l),void 0!==(o=a.plus(i.div(r+=2))).d[t])for(e=t;o.d[e]===a.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),_N=!0,jN(o,c.precision=h,c.rounding=d,!0)},LN.isFinite=function(){return!!this.d},LN.isInteger=LN.isInt=function(){return!!this.d&&DN(this.e/7)>this.d.length-2},LN.isNaN=function(){return!this.s},LN.isNegative=LN.isNeg=function(){return this.s<0},LN.isPositive=LN.isPos=function(){return this.s>0},LN.isZero=function(){return!!this.d&&0===this.d[0]},LN.lessThan=LN.lt=function(e){return this.cmp(e)<0},LN.lessThanOrEqualTo=LN.lte=function(e){return this.cmp(e)<1},LN.logarithm=LN.log=function(e){var t,n,r,i,a,o,s,l,u=this,c=u.constructor,h=c.precision,d=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10===0;)i/=10;a=1!==i}if(_N=!1,o=tR(u,s=h+5),r=t?XN(c,s+10):tR(e,s),HN((l=VN(o,r,s,1)).d,i=h,d))do{if(o=tR(u,s+=10),r=t?XN(c,s+10):tR(e,s),l=VN(o,r,s,1),!a){+zN(l.d).slice(i+1,i+15)+1==1e14&&(l=jN(l,h+1,0));break}}while(HN(l.d,i+=10,d));return _N=!0,jN(l,h,d)},LN.minus=LN.sub=function(e){var t,n,r,i,a,o,s,l,u,c,h,d,p=this,f=p.constructor;if(e=new f(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new f(e.d||p.s!==e.s?p:NaN):e=new f(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,d=e.d,s=f.precision,l=f.rounding,!u[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!u[0])return new f(3===l?-0:0);e=new f(p)}return _N?jN(e,s,l):e}if(n=DN(e.e/7),c=DN(p.e/7),u=u.slice(),a=c-n){for((h=a<0)?(t=u,a=-a,o=d.length):(t=d,n=c,o=u.length),a>(r=Math.max(Math.ceil(s/7),o)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((h=(r=u.length)<(o=d.length))&&(o=r),r=0;r<o;r++)if(u[r]!=d[r]){h=u[r]<d[r];break}a=0}for(h&&(t=u,u=d,d=t,e.s=-e.s),o=u.length,r=d.length-o;r>0;--r)u[o++]=0;for(r=d.length;r>a;){if(u[--r]<d[r]){for(i=r;i&&0===u[--i];)u[i]=PN-1;--u[i],u[r]+=PN}u[r]-=d[r]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=WN(u,n),_N?jN(e,s,l):e):new f(3===l?-0:0)},LN.modulo=LN.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?jN(new r(n),r.precision,r.rounding):(_N=!1,9==r.modulo?(t=VN(n,e.abs(),0,3,1)).s*=e.s:t=VN(n,e,0,r.modulo,1),t=t.times(e),_N=!0,n.minus(t))},LN.naturalExponential=LN.exp=function(){return eR(this)},LN.naturalLogarithm=LN.ln=function(){return tR(this)},LN.negated=LN.neg=function(){var e=new this.constructor(this);return e.s=-e.s,jN(e)},LN.plus=LN.add=function(e){var t,n,r,i,a,o,s,l,u,c,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new d(e.d||h.s===e.s?h:NaN)):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(u=h.d,c=e.d,s=d.precision,l=d.rounding,!u[0]||!c[0])return c[0]||(e=new d(h)),_N?jN(e,s,l):e;if(a=DN(h.e/7),r=DN(e.e/7),u=u.slice(),i=a-r){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=a,o=u.length),i>(o=(a=Math.ceil(s/7))>o?a+1:o+1)&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((o=u.length)-(i=c.length)<0&&(i=o,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/PN|0,u[i]%=PN;for(t&&(u.unshift(t),++r),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=WN(u,r),_N?jN(e,s,l):e},LN.precision=LN.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(EN+e);return n.d?(t=$N(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},LN.round=function(){var e=this,t=e.constructor;return jN(new t(e),e.e+1,t.rounding)},LN.sine=LN.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:aR(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/oR(5,n)),t=aR(e,2,t,t);for(var i,a=new e(5),o=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(o.times(i).minus(s))));return t}(r,sR(r,n)),r.precision=e,r.rounding=t,jN(PD>2?n.neg():n,e,t,!0)):new r(NaN)},LN.squareRoot=LN.sqrt=function(){var e,t,n,r,i,a,o=this,s=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!s||!s[0])return new c(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);for(_N=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=zN(s)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=DN((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(a=r).plus(VN(o,a,n+2,1)).times(.5),zN(a.d).slice(0,n)===(t=zN(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(jN(r,l+1,1),e=!r.times(r).eq(o));break}if(!i&&(jN(a,l+1,0),a.times(a).eq(o))){r=a;break}n+=4,i=1}return _N=!0,jN(r,l,c.rounding,e)},LN.tangent=LN.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=VN(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,jN(2==PD||4==PD?n.neg():n,e,t,!0)):new r(NaN)},LN.times=LN.mul=function(e){var t,n,r,i,a,o,s,l,u,c=this,h=c.constructor,d=c.d,p=(e=new h(e)).d;if(e.s*=c.s,!d||!d[0]||!p||!p[0])return new h(!e.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:d&&p?0*e.s:e.s/0);for(n=DN(c.e/7)+DN(e.e/7),(l=d.length)<(u=p.length)&&(a=d,d=p,p=a,o=l,l=u,u=o),a=[],r=o=l+u;r--;)a.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)s=a[i]+p[r]*d[i-r-1]+t,a[i--]=s%PN|0,t=s/PN|0;a[i]=(a[i]+t)%PN|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=WN(a,n),_N?jN(e,h.precision,h.rounding):e},LN.toBinary=function(e,t){return lR(this,2,e,t)},LN.toDecimalPlaces=LN.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(UN(e,0,yN),void 0===t?t=r.rounding:UN(t,0,8),jN(n,e+n.e+1,t))},LN.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=GN(r,!0):(UN(e,0,yN),void 0===t?t=i.rounding:UN(t,0,8),n=GN(r=jN(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},LN.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?n=GN(i):(UN(e,0,yN),void 0===t?t=a.rounding:UN(t,0,8),n=GN(r=jN(new a(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},LN.toFraction=function(e){var t,n,r,i,a,o,s,l,u,c,h,d,p=this,f=p.d,m=p.constructor;if(!f)return new m(p);if(u=n=new m(1),r=l=new m(0),o=(a=(t=new m(r)).e=$N(f)-p.e-1)%7,t.d[0]=NN(10,o<0?7+o:o),null==e)e=a>0?t:u;else{if(!(s=new m(e)).isInt()||s.lt(u))throw Error(EN+s);e=s.gt(t)?a>0?t:u:s}for(_N=!1,s=new m(zN(f)),c=m.precision,m.precision=a=7*f.length*2;h=VN(s,t,0,1,1),1!=(i=n.plus(h.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(h.times(i)),l=i,i=t,t=s.minus(h.times(i)),s=i;return i=VN(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=p.s,d=VN(u,r,a,1).minus(p).abs().cmp(VN(l,n,a,1).minus(p).abs())<1?[u,r]:[l,n],m.precision=c,_N=!0,d},LN.toHexadecimal=LN.toHex=function(e,t){return lR(this,16,e,t)},LN.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:UN(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(_N=!1,n=VN(n,e,0,t,1).times(e),_N=!0,jN(n)):(e.s=n.s,n=e),n},LN.toNumber=function(){return+this},LN.toOctal=function(e,t){return lR(this,8,e,t)},LN.toPower=LN.pow=function(e){var t,n,r,i,a,o,s=this,l=s.constructor,u=+(e=new l(e));if(!s.d||!e.d||!s.d[0]||!e.d[0])return new l(NN(+s,u));if((s=new l(s)).eq(1))return s;if(r=l.precision,a=l.rounding,e.eq(1))return jN(s,r,a);if((t=DN(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=JN(l,s,n,r),e.s<0?new l(1).div(i):jN(i,r,a);if((o=s.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(n=NN(+s,u))&&isFinite(n)?new l(n+"").e:DN(u*(Math.log("0."+zN(s.d))/Math.LN10+s.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(_N=!1,l.rounding=s.s=1,n=Math.min(12,(t+"").length),(i=eR(e.times(tR(s,r+n)),r)).d&&HN((i=jN(i,r+5,1)).d,r,a)&&(t=r+10,+zN((i=jN(eR(e.times(tR(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=jN(i,r+1,0))),i.s=o,_N=!0,l.rounding=a,jN(i,r,a))},LN.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=GN(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(UN(e,1,yN),void 0===t?t=i.rounding:UN(t,0,8),n=GN(r=jN(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},LN.toSignificantDigits=LN.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(UN(e,1,yN),void 0===t?t=n.rounding:UN(t,0,8)),jN(new n(this),e,t)},LN.toString=function(){var e=this,t=e.constructor,n=GN(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},LN.truncated=LN.trunc=function(){return jN(new this.constructor(this),this.e+1,1)},LN.valueOf=LN.toJSON=function(){var e=this,t=e.constructor,n=GN(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var VN=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+i,e[a]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o,s,l){var u,c,h,d,p,f,m,g,v,y,x,b,w,S,_,M,E,A,T,C,D=r.constructor,N=r.s==i.s?1:-1,R=r.d,k=i.d;if(!R||!R[0]||!k||!k[0])return new D(r.s&&i.s&&(R?!k||R[0]!=k[0]:k)?R&&0==R[0]||!k?0*N:N/0:NaN);for(l?(p=1,c=r.e-i.e):(l=PN,p=7,c=DN(r.e/p)-DN(i.e/p)),T=k.length,E=R.length,y=(v=new D(N)).d=[],h=0;k[h]==(R[h]||0);h++);if(k[h]>(R[h]||0)&&c--,null==a?(S=a=D.precision,o=D.rounding):S=s?a+(r.e-i.e)+1:a,S<0)y.push(1),f=!0;else{if(S=S/p+2|0,h=0,1==T){for(d=0,k=k[0],S++;(h<E||d)&&S--;h++)_=d*l+(R[h]||0),y[h]=_/k|0,d=_%k|0;f=d||h<E}else{for((d=l/(k[0]+1)|0)>1&&(k=e(k,d,l),R=e(R,d,l),T=k.length,E=R.length),M=T,b=(x=R.slice(0,T)).length;b<T;)x[b++]=0;(C=k.slice()).unshift(0),A=k[0],k[1]>=l/2&&++A;do{d=0,(u=t(k,x,T,b))<0?(w=x[0],T!=b&&(w=w*l+(x[1]||0)),(d=w/A|0)>1?(d>=l&&(d=l-1),1==(u=t(m=e(k,d,l),x,g=m.length,b=x.length))&&(d--,n(m,T<g?C:k,g,l))):(0==d&&(u=d=1),m=k.slice()),(g=m.length)<b&&m.unshift(0),n(x,m,b,l),-1==u&&(u=t(k,x,T,b=x.length))<1&&(d++,n(x,T<b?C:k,b,l)),b=x.length):0===u&&(d++,x=[0]),y[h++]=d,u&&x[0]?x[b++]=R[M]||0:(x=[R[M]],b=1)}while((M++<E||void 0!==x[0])&&S--);f=void 0!==x[0]}y[0]||y.shift()}if(1==p)v.e=c,FD=f;else{for(h=1,d=y[0];d>=10;d/=10)h++;v.e=h+c*p-1,jN(v,s?a+v.e+1:a,o,f)}return v}}();function jN(e,t,n,r){var i,a,o,s,l,u,c,h,d,p=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(i=1,s=h[0];s>=10;s/=10)i++;if((a=t-i)<0)a+=7,o=t,l=(c=h[d=0])/NN(10,i-o-1)%10|0;else if((d=Math.ceil((a+1)/7))>=(s=h.length)){if(!r)break e;for(;s++<=d;)h.push(0);c=l=0,i=1,o=(a%=7)-7+1}else{for(c=s=h[d],i=1;s>=10;s/=10)i++;l=(o=(a%=7)-7+i)<0?0:c/NN(10,i-o-1)%10|0}if(r=r||t<0||void 0!==h[d+1]||(o<0?c:c%NN(10,i-o-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(a>0?o>0?c/NN(10,i-o):0:h[d-1])%10&1||n==(e.s<0?8:7)),t<1||!h[0])return h.length=0,u?(t-=e.e+1,h[0]=NN(10,(7-t%7)%7),e.e=-t||0):h[0]=e.e=0,e;if(0==a?(h.length=d,s=1,d--):(h.length=d+1,s=NN(10,7-a),h[d]=o>0?(c/NN(10,i-o)%NN(10,o)|0)*s:0),u)for(;;){if(0==d){for(a=1,o=h[0];o>=10;o/=10)a++;for(o=h[0]+=s,s=1;o>=10;o/=10)s++;a!=s&&(e.e++,h[0]==PN&&(h[0]=1));break}if(h[d]+=s,h[d]!=PN)break;h[d--]=0,s=1}for(a=h.length;0===h[--a];)h.pop()}return _N&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function GN(e,t,n){if(!e.isFinite())return nR(e);var r,i=e.e,a=zN(e.d),o=a.length;return t?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+ZN(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+ZN(-i-1)+a,n&&(r=n-o)>0&&(a+=ZN(r))):i>=o?(a+=ZN(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+ZN(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=ZN(r))),a}function WN(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function XN(e,t,n){if(t>ON)throw _N=!0,n&&(e.precision=n),Error(AN);return jN(new e(bN),t,1,!0)}function YN(e,t,n){if(t>BN)throw Error(AN);return jN(new e(wN),t,n,!0)}function $N(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function ZN(e){for(var t="";e--;)t+="0";return t}function JN(e,t,n,r){var i,a=new e(1),o=Math.ceil(r/7+4);for(_N=!1;;){if(n%2&&uR((a=a.times(t)).d,o)&&(i=!0),0===(n=DN(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}uR((t=t.times(t)).d,o)}return _N=!0,a}function KN(e){return 1&e.d[e.d.length-1]}function QN(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function eR(e,t){var n,r,i,a,o,s,l,u=0,c=0,h=0,d=e.constructor,p=d.rounding,f=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(_N=!1,l=f):l=t,s=new d(.03125);e.e>-2;)e=e.times(s),h+=5;for(l+=r=Math.log(NN(2,h))/Math.LN10*2+5|0,n=a=o=new d(1),d.precision=l;;){if(a=jN(a.times(e),l,1),n=n.times(++c),zN((s=o.plus(VN(a,n,l,1))).d).slice(0,l)===zN(o.d).slice(0,l)){for(i=h;i--;)o=jN(o.times(o),l,1);if(null!=t)return d.precision=f,o;if(!(u<3&&HN(o.d,l-r,p,u)))return jN(o,d.precision=f,p,_N=!0);d.precision=l+=10,n=a=s=new d(1),c=0,u++}o=s}}function tR(e,t){var n,r,i,a,o,s,l,u,c,h,d,p=1,f=e,m=f.d,g=f.constructor,v=g.rounding,y=g.precision;if(f.s<0||!m||!m[0]||!f.e&&1==m[0]&&1==m.length)return new g(m&&!m[0]?-1/0:1!=f.s?NaN:m?0:f);if(null==t?(_N=!1,c=y):c=t,g.precision=c+=10,r=(n=zN(m)).charAt(0),!(Math.abs(a=f.e)<15e14))return u=XN(g,c+2,y).times(a+""),f=tR(new g(r+"."+n.slice(1)),c-10).plus(u),g.precision=y,null==t?jN(f,y,v,_N=!0):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=zN((f=f.times(e)).d)).charAt(0),p++;for(a=f.e,r>1?(f=new g("0."+n),a++):f=new g(r+"."+n.slice(1)),h=f,l=o=f=VN(f.minus(1),f.plus(1),c,1),d=jN(f.times(f),c,1),i=3;;){if(o=jN(o.times(d),c,1),zN((u=l.plus(VN(o,new g(i),c,1))).d).slice(0,c)===zN(l.d).slice(0,c)){if(l=l.times(2),0!==a&&(l=l.plus(XN(g,c+2,y).times(a+""))),l=VN(l,new g(p),c,1),null!=t)return g.precision=y,l;if(!HN(l.d,c-10,v,s))return jN(l,g.precision=y,v,_N=!0);g.precision=c+=10,u=o=f=VN(h.minus(1),h.plus(1),c,1),d=jN(f.times(f),c,1),i=s=1}l=u,i+=2}}function nR(e){return String(e.s*e.s/0)}function rR(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),_N&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function iR(e,t){var n,r,i,a,o,s,l,u,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),FN.test(t))return rR(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(kN.test(t))n=16,t=t.toLowerCase();else if(RN.test(t))n=2;else{if(!IN.test(t))throw Error(EN+t);n=8}for((a=t.search(/p/i))>0?(l=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),o=(a=t.indexOf("."))>=0,r=e.constructor,o&&(a=(s=(t=t.replace(".","")).length)-a,i=JN(r,new r(n),a,2*a)),a=c=(u=qN(t,n,PN)).length-1;0===u[a];--a)u.pop();return a<0?new r(0*e.s):(e.e=WN(u,c),e.d=u,_N=!1,o&&(e=VN(e,i,4*s)),l&&(e=e.times(Math.abs(l)<54?NN(2,l):ZR.pow(2,l))),_N=!0,e)}function aR(e,t,n,r,i){var a,o,s,l,u=e.precision,c=Math.ceil(u/7);for(_N=!1,l=n.times(n),s=new e(r);;){if(o=VN(s.times(l),new e(t++*t++),u,1),s=i?r.plus(o):r.minus(o),r=VN(o.times(l),new e(t++*t++),u,1),void 0!==(o=s.plus(r)).d[c]){for(a=c;o.d[a]===s.d[a]&&a--;);if(-1==a)break}a=s,s=r,r=o,o=a}return _N=!0,o.d.length=c+1,o}function oR(e,t){for(var n=e;--t;)n*=e;return n}function sR(e,t){var n,r=t.s<0,i=YN(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return PD=r?4:1,t;if((n=t.divToInt(i)).isZero())PD=r?3:2;else{if((t=t.minus(n.times(i))).lte(a))return PD=KN(n)?r?2:3:r?4:1,t;PD=KN(n)?r?1:4:r?3:2}return t.minus(i).abs()}function lR(e,t,n,r){var i,a,o,s,l,u,c,h,d,p=e.constructor,f=void 0!==n;if(f?(UN(n,1,yN),void 0===r?r=p.rounding:UN(r,0,8)):(n=p.precision,r=p.rounding),e.isFinite()){for(f?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(c=GN(e)).indexOf("."))>=0&&(c=c.replace(".",""),(d=new p(1)).e=c.length-o,d.d=qN(GN(d),10,i),d.e=d.d.length),a=l=(h=qN(c,10,i)).length;0==h[--l];)h.pop();if(h[0]){if(o<0?a--:((e=new p(e)).d=h,e.e=a,h=(e=VN(e,d,n,r,0,i)).d,a=e.e,u=FD),o=h[n],s=i/2,u=u||void 0!==h[n+1],u=r<4?(void 0!==o||u)&&(0===r||r===(e.s<0?3:2)):o>s||o===s&&(4===r||u||6===r&&1&h[n-1]||r===(e.s<0?8:7)),h.length=n,u)for(;++h[--n]>i-1;)h[n]=0,n||(++a,h.unshift(1));for(l=h.length;!h[l-1];--l);for(o=0,c="";o<l;o++)c+=xN.charAt(h[o]);if(f){if(l>1)if(16==t||8==t){for(o=16==t?4:3,--l;l%o;l++)c+="0";for(l=(h=qN(c,i,t)).length;!h[l-1];--l);for(o=1,c="1.";o<l;o++)c+=xN.charAt(h[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)c="0"+c;c="0."+c}else if(++a>l)for(a-=l;a--;)c+="0";else a<l&&(c=c.slice(0,a)+"."+c.slice(a))}else c=f?"0p+0":"0";c=(16==t?"0x":2==t?"0b":8==t?"0o":"")+c}else c=nR(e);return e.s<0?"-"+c:c}function uR(e,t){if(e.length>t)return e.length=t,!0}function cR(e){return new this(e).abs()}function hR(e){return new this(e).acos()}function dR(e){return new this(e).acosh()}function pR(e,t){return new this(e).plus(t)}function fR(e){return new this(e).asin()}function mR(e){return new this(e).asinh()}function gR(e){return new this(e).atan()}function vR(e){return new this(e).atanh()}function yR(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?YN(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=YN(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(VN(e,t,a,1)),t=YN(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(VN(e,t,a,1)):(n=YN(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function xR(e){return new this(e).cbrt()}function bR(e){return jN(e=new this(e),e.e+1,2)}function wR(e,t,n){return new this(e).clamp(t,n)}function SR(e){if(!e||"object"!==typeof e)throw Error(MN+"Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,yN,"rounding",0,8,"toExpNeg",-vN,0,"toExpPos",0,vN,"maxE",0,vN,"minE",-vN,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=SN[n]),void 0!==(r=e[n])){if(!(DN(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(EN+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=SN[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(EN+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(TN);this[n]=!0}else this[n]=!1}return this}function _R(e){return new this(e).cos()}function MR(e){return new this(e).cosh()}function ER(e,t){return new this(e).div(t)}function AR(e){return new this(e).exp()}function TR(e){return jN(e=new this(e),e.e+1,3)}function CR(){var e,t,n=new this(0);for(_N=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return _N=!0,new this(1/0);n=t}return _N=!0,n.sqrt()}function DR(e){return e instanceof ZR||e&&e.toStringTag===CN||!1}function NR(e){return new this(e).ln()}function RR(e,t){return new this(e).log(t)}function kR(e){return new this(e).log(2)}function IR(e){return new this(e).log(10)}function FR(){return QN(this,arguments,"lt")}function PR(){return QN(this,arguments,"gt")}function OR(e,t){return new this(e).mod(t)}function BR(e,t){return new this(e).mul(t)}function LR(e,t){return new this(e).pow(t)}function zR(e){var t,n,r,i,a=0,o=new this(1),s=[];if(void 0===e?e=this.precision:UN(e,1,yN),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:s[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(TN);for(t=crypto.randomBytes(r*=4);a<r;)(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(s.push(i%1e7),a+=4);a=r/4}else for(;a<r;)s[a++]=1e7*Math.random()|0;for(e%=7,(r=s[--a])&&e&&(i=NN(10,7-e),s[a]=(r/i|0)*i);0===s[a];a--)s.pop();if(a<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,i=s[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=s,o}function UR(e){return jN(e=new this(e),e.e+1,this.rounding)}function HR(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function qR(e){return new this(e).sin()}function VR(e){return new this(e).sinh()}function jR(e){return new this(e).sqrt()}function GR(e,t){return new this(e).sub(t)}function WR(){var e=0,t=arguments,n=new this(t[e]);for(_N=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return _N=!0,jN(n,this.precision,this.rounding)}function XR(e){return new this(e).tan()}function YR(e){return new this(e).tanh()}function $R(e){return jN(e=new this(e),e.e+1,1)}LN[Symbol.for("nodejs.util.inspect.custom")]=LN.toString,LN[Symbol.toStringTag]="Decimal";var ZR=LN.constructor=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,DR(e))return i.s=e.s,void(_N?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(_N?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!==0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):rR(i,e.toString())}if("string"!==r)throw Error(EN+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),FN.test(e)?rR(i,e):iR(i,e)}if(a.prototype=LN,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=SR,a.clone=e,a.isDecimal=DR,a.abs=cR,a.acos=hR,a.acosh=dR,a.add=pR,a.asin=fR,a.asinh=mR,a.atan=gR,a.atanh=vR,a.atan2=yR,a.cbrt=xR,a.ceil=bR,a.clamp=wR,a.cos=_R,a.cosh=MR,a.div=ER,a.exp=AR,a.floor=TR,a.hypot=CR,a.ln=NR,a.log=RR,a.log10=IR,a.log2=kR,a.max=FR,a.min=PR,a.mod=OR,a.mul=BR,a.pow=LR,a.random=zR,a.round=UR,a.sign=HR,a.sin=qR,a.sinh=VR,a.sqrt=jR,a.sub=GR,a.sum=WR,a.tan=XR,a.tanh=YR,a.trunc=$R,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(SN);bN=new ZR(bN),wN=new ZR(wN);const JR=ZR;var KR=$M("BigNumber",["?on","config"],(e=>{var{on:t,config:n}=e,r=JR.clone({precision:n.precision,modulo:JR.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(e){return new r(e.value)},t&&t("config",(function(e,t){e.precision!==t.precision&&r.config({precision:e.precision})})),r}),{isClass:!0});const QR=Math.cosh||function(e){return Math.abs(e)<1e-9?1-e:.5*(Math.exp(e)+Math.exp(-e))},ek=Math.sinh||function(e){return Math.abs(e)<1e-9?e:.5*(Math.exp(e)-Math.exp(-e))},tk=function(e,t){return(e=Math.abs(e))<(t=Math.abs(t))&&([e,t]=[t,e]),e<1e8?Math.sqrt(e*e+t*t):(t/=e,e*Math.sqrt(1+t*t))},nk=function(){throw SyntaxError("Invalid Param")};function rk(e,t){const n=Math.abs(e),r=Math.abs(t);return 0===e?Math.log(r):0===t?Math.log(n):n<3e3&&r<3e3?.5*Math.log(e*e+t*t):(e*=.5,t*=.5,.5*Math.log(e*e+t*t)+Math.LN2)}const ik={re:0,im:0},ak=function(e,t){const n=ik;if(void 0===e||null===e)n.re=n.im=0;else if(void 0!==t)n.re=e,n.im=t;else switch(typeof e){case"object":if("im"in e&&"re"in e)n.re=e.re,n.im=e.im;else if("abs"in e&&"arg"in e){if(!isFinite(e.abs)&&isFinite(e.arg))return ok.INFINITY;n.re=e.abs*Math.cos(e.arg),n.im=e.abs*Math.sin(e.arg)}else if("r"in e&&"phi"in e){if(!isFinite(e.r)&&isFinite(e.phi))return ok.INFINITY;n.re=e.r*Math.cos(e.phi),n.im=e.r*Math.sin(e.phi)}else 2===e.length?(n.re=e[0],n.im=e[1]):nk();break;case"string":n.im=n.re=0;const t=e.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let r=1,i=0;null===t&&nk();for(let e=0;e<t.length;e++){const a=t[e];" "===a||"\t"===a||"\n"===a||("+"===a?r++:"-"===a?i++:"i"===a||"I"===a?(r+i===0&&nk()," "===t[e+1]||isNaN(t[e+1])?n.im+=parseFloat((i%2?"-":"")+"1"):(n.im+=parseFloat((i%2?"-":"")+t[e+1]),e++),r=i=0):((r+i===0||isNaN(a))&&nk(),"i"===t[e+1]||"I"===t[e+1]?(n.im+=parseFloat((i%2?"-":"")+a),e++):n.re+=parseFloat((i%2?"-":"")+a),r=i=0))}r+i>0&&nk();break;case"number":n.im=0,n.re=e;break;default:nk()}return isNaN(n.re)||isNaN(n.im),n};function ok(e,t){if(!(this instanceof ok))return new ok(e,t);const n=ak(e,t);this.re=n.re,this.im=n.im}ok.prototype={re:0,im:0,sign:function(){const e=tk(this.re,this.im);return new ok(this.re/e,this.im/e)},add:function(e,t){const n=ak(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?ok.NAN:ok.INFINITY:new ok(this.re+n.re,this.im+n.im)},sub:function(e,t){const n=ak(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im));return r||i?r&&i?ok.NAN:ok.INFINITY:new ok(this.re-n.re,this.im-n.im)},mul:function(e,t){const n=ak(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=0===this.re&&0===this.im,o=0===n.re&&0===n.im;return r&&o||i&&a?ok.NAN:r||i?ok.INFINITY:0===n.im&&0===this.im?new ok(this.re*n.re,0):new ok(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(e,t){const n=ak(e,t),r=this.isInfinite(),i=!(isFinite(n.re)&&isFinite(n.im)),a=0===this.re&&0===this.im,o=0===n.re&&0===n.im;if(a&&o||r&&i)return ok.NAN;if(o||r)return ok.INFINITY;if(a||i)return ok.ZERO;if(0===n.im)return new ok(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const e=n.re/n.im,t=n.re*e+n.im;return new ok((this.re*e+this.im)/t,(this.im*e-this.re)/t)}{const e=n.im/n.re,t=n.im*e+n.re;return new ok((this.re+this.im*e)/t,(this.im-this.re*e)/t)}},pow:function(e,t){const n=ak(e,t),r=0===this.re&&0===this.im;if(0===n.re&&0===n.im)return ok.ONE;if(0===n.im){if(0===this.im&&this.re>0)return new ok(Math.pow(this.re,n.re),0);if(0===this.re)switch((n.re%4+4)%4){case 0:return new ok(Math.pow(this.im,n.re),0);case 1:return new ok(0,Math.pow(this.im,n.re));case 2:return new ok(-Math.pow(this.im,n.re),0);case 3:return new ok(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return ok.ZERO;const i=Math.atan2(this.im,this.re),a=rk(this.re,this.im);let o=Math.exp(n.re*a-n.im*i),s=n.im*a+n.re*i;return new ok(o*Math.cos(s),o*Math.sin(s))},sqrt:function(){const e=this.re,t=this.im;if(0===t)return e>=0?new ok(Math.sqrt(e),0):new ok(0,Math.sqrt(-e));const n=tk(e,t);let r=Math.sqrt(.5*(n+Math.abs(e))),i=Math.abs(t)/(2*r);return e>=0?new ok(r,t<0?-i:i):new ok(i,t<0?-r:r)},exp:function(){const e=Math.exp(this.re);return 0===this.im?new ok(e,0):new ok(e*Math.cos(this.im),e*Math.sin(this.im))},expm1:function(){const e=this.re,t=this.im;return new ok(Math.expm1(e)*Math.cos(t)+function(e){const t=Math.PI/4;if(-t>e||e>t)return Math.cos(e)-1;const n=e*e;return n*(n*(n*(n*(n*(n*(n*(n/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-.5)}(t),Math.exp(e)*Math.sin(t))},log:function(){const e=this.re,t=this.im;return 0===t&&e>0?new ok(Math.log(e),0):new ok(rk(e,t),Math.atan2(t,e))},abs:function(){return tk(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const e=this.re,t=this.im;return new ok(Math.sin(e)*QR(t),Math.cos(e)*ek(t))},cos:function(){const e=this.re,t=this.im;return new ok(Math.cos(e)*QR(t),-Math.sin(e)*ek(t))},tan:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)+QR(t);return new ok(Math.sin(e)/n,ek(t)/n)},cot:function(){const e=2*this.re,t=2*this.im,n=Math.cos(e)-QR(t);return new ok(-Math.sin(e)/n,ek(t)/n)},sec:function(){const e=this.re,t=this.im,n=.5*QR(2*t)+.5*Math.cos(2*e);return new ok(Math.cos(e)*QR(t)/n,Math.sin(e)*ek(t)/n)},csc:function(){const e=this.re,t=this.im,n=.5*QR(2*t)-.5*Math.cos(2*e);return new ok(Math.sin(e)*QR(t)/n,-Math.cos(e)*ek(t)/n)},asin:function(){const e=this.re,t=this.im,n=new ok(t*t-e*e+1,-2*e*t).sqrt(),r=new ok(n.re-t,n.im+e).log();return new ok(r.im,-r.re)},acos:function(){const e=this.re,t=this.im,n=new ok(t*t-e*e+1,-2*e*t).sqrt(),r=new ok(n.re-t,n.im+e).log();return new ok(Math.PI/2-r.im,r.re)},atan:function(){const e=this.re,t=this.im;if(0===e){if(1===t)return new ok(0,1/0);if(-1===t)return new ok(0,-1/0)}const n=e*e+(1-t)*(1-t),r=new ok((1-t*t-e*e)/n,-2*e/n).log();return new ok(-.5*r.im,.5*r.re)},acot:function(){const e=this.re,t=this.im;if(0===t)return new ok(Math.atan2(1,e),0);const n=e*e+t*t;return 0!==n?new ok(e/n,-t/n).atan():new ok(0!==e?e/0:0,0!==t?-t/0:0).atan()},asec:function(){const e=this.re,t=this.im;if(0===e&&0===t)return new ok(0,1/0);const n=e*e+t*t;return 0!==n?new ok(e/n,-t/n).acos():new ok(0!==e?e/0:0,0!==t?-t/0:0).acos()},acsc:function(){const e=this.re,t=this.im;if(0===e&&0===t)return new ok(Math.PI/2,1/0);const n=e*e+t*t;return 0!==n?new ok(e/n,-t/n).asin():new ok(0!==e?e/0:0,0!==t?-t/0:0).asin()},sinh:function(){const e=this.re,t=this.im;return new ok(ek(e)*Math.cos(t),QR(e)*Math.sin(t))},cosh:function(){const e=this.re,t=this.im;return new ok(QR(e)*Math.cos(t),ek(e)*Math.sin(t))},tanh:function(){const e=2*this.re,t=2*this.im,n=QR(e)+Math.cos(t);return new ok(ek(e)/n,Math.sin(t)/n)},coth:function(){const e=2*this.re,t=2*this.im,n=QR(e)-Math.cos(t);return new ok(ek(e)/n,-Math.sin(t)/n)},csch:function(){const e=this.re,t=this.im,n=Math.cos(2*t)-QR(2*e);return new ok(-2*ek(e)*Math.cos(t)/n,2*QR(e)*Math.sin(t)/n)},sech:function(){const e=this.re,t=this.im,n=Math.cos(2*t)+QR(2*e);return new ok(2*QR(e)*Math.cos(t)/n,-2*ek(e)*Math.sin(t)/n)},asinh:function(){let e=this.im;this.im=-this.re,this.re=e;const t=this.asin();return this.re=-this.im,this.im=e,e=t.re,t.re=-t.im,t.im=e,t},acosh:function(){const e=this.acos();if(e.im<=0){const t=e.re;e.re=-e.im,e.im=t}else{const t=e.im;e.im=-e.re,e.re=t}return e},atanh:function(){const e=this.re,t=this.im,n=e>1&&0===t,r=1-e,i=1+e,a=r*r+t*t,o=0!==a?new ok((i*r-t*t)/a,(t*r+i*t)/a):new ok(-1!==e?e/0:0,0!==t?t/0:0),s=o.re;return o.re=rk(o.re,o.im)/2,o.im=Math.atan2(o.im,s)/2,n&&(o.im=-o.im),o},acoth:function(){const e=this.re,t=this.im;if(0===e&&0===t)return new ok(0,Math.PI/2);const n=e*e+t*t;return 0!==n?new ok(e/n,-t/n).atanh():new ok(0!==e?e/0:0,0!==t?-t/0:0).atanh()},acsch:function(){const e=this.re,t=this.im;if(0===t)return new ok(0!==e?Math.log(e+Math.sqrt(e*e+1)):1/0,0);const n=e*e+t*t;return 0!==n?new ok(e/n,-t/n).asinh():new ok(0!==e?e/0:0,0!==t?-t/0:0).asinh()},asech:function(){const e=this.re,t=this.im;if(this.isZero())return ok.INFINITY;const n=e*e+t*t;return 0!==n?new ok(e/n,-t/n).acosh():new ok(0!==e?e/0:0,0!==t?-t/0:0).acosh()},inverse:function(){if(this.isZero())return ok.INFINITY;if(this.isInfinite())return ok.ZERO;const e=this.re,t=this.im,n=e*e+t*t;return new ok(e/n,-t/n)},conjugate:function(){return new ok(this.re,-this.im)},neg:function(){return new ok(-this.re,-this.im)},ceil:function(e){return e=Math.pow(10,e||0),new ok(Math.ceil(this.re*e)/e,Math.ceil(this.im*e)/e)},floor:function(e){return e=Math.pow(10,e||0),new ok(Math.floor(this.re*e)/e,Math.floor(this.im*e)/e)},round:function(e){return e=Math.pow(10,e||0),new ok(Math.round(this.re*e)/e,Math.round(this.im*e)/e)},equals:function(e,t){const n=ak(e,t);return Math.abs(n.re-this.re)<=ok.EPSILON&&Math.abs(n.im-this.im)<=ok.EPSILON},clone:function(){return new ok(this.re,this.im)},toString:function(){let e=this.re,t=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(e)<ok.EPSILON&&(e=0),Math.abs(t)<ok.EPSILON&&(t=0),0===t?n+e:(0!==e?(n+=e,n+=" ",t<0?(t=-t,n+="-"):n+="+",n+=" "):t<0&&(t=-t,n+="-"),1!==t&&(n+=t),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return 0===this.im?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return 0===this.im&&0===this.re},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}},ok.ZERO=new ok(0,0),ok.ONE=new ok(1,0),ok.I=new ok(0,1),ok.PI=new ok(Math.PI,0),ok.E=new ok(Math.E,0),ok.INFINITY=new ok(1/0,1/0),ok.NAN=new ok(NaN,NaN),ok.EPSILON=1e-15;var sk=$M("Complex",[],(()=>(Object.defineProperty(ok,"name",{value:"Complex"}),ok.prototype.constructor=ok,ok.prototype.type="Complex",ok.prototype.isComplex=!0,ok.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ok.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ok.prototype.format=function(e){var t=this.im,n=this.re,r=cE(this.re,e),i=cE(this.im,e),a=aM(e)?e:e?e.precision:null;if(null!==a){var o=Math.pow(10,-a);Math.abs(n/t)<o&&(n=0),Math.abs(t/n)<o&&(t=0)}return 0===t?r:0===n?1===t?"i":-1===t?"-i":i+"i":t<0?-1===t?r+" - i":r+" - "+i.substring(1)+"i":1===t?r+" + i":r+" + "+i+"i"},ok.fromPolar=function(e){switch(arguments.length){case 1:var t=arguments[0];if("object"===typeof t)return ok(t);throw new TypeError("Input has to be an object with r and phi keys.");case 2:var n=arguments[0],r=arguments[1];if(aM(n)){if(cM(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),aM(r))return new ok({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}throw new TypeError("Radius r is not a number.");default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ok.prototype.valueOf=ok.prototype.toString,ok.fromJSON=function(e){return new ok(e)},ok.compare=function(e,t){return e.re>t.re?1:e.re<t.re?-1:e.im>t.im?1:e.im<t.im?-1:0},ok)),{isClass:!0});function lk(e){var t=0,n=1,r=Object.create(null),i=Object.create(null),a=0,o=function(e){var o=i[e];if(o&&(delete r[o],delete i[e],--t,n===o)){if(!t)return a=0,void(n=1);for(;!Object.prototype.hasOwnProperty.call(r,++n););}};return e=Math.abs(e),{hit:function(s){var l=i[s],u=++a;if(r[u]=s,i[s]=u,!l){if(++t<=e)return;return s=r[n],o(s),s}if(delete r[l],n===l)for(;!Object.prototype.hasOwnProperty.call(r,++n););},delete:o,clear:function(){t=a=0,n=1,r=Object.create(null),i=Object.create(null)}}}function uk(e){var{hasher:t,limit:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=null==n?Number.POSITIVE_INFINITY:n,t=null==t?JSON.stringify:t,function r(){"object"!==typeof r.cache&&(r.cache={values:new Map,lru:lk(n||Number.POSITIVE_INFINITY)});for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=t(i);if(r.cache.values.has(o))return r.cache.lru.hit(o),r.cache.values.get(o);var s=e.apply(e,i);return r.cache.values.set(o,s),r.cache.values.delete(r.cache.lru.hit(o)),s}}var ck=uk((function(e){return new e(1).exp()}),{hasher:fk}),hk=uk((function(e){return new e(1).plus(new e(5).sqrt()).div(2)}),{hasher:fk}),dk=uk((function(e){return e.acos(-1)}),{hasher:fk}),pk=uk((function(e){return dk(e).times(2)}),{hasher:fk});function fk(e){return e[0].precision}var mk=Math.PI,gk=2*Math.PI,vk=Math.E,yk=$M("true",[],(()=>!0)),xk=$M("false",[],(()=>!1)),bk=$M("null",[],(()=>null)),wk=Pk("Infinity",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1/0):1/0})),Sk=Pk("NaN",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(NaN):NaN})),_k=Pk("pi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?dk(n):mk})),Mk=Pk("tau",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?pk(n):gk})),Ek=Pk("e",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?ck(n):vk})),Ak=Pk("phi",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?hk(n):1.618033988749895})),Tk=Pk("LN2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(2).ln():Math.LN2})),Ck=Pk("LN10",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(10).ln():Math.LN10})),Dk=Pk("LOG2E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1).div(new n(2).ln()):Math.LOG2E})),Nk=Pk("LOG10E",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(1).div(new n(10).ln()):Math.LOG10E})),Rk=Pk("SQRT1_2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n("0.5").sqrt():Math.SQRT1_2})),kk=Pk("SQRT2",["config","?BigNumber"],(e=>{var{config:t,BigNumber:n}=e;return"BigNumber"===t.number?new n(2).sqrt():Math.SQRT2})),Ik=Pk("i",["Complex"],(e=>{var{Complex:t}=e;return t.I})),Fk=$M("version",[],(()=>"14.0.0"));function Pk(e,t,n){return $M(e,t,n,{recreateOnConfigChange:!0})}var Ok=kI("speedOfLight","299792458","m s^-1"),Bk=kI("gravitationConstant","6.67430e-11","m^3 kg^-1 s^-2"),Lk=kI("planckConstant","6.62607015e-34","J s"),zk=kI("reducedPlanckConstant","1.0545718176461565e-34","J s"),Uk=kI("magneticConstant","1.25663706212e-6","N A^-2"),Hk=kI("electricConstant","8.8541878128e-12","F m^-1"),qk=kI("vacuumImpedance","376.730313667","ohm"),Vk=kI("coulomb","8.987551792261171e9","N m^2 C^-2"),jk=kI("elementaryCharge","1.602176634e-19","C"),Gk=kI("bohrMagneton","9.2740100783e-24","J T^-1"),Wk=kI("conductanceQuantum","7.748091729863649e-5","S"),Xk=kI("inverseConductanceQuantum","12906.403729652257","ohm"),Yk=kI("magneticFluxQuantum","2.0678338484619295e-15","Wb"),$k=kI("nuclearMagneton","5.0507837461e-27","J T^-1"),Zk=kI("klitzing","25812.807459304513","ohm"),Jk=kI("bohrRadius","5.29177210903e-11","m"),Kk=kI("classicalElectronRadius","2.8179403262e-15","m"),Qk=kI("electronMass","9.1093837015e-31","kg"),eI=kI("fermiCoupling","1.1663787e-5","GeV^-2"),tI=II("fineStructure",.0072973525693),nI=kI("hartreeEnergy","4.3597447222071e-18","J"),rI=kI("protonMass","1.67262192369e-27","kg"),iI=kI("deuteronMass","3.3435830926e-27","kg"),aI=kI("neutronMass","1.6749271613e-27","kg"),oI=kI("quantumOfCirculation","3.6369475516e-4","m^2 s^-1"),sI=kI("rydberg","10973731.568160","m^-1"),lI=kI("thomsonCrossSection","6.6524587321e-29","m^2"),uI=II("weakMixingAngle",.2229),cI=II("efimovFactor",22.7),hI=kI("atomicMass","1.66053906660e-27","kg"),dI=kI("avogadro","6.02214076e23","mol^-1"),pI=kI("boltzmann","1.380649e-23","J K^-1"),fI=kI("faraday","96485.33212331001","C mol^-1"),mI=kI("firstRadiation","3.7417718521927573e-16","W m^2"),gI=kI("loschmidt","2.686780111798444e25","m^-3"),vI=kI("gasConstant","8.31446261815324","J K^-1 mol^-1"),yI=kI("molarPlanckConstant","3.990312712893431e-10","J s mol^-1"),xI=kI("molarVolume","0.022413969545014137","m^3 mol^-1"),bI=II("sackurTetrode",-1.16487052358),wI=kI("secondRadiation","0.014387768775039337","m K"),SI=kI("stefanBoltzmann","5.67037441918443e-8","W m^-2 K^-4"),_I=kI("wienDisplacement","2.897771955e-3","m K"),MI=kI("molarMass","0.99999999965e-3","kg mol^-1"),EI=kI("molarMassC12","11.9999999958e-3","kg mol^-1"),AI=kI("gravity","9.80665","m s^-2"),TI=kI("planckLength","1.616255e-35","m"),CI=kI("planckMass","2.176435e-8","kg"),DI=kI("planckTime","5.391245e-44","s"),NI=kI("planckCharge","1.87554603778e-18","C"),RI=kI("planckTemperature","1.416785e+32","K");function kI(e,t,n){return $M(e,["config","Unit","BigNumber"],(e=>{var{config:r,Unit:i,BigNumber:a}=e,o=new i("BigNumber"===r.number?new a(t):parseFloat(t),n);return o.fixPrefix=!0,o}))}function II(e,t){return $M(e,["config","BigNumber"],(e=>{var{config:n,BigNumber:r}=e;return"BigNumber"===n.number?new r(t):t}))}"undefined"===typeof BigInt&&(BigInt=function(e){if(isNaN(e))throw new Error("");return e});const FI=BigInt(0),PI=BigInt(1),OI=BigInt(2),BI=BigInt(5),LI=BigInt(10),zI={s:PI,n:FI,d:PI};function UI(e,t){try{e=BigInt(e)}catch(vk){throw $I()}return e*t}function HI(e){return"bigint"===typeof e?e:Math.floor(e)}function qI(e,t){if(t===FI)throw YI();const n=Object.create(XI.prototype);n.s=e<FI?-PI:PI;const r=WI(e=e<FI?-e:e,t);return n.n=e/r,n.d=t/r,n}function VI(e){const t={};let n=e,r=OI,i=BI-PI;for(;i<=n;){for(;n%r===FI;)n/=r,t[r]=(t[r]||FI)+PI;i+=PI+OI*r++}return n!==e?n>1&&(t[n]=(t[n]||FI)+PI):t[e]=(t[e]||FI)+PI,t}const jI=function(e,t){let n=FI,r=PI,i=PI;if(void 0===e||null===e);else if(void 0!==t){if("bigint"===typeof e)n=e;else{if(isNaN(e))throw $I();if(e%1!==0)throw ZI();n=BigInt(e)}if("bigint"===typeof t)r=t;else{if(isNaN(t))throw $I();if(t%1!==0)throw ZI();r=BigInt(t)}i=n*r}else if("object"===typeof e){if("d"in e&&"n"in e)n=BigInt(e.n),r=BigInt(e.d),"s"in e&&(n*=BigInt(e.s));else if(0 in e)n=BigInt(e[0]),1 in e&&(r=BigInt(e[1]));else{if("bigint"!==typeof e)throw $I();n=e}i=n*r}else if("number"===typeof e){if(isNaN(e))throw $I();if(e<0&&(i=-PI,e=-e),e%1===0)n=BigInt(e);else if(e>0){let t=1,i=0,a=1,o=1,s=1,l=1e7;for(e>=1&&(t=10**Math.floor(1+Math.log10(e)),e/=t);a<=l&&s<=l;){let t=(i+o)/(a+s);if(e===t){a+s<=l?(n=i+o,r=a+s):s>a?(n=o,r=s):(n=i,r=a);break}e>t?(i+=o,a+=s):(o+=i,s+=a),a>l?(n=o,r=s):(n=i,r=a)}n=BigInt(n)*BigInt(t),r=BigInt(r)}}else if("string"===typeof e){let t=0,a=FI,o=FI,s=FI,l=PI,u=PI,c=e.replace(/_/g,"").match(/\d+|./g);if(null===c)throw $I();if("-"===c[t]?(i=-PI,t++):"+"===c[t]&&t++,c.length===t+1?o=UI(c[t++],i):"."===c[t+1]||"."===c[t]?("."!==c[t]&&(a=UI(c[t++],i)),t++,(t+1===c.length||"("===c[t+1]&&")"===c[t+3]||"'"===c[t+1]&&"'"===c[t+3])&&(o=UI(c[t],i),l=LI**BigInt(c[t].length),t++),("("===c[t]&&")"===c[t+2]||"'"===c[t]&&"'"===c[t+2])&&(s=UI(c[t+1],i),u=LI**BigInt(c[t+1].length)-PI,t+=3)):"/"===c[t+1]||":"===c[t+1]?(o=UI(c[t],i),l=UI(c[t+2],PI),t+=3):"/"===c[t+3]&&" "===c[t+1]&&(a=UI(c[t],i),o=UI(c[t+2],i),l=UI(c[t+4],PI),t+=5),!(c.length<=t))throw $I();r=l*u,i=n=s+r*a+u*o}else{if("bigint"!==typeof e)throw $I();n=e,i=e,r=PI}if(r===FI)throw YI();zI.s=i<FI?-PI:PI,zI.n=n<FI?-n:n,zI.d=r<FI?-r:r};function GI(e,t,n){let r=PI,i=function(e,t,n){let r=PI;for(;t>FI;e=e*e%n,t>>=PI)t&PI&&(r=r*e%n);return r}(LI,n,t);for(let a=0;a<300;a++){if(r===i)return BigInt(a);r=r*LI%t,i=i*LI%t}return 0}function WI(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function XI(e,t){if(jI(e,t),!(this instanceof XI))return qI(zI.s*zI.n,zI.d);e=WI(zI.d,zI.n),this.s=zI.s,this.n=zI.n/e,this.d=zI.d/e}var YI=function(){return new Error("Division by Zero")},$I=function(){return new Error("Invalid argument")},ZI=function(){return new Error("Parameters must be integer")};XI.prototype={s:PI,n:FI,d:PI,abs:function(){return qI(this.n,this.d)},neg:function(){return qI(-this.s*this.n,this.d)},add:function(e,t){return jI(e,t),qI(this.s*this.n*zI.d+zI.s*this.d*zI.n,this.d*zI.d)},sub:function(e,t){return jI(e,t),qI(this.s*this.n*zI.d-zI.s*this.d*zI.n,this.d*zI.d)},mul:function(e,t){return jI(e,t),qI(this.s*zI.s*this.n*zI.n,this.d*zI.d)},div:function(e,t){return jI(e,t),qI(this.s*zI.s*this.n*zI.d,this.d*zI.n)},clone:function(){return qI(this.s*this.n,this.d)},mod:function(e,t){if(void 0===e)return qI(this.s*this.n%this.d,PI);if(jI(e,t),FI===zI.n*this.d)throw YI();return qI(this.s*(zI.d*this.n)%(zI.n*this.d),zI.d*this.d)},gcd:function(e,t){return jI(e,t),qI(WI(zI.n,this.n)*WI(zI.d,this.d),zI.d*this.d)},lcm:function(e,t){return jI(e,t),zI.n===FI&&this.n===FI?qI(FI,PI):qI(zI.n*this.n,WI(zI.n,this.n)*WI(zI.d,this.d))},inverse:function(){return qI(this.s*this.d,this.n)},pow:function(e,t){if(jI(e,t),zI.d===PI)return zI.s<FI?qI((this.s*this.d)**zI.n,this.n**zI.n):qI((this.s*this.n)**zI.n,this.d**zI.n);if(this.s<FI)return null;let n=VI(this.n),r=VI(this.d),i=PI,a=PI;for(let o in n)if("1"!==o){if("0"===o){i=FI;break}if(n[o]*=zI.n,n[o]%zI.d!==FI)return null;n[o]/=zI.d,i*=BigInt(o)**n[o]}for(let o in r)if("1"!==o){if(r[o]*=zI.n,r[o]%zI.d!==FI)return null;r[o]/=zI.d,a*=BigInt(o)**r[o]}return zI.s<FI?qI(a,i):qI(i,a)},log:function(e,t){if(jI(e,t),this.s<=FI||zI.s<=FI)return null;const n={},r=VI(zI.n),i=VI(zI.d),a=VI(this.n),o=VI(this.d);for(const u in i)r[u]=(r[u]||FI)-i[u];for(const u in o)a[u]=(a[u]||FI)-o[u];for(const u in r)"1"!==u&&(n[u]=!0);for(const u in a)"1"!==u&&(n[u]=!0);let s=null,l=null;for(const u in n){const e=r[u]||FI,t=a[u]||FI;if(e===FI){if(t!==FI)return null;continue}let n=t,i=e;const o=WI(n,i);if(n/=o,i/=o,null===s&&null===l)s=n,l=i;else if(n*l!==s*i)return null}return null!==s&&null!==l?qI(s,l):null},equals:function(e,t){return jI(e,t),this.s*this.n*zI.d===zI.s*zI.n*this.d},lt:function(e,t){return jI(e,t),this.s*this.n*zI.d<zI.s*zI.n*this.d},lte:function(e,t){return jI(e,t),this.s*this.n*zI.d<=zI.s*zI.n*this.d},gt:function(e,t){return jI(e,t),this.s*this.n*zI.d>zI.s*zI.n*this.d},gte:function(e,t){return jI(e,t),this.s*this.n*zI.d>=zI.s*zI.n*this.d},compare:function(e,t){jI(e,t);let n=this.s*this.n*zI.d-zI.s*zI.n*this.d;return(FI<n)-(n<FI)},ceil:function(e){return e=LI**BigInt(e||0),qI(HI(this.s*e*this.n/this.d)+(e*this.n%this.d>FI&&this.s>=FI?PI:FI),e)},floor:function(e){return e=LI**BigInt(e||0),qI(HI(this.s*e*this.n/this.d)-(e*this.n%this.d>FI&&this.s<FI?PI:FI),e)},round:function(e){return e=LI**BigInt(e||0),qI(HI(this.s*e*this.n/this.d)+this.s*((this.s>=FI?PI:FI)+OI*(e*this.n%this.d)>this.d?PI:FI),e)},roundTo:function(e,t){jI(e,t);const n=this.n*zI.d,r=this.d*zI.n,i=n%r;let a=HI(n/r);return i+i>=r&&a++,qI(this.s*a*zI.n,zI.d)},divisible:function(e,t){return jI(e,t),!(!(zI.n*this.d)||this.n*zI.d%(zI.n*this.d))},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(e){let t=this.n,n=this.d;e=e||15;let r=function(e,t){for(;t%OI===FI;t/=OI);for(;t%BI===FI;t/=BI);if(t===PI)return FI;let n=LI%t,r=1;for(;n!==PI;r++)if(n=n*LI%t,r>2e3)return FI;return BigInt(r)}(0,n),i=GI(0,n,r),a=this.s<FI?"-":"";if(a+=HI(t/n),t%=n,t*=LI,t&&(a+="."),r){for(let e=i;e--;)a+=HI(t/n),t%=n,t*=LI;a+="(";for(let e=r;e--;)a+=HI(t/n),t%=n,t*=LI;a+=")"}else for(let o=e;t&&o--;)a+=HI(t/n),t%=n,t*=LI;return a},toFraction:function(e){let t=this.n,n=this.d,r=this.s<FI?"-":"";if(n===PI)r+=t;else{let i=HI(t/n);e&&i>FI&&(r+=i,r+=" ",t%=n),r+=t,r+="/",r+=n}return r},toLatex:function(e){let t=this.n,n=this.d,r=this.s<FI?"-":"";if(n===PI)r+=t;else{let i=HI(t/n);e&&i>FI&&(r+=i,t%=n),r+="\\frac{",r+=t,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let e=this.n,t=this.d,n=[];do{n.push(HI(e/t));let r=e%t;e=t,t=r}while(e!==PI);return n},simplify:function(e){const t=BigInt(1/(e||.001)|0),n=this.abs(),r=n.toContinued();for(let i=1;i<r.length;i++){let e=qI(r[i-1],PI);for(let t=i-2;t>=0;t--)e=e.inverse().add(r[t]);let a=e.sub(n);if(a.n*t<a.d)return e.mul(this.s)}return this}};var JI=$M("Fraction",[],(()=>(Object.defineProperty(XI,"name",{value:"Fraction"}),XI.prototype.constructor=XI,XI.prototype.type="Fraction",XI.prototype.isFraction=!0,XI.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},XI.fromJSON=function(e){return new XI(e)},XI)),{isClass:!0}),KI=$M("Matrix",[],(()=>{function e(){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator")}return e.prototype.type="Matrix",e.prototype.isMatrix=!0,e.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},e.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},e.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},e.prototype.subset=function(e,t,n){throw new Error("Cannot invoke subset on a Matrix interface")},e.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},e.prototype.set=function(e,t,n){throw new Error("Cannot invoke set on a Matrix interface")},e.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},e.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},e.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},e.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},e.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},e.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},e.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},e.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},e.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},e.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},e.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},e}),{isClass:!0}),QI=$M("Range",[],(()=>{function e(t,n,r){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");var i=null!==t&&void 0!==t,a=null!==n&&void 0!==n,o=null!==r&&void 0!==r;if(i)if(oM(t))t=t.toNumber();else if("number"!==typeof t)throw new TypeError("Parameter start must be a number");if(a)if(oM(n))n=n.toNumber();else if("number"!==typeof n)throw new TypeError("Parameter end must be a number");if(o)if(oM(r))r=r.toNumber();else if("number"!==typeof r)throw new TypeError("Parameter step must be a number");this.start=i?parseFloat(t):0,this.end=a?parseFloat(n):0,this.step=o?parseFloat(r):1}return e.prototype.type="Range",e.prototype.isRange=!0,e.parse=function(t){if("string"!==typeof t)return null;var n=t.split(":").map((function(e){return parseFloat(e)}));if(n.some((function(e){return isNaN(e)})))return null;switch(n.length){case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[2],n[1]);default:return null}},e.prototype.clone=function(){return new e(this.start,this.end,this.step)},e.prototype.size=function(){var e=0,t=this.start,n=this.step,r=this.end-t;return rE(n)===rE(r)?e=Math.ceil(r/n):0===r&&(e=0),isNaN(e)&&(e=0),[e]},e.prototype.min=function(){var e=this.size()[0];return e>0?this.step>0?this.start:this.start+(e-1)*this.step:void 0},e.prototype.max=function(){var e=this.size()[0];return e>0?this.step>0?this.start+(e-1)*this.step:this.start:void 0},e.prototype.forEach=function(e){var t=this.start,n=this.step,r=this.end,i=0;if(n>0)for(;t<r;)e(t,[i],this),t+=n,i++;else if(n<0)for(;t>r;)e(t,[i],this),t+=n,i++},e.prototype.map=function(e){var t=[];return this.forEach((function(n,r,i){t[r[0]]=e(n,r,i)})),t},e.prototype.toArray=function(){var e=[];return this.forEach((function(t,n){e[n[0]]=t})),e},e.prototype.valueOf=function(){return this.toArray()},e.prototype.format=function(e){var t=cE(this.start,e);return 1!==this.step&&(t+=":"+cE(this.step,e)),t+=":"+cE(this.end,e)},e.prototype.toString=function(){return this.format()},e.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},e.fromJSON=function(t){return new e(t.start,t.end,t.step)},e}),{isClass:!0}),eF=$M("ResultSet",[],(()=>{function e(t){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this.entries=t||[]}return e.prototype.type="ResultSet",e.prototype.isResultSet=!0,e.prototype.valueOf=function(){return this.entries},e.prototype.toString=function(){return"["+this.entries.map(String).join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"ResultSet",entries:this.entries}},e.fromJSON=function(t){return new e(t.entries)},e}),{isClass:!0}),tF=$M("DenseMatrix",["Matrix"],(e=>{var{Matrix:t}=e;function n(e,t){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!hM(t))throw new Error("Invalid datatype: "+t);if(pM(e))"DenseMatrix"===e.type?(this._data=j_(e._data),this._size=j_(e._size),this._datatype=t||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=t||e._datatype);else if(e&&dM(e.data)&&dM(e.size))this._data=e.data,this._size=e.size,VE(this._data,this._size),this._datatype=t||e.datatype;else if(dM(e))this._data=s(e),this._size=HE(this._data),VE(this._data,this._size),this._datatype=t;else{if(e)throw new TypeError("Unsupported type of data ("+XM(e)+")");this._data=[],this._size=[0],this._datatype=t}}function r(e,t,n,i){var a=i===n-1,o=t.dimension(i);return a?o.map((function(t){return GE(t,e.length),e[t]})).valueOf():o.map((function(a){return GE(a,e.length),r(e[a],t,n,i+1)})).valueOf()}function i(e,t,n,r,a){var o=a===r-1,s=t.dimension(a);o?s.forEach((function(t,r){GE(t),e[t]=n[r[0]]})):s.forEach((function(o,s){GE(o),i(e[o],t,n[s[0]],r,a+1)}))}function a(e,t,n){if(0===t.length){for(var r=e._data;dM(r);)r=r[0];return r}return e._size=t.slice(0),e._data=XE(e._data,e._size,n),e}function o(e,t,n){for(var r=e._size.slice(0),i=!1;r.length<t.length;)r.push(0),i=!0;for(var o=0,s=t.length;o<s;o++)t[o]>r[o]&&(r[o]=t[o],i=!0);i&&a(e,r,n)}function s(e){return pM(e)?s(e.valueOf()):dM(e)?e.map(s):e}return n.prototype=new t,n.prototype.createDenseMatrix=function(e,t){return new n(e,t)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return uA(this._data,XM)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(e,t){return new n(e,t)},n.prototype.subset=function(e,t,a){switch(arguments.length){case 1:return function(e,t){if(!yM(t))throw new TypeError("Invalid index");var i=t.isScalar();if(i)return e.get(t.min());var a=t.size();if(a.length!==e._size.length)throw new zE(a.length,e._size.length);for(var o=t.min(),s=t.max(),l=0,u=e._size.length;l<u;l++)GE(o[l],e._size[l]),GE(s[l],e._size[l]);return new n(r(e._data,t,a.length,0),e._datatype)}(this,e);case 2:case 3:return function(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var a,s=t.size(),l=t.isScalar();pM(n)?(a=n.size(),n=n.valueOf()):a=HE(n);if(l){if(0!==a.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(!W_(a,s))try{a=HE(n=0===a.length?fA([n],s):fA(n,s))}catch(f){}if(s.length<e._size.length)throw new zE(s.length,e._size.length,"<");if(a.length<s.length){for(var u=0,c=0;1===s[u]&&1===a[u];)u++;for(;1===s[u];)c++,u++;n=eA(n,s.length,c,a)}if(!W_(s,a))throw new zE(s,a,">");var h=t.max().map((function(e){return e+1}));o(e,h,r);var d=s.length,p=0;i(e._data,t,n,d,p)}return e}(this,e,t,a);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(e){return mA(this._data,e)},n.prototype.set=function(e,t,n){if(!dM(e))throw new TypeError("Array expected");if(e.length<this._size.length)throw new zE(e.length,this._size.length,"<");var r,i,a,s=e.map((function(e){return e+1}));o(this,s,n);var l=this._data;for(r=0,i=e.length-1;r<i;r++)GE(a=e[r],l.length),l=l[a];return GE(a=e[e.length-1],l.length),l[a]=t,this},n.prototype.resize=function(e,t,n){if(!fM(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));return a(n?this.clone():this,r,t)},n.prototype.reshape=function(e,t){var n=t?this.clone():this;n._data=$E(n._data,e);var r=n._size.reduce(((e,t)=>e*t));return n._size=ZE(e,r),n},n.prototype.clone=function(){return new n({data:j_(this._data),size:j_(this._size),datatype:this._datatype})},n.prototype.size=function(){return this._size.slice(0)},n.prototype._forEach=function(e){var t=this,n=t.size();if(1!==n.length){var r=Array(n.length).fill(0),i=Array(n.length-1),a=i.length-1;i[0]=t._data[0];for(var o=0;o<a;o++)i[o+1]=i[o][0];for(r[a]=-1;;){var s=void 0;for(s=a;s>=0;s--){if(r[s]++,r[s]!==n[s]){i[s]=0===s?t._data[r[s]]:i[s-1][r[s]];for(var l=s;l<a;l++)i[l+1]=i[l][0];for(var u=0;u<n[i.length];u++)r[i.length]=u,e(i[a],u,r.slice(0));break}r[s]=0}if(-1===s)break}}else for(var c=0;c<n[0];c++)e(t._data,c,[c])},n.prototype.map=function(e){var t=this,r=new n(t),i=aC(e,t._data,"map");return r._forEach((function(e,n,r){e[n]=i(e[n],r,t)})),r},n.prototype.forEach=function(e){var t=this,n=aC(e,t._data,"map");t._forEach((function(e,r,i){n(e[r],i,t)}))},n.prototype[Symbol.iterator]=function*(){var e=function*(t,n){if(dM(t))for(var r=0;r<t.length;r++)yield*e(t[r],n.concat(r));else yield{value:t,index:n}};yield*e(this._data,[])},n.prototype.rows=function(){var e=[];if(2!==this.size().length)throw new TypeError("Rows can only be returned for a 2D matrix.");var t=this._data;for(var r of t)e.push(new n([r],this._datatype));return e},n.prototype.columns=function(){var e=this,t=[],r=this.size();if(2!==r.length)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var i=this._data,a=function(r){var a=i.map((e=>[e[r]]));t.push(new n(a,e._datatype))},o=0;o<r[1];o++)a(o);return t},n.prototype.toArray=function(){return j_(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(e){return RE(this._data,e)},n.prototype.toString=function(){return RE(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(e){if(e){if(oM(e)&&(e=e.toNumber()),!aM(e)||!tE(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var t=e>0?e:0,r=e<0?-e:0,i=this._size[0],a=this._size[1],o=Math.min(i-r,a-t),s=[],l=0;l<o;l++)s[l]=this._data[l+r][l+t];return new n({data:s,size:[o],datatype:this._datatype})},n.diagonal=function(e,t,r,i){if(!dM(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(oM(e)&&(e=e.toNumber()),!aM(e)||!tE(e)||e<1)throw new Error("Size values must be positive integers");return e})),r){if(oM(r)&&(r=r.toNumber()),!aM(r)||!tE(r))throw new TypeError("The parameter k must be an integer number")}else r=0;var a,o=r>0?r:0,s=r<0?-r:0,l=e[0],u=e[1],c=Math.min(l-s,u-o);if(dM(t)){if(t.length!==c)throw new Error("Invalid value array length");a=function(e){return t[e]}}else if(pM(t)){var h=t.size();if(1!==h.length||h[0]!==c)throw new Error("Invalid matrix length");a=function(e){return t.get([e])}}else a=function(){return t};i||(i=oM(a(0))?a(0).mul(0):0);var d=[];if(e.length>0){d=XE(d,e,i);for(var p=0;p<c;p++)d[p+s][p+o]=a(p)}return new n({data:d,size:[l,u]})},n.fromJSON=function(e){return new n(e)},n.prototype.swapRows=function(e,t){if(!aM(e)||!tE(e)||!aM(t)||!tE(t))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return GE(e,this._size[0]),GE(t,this._size[0]),n._swapRows(e,t,this._data),this},n._swapRows=function(e,t,n){var r=n[e];n[e]=n[t],n[t]=r},n}),{isClass:!0}),nF=$M("replacer",[],(()=>function(e,t){return"number"!==typeof t||isFinite(t)&&!isNaN(t)?"bigint"===typeof t?{mathjs:"bigint",value:String(t)}:t:{mathjs:"number",value:String(t)}})),rF=function(){return rF=iC.create,iC},iF=$M("typed",["?BigNumber","?Complex","?DenseMatrix","?Fraction"],(function(e){var{BigNumber:t,Complex:n,DenseMatrix:r,Fraction:i}=e,a=rF();return a.clear(),a.addTypes([{name:"number",test:aM},{name:"Complex",test:lM},{name:"BigNumber",test:oM},{name:"bigint",test:sM},{name:"Fraction",test:uM},{name:"Unit",test:cM},{name:"identifier",test:e=>hM&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC4\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(e)},{name:"string",test:hM},{name:"Chain",test:WM},{name:"Array",test:dM},{name:"Matrix",test:pM},{name:"DenseMatrix",test:mM},{name:"SparseMatrix",test:gM},{name:"Range",test:vM},{name:"Index",test:yM},{name:"boolean",test:xM},{name:"ResultSet",test:bM},{name:"Help",test:wM},{name:"function",test:SM},{name:"Date",test:_M},{name:"RegExp",test:MM},{name:"null",test:TM},{name:"undefined",test:CM},{name:"AccessorNode",test:DM},{name:"ArrayNode",test:NM},{name:"AssignmentNode",test:RM},{name:"BlockNode",test:kM},{name:"ConditionalNode",test:IM},{name:"ConstantNode",test:FM},{name:"FunctionNode",test:BM},{name:"FunctionAssignmentNode",test:OM},{name:"IndexNode",test:LM},{name:"Node",test:zM},{name:"ObjectNode",test:UM},{name:"OperatorNode",test:HM},{name:"ParenthesisNode",test:qM},{name:"RangeNode",test:VM},{name:"RelationalNode",test:jM},{name:"SymbolNode",test:GM},{name:"Map",test:AM},{name:"Object",test:EM}]),a.addConversions([{from:"number",to:"BigNumber",convert:function(e){if(t||aF(e),e.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t(e)}},{from:"number",to:"Complex",convert:function(e){return n||oF(e),new n(e,0)}},{from:"BigNumber",to:"Complex",convert:function(e){return n||oF(e),new n(e.toNumber(),0)}},{from:"bigint",to:"number",convert:function(e){if(e>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+e+")");return Number(e)}},{from:"bigint",to:"BigNumber",convert:function(e){return t||aF(e),new t(e.toString())}},{from:"bigint",to:"Fraction",convert:function(e){return i||sF(e),new i(e)}},{from:"Fraction",to:"BigNumber",convert:function(e){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return n||oF(e),new n(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){i||sF(e);var t=new i(e);if(t.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return t}},{from:"string",to:"number",convert:function(e){var t=Number(e);if(isNaN(t))throw new Error('Cannot convert "'+e+'" to a number');return t}},{from:"string",to:"BigNumber",convert:function(e){t||aF(e);try{return new t(e)}catch(n){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(e){try{return BigInt(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(e){i||sF(e);try{return new i(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){n||oF(e);try{return new n(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(e){return+e}},{from:"boolean",to:"BigNumber",convert:function(e){return t||aF(e),new t(+e)}},{from:"boolean",to:"bigint",convert:function(e){return BigInt(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return i||sF(e),new i(+e)}},{from:"boolean",to:"string",convert:function(e){return String(e)}},{from:"Array",to:"Matrix",convert:function(e){return r||function(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}(),new r(e)}},{from:"Matrix",to:"Array",convert:function(e){return e.valueOf()}}]),a.onMismatch=(e,t,n)=>{var r=a.createError(e,t,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===t.length&&fM(t[0])&&n.some((e=>!e.params.includes(",")))){var i=new TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw i.data=r.data,i}throw r},a.onMismatch=(e,t,n)=>{var r=a.createError(e,t,n);if(["wrongType","mismatch"].includes(r.data.category)&&1===t.length&&fM(t[0])&&n.some((e=>!e.params.includes(",")))){var i=new TypeError("Function '".concat(e,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(e,")'."));throw i.data=r.data,i}throw r},a}));function aF(e){throw new Error("Cannot convert value ".concat(e," into a BigNumber: no class 'BigNumber' provided"))}function oF(e){throw new Error("Cannot convert value ".concat(e," into a Complex number: no class 'Complex' provided"))}function sF(e){throw new Error("Cannot convert value ".concat(e," into a Fraction, no class 'Fraction' provided."))}var lF="number",uF="number, number";function cF(e){return Math.abs(e)}function hF(e,t){return e+t}function dF(e,t){return e-t}function pF(e,t){return e*t}function fF(e){return-e}function mF(e){return e}function gF(e){return sE(e)}function vF(e){return e*e*e}function yF(e){return Math.exp(e)}function xF(e){return lE(e)}function bF(e,t){if(!tE(e)||!tE(t))throw new Error("Parameters in function lcm must be integer numbers");if(0===e||0===t)return 0;for(var n,r=e*t;0!==t;)t=e%(n=t),e=n;return Math.abs(r/e)}function wF(e){return aE(e)}function SF(e){return iE(e)}function _F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t<0;if(n&&(t=-t),0===t)throw new Error("Root must be non-zero");if(e<0&&Math.abs(t)%2!==1)throw new Error("Root must be odd when a is negative.");if(0===e)return n?1/0:0;if(!isFinite(e))return n?0:e;var r=Math.pow(Math.abs(e),1/t);return r=e<0?-r:r,n?1/r:r}function MF(e){return rE(e)}function EF(e){return e*e}function AF(e,t){var n,r,i,a=0,o=1,s=1,l=0;if(!tE(e)||!tE(t))throw new Error("Parameters in function xgcd must be integer numbers");for(;t;)i=e-(r=Math.floor(e/t))*t,n=a,a=o-r*a,o=n,n=s,s=l-r*s,l=n,e=t,t=i;return e<0?[-e,-o,-l]:[e,e?o:0,l]}function TF(e,t){return e*e<1&&t===1/0||e*e>1&&t===-1/0?0:Math.pow(e,t)}function CF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!tE(t)||t<0||t>15)throw new Error("Number of decimals in function round must be an integer from 0 to 15 inclusive");return parseFloat(pE(e,t))}cF.signature=lF,hF.signature=uF,dF.signature=uF,pF.signature=uF,fF.signature=lF,mF.signature=lF,gF.signature=lF,vF.signature=lF,yF.signature=lF,xF.signature=lF,bF.signature=uF,wF.signature=lF,SF.signature=lF,MF.signature=lF,EF.signature=lF,AF.signature=uF,TF.signature=uF;var DF=$M("abs",["typed"],(e=>{var{typed:t}=e;return t("abs",{number:cF,"Complex | BigNumber | Fraction | Unit":e=>e.abs(),bigint:e=>e<0n?-e:e,"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0)))})})),NF="acos",RF=$M(NF,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(NF,{number:function(e){return e>=-1&&e<=1||n.predictable?Math.acos(e):new r(e,0).acos()},Complex:function(e){return e.acos()},BigNumber:function(e){return e.acos()}})})),kF="number";function IF(e){return yE(e)}function FF(e){return Math.atan(1/e)}function PF(e){return isFinite(e)?(Math.log((e+1)/e)+Math.log(e/(e-1)))/2:0}function OF(e){return Math.asin(1/e)}function BF(e){var t=1/e;return Math.log(t+Math.sqrt(t*t+1))}function LF(e){return Math.acos(1/e)}function zF(e){var t=1/e,n=Math.sqrt(t*t-1);return Math.log(n+t)}function UF(e){return xE(e)}function HF(e){return bE(e)}function qF(e){return 1/Math.tan(e)}function VF(e){var t=Math.exp(2*e);return(t+1)/(t-1)}function jF(e){return 1/Math.sin(e)}function GF(e){return 0===e?Number.POSITIVE_INFINITY:Math.abs(2/(Math.exp(e)-Math.exp(-e)))*rE(e)}function WF(e){return 1/Math.cos(e)}function XF(e){return 2/(Math.exp(e)+Math.exp(-e))}function YF(e){return SE(e)}IF.signature=kF,FF.signature=kF,PF.signature=kF,OF.signature=kF,BF.signature=kF,LF.signature=kF,zF.signature=kF,UF.signature=kF,HF.signature=kF,qF.signature=kF,VF.signature=kF,jF.signature=kF,GF.signature=kF,WF.signature=kF,XF.signature=kF,YF.signature=kF;var $F="acot",ZF=$M($F,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t($F,{number:FF,Complex:function(e){return e.acot()},BigNumber:function(e){return new n(1).div(e).atan()}})})),JF="acsc",KF=$M(JF,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(JF,{number:function(e){return e<=-1||e>=1||n.predictable?OF(e):new r(e,0).acsc()},Complex:function(e){return e.acsc()},BigNumber:function(e){return new i(1).div(e).asin()}})})),QF="addScalar",eP=$M(QF,["typed"],(e=>{var{typed:t}=e;return t(QF,{"number, number":hF,"Complex, Complex":function(e,t){return e.add(t)},"BigNumber, BigNumber":function(e,t){return e.plus(t)},"bigint, bigint":function(e,t){return e+t},"Fraction, Fraction":function(e,t){return e.add(t)},"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=t.find(e,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})})),tP=$M("arg",["typed"],(e=>{var{typed:t}=e;return t("arg",{number:function(e){return Math.atan2(0,e)},BigNumber:function(e){return e.constructor.atan2(0,e)},Complex:function(e){return e.arg()},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),nP="asech",rP=$M(nP,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(nP,{number:function(e){if(e<=1&&e>=-1||n.predictable){var t=1/e;if(t>0||n.predictable)return zF(e);var i=Math.sqrt(t*t-1);return new r(Math.log(i-t),Math.PI)}return new r(e,0).asech()},Complex:function(e){return e.asech()},BigNumber:function(e){return new i(1).div(e).acosh()}})})),iP=$M("asinh",["typed"],(e=>{var{typed:t}=e;return t("asinh",{number:UF,Complex:function(e){return e.asinh()},BigNumber:function(e){return e.asinh()}})})),aP=$M("atan",["typed"],(e=>{var{typed:t}=e;return t("atan",{number:function(e){return Math.atan(e)},Complex:function(e){return e.atan()},BigNumber:function(e){return e.atan()}})})),oP="atanh",sP=$M(oP,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(oP,{number:function(e){return e<=1&&e>=-1||n.predictable?HF(e):new r(e,0).atanh()},Complex:function(e){return e.atanh()},BigNumber:function(e){return e.atanh()}})})),lP=$M("bigint",["typed"],(e=>{var{typed:t}=e,n=t("bigint",{"":function(){return 0n},bigint:function(e){return e},number:function(e){return BigInt(e.toFixed())},BigNumber:function(e){return BigInt(e.round().toString())},Fraction:function(e){return BigInt(e.valueOf().toFixed())},"string | boolean":function(e){return BigInt(e)},null:function(e){return 0n},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))});return n.fromJSON=function(e){return BigInt(e.value)},n})),uP="bitNot",cP=$M(uP,["typed"],(e=>{var{typed:t}=e;return t(uP,{number:pD,BigNumber:iD,bigint:e=>~e,"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),hP="boolean",dP=$M(hP,["typed"],(e=>{var{typed:t}=e;return t(hP,{"":function(){return!1},boolean:function(e){return e},number:function(e){return!!e},null:function(e){return!1},BigNumber:function(e){return!e.isZero()},string:function(e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;var n=Number(e);if(""!==e&&!isNaN(n))return!!n;throw new Error('Cannot convert "'+e+'" to a boolean')},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),pP="clone",fP=$M(pP,["typed"],(e=>{var{typed:t}=e;return t(pP,{any:j_})}));function mP(e,t){if(t<e)return 1;if(t===e)return t;var n=t+e>>1;return mP(e,n)*mP(n+1,t)}function gP(e,t){if(!tE(e)||e<0)throw new TypeError("Positive integer value expected in function combinations");if(!tE(t)||t<0)throw new TypeError("Positive integer value expected in function combinations");if(t>e)throw new TypeError("k must be less than or equal to n");for(var n=e-t,r=1,i=2,a=t<n?t:n,o=t<n?n+1:t+1;o<=e;++o)for(r*=o;i<=a&&r%i===0;)r/=i,++i;return i<=a&&(r/=mP(i,a)),r}gP.signature="number, number";var vP="combinations",yP=$M(vP,["typed"],(e=>{var{typed:t}=e;return t(vP,{"number, number":gP,"BigNumber, BigNumber":function(e,t){var n,r,i=e.constructor,a=e.minus(t),o=new i(1);if(!xP(e)||!xP(t))throw new TypeError("Positive integer value expected in function combinations");if(t.gt(e))throw new TypeError("k must be less than n in function combinations");if(n=o,t.lt(a))for(r=o;r.lte(a);r=r.plus(o))n=n.times(t.plus(r)).dividedBy(r);else for(r=o;r.lte(t);r=r.plus(o))n=n.times(a.plus(r)).dividedBy(r);return n}})}));function xP(e){return e.isInteger()&&e.gte(0)}var bP=$M("complex",["typed","Complex"],(e=>{var{typed:t,Complex:n}=e;return t("complex",{"":function(){return n.ZERO},number:function(e){return new n(e,0)},"number, number":function(e,t){return new n(e,t)},"BigNumber, BigNumber":function(e,t){return new n(e.toNumber(),t.toNumber())},Fraction:function(e){return new n(e.valueOf(),0)},Complex:function(e){return e.clone()},string:function(e){return n(e)},null:function(e){return n(0)},Object:function(e){if("re"in e&&"im"in e)return new n(e.re,e.im);if("r"in e&&"phi"in e||"abs"in e&&"arg"in e)return new n(e);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),wP="conj",SP=$M(wP,["typed"],(e=>{var{typed:t}=e;return t(wP,{"number | BigNumber | Fraction":e=>e,Complex:e=>e.conjugate(),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),_P=$M("trigUnit",["typed"],(e=>{var{typed:t}=e;return{Unit:t.referToSelf((e=>n=>{if(!n.hasBase(n.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return t.find(e,n.valueType())(n.value)}))}})),MP=$M("cos",["typed"],(e=>{var{typed:t}=e,n=_P({typed:t});return t("cos",{number:Math.cos,"Complex | BigNumber":e=>e.cos()},n)})),EP=$M("cot",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("cot",{number:qF,Complex:e=>e.cot(),BigNumber:e=>new n(1).div(e.tan())},_P({typed:t}))})),AP=$M("csc",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("csc",{number:jF,Complex:e=>e.csc(),BigNumber:e=>new n(1).div(e.sin())},_P({typed:t}))})),TP="cube",CP=$M(TP,["typed"],(e=>{var{typed:t}=e;return t(TP,{number:vF,Complex:function(e){return e.mul(e).mul(e)},BigNumber:function(e){return e.times(e).times(e)},bigint:function(e){return e*e*e},Fraction:function(e){return e.pow(3)},Unit:function(e){return e.pow(3)}})}));function DP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-9,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return!e.isNaN()&&!t.isNaN()&&(e.isFinite()&&t.isFinite()?!!e.eq(t)||e.minus(t).abs().lte(e.constructor.max(e.constructor.max(e.abs(),t.abs()).mul(n),r)):e.eq(t))}var NP=$M("compareUnits",["typed"],(e=>{var{typed:t}=e;return{"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(!n.equalBase(r))throw new Error("Cannot compare units with different base");return t.find(e,[n.valueType(),r.valueType()])(n.value,r.value)}))}})),RP="equalScalar",kP=$M(RP,["typed","config"],(e=>{var{typed:t,config:n}=e,r=NP({typed:t});return t(RP,{"boolean, boolean":function(e,t){return e===t},"number, number":function(e,t){return vE(e,t,n.relTol,n.absTol)},"BigNumber, BigNumber":function(e,t){return e.eq(t)||DP(e,t,n.relTol,n.absTol)},"bigint, bigint":function(e,t){return e===t},"Fraction, Fraction":function(e,t){return e.equals(t)},"Complex, Complex":function(e,t){return function(e,t,n,r){return vE(e.re,t.re,n,r)&&vE(e.im,t.im,n,r)}(e,t,n.relTol,n.absTol)}},r)})),IP=($M(RP,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(RP,{"number, number":function(e,t){return vE(e,t,n.relTol,n.absTol)}})})),$M("erf",["typed"],(e=>{var{typed:t}=e;return t("name",{number:function(e){var t=Math.abs(e);return t>=LP?rE(e):t<=FP?rE(e)*function(e){var t,n=e*e,r=OP[0][4]*n,i=n;for(t=0;t<3;t+=1)r=(r+OP[0][t])*n,i=(i+BP[0][t])*n;return e*(r+OP[0][3])/(i+BP[0][3])}(t):t<=4?rE(e)*(1-function(e){var t,n=OP[1][8]*e,r=e;for(t=0;t<7;t+=1)n=(n+OP[1][t])*e,r=(r+BP[1][t])*e;var i=(n+OP[1][7])/(r+BP[1][7]),a=parseInt(16*e)/16,o=(e-a)*(e+a);return Math.exp(-a*a)*Math.exp(-o)*i}(t)):rE(e)*(1-function(e){var t,n=1/(e*e),r=OP[2][5]*n,i=n;for(t=0;t<4;t+=1)r=(r+OP[2][t])*n,i=(i+BP[2][t])*n;var a=n*(r+OP[2][4])/(i+BP[2][4]);a=(PP-a)/e,n=parseInt(16*e)/16;var o=(e-n)*(e+n);return Math.exp(-n*n)*Math.exp(-o)*a}(t))},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})}))),FP=.46875,PP=.5641895835477563,OP=[[3.1611237438705655,113.86415415105016,377.485237685302,3209.3775891384694,.18577770618460315],[.5641884969886701,8.883149794388377,66.11919063714163,298.6351381974001,881.952221241769,1712.0476126340707,2051.0783778260716,1230.3393547979972,2.1531153547440383e-8],[.30532663496123236,.36034489994980445,.12578172611122926,.016083785148742275,.0006587491615298378,.016315387137302097]],BP=[[23.601290952344122,244.02463793444417,1282.6165260773723,2844.236833439171],[15.744926110709835,117.6939508913125,537.1811018620099,1621.3895745666903,3290.7992357334597,4362.619090143247,3439.3676741437216,1230.3393548037495],[2.568520192289822,1.8729528499234604,.5279051029514285,.06051834131244132,.0023352049762686918]],LP=Math.pow(2,53),zP=$M("exp",["typed"],(e=>{var{typed:t}=e;return t("exp",{number:yF,Complex:function(e){return e.exp()},BigNumber:function(e){return e.exp()}})})),UP="expm1",HP=$M(UP,["typed","Complex"],(e=>{var{typed:t,Complex:n}=e;return t(UP,{number:xF,Complex:function(e){var t=Math.exp(e.re);return new n(t*Math.cos(e.im)-1,t*Math.sin(e.im))},BigNumber:function(e){return e.exp().minus(1)}})})),qP="flatten",VP=$M(qP,["typed"],(e=>{var{typed:t}=e;return t(qP,{Array:function(e){return nA(e)},Matrix:function(e){return e.create(nA(e.toArray()),e.datatype())}})})),jP="format",GP=$M(jP,["typed"],(e=>{var{typed:t}=e;return t(jP,{any:RE,"any, Object | function | number | BigNumber":RE})})),WP="getMatrixDataType",XP=$M(WP,["typed"],(e=>{var{typed:t}=e;return t(WP,{Array:function(e){return uA(e,XM)},Matrix:function(e){return e.getDataType()}})})),YP=$M("hex",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("hex",{"number | BigNumber":function(e){return n(e,{notation:"hex"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"hex",wordSize:t})}})})),$P=$M("im",["typed"],(e=>{var{typed:t}=e;return t("im",{number:()=>0,"BigNumber | Fraction":e=>e.mul(0),Complex:e=>e.im,"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),ZP="isInteger",JP=$M(ZP,["typed"],(e=>{var{typed:t}=e;return t(ZP,{number:tE,BigNumber:function(e){return e.isInt()},bigint:function(e){return!0},Fraction:function(e){return 1n===e.d},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),KP="number";function QP(e){return e<0}function eO(e){return e>0}function tO(e){return Number.isNaN(e)}QP.signature=KP,eO.signature=KP,tO.signature=KP;var nO="isNegative",rO=$M(nO,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(nO,{number:e=>!vE(e,0,n.relTol,n.absTol)&&QP(e),BigNumber:e=>!DP(e,new e.constructor(0),n.relTol,n.absTol)&&(e.isNeg()&&!e.isZero()&&!e.isNaN()),bigint:e=>e<0n,Fraction:e=>e.s<0n,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),iO="isPositive",aO=$M(iO,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(iO,{number:e=>!vE(e,0,n.relTol,n.absTol)&&eO(e),BigNumber:e=>!DP(e,new e.constructor(0),n.relTol,n.absTol)&&(!e.isNeg()&&!e.isZero()&&!e.isNaN()),bigint:e=>e>0n,Fraction:e=>e.s>0n&&e.n>0n,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),oO="isZero",sO=$M(oO,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(oO,{"number | BigNumber | Complex | Fraction":e=>n(e,0),bigint:e=>0n===e,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})}));function lO(e){var t;if(tE(e))return e<=0?isFinite(e)?1/0:NaN:e>171?1/0:mP(1,e-1);if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*lO(1-e));if(e>=171.35)return 1/0;if(e>85){var n=e*e,r=n*e,i=r*e,a=i*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*n)-139/(51840*r)-571/(2488320*i)+163879/(209018880*a)+5246819/(75246796800*a*e))}--e,t=cO[0];for(var o=1;o<cO.length;++o)t+=cO[o]/(e+o);var s=e+uO+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*t}lO.signature="number";var uO=4.7421875,cO=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],hO=.9189385332046728,dO=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18];function pO(e){if(e<0)return NaN;if(0===e)return 1/0;if(!isFinite(e))return e;if(e<.5)return Math.log(Math.PI/Math.sin(Math.PI*e))-pO(1-e);for(var t=(e-=1)+5+.5,n=dO[0],r=6;r>=1;r--)n+=dO[r]/(e+r);return hO+(e+.5)*Math.log(t)-t+Math.log(n)}pO.signature="number";var fO="lgamma",mO=$M(fO,["Complex","typed"],(e=>{var{Complex:t,typed:n}=e,r=[-.029550653594771242,.00641025641025641,-.0019175269175269176,.0008417508417508417,-.0005952380952380953,.0007936507936507937,-.002777777777777778,.08333333333333333];return n(fO,{number:pO,Complex:function e(n){if(n.isNaN())return new t(NaN,NaN);if(0===n.im)return new t(pO(n.re),0);if(n.re>=7||Math.abs(n.im)>=7)return i(n);if(n.re<=.1){var r=(l=6.283185307179586,u=n.im,((l>0||!(l<0)&&1/l===1/0)^(u>0||!(u<0)&&1/u===1/0)?-l:l)*Math.floor(.5*n.re+.25)),o=n.mul(Math.PI).sin().log(),s=e(new t(1-n.re,-n.im));return new t(1.1447298858494002,r).sub(o).sub(s)}return n.im>=0?a(n):a(n.conjugate()).conjugate();var l,u},BigNumber:function(){throw new Error("mathjs doesn't yet provide an implementation of the algorithm lgamma for BigNumber")}});function i(e){for(var n=e.sub(.5).mul(e.log()).sub(e).add(hO),i=new t(1,0).div(e),a=i.div(e),o=r[0],s=r[1],l=2*a.re,u=a.re*a.re+a.im*a.im,c=2;c<8;c++){var h=s;s=-u*o+r[c],o=l*o+h}var d=i.mul(a.mul(o).add(s));return n.add(d)}function a(e){var n=0,r=0,a=e;for(e=e.add(1);e.re<=7;){var o=(a=a.mul(e)).im<0?1:0;0!==o&&0===r&&n++,r=o,e=e.add(1)}return i(e).sub(a.log()).sub(new t(0,2*n*Math.PI*1))}})),gO="log10",vO=$M(gO,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(gO,{number:function(e){return e>=0||n.predictable?wF(e):new r(e,0).log().div(Math.LN10)},Complex:function(e){return new r(e).log().div(Math.LN10)},BigNumber:function(e){return!e.isNegative()||n.predictable?e.log():new r(e.toNumber(),0).log().div(Math.LN10)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),yO="log2",xO=$M(yO,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(yO,{number:function(e){return e>=0||n.predictable?SF(e):i(new r(e,0))},Complex:i,BigNumber:function(e){return!e.isNegative()||n.predictable?e.log(2):i(new r(e.toNumber(),0))},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))});function i(e){var t=Math.sqrt(e.re*e.re+e.im*e.im);return new r(Math.log2?Math.log2(t):Math.log(t)/Math.LN2,Math.atan2(e.im,e.re)/Math.LN2)}})),bO=$M("multiplyScalar",["typed"],(e=>{var{typed:t}=e;return t("multiplyScalar",{"number, number":pF,"Complex, Complex":function(e,t){return e.mul(t)},"BigNumber, BigNumber":function(e,t){return e.times(t)},"bigint, bigint":function(e,t){return e*t},"Fraction, Fraction":function(e,t){return e.mul(t)},"number | Fraction | BigNumber | Complex, Unit":(e,t)=>t.multiply(e),"Unit, number | Fraction | BigNumber | Complex | Unit":(e,t)=>e.multiply(t)})})),wO=$M("not",["typed"],(e=>{var{typed:t}=e;return t("not",{"null | undefined":()=>!0,number:IC,Complex:function(e){return 0===e.re&&0===e.im},BigNumber:function(e){return e.isZero()||e.isNaN()},bigint:e=>!e,Unit:t.referToSelf((e=>n=>t.find(e,n.valueType())(n.value))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})}));var SO=$M("number",["typed"],(e=>{var{typed:t}=e,n=t("number",{"":function(){return 0},number:function(e){return e},string:function(e){if("NaN"===e)return NaN;var t=function(e){var t=e.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);return t?{input:e,radix:{"0b":2,"0o":8,"0x":16}[t[1]],integerPart:t[2],fractionalPart:t[3]}:null}(e);if(t)return function(e){for(var t=parseInt(e.integerPart,e.radix),n=0,r=0;r<e.fractionalPart.length;r++)n+=parseInt(e.fractionalPart[r],e.radix)/Math.pow(e.radix,r+1);var i=t+n;if(isNaN(i))throw new SyntaxError('String "'+e.input+'" is not a valid number');return i}(t);var n=0,r=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);r&&(n=Number(r[2]),e=r[1]);var i=Number(e);if(isNaN(i))throw new SyntaxError('String "'+e+'" is not a valid number');if(r){if(i>2**n-1)throw new SyntaxError('String "'.concat(e,'" is out of range'));i>=2**(n-1)&&(i-=2**n)}return i},BigNumber:function(e){return e.toNumber()},bigint:function(e){return Number(e)},Fraction:function(e){return e.valueOf()},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),null:function(e){return 0},"Unit, string | Unit":function(e,t){return e.toNumber(t)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))});return n.fromJSON=function(e){return parseFloat(e.value)},n})),_O=$M("oct",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("oct",{"number | BigNumber":function(e){return n(e,{notation:"oct"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"oct",wordSize:t})}})})),MO=n(334),EO=MO(Date.now());function AO(e){var t,n;return t=null===(n=e)?EO:MO(String(n)),function(){return t()}}var TO="pickRandom",CO=$M(TO,["typed","config","?on"],(e=>{var{typed:t,config:n,on:r}=e,i=AO(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=AO(e.randomSeed))})),t(TO,{"Array | Matrix":function(e){return a(e,{})},"Array | Matrix, Object":function(e,t){return a(e,t)},"Array | Matrix, number":function(e,t){return a(e,{number:t})},"Array | Matrix, Array | Matrix":function(e,t){return a(e,{weights:t})},"Array | Matrix, Array | Matrix, number":function(e,t,n){return a(e,{number:n,weights:t})},"Array | Matrix, number, Array | Matrix":function(e,t,n){return a(e,{number:t,weights:n})}});function a(e,t){var{number:n,weights:r,elementWise:a=!0}=t,o="undefined"===typeof n;o&&(n=1);var s=pM(e)?e.create:pM(r)?r.create:null;e=e.valueOf(),r&&(r=r.valueOf()),!0===a&&(e=nA(e),r=nA(r));var l=0;if("undefined"!==typeof r){if(r.length!==e.length)throw new Error("Weights must have the same length as possibles");for(var u=0,c=r.length;u<c;u++){if(!aM(r[u])||r[u]<0)throw new Error("Weights must be an array of positive numbers");l+=r[u]}}for(var h,d=e.length,p=[];p.length<n;){if("undefined"===typeof r)h=e[Math.floor(i()*d)];else for(var f=i()*l,m=0,g=e.length;m<g;m++)if((f-=r[m])<0){h=e[m];break}p.push(h)}return o?p[0]:s?s(p):p}}));function DO(e,t){var n=[];if((e=e.slice(0)).length>1)for(var r=0,i=e.shift();r<i;r++)n.push(DO(e,t));else for(var a=0,o=e.shift();a<o;a++)n.push(t());return n}var NO="random",RO=$M(NO,["typed","config","?on"],(e=>{var{typed:t,config:n,on:r}=e,i=AO(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=AO(e.randomSeed))})),t(NO,{"":()=>o(0,1),number:e=>o(0,e),"number, number":(e,t)=>o(e,t),"Array | Matrix":e=>a(e,0,1),"Array | Matrix, number":(e,t)=>a(e,0,t),"Array | Matrix, number, number":(e,t,n)=>a(e,t,n)});function a(e,t,n){var r=DO(e.valueOf(),(()=>o(t,n)));return pM(e)?e.create(r,"number"):r}function o(e,t){return e+i()*(t-e)}})),kO=$M("re",["typed"],(e=>{var{typed:t}=e;return t("re",{"number | BigNumber | Fraction":e=>e,Complex:e=>e.re,"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),IO=$M("sec",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("sec",{number:WF,Complex:e=>e.sec(),BigNumber:e=>new n(1).div(e.cos())},_P({typed:t}))})),FO="sign",PO=$M(FO,["typed","BigNumber","Fraction","complex"],(e=>{var{typed:t,BigNumber:n,complex:r,Fraction:i}=e;return t(FO,{number:MF,Complex:function(e){return 0===e.im?r(MF(e.re)):e.sign()},BigNumber:function(e){return new n(e.cmp(0))},bigint:function(e){return e>0n?1n:e<0n?-1n:0n},Fraction:function(e){return new i(e.s)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0))),Unit:t.referToSelf((e=>n=>{if(!n._isDerived()&&0!==n.units[0].unit.offset)throw new TypeError("sign is ambiguous for units with offset");return t.find(e,n.valueType())(n.value)}))})})),OO=$M("sin",["typed"],(e=>{var{typed:t}=e,n=_P({typed:t});return t("sin",{number:Math.sin,"Complex | BigNumber":e=>e.sin()},n)})),BO=$M("SparseMatrix",["typed","equalScalar","Matrix"],(e=>{var{typed:t,equalScalar:n,Matrix:r}=e;function i(e,t){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!hM(t))throw new Error("Invalid datatype: "+t);if(pM(e))!function(e,t,n){"SparseMatrix"===t.type?(e._values=t._values?j_(t._values):void 0,e._index=j_(t._index),e._ptr=j_(t._ptr),e._size=j_(t._size),e._datatype=n||t._datatype):a(e,t.valueOf(),n||t._datatype)}(this,e,t);else if(e&&dM(e.index)&&dM(e.ptr)&&dM(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=t||e.datatype;else if(dM(e))a(this,e,t);else{if(e)throw new TypeError("Unsupported type of data ("+XM(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=t}}function a(e,r,i){e._values=[],e._index=[],e._ptr=[],e._datatype=i;var a=r.length,o=0,s=n,l=0;if(hM(i)&&(s=t.find(n,[i,i])||n,l=t.convert(0,i)),a>0){var u=0;do{e._ptr.push(e._index.length);for(var c=0;c<a;c++){var h=r[c];if(dM(h)){if(0===u&&o<h.length&&(o=h.length),u<h.length){var d=h[u];s(d,l)||(e._values.push(d),e._index.push(c))}}else 0===u&&o<1&&(o=1),s(h,l)||(e._values.push(h),e._index.push(c))}u++}while(u<o)}e._ptr.push(e._index.length),e._size=[a,o]}function o(e,t,n,r){if(n-t===0)return n;for(var i=t;i<n;i++)if(r[i]===e)return i;return t}function s(e,t,n,r,i,a,o){i.splice(e,0,r),a.splice(e,0,t);for(var s=n+1;s<o.length;s++)o[s]++}function l(e,r,i,a){var o=a||0,s=n,l=0;hM(e._datatype)&&(s=t.find(n,[e._datatype,e._datatype])||n,l=t.convert(0,e._datatype),o=t.convert(o,e._datatype));var u,c,h,d=!s(o,l),p=e._size[0],f=e._size[1];if(i>f){for(c=f;c<i;c++)if(e._ptr[c]=e._values.length,d)for(u=0;u<p;u++)e._values.push(o),e._index.push(u);e._ptr[i]=e._values.length}else i<f&&(e._ptr.splice(i+1,f-i),e._values.splice(e._ptr[i],e._values.length),e._index.splice(e._ptr[i],e._index.length));if(f=i,r>p){if(d){var m=0;for(c=0;c<f;c++){e._ptr[c]=e._ptr[c]+m,h=e._ptr[c+1]+m;var g=0;for(u=p;u<r;u++,g++)e._values.splice(h+g,0,o),e._index.splice(h+g,0,u),m++}e._ptr[f]=e._values.length}}else if(r<p){var v=0;for(c=0;c<f;c++){e._ptr[c]=e._ptr[c]-v;var y=e._ptr[c],x=e._ptr[c+1]-v;for(h=y;h<x;h++)(u=e._index[h])>r-1&&(e._values.splice(h,1),e._index.splice(h,1),v++)}e._ptr[c]=e._values.length}return e._size[0]=r,e._size[1]=i,e}function u(e,t,n,r,i){var a,o,s=r[0],l=r[1],u=[];for(a=0;a<s;a++)for(u[a]=[],o=0;o<l;o++)u[a][o]=0;for(o=0;o<l;o++)for(var c=n[o],h=n[o+1],d=c;d<h;d++)u[a=t[d]][o]=e?i?j_(e[d]):e[d]:1;return u}return i.prototype=new r,i.prototype.createSparseMatrix=function(e,t){return new i(e,t)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return uA(this._values,XM)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(e,t){return new i(e,t)},i.prototype.density=function(){var e=this._size[0],t=this._size[1];return 0!==e&&0!==t?this._index.length/(e*t):0},i.prototype.subset=function(e,t,n){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return function(e,t){if(!yM(t))throw new TypeError("Invalid index");if(t.isScalar())return e.get(t.min());var n,r,a,o,s=t.size();if(s.length!==e._size.length)throw new zE(s.length,e._size.length);var l=t.min(),u=t.max();for(n=0,r=e._size.length;n<r;n++)GE(l[n],e._size[n]),GE(u[n],e._size[n]);var c=e._values,h=e._index,d=e._ptr,p=t.dimension(0),f=t.dimension(1),m=[],g=[];p.forEach((function(e,t){g[e]=t[0],m[e]=!0}));var v=c?[]:void 0,y=[],x=[];return f.forEach((function(e){for(x.push(y.length),a=d[e],o=d[e+1];a<o;a++)n=h[a],!0===m[n]&&(y.push(g[n]),v&&v.push(c[a]))})),x.push(y.length),new i({values:v,index:y,ptr:x,size:s,datatype:e._datatype})}(this,e);case 2:case 3:return function(e,t,n,r){if(!t||!0!==t.isIndex)throw new TypeError("Invalid index");var i,a=t.size(),o=t.isScalar();pM(n)?(i=n.size(),n=n.toArray()):i=HE(n);if(o){if(0!==i.length)throw new TypeError("Scalar expected");e.set(t.min(),n,r)}else{if(1!==a.length&&2!==a.length)throw new zE(a.length,e._size.length,"<");if(i.length<a.length){for(var s=0,l=0;1===a[s]&&1===i[s];)s++;for(;1===a[s];)l++,s++;n=eA(n,a.length,l,i)}if(!W_(a,i))throw new zE(a,i,">");if(1===a.length){t.dimension(0).forEach((function(t,i){GE(t),e.set([t,0],n[i[0]],r)}))}else{var u=t.dimension(0),c=t.dimension(1);u.forEach((function(t,i){GE(t),c.forEach((function(a,o){GE(a),e.set([t,a],n[i[0]][o[0]],r)}))}))}}return e}(this,e,t,n);default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.get=function(e){if(!dM(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new zE(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var t=e[0],n=e[1];GE(t,this._size[0]),GE(n,this._size[1]);var r=o(t,this._ptr[n],this._ptr[n+1],this._index);return r<this._ptr[n+1]&&this._index[r]===t?this._values[r]:0},i.prototype.set=function(e,r,i){if(!dM(e))throw new TypeError("Array expected");if(e.length!==this._size.length)throw new zE(e.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var a=e[0],u=e[1],c=this._size[0],h=this._size[1],d=n,p=0;hM(this._datatype)&&(d=t.find(n,[this._datatype,this._datatype])||n,p=t.convert(0,this._datatype)),(a>c-1||u>h-1)&&(l(this,Math.max(a+1,c),Math.max(u+1,h),i),c=this._size[0],h=this._size[1]),GE(a,c),GE(u,h);var f=o(a,this._ptr[u],this._ptr[u+1],this._index);return f<this._ptr[u+1]&&this._index[f]===a?d(r,p)?function(e,t,n,r,i){n.splice(e,1),r.splice(e,1);for(var a=t+1;a<i.length;a++)i[a]--}(f,u,this._values,this._index,this._ptr):this._values[f]=r:d(r,p)||s(f,a,u,r,this._values,this._index,this._ptr),this},i.prototype.resize=function(e,t,n){if(!fM(e))throw new TypeError("Array or Matrix expected");var r=e.valueOf().map((e=>Array.isArray(e)&&1===e.length?e[0]:e));if(2!==r.length)throw new Error("Only two dimensions matrix are supported");return r.forEach((function(e){if(!aM(e)||!tE(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+RE(r)+")")})),l(n?this.clone():this,r[0],r[1],t)},i.prototype.reshape=function(e,t){if(!dM(e))throw new TypeError("Array expected");if(2!==e.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");e.forEach((function(t){if(!aM(t)||!tE(t)||t<=-2||0===t)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+RE(e)+")")}));var n=this._size[0]*this._size[1];if(n!==(e=ZE(e,n))[0]*e[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=t?this.clone():this;if(this._size[0]===e[0]&&this._size[1]===e[1])return r;for(var i=[],a=0;a<r._ptr.length;a++)for(var l=0;l<r._ptr[a+1]-r._ptr[a];l++)i.push(a);for(var u=r._values.slice(),c=r._index.slice(),h=0;h<r._index.length;h++){var d=c[h],p=i[h],f=d*r._size[1]+p;i[h]=f%e[1],c[h]=Math.floor(f/e[1])}r._values.length=0,r._index.length=0,r._ptr.length=e[1]+1,r._size=e.slice();for(var m=0;m<r._ptr.length;m++)r._ptr[m]=0;for(var g=0;g<u.length;g++){var v=c[g],y=i[g],x=u[g];s(o(v,r._ptr[y],r._ptr[y+1],r._index),v,y,x,r._values,r._index,r._ptr)}return r},i.prototype.clone=function(){return new i({values:this._values?j_(this._values):void 0,index:j_(this._index),ptr:j_(this._ptr),size:j_(this._size),datatype:this._datatype})},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(e,r){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var a=this,o=this._size[0],s=this._size[1],l=aC(e,a,"map");return function(e,r,a,o,s,l,u){var c=[],h=[],d=[],p=n,f=0;hM(e._datatype)&&(p=t.find(n,[e._datatype,e._datatype])||n,f=t.convert(0,e._datatype));for(var m=function(e,t,n){var r=l(e,t,n);p(r,f)||(c.push(r),h.push(t))},g=o;g<=s;g++){d.push(c.length);var v=e._ptr[g],y=e._ptr[g+1];if(u)for(var x=v;x<y;x++){var b=e._index[x];b>=r&&b<=a&&m(e._values[x],b-r,g-o)}else{for(var w={},S=v;S<y;S++){w[e._index[S]]=e._values[S]}for(var _=r;_<=a;_++){m(_ in w?w[_]:0,_-r,g-o)}}}return d.push(c.length),new i({values:c,index:h,ptr:d,size:[a-r+1,s-o+1]})}(this,0,o-1,0,s-1,(function(e,t,n){return l(e,[t,n],a)}),r)},i.prototype.forEach=function(e,t){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var n=this,r=this._size[0],i=this._size[1],a=aC(e,n,"forEach"),o=0;o<i;o++){var s=this._ptr[o],l=this._ptr[o+1];if(t)for(var u=s;u<l;u++){var c=this._index[u];a(this._values[u],[c,o],n)}else{for(var h={},d=s;d<l;d++){h[this._index[d]]=this._values[d]}for(var p=0;p<r;p++){a(p in h?h[p]:0,[p,o],n)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var e=this._size[1],t=0;t<e;t++)for(var n=this._ptr[t],r=this._ptr[t+1],i=n;i<r;i++){var a=this._index[i];yield{value:this._values[i],index:[a,t]}}},i.prototype.toArray=function(){return u(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return u(this._values,this._index,this._ptr,this._size,!1)},i.prototype.format=function(e){for(var t=this._size[0],n=this._size[1],r=this.density(),i="Sparse Matrix ["+RE(t,e)+" x "+RE(n,e)+"] density: "+RE(r,e)+"\n",a=0;a<n;a++)for(var o=this._ptr[a],s=this._ptr[a+1],l=o;l<s;l++){i+="\n    ("+RE(this._index[l],e)+", "+RE(a,e)+") ==> "+(this._values?RE(this._values[l],e):"X")}return i},i.prototype.toString=function(){return RE(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(e){if(e){if(oM(e)&&(e=e.toNumber()),!aM(e)||!tE(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var t=e>0?e:0,n=e<0?-e:0,r=this._size[0],a=this._size[1],o=Math.min(r-n,a-t),s=[],l=[],u=[];u[0]=0;for(var c=t;c<a&&s.length<o;c++)for(var h=this._ptr[c],d=this._ptr[c+1],p=h;p<d;p++){var f=this._index[p];if(f===c-t+n){s.push(this._values[p]),l[s.length-1]=f-n;break}}return u.push(s.length),new i({values:s,index:l,ptr:u,size:[o,1]})},i.fromJSON=function(e){return new i(e)},i.diagonal=function(e,r,a,o,s){if(!dM(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map((function(e){if(oM(e)&&(e=e.toNumber()),!aM(e)||!tE(e)||e<1)throw new Error("Size values must be positive integers");return e})),a){if(oM(a)&&(a=a.toNumber()),!aM(a)||!tE(a))throw new TypeError("The parameter k must be an integer number")}else a=0;var l=n,u=0;hM(s)&&(l=t.find(n,[s,s])||n,u=t.convert(0,s));var c,h=a>0?a:0,d=a<0?-a:0,p=e[0],f=e[1],m=Math.min(p-d,f-h);if(dM(r)){if(r.length!==m)throw new Error("Invalid value array length");c=function(e){return r[e]}}else if(pM(r)){var g=r.size();if(1!==g.length||g[0]!==m)throw new Error("Invalid matrix length");c=function(e){return r.get([e])}}else c=function(){return r};for(var v=[],y=[],x=[],b=0;b<f;b++){x.push(v.length);var w=b-h;if(w>=0&&w<m){var S=c(w);l(S,u)||(y.push(w+d),v.push(S))}}return x.push(v.length),new i({values:v,index:y,ptr:x,size:[p,f]})},i.prototype.swapRows=function(e,t){if(!aM(e)||!tE(e)||!aM(t)||!tE(t))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return GE(e,this._size[0]),GE(t,this._size[0]),i._swapRows(e,t,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(e,t,n,r,i){for(var a=r[e],o=r[e+1],s=a;s<o;s++)i(n[s],t[s])},i._swapRows=function(e,t,n,r,i,a){for(var s=0;s<n;s++){var l=a[s],u=a[s+1],c=o(e,l,u,i),h=o(t,l,u,i);if(c<u&&h<u&&i[c]===e&&i[h]===t){if(r){var d=r[c];r[c]=r[h],r[h]=d}}else if(c<u&&i[c]===e&&(h>=u||i[h]!==t)){var p=r?r[c]:void 0;i.splice(h,0,t),r&&r.splice(h,0,p),i.splice(h<=c?c+1:c,1),r&&r.splice(h<=c?c+1:c,1)}else if(h<u&&i[h]===t&&(c>=u||i[c]!==e)){var f=r?r[h]:void 0;i.splice(c,0,e),r&&r.splice(c,0,f),i.splice(c<=h?h+1:h,1),r&&r.splice(c<=h?h+1:h,1)}}},i}),{isClass:!0}),LO="splitUnit",zO=$M(LO,["typed"],(e=>{var{typed:t}=e;return t(LO,{"Unit, Array":function(e,t){return e.splitUnit(t)}})})),UO="square",HO=$M(UO,["typed"],(e=>{var{typed:t}=e;return t(UO,{number:EF,Complex:function(e){return e.mul(e)},BigNumber:function(e){return e.times(e)},bigint:function(e){return e*e},Fraction:function(e){return e.mul(e)},Unit:function(e){return e.pow(2)}})})),qO="string",VO=$M(qO,["typed"],(e=>{var{typed:t}=e;return t(qO,{"":function(){return""},number:cE,null:function(e){return"null"},boolean:function(e){return e+""},string:function(e){return e},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e))),any:function(e){return String(e)}})})),jO="subtractScalar",GO=$M(jO,["typed"],(e=>{var{typed:t}=e;return t(jO,{"number, number":dF,"Complex, Complex":function(e,t){return e.sub(t)},"BigNumber, BigNumber":function(e,t){return e.minus(t)},"bigint, bigint":function(e,t){return e-t},"Fraction, Fraction":function(e,t){return e.sub(t)},"Unit, Unit":t.referToSelf((e=>(n,r)=>{if(null===n.value||void 0===n.value)throw new Error("Parameter x contains a unit with undefined value");if(null===r.value||void 0===r.value)throw new Error("Parameter y contains a unit with undefined value");if(!n.equalBase(r))throw new Error("Units do not match");var i=n.clone();return i.value=t.find(e,[i.valueType(),r.valueType()])(i.value,r.value),i.fixPrefix=!1,i}))})})),WO=$M("tan",["typed"],(e=>{var{typed:t}=e,n=_P({typed:t});return t("tan",{number:Math.tan,"Complex | BigNumber":e=>e.tan()},n)})),XO="typeOf",YO=$M(XO,["typed"],(e=>{var{typed:t}=e;return t(XO,{any:XM})})),$O="acosh",ZO=$M($O,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t($O,{number:function(e){return e>=1||n.predictable?IF(e):e<=-1?new r(Math.log(Math.sqrt(e*e-1)-e),Math.PI):new r(e,0).acosh()},Complex:function(e){return e.acosh()},BigNumber:function(e){return e.acosh()}})})),JO="acsch",KO=$M(JO,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(JO,{number:BF,Complex:function(e){return e.acsch()},BigNumber:function(e){return new n(1).div(e).asinh()}})})),QO="asec",eB=$M(QO,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(QO,{number:function(e){return e<=-1||e>=1||n.predictable?LF(e):new r(e,0).asec()},Complex:function(e){return e.asec()},BigNumber:function(e){return new i(1).div(e).acos()}})})),tB=$M("bignumber",["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t("bignumber",{"":function(){return new n(0)},number:function(e){return new n(e+"")},string:function(e){var t=e.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(t){var r=t[2],i=n(t[1]),a=new n(2).pow(Number(r));if(i.gt(a.sub(1)))throw new SyntaxError('String "'.concat(e,'" is out of range'));var o=new n(2).pow(Number(r)-1);return i.gte(o)?i.sub(a):i}return new n(e)},BigNumber:function(e){return e},bigint:function(e){return new n(e.toString())},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),Fraction:function(e){return new n(String(e.n)).div(String(e.d)).times(String(e.s))},null:function(e){return new n(0)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),nB="combinationsWithRep",rB=$M(nB,["typed"],(e=>{var{typed:t}=e;return t(nB,{"number, number":function(e,t){if(!tE(e)||e<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(!tE(t)||t<0)throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e<1)throw new TypeError("k must be less than or equal to n + k - 1");return t<e-1?mP(e,e+t-1)/mP(1,t):mP(t+1,e+t-1)/mP(1,e-1)},"BigNumber, BigNumber":function(e,t){var n,r,i=new(0,e.constructor)(1),a=e.minus(i);if(!iB(e)||!iB(t))throw new TypeError("Positive integer value expected in function combinationsWithRep");if(e.lt(i))throw new TypeError("k must be less than or equal to n + k - 1 in function combinationsWithRep");if(n=i,t.lt(a))for(r=i;r.lte(a);r=r.plus(i))n=n.times(t.plus(r)).dividedBy(r);else for(r=i;r.lte(t);r=r.plus(i))n=n.times(a.plus(r)).dividedBy(r);return n}})}));function iB(e){return e.isInteger()&&e.gte(0)}var aB="cosh",oB=$M(aB,["typed"],(e=>{var{typed:t}=e;return t(aB,{number:wE,"Complex | BigNumber":e=>e.cosh()})})),sB="csch",lB=$M(sB,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(sB,{number:GF,Complex:e=>e.csch(),BigNumber:e=>new n(1).div(e.sinh())})})),uB="isNaN",cB=$M(uB,["typed"],(e=>{var{typed:t}=e;return t(uB,{number:tO,BigNumber:function(e){return e.isNaN()},bigint:function(e){return!1},Fraction:function(e){return!1},Complex:function(e){return e.isNaN()},Unit:function(e){return Number.isNaN(e.value)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),hB="isPrime",dB=$M(hB,["typed"],(e=>{var{typed:t}=e;return t(hB,{number:function(e){if(e<=3)return e>1;if(e%2===0||e%3===0)return!1;for(var t=5;t*t<=e;t+=6)if(e%t===0||e%(t+2)===0)return!1;return!0},bigint:function(e){if(e<=3n)return e>1n;if(e%2n===0n||e%3n===0n)return!1;for(var t=5n;t*t<=e;t+=6n)if(e%t===0n||e%(t+2n)===0n)return!1;return!0},BigNumber:function(e){if(e.lte(3))return e.gt(1);if(e.mod(2).eq(0)||e.mod(3).eq(0))return!1;if(e.lt(Math.pow(2,32))){for(var t=e.toNumber(),n=5;n*n<=t;n+=6)if(t%n===0||t%(n+2)===0)return!1;return!0}function r(e,t,n){for(var r=1;!t.eq(0);)t.mod(2).eq(0)?(t=t.div(2),e=e.mul(e).mod(n)):(t=t.sub(1),r=e.mul(r).mod(n));return r}for(var i=e.constructor.clone({precision:2*e.toFixed(0).length}),a=0,o=(e=new i(e)).sub(1);o.mod(2).eq(0);)o=o.div(2),a+=1;var s=null;if(e.lt("3317044064679887385961981"))s=[2,3,5,7,11,13,17,19,23,29,31,37,41].filter((t=>t<e));else{var l=Math.min(e.toNumber()-2,Math.floor(2*Math.pow(e.toFixed(0).length*Math.log(10),2)));s=[];for(var u=2;u<=l;u+=1)s.push(l)}for(var c=0;c<s.length;c+=1){var h=s[c],d=r(e.sub(e).add(h),o,e);if(!d.eq(1))for(var p=0,f=d;!f.eq(e.sub(1));p+=1,f=f.mul(f).mod(e))if(p===a-1)return!1}return!0},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),pB="randomInt",fB=$M(pB,["typed","config","?on"],(e=>{var{typed:t,config:n,on:r}=e,i=AO(n.randomSeed);return r&&r("config",(function(e,t){e.randomSeed!==t.randomSeed&&(i=AO(e.randomSeed))})),t(pB,{"":()=>o(0,1),number:e=>o(0,e),"number, number":(e,t)=>o(e,t),"Array | Matrix":e=>a(e,0,1),"Array | Matrix, number":(e,t)=>a(e,0,t),"Array | Matrix, number, number":(e,t,n)=>a(e,t,n)});function a(e,t,n){var r=DO(e.valueOf(),(()=>o(t,n)));return pM(e)?e.create(r,"number"):r}function o(e,t){return Math.floor(e+i()*(t-e))}})),mB="sech",gB=$M(mB,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(mB,{number:XF,Complex:e=>e.sech(),BigNumber:e=>new n(1).div(e.cosh())})})),vB="sinh",yB=$M(vB,["typed"],(e=>{var{typed:t}=e;return t(vB,{number:YF,"Complex | BigNumber":e=>e.sinh()})})),xB="sparse",bB=$M(xB,["typed","SparseMatrix"],(e=>{var{typed:t,SparseMatrix:n}=e;return t(xB,{"":function(){return new n([])},string:function(e){return new n([],e)},"Array | Matrix":function(e){return new n(e)},"Array | Matrix, string":function(e,t){return new n(e,t)}})})),wB=$M("sqrt",["config","typed","Complex"],(e=>{var{config:t,typed:n,Complex:r}=e;return n("sqrt",{number:i,Complex:function(e){return e.sqrt()},BigNumber:function(e){return!e.isNegative()||t.predictable?e.sqrt():i(e.toNumber())},Unit:function(e){return e.pow(.5)}});function i(e){return isNaN(e)?NaN:e>=0||t.predictable?Math.sqrt(e):new r(e,0).sqrt()}})),SB="squeeze",_B=$M(SB,["typed"],(e=>{var{typed:t}=e;return t(SB,{Array:function(e){return KE(j_(e))},Matrix:function(e){var t=KE(e.toArray());return Array.isArray(t)?e.create(t,e.datatype()):t},any:function(e){return j_(e)}})})),MB=$M("tanh",["typed"],(e=>{var{typed:t}=e;return t("tanh",{number:_E,"Complex | BigNumber":e=>e.tanh()})})),EB="unaryMinus",AB=$M(EB,["typed"],(e=>{var{typed:t}=e;return t(EB,{number:fF,"Complex | BigNumber | Fraction":e=>e.neg(),bigint:e=>-e,Unit:t.referToSelf((e=>n=>{var r=n.clone();return r.value=t.find(e,r.valueType())(n.value),r})),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0)))})})),TB="acoth",CB=$M(TB,["typed","config","Complex","BigNumber"],(e=>{var{typed:t,config:n,Complex:r,BigNumber:i}=e;return t(TB,{number:function(e){return e>=1||e<=-1||n.predictable?PF(e):new r(e,0).acoth()},Complex:function(e){return e.acoth()},BigNumber:function(e){return new i(1).div(e).atanh()}})})),DB=$M("bin",["typed","format"],(e=>{var{typed:t,format:n}=e;return t("bin",{"number | BigNumber":function(e){return n(e,{notation:"bin"})},"number | BigNumber, number | BigNumber":function(e,t){return n(e,{notation:"bin",wordSize:t})}})})),NB="coth",RB=$M(NB,["typed","BigNumber"],(e=>{var{typed:t,BigNumber:n}=e;return t(NB,{number:VF,Complex:e=>e.coth(),BigNumber:e=>new n(1).div(e.tanh())})})),kB=$M("fraction",["typed","Fraction"],(e=>{var{typed:t,Fraction:n}=e;return t("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new n(e)},string:function(e){return new n(e)},"number, number":function(e,t){return new n(e,t)},"bigint, bigint":function(e,t){return new n(e,t)},null:function(e){return new n(0)},BigNumber:function(e){return new n(e.toString())},bigint:function(e){return new n(e.toString())},Fraction:function(e){return e},Unit:t.referToSelf((e=>t=>{var n=t.clone();return n.value=e(t.value),n})),Object:function(e){return new n(e)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),IB="isNumeric",FB=$M(IB,["typed"],(e=>{var{typed:t}=e;return t(IB,{"number | BigNumber | bigint | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),PB="matrix",OB=$M(PB,["typed","Matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,Matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(PB,{"":function(){return a([])},string:function(e){return a([],e)},"string, string":function(e,t){return a([],e,t)},Array:function(e){return a(e)},Matrix:function(e){return a(e,e.storage())},"Array | Matrix, string":a,"Array | Matrix, string, string":a});function a(e,t,n){if("dense"===t||"default"===t||void 0===t)return new r(e,n);if("sparse"===t)return new i(e,n);throw new TypeError("Unknown matrix type "+JSON.stringify(t)+".")}})),BB="matrixFromFunction",LB=$M(BB,["typed","matrix","isZero"],(e=>{var{typed:t,matrix:n,isZero:r}=e;return t(BB,{"Array | Matrix, function, string, string":function(e,t,n,r){return i(e,t,n,r)},"Array | Matrix, function, string":function(e,t,n){return i(e,t,n)},"Matrix, function":function(e,t){return i(e,t,"dense")},"Array, function":function(e,t){return i(e,t,"dense").toArray()},"Array | Matrix, string, function":function(e,t,n){return i(e,n,t)},"Array | Matrix, string, string, function":function(e,t,n,r){return i(e,r,t,n)}});function i(e,t,i,a){var o;return(o=void 0!==a?n(i,a):n(i)).resize(e),o.forEach((function(e,n){var i=t(n);r(i)||o.set(n,i)})),o}})),zB="mode",UB=$M(zB,["typed","isNaN","isNumeric"],(e=>{var{typed:t,isNaN:n,isNumeric:r}=e;return t(zB,{"Array | Matrix":i,"...":function(e){return i(e)}});function i(e){if(0===(e=nA(e.valueOf())).length)throw new Error("Cannot calculate mode of an empty array");for(var t={},i=[],a=0,o=0;o<e.length;o++){var s=e[o];if(r(s)&&n(s))throw new Error("Cannot calculate mode of an array containing NaN values");s in t||(t[s]=0),t[s]++,t[s]===a?i.push(s):t[s]>a&&(a=t[s],i=[s])}return i}})),HB=$M("numeric",["number","?bignumber","?fraction"],(e=>{var{number:t,bignumber:n,fraction:r}=e,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},a={number:e=>t(e),BigNumber:n?e=>n(e):ST,bigint:e=>BigInt(e),Fraction:r?e=>r(e):_T};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"number";if(void 0!==(arguments.length>2?arguments[2]:void 0))throw new SyntaxError("numeric() takes one or two arguments");var n=XM(e);if(!(n in i))throw new TypeError("Cannot convert "+e+' of type "'+n+'"; valid input types are '+Object.keys(i).join(", "));if(!(t in a))throw new TypeError("Cannot convert "+e+' to type "'+t+'"; valid output types are '+Object.keys(a).join(", "));return t===n?e:a[t](e)}})),qB="prod",VB=$M(qB,["typed","config","multiplyScalar","numeric"],(e=>{var{typed:t,config:n,multiplyScalar:r,numeric:i}=e;return t(qB,{"Array | Matrix":a,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("prod(A, dim) is not yet supported")},"...":function(e){return a(e)}});function a(e){var t;if(hT(e,(function(e){try{t=void 0===t?e:r(t,e)}catch(n){throw XC(n,"prod",e)}})),"string"===typeof t&&(t=i(t,nE(t,n))),void 0===t)throw new Error("Cannot calculate prod of an empty array");return t}})),jB="reshape",GB=$M(jB,["typed","isInteger","matrix"],(e=>{var{typed:t,isInteger:n}=e;return t(jB,{"Matrix, Array":function(e,t){return e.reshape(t,!0)},"Array, Array":function(e,t){return t.forEach((function(e){if(!n(e))throw new TypeError("Invalid size for dimension: "+e)})),$E(e,t)}})})),WB="size",XB=$M(WB,["typed","config","?matrix"],(e=>{var{typed:t,config:n,matrix:r}=e;return t(WB,{Matrix:function(e){return e.create(e.size(),"number")},Array:HE,string:function(e){return"Array"===n.matrix?[e.length]:r([e.length],"dense","number")},"number | Complex | BigNumber | Unit | boolean | null":function(e){return"Array"===n.matrix?[]:r?r([],"dense","number"):MT()}})})),YB="transpose",$B=$M(YB,["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return t(YB,{Array:e=>r(n(e)).valueOf(),Matrix:r,any:j_});function r(e){var t,n=e.size();switch(n.length){case 1:t=e.clone();break;case 2:var r=n[0],i=n[1];if(0===i)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+RE(n)+")");switch(e.storage()){case"dense":t=function(e,t,n){for(var r,i=e._data,a=[],o=0;o<n;o++){r=a[o]=[];for(var s=0;s<t;s++)r[s]=j_(i[s][o])}return e.createDenseMatrix({data:a,size:[n,t],datatype:e._datatype})}(e,r,i);break;case"sparse":t=function(e,t,n){for(var r,i,a,o=e._values,s=e._index,l=e._ptr,u=o?[]:void 0,c=[],h=[],d=[],p=0;p<t;p++)d[p]=0;for(r=0,i=s.length;r<i;r++)d[s[r]]++;for(var f=0,m=0;m<t;m++)h.push(f),f+=d[m],d[m]=h[m];for(h.push(f),a=0;a<n;a++)for(var g=l[a],v=l[a+1],y=g;y<v;y++){var x=d[s[y]]++;c[x]=a,o&&(u[x]=j_(o[y]))}return e.createSparseMatrix({values:u,index:c,ptr:h,size:[n,t],datatype:e._datatype})}(e,r,i)}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+RE(n)+")")}return t}})),ZB="xgcd",JB=$M(ZB,["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t(ZB,{"number, number":function(e,t){var i=AF(e,t);return"Array"===n.matrix?i:r(i)},"BigNumber, BigNumber":function(e,t){var a,o,s,l,u=new i(0),c=new i(1),h=u,d=c,p=c,f=u;if(!e.isInt()||!t.isInt())throw new Error("Parameters in function xgcd must be integer numbers");for(;!t.isZero();)o=e.div(t).floor(),s=e.mod(t),a=h,h=d.minus(o.times(h)),d=a,a=p,p=f.minus(o.times(p)),f=a,e=t,t=s;l=e.lt(u)?[e.neg(),d.neg(),f.neg()]:[e,e.isZero()?0:d,f];return"Array"===n.matrix?l:r(l)}})})),KB="zeros",QB=$M(KB,["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t(KB,{"":function(){return"Array"===n.matrix?a([]):a([],"default")},"...number | BigNumber | string":function(e){if("string"===typeof e[e.length-1]){var t=e.pop();return a(e,t)}return"Array"===n.matrix?a(e):a(e,"default")},Array:a,Matrix:function(e){var t=e.storage();return a(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){oM(e)&&(t=!0,r[n]=e.toNumber())})),t}(e),a=n?new i(0):0;if(function(e){e.forEach((function(e){if("number"!==typeof e||!tE(e)||e<0)throw new Error("Parameters in function zeros must be positive integers")}))}(e),t){var o=r(t);return e.length>0?o.resize(e,a):o}var s=[];return e.length>0?XE(s,e,a):s}})),eL="asin",tL=$M(eL,["typed","config","Complex"],(e=>{var{typed:t,config:n,Complex:r}=e;return t(eL,{number:function(e){return e>=-1&&e<=1||n.predictable?Math.asin(e):new r(e,0).asin()},Complex:function(e){return e.asin()},BigNumber:function(e){return e.asin()}})})),nL="cbrt",rL=$M(nL,["config","typed","isNegative","unaryMinus","matrix","Complex","BigNumber","Fraction"],(e=>{var{config:t,typed:n,isNegative:r,unaryMinus:i,matrix:a,Complex:o,BigNumber:s,Fraction:l}=e;return n(nL,{number:gF,Complex:u,"Complex, boolean":u,BigNumber:function(e){return e.cbrt()},Unit:function(e){if(e.value&&lM(e.value)){var t=e.clone();return t.value=1,(t=t.pow(1/3)).value=u(e.value),t}var n,a=r(e.value);a&&(e.value=i(e.value)),n=oM(e.value)?new s(1).div(3):uM(e.value)?new l(1,3):1/3;var o=e.pow(n);return a&&(o.value=i(o.value)),o}});function u(e,n){var r=e.arg()/3,i=e.abs(),s=new o(gF(i),0).mul(new o(0,r).exp());if(n){var l=[s,new o(gF(i),0).mul(new o(0,r+2*Math.PI/3).exp()),new o(gF(i),0).mul(new o(0,r-2*Math.PI/3).exp())];return"Array"===t.matrix?l:a(l)}return s}})),iL="count",aL=$M(iL,["typed","size","prod"],(e=>{var{typed:t,size:n,prod:r}=e;return t(iL,{string:function(e){return e.length},"Matrix | Array":function(e){return r(n(e))}})})),oL="ctranspose",sL=$M(oL,["typed","transpose","conj"],(e=>{var{typed:t,transpose:n,conj:r}=e;return t(oL,{any:function(e){return r(n(e))}})})),lL="diag",uL=$M(lL,["typed","matrix","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,matrix:n,DenseMatrix:r,SparseMatrix:i}=e;return t(lL,{Array:function(e){return a(e,0,HE(e),null)},"Array, number":function(e,t){return a(e,t,HE(e),null)},"Array, BigNumber":function(e,t){return a(e,t.toNumber(),HE(e),null)},"Array, string":function(e,t){return a(e,0,HE(e),t)},"Array, number, string":function(e,t,n){return a(e,t,HE(e),n)},"Array, BigNumber, string":function(e,t,n){return a(e,t.toNumber(),HE(e),n)},Matrix:function(e){return a(e,0,e.size(),e.storage())},"Matrix, number":function(e,t){return a(e,t,e.size(),e.storage())},"Matrix, BigNumber":function(e,t){return a(e,t.toNumber(),e.size(),e.storage())},"Matrix, string":function(e,t){return a(e,0,e.size(),t)},"Matrix, number, string":function(e,t,n){return a(e,t,e.size(),n)},"Matrix, BigNumber, string":function(e,t,n){return a(e,t.toNumber(),e.size(),n)}});function a(e,t,a,o){if(!tE(t))throw new TypeError("Second parameter in function diag must be an integer");var s=t>0?t:0,l=t<0?-t:0;switch(a.length){case 1:return function(e,t,n,a,o,s){var l=[a+o,a+s];if(n&&"sparse"!==n&&"dense"!==n)throw new TypeError("Unknown matrix type ".concat(n,'"'));var u="sparse"===n?i.diagonal(l,e,t):r.diagonal(l,e,t);return null!==n?u:u.valueOf()}(e,t,o,a[0],l,s);case 2:return function(e,t,r,i,a,o){if(pM(e)){var s=e.diagonal(t);return null!==r?r!==s.storage()?n(s,r):s:s.valueOf()}for(var l=Math.min(i[0]-a,i[1]-o),u=[],c=0;c<l;c++)u[c]=e[c+a][c+o];return null!==r?n(u):u}(e,t,o,a,l,s)}throw new RangeError("Matrix for function diag must be 2 dimensional")}})),cL="divideScalar",hL=$M(cL,["typed","numeric"],(e=>{var{typed:t,numeric:n}=e;return t(cL,{"number, number":function(e,t){return e/t},"Complex, Complex":function(e,t){return e.div(t)},"BigNumber, BigNumber":function(e,t){return e.div(t)},"bigint, bigint":function(e,t){return e/t},"Fraction, Fraction":function(e,t){return e.div(t)},"Unit, number | Complex | Fraction | BigNumber | Unit":(e,t)=>e.divide(t),"number | Fraction | Complex | BigNumber, Unit":(e,t)=>t.divideInto(e)})})),dL=$M("matAlgo07xSSf",["typed","SparseMatrix"],(e=>{var{typed:t,SparseMatrix:n}=e;return function(e,i,a){var o=e._size,s=e._datatype||void 0===e._data?e._datatype:e.getDataType(),l=i._size,u=i._datatype||void 0===i._data?i._datatype:i.getDataType();if(o.length!==l.length)throw new zE(o.length,l.length);if(o[0]!==l[0]||o[1]!==l[1])throw new RangeError("Dimension mismatch. Matrix A ("+o+") must match Matrix B ("+l+")");var c,h=o[0],d=o[1],p=0,f=a;"string"===typeof s&&s===u&&"mixed"!==s&&(c=s,p=t.convert(0,c),f=t.find(a,[c,c]));for(var m=[],g=[],v=new Array(d+1).fill(0),y=[],x=[],b=[],w=[],S=0;S<d;S++){var _=S+1,M=0;r(e,S,b,y,_),r(i,S,w,x,_);for(var E=0;E<h;E++){var A=f(b[E]===_?y[E]:p,w[E]===_?x[E]:p);0!==A&&!1!==A&&(g.push(E),m.push(A),M++)}v[S+1]=v[S]+M}return new n({values:m,index:g,ptr:v,size:[h,d],datatype:s===e._datatype&&u===i._datatype?c:void 0})};function r(e,t,n,r,i){for(var a=e._values,o=e._index,s=e._ptr,l=s[t],u=s[t+1];l<u;l++){var c=o[l];n[c]=i,r[c]=a[l]}}})),pL="dotDivide",fL=$M(pL,["typed","matrix","equalScalar","divideScalar","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,matrix:n,equalScalar:r,divideScalar:i,DenseMatrix:a,concat:o,SparseMatrix:s}=e,l=zC({typed:t,equalScalar:r}),u=EC({typed:t}),c=dL({typed:t,SparseMatrix:s}),h=UC({typed:t,equalScalar:r}),d=AC({typed:t,DenseMatrix:a}),p=RC({typed:t,matrix:n,concat:o});return t(pL,p({elop:i,SS:c,DS:u,SD:l,Ss:h,sS:d}))})),mL="equal",gL=$M(mL,["typed","matrix","equalScalar","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,matrix:n,equalScalar:r,DenseMatrix:i,concat:a,SparseMatrix:o}=e,s=EC({typed:t}),l=dL({typed:t,SparseMatrix:o}),u=AC({typed:t,DenseMatrix:i}),c=RC({typed:t,matrix:n,concat:a});return t(mL,vL({typed:t,equalScalar:r}),c({elop:r,SS:l,DS:s,Ss:u}))})),vL=$M(mL,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(mL,{"any, any":function(e,t){return null===e?null===t:null===t?null===e:void 0===e?void 0===t:void 0===t?void 0===e:n(e,t)}})})),yL="hasNumericValue",xL=$M(yL,["typed","isNumeric"],(e=>{var{typed:t,isNumeric:n}=e;return t(yL,{boolean:()=>!0,string:function(e){return e.trim().length>0&&!isNaN(Number(e))},any:function(e){return n(e)}})})),bL="identity",wL=$M(bL,["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i,DenseMatrix:a,SparseMatrix:o}=e;return t(bL,{"":function(){return"Matrix"===n.matrix?r([]):[]},string:function(e){return r(e)},"number | BigNumber":function(e){return l(e,e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, string":function(e,t){return l(e,e,t)},"number | BigNumber, number | BigNumber":function(e,t){return l(e,t,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(e,t,n){return l(e,t,n)},Array:function(e){return s(e)},"Array, string":function(e,t){return s(e,t)},Matrix:function(e){return s(e.valueOf(),e.storage())},"Matrix, string":function(e,t){return s(e.valueOf(),t)}});function s(e,t){switch(e.length){case 0:return t?r(t):[];case 1:return l(e[0],e[0],t);case 2:return l(e[0],e[1],t);default:throw new Error("Vector containing two values expected")}}function l(e,t,n){var r=oM(e)||oM(t)?i:null;if(oM(e)&&(e=e.toNumber()),oM(t)&&(t=t.toNumber()),!tE(e)||e<1)throw new Error("Parameters in function identity must be positive integers");if(!tE(t)||t<1)throw new Error("Parameters in function identity must be positive integers");var s=r?new i(1):1,l=r?new r(0):0,u=[e,t];if(n){if("sparse"===n)return o.diagonal(u,s,0,l);if("dense"===n)return a.diagonal(u,s,0,l);throw new TypeError('Unknown matrix type "'.concat(n,'"'))}for(var c=XE([],u,l),h=e<t?e:t,d=0;d<h;d++)c[d][d]=s;return c}})),SL="kron",_L=$M(SL,["typed","matrix","multiplyScalar"],(e=>{var{typed:t,matrix:n,multiplyScalar:r}=e;return t(SL,{"Matrix, Matrix":function(e,t){return n(i(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(i(e.toArray(),t))},"Array, Matrix":function(e,t){return n(i(e,t.toArray()))},"Array, Array":i});function i(e,t){if(1===HE(e).length&&(e=[e]),1===HE(t).length&&(t=[t]),HE(e).length>2||HE(t).length>2)throw new RangeError("Vectors with dimensions greater then 2 are not supported expected (Size x = "+JSON.stringify(e.length)+", y = "+JSON.stringify(t.length)+")");var n=[],i=[];return e.map((function(e){return t.map((function(t){return i=[],n.push(i),e.map((function(e){return t.map((function(t){return i.push(r(e,t))}))}))}))}))&&n}})),ML="largerEq",EL=$M(ML,["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=e,s=EC({typed:t}),l=dL({typed:t,SparseMatrix:o}),u=AC({typed:t,DenseMatrix:i}),c=RC({typed:t,matrix:r,concat:a}),h=NP({typed:t});return t(ML,AL({typed:t,config:n}),{"boolean, boolean":(e,t)=>e>=t,"BigNumber, BigNumber":function(e,t){return e.gte(t)||DP(e,t,n.relTol,n.absTol)},"bigint, bigint":function(e,t){return e>=t},"Fraction, Fraction":(e,t)=>-1!==e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:s,Ss:u}))})),AL=$M(ML,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(ML,{"number, number":function(e,t){return e>=t||vE(e,t,n.relTol,n.absTol)}})})),TL=$M("matAlgo08xS0Sid",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==p.length)throw new zE(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");if(!a||!c)throw new Error("Cannot perform operation on Pattern Sparse Matrices");var m,g=l[0],v=l[1],y=n,x=0,b=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));for(var w,S,_,M,E=[],A=[],T=[],C=[],D=[],N=0;N<v;N++){T[N]=A.length;var R=N+1;for(S=s[N],_=s[N+1],w=S;w<_;w++)D[M=o[w]]=R,C[M]=a[w],A.push(M);for(S=d[N],_=d[N+1],w=S;w<_;w++)D[M=h[w]]===R&&(C[M]=b(C[M],c[w]));for(w=T[N];w<A.length;){var k=C[M=A[w]];y(k,x)?A.splice(w,1):(E.push(k),w++)}}return T[v]=A.length,e.createSparseMatrix({values:E,index:A,ptr:T,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),CL=$M("useMatrixForArrayScalar",["typed","matrix"],(e=>{var{typed:t,matrix:n}=e;return{"Array, number":t.referTo("DenseMatrix, number",(e=>(t,r)=>e(n(t),r).valueOf())),"Array, BigNumber":t.referTo("DenseMatrix, BigNumber",(e=>(t,r)=>e(n(t),r).valueOf())),"number, Array":t.referTo("number, DenseMatrix",(e=>(t,r)=>e(t,n(r)).valueOf())),"BigNumber, Array":t.referTo("BigNumber, DenseMatrix",(e=>(t,r)=>e(t,n(r)).valueOf()))}})),DL="leftShift",NL=$M(DL,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=e,s=zD({typed:t}),l=zC({typed:t,equalScalar:r}),u=TL({typed:t,equalScalar:r}),c=BD({typed:t,DenseMatrix:a}),h=UC({typed:t,equalScalar:r}),d=DC({typed:t}),p=RC({typed:t,matrix:n,concat:o}),f=CL({typed:t,matrix:n});return t(DL,{"number, number":gD,"BigNumber, BigNumber":uD,"bigint, bigint":(e,t)=>e<<t,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():h(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():d(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):c(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):d(n,t,e,!0)))},f,p({SS:u,DS:s,SD:l}))}));function RL(e){var{DenseMatrix:t}=e;return function(e,n,r){var i=e.size();if(2!==i.length)throw new RangeError("Matrix must be two dimensional (size: "+RE(i)+")");var a=i[0];if(a!==i[1])throw new RangeError("Matrix must be square (size: "+RE(i)+")");var o=[];if(pM(n)){var s=n.size(),l=n._data;if(1===s.length){if(s[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var u=0;u<a;u++)o[u]=[l[u]];return new t({data:o,size:[a,1],datatype:n._datatype})}if(2===s.length){if(s[0]!==a||1!==s[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(mM(n)){if(r){o=[];for(var c=0;c<a;c++)o[c]=[l[c][0]];return new t({data:o,size:[a,1],datatype:n._datatype})}return n}if(gM(n)){for(var h=0;h<a;h++)o[h]=[0];for(var d=n._values,p=n._index,f=n._ptr,m=f[1],g=f[0];g<m;g++){o[p[g]][0]=d[g]}return new t({data:o,size:[a,1],datatype:n._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(dM(n)){var v=HE(n);if(1===v.length){if(v[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var y=0;y<a;y++)o[y]=[n[y]];return new t({data:o,size:[a,1]})}if(2===v.length){if(v[0]!==a||1!==v[1])throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var x=0;x<a;x++)o[x]=[n[x][0]];return new t({data:o,size:[a,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var kL="lsolve",IL=$M(kL,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=RL({DenseMatrix:s});return t(kL,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=[],m=0;m<c;m++){var g=n[m][0]||0;if(o(g,0))f[m]=[0];else{for(var v=0,y=[],x=[],b=p[m],w=p[m+1],S=b;S<w;S++){var _=d[S];_===m?v=h[S]:_>m&&(y.push(h[S]),x.push(_))}if(o(v,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var M=r(g,v),E=0,A=x.length;E<A;E++){var T=x[E];n[T]=[a(n[T][0]||0,i(M,y[E]))]}f[m]=[M]}}return new s({data:f,size:[u,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).valueOf()}});function u(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],h=[],d=e._data,p=0;p<c;p++){var f=n[p][0]||0,m=void 0;if(o(f,0))m=0;else{var g=d[p][p];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,g);for(var v=p+1;v<u;v++)n[v]=[a(n[v][0]||0,i(m,d[v][p]))]}h[p]=[m]}return new s({data:h,size:[u,1]})}})),FL="matrixFromColumns",PL=$M(FL,["typed","matrix","flatten","size"],(e=>{var{typed:t,matrix:n,flatten:r,size:i}=e;return t(FL,{"...Array":function(e){return a(e)},"...Matrix":function(e){return n(a(e.map((e=>e.toArray()))))}});function a(e){if(0===e.length)throw new TypeError("At least one column is needed to construct a matrix.");for(var t=o(e[0]),n=[],i=0;i<t;i++)n[i]=[];for(var a of e){var s=o(a);if(s!==t)throw new TypeError("The vectors had different length: "+(0|t)+" \u2260 "+(0|s));for(var l=r(a),u=0;u<t;u++)n[u].push(l[u])}return n}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),OL="nthRoot",BL=$M(OL,["typed","matrix","equalScalar","BigNumber","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,BigNumber:i,concat:a}=e,o=zD({typed:t}),s=zC({typed:t,equalScalar:r}),l=HC({typed:t,equalScalar:r}),u=UC({typed:t,equalScalar:r}),c=RC({typed:t,matrix:n,concat:a});function h(){throw new Error("Complex number not supported in function nthRoot. Use nthRoots instead.")}return t(OL,{number:_F,"number, number":_F,BigNumber:e=>d(e,new i(2)),"BigNumber, BigNumber":d,Complex:h,"Complex, number":h,Array:t.referTo("DenseMatrix,number",(e=>t=>e(n(t),2).valueOf())),DenseMatrix:t.referTo("DenseMatrix,number",(e=>t=>e(t,2))),SparseMatrix:t.referTo("SparseMatrix,number",(e=>t=>e(t,2))),"SparseMatrix, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return l(t,n,e);throw new Error("Root must be non-zero")})),"DenseMatrix, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return o(t,n,e,!1);throw new Error("Root must be non-zero")})),"Array, SparseMatrix":t.referTo("DenseMatrix,SparseMatrix",(e=>(t,r)=>e(n(t),r))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>{if(1===n.density())return u(n,t,e,!0);throw new Error("Root must be non-zero")}))},c({scalar:"number | BigNumber",SD:s,Ss:u,sS:!1}));function d(e,t){var n=i.precision,r=i.clone({precision:n+2}),a=new i(0),o=new r(1),s=t.isNegative();if(s&&(t=t.neg()),t.isZero())throw new Error("Root must be non-zero");if(e.isNegative()&&!t.abs().mod(2).equals(1))throw new Error("Root must be odd when a is negative.");if(e.isZero())return s?new r(1/0):0;if(!e.isFinite())return s?a:e;var l=e.abs().pow(o.div(t));return l=e.isNeg()?l.neg():l,new i((s?o.div(l):l).toPrecision(n))}})),LL=$M("ones",["typed","config","matrix","BigNumber"],(e=>{var{typed:t,config:n,matrix:r,BigNumber:i}=e;return t("ones",{"":function(){return"Array"===n.matrix?a([]):a([],"default")},"...number | BigNumber | string":function(e){if("string"===typeof e[e.length-1]){var t=e.pop();return a(e,t)}return"Array"===n.matrix?a(e):a(e,"default")},Array:a,Matrix:function(e){var t=e.storage();return a(e.valueOf(),t)},"Array | Matrix, string":function(e,t){return a(e.valueOf(),t)}});function a(e,t){var n=function(e){var t=!1;return e.forEach((function(e,n,r){oM(e)&&(t=!0,r[n]=e.toNumber())})),t}(e),a=n?new i(1):1;if(function(e){e.forEach((function(e){if("number"!==typeof e||!tE(e)||e<0)throw new Error("Parameters in function ones must be positive integers")}))}(e),t){var o=r(t);return e.length>0?o.resize(e,a):o}var s=[];return e.length>0?XE(s,e,a):s}})),zL=$M("qr",["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],(e=>{var{typed:t,matrix:n,zeros:r,identity:i,isZero:a,equal:o,sign:s,sqrt:l,conj:u,unaryMinus:c,addScalar:h,divideScalar:d,multiplyScalar:p,subtractScalar:f,complex:m}=e;return Gw(t("qr",{DenseMatrix:function(e){return v(e)},SparseMatrix:function(e){return function(){throw new Error("qr not implemented for sparse matrices yet")}()},Array:function(e){var t=v(n(e));return{Q:t.Q.valueOf(),R:t.R.valueOf()}}}),{_denseQRimpl:g});function g(e){var t,n,m,g=e._size[0],v=e._size[1],y=i([g],"dense"),x=y._data,b=e.clone(),w=b._data,S=r([g],"");for(m=0;m<Math.min(v,g);++m){var _=w[m][m],M=c(o(_,0)?1:s(_)),E=u(M),A=0;for(t=m;t<g;t++)A=h(A,p(w[t][m],u(w[t][m])));var T=p(M,l(A));if(!a(T)){var C=f(_,T);for(S[m]=1,t=m+1;t<g;t++)S[t]=d(w[t][m],C);var D=c(u(d(C,T))),N=void 0;for(n=m;n<v;n++){for(N=0,t=m;t<g;t++)N=h(N,p(u(S[t]),w[t][n]));for(N=p(N,D),t=m;t<g;t++)w[t][n]=p(f(w[t][n],p(S[t],N)),E)}for(t=0;t<g;t++){for(N=0,n=m;n<g;n++)N=h(N,p(x[t][n],S[n]));for(N=p(N,D),n=m;n<g;++n)x[t][n]=d(f(x[t][n],p(N,u(S[n]))),E)}}}return{Q:y,R:b,toString:function(){return"Q: "+this.Q.toString()+"\nR: "+this.R.toString()}}}function v(e){var t=g(e),n=t.R._data;if(e._data.length>0)for(var r="Complex"===n[0][0].type?m(0):0,i=0;i<n.length;++i)for(var a=0;a<i&&a<(n[0]||[]).length;++a)n[i][a]=r;return t}}));function UL(e,t,n,r){if(!(this instanceof UL))throw new SyntaxError("Constructor must be called with the new operator");this.fn=e,this.count=t,this.min=n,this.max=r,this.message="Wrong number of arguments in function "+e+" ("+t+" provided, "+n+(void 0!==r&&null!==r?"-"+r:"")+" expected)",this.stack=(new Error).stack}UL.prototype=new Error,UL.prototype.constructor=Error,UL.prototype.name="ArgumentsError",UL.prototype.isArgumentsError=!0;var HL=$M("resize",["config","matrix"],(e=>{var{config:t,matrix:n}=e;return function(e,r,i){if(2!==arguments.length&&3!==arguments.length)throw new UL("resize",arguments.length,2,3);if(pM(r)&&(r=r.valueOf()),oM(r[0])&&(r=r.map((function(e){return oM(e)?e.toNumber():e}))),pM(e))return e.resize(r,i,!0);if("string"===typeof e)return function(e,t,n){if(void 0!==n){if("string"!==typeof n||1!==n.length)throw new TypeError("Single character expected as defaultValue")}else n=" ";if(1!==t.length)throw new zE(t.length,1);var r=t[0];if("number"!==typeof r||!tE(r))throw new TypeError("Invalid size, must contain positive integers (size: "+RE(t)+")");if(e.length>r)return e.substring(0,r);if(e.length<r){for(var i=e,a=0,o=r-e.length;a<o;a++)i+=n;return i}return e}(e,r,i);var a=!Array.isArray(e)&&"Array"!==t.matrix;if(0===r.length){for(;Array.isArray(e);)e=e[0];return j_(e)}Array.isArray(e)||(e=[e]);var o=XE(e=j_(e),r,i);return a?n(o):o}})),qL="rightArithShift",VL=$M(qL,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=e,s=zD({typed:t}),l=zC({typed:t,equalScalar:r}),u=TL({typed:t,equalScalar:r}),c=BD({typed:t,DenseMatrix:a}),h=UC({typed:t,equalScalar:r}),d=DC({typed:t}),p=RC({typed:t,matrix:n,concat:o}),f=CL({typed:t,matrix:n});return t(qL,{"number, number":vD,"BigNumber, BigNumber":cD,"bigint, bigint":(e,t)=>e>>t,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():h(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():d(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):c(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):d(n,t,e,!0)))},f,p({SS:u,DS:s,SD:l}))})),jL="Number of decimals in function round must be an integer",GL="round",WL=$M(GL,["typed","config","matrix","equalScalar","zeros","BigNumber","DenseMatrix"],(e=>{var{typed:t,config:n,matrix:r,equalScalar:i,zeros:a,BigNumber:o,DenseMatrix:s}=e,l=UC({typed:t,equalScalar:i}),u=AC({typed:t,DenseMatrix:s}),c=DC({typed:t});function h(e){return Math.abs(dE(e).exponent)}return t(GL,{number:function(e){var t=CF(e,h(n.relTol));return CF(vE(e,t,n.relTol,n.absTol)?t:e)},"number, number":function(e,t){var r=h(n.relTol);if(t>=r)return CF(e,t);var i=CF(e,r);return CF(vE(e,i,n.relTol,n.absTol)?i:e,t)},"number, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(jL);return new o(e).toDecimalPlaces(t.toNumber())},Complex:function(e){return e.round()},"Complex, number":function(e,t){if(t%1)throw new TypeError(jL);return e.round(t)},"Complex, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(jL);var n=t.toNumber();return e.round(n)},BigNumber:function(e){var t=new o(e).toDecimalPlaces(h(n.relTol));return(DP(e,t,n.relTol,n.absTol)?t:e).toDecimalPlaces(0)},"BigNumber, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(jL);var r=h(n.relTol);if(t>=r)return e.toDecimalPlaces(t.toNumber());var i=e.toDecimalPlaces(r);return(DP(e,i,n.relTol,n.absTol)?i:e).toDecimalPlaces(t.toNumber())},Fraction:function(e){return e.round()},"Fraction, number":function(e,t){if(t%1)throw new TypeError(jL);return e.round(t)},"Fraction, BigNumber":function(e,t){if(!t.isInteger())throw new TypeError(jL);return e.round(t.toNumber())},"Unit, number, Unit":t.referToSelf((e=>function(t,n,r){var i=t.toNumeric(r);return r.multiply(e(i,n))})),"Unit, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Array | Matrix, number | BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>dT(t,(t=>e(t,n,r)),!0))),"Array | Matrix | Unit, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>c(t,n,e,!1))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>c(r(t),n,e,!1).valueOf())),"number | Complex | BigNumber | Fraction, SparseMatrix":t.referToSelf((e=>(t,n)=>i(t,0)?a(n.size(),n.storage()):u(n,t,e,!0))),"number | Complex | BigNumber | Fraction, DenseMatrix":t.referToSelf((e=>(t,n)=>i(t,0)?a(n.size(),n.storage()):c(n,t,e,!0))),"number | Complex | BigNumber | Fraction, Array":t.referToSelf((e=>(t,n)=>c(r(n),t,e,!0).valueOf()))})})),XL="smaller",YL=$M(XL,["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=e,s=EC({typed:t}),l=dL({typed:t,SparseMatrix:o}),u=AC({typed:t,DenseMatrix:i}),c=RC({typed:t,matrix:r,concat:a}),h=NP({typed:t});return t(XL,$L({typed:t,config:n}),{"boolean, boolean":(e,t)=>e<t,"BigNumber, BigNumber":function(e,t){return e.lt(t)&&!DP(e,t,n.relTol,n.absTol)},"bigint, bigint":(e,t)=>e<t,"Fraction, Fraction":(e,t)=>-1===e.compare(t),"Complex, Complex":function(e,t){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:s,Ss:u}))})),$L=$M(XL,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(XL,{"number, number":function(e,t){return e<t&&!vE(e,t,n.relTol,n.absTol)}})})),ZL="subtract",JL=$M(ZL,["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,subtractScalar:i,unaryMinus:a,DenseMatrix:o,concat:s}=e,l=zD({typed:t}),u=EC({typed:t}),c=TC({typed:t,equalScalar:r}),h=BD({typed:t,DenseMatrix:o}),d=AC({typed:t,DenseMatrix:o}),p=RC({typed:t,matrix:n,concat:s});return t(ZL,{"any, any":i},p({elop:i,SS:c,DS:l,SD:u,Ss:d,sS:h}))})),KL=$M("to",["typed","matrix","concat"],(e=>{var{typed:t,matrix:n,concat:r}=e;return t("to",{"Unit, Unit | string":(e,t)=>e.to(t)},RC({typed:t,matrix:n,concat:r})({Ds:!0}))})),QL="unaryPlus",ez=$M(QL,["typed","config","numeric"],(e=>{var{typed:t,config:n,numeric:r}=e;return t(QL,{number:mF,Complex:function(e){return e},BigNumber:function(e){return e},bigint:function(e){return e},Fraction:function(e){return e},Unit:function(e){return e.clone()},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0))),boolean:function(e){return r(e?1:0,n.number)},string:function(e){return r(e,nE(e,n))}})})),tz="usolve",nz=$M(tz,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=RL({DenseMatrix:s});return t(tz,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=[],m=c-1;m>=0;m--){var g=n[m][0]||0;if(o(g,0))f[m]=[0];else{for(var v=0,y=[],x=[],b=p[m],w=p[m+1]-1;w>=b;w--){var S=d[w];S===m?v=h[w]:S<m&&(y.push(h[w]),x.push(S))}if(o(v,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var _=r(g,v),M=0,E=x.length;M<E;M++){var A=x[M];n[A]=[a(n[A][0],i(_,y[M]))]}f[m]=[_]}}return new s({data:f,size:[u,1]})}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).valueOf()}});function u(e,t){for(var n=(t=l(e,t,!0))._data,u=e._size[0],c=e._size[1],h=[],d=e._data,p=c-1;p>=0;p--){var f=n[p][0]||0,m=void 0;if(o(f,0))m=0;else{var g=d[p][p];if(o(g,0))throw new Error("Linear system cannot be solved since matrix is singular");m=r(f,g);for(var v=p-1;v>=0;v--)n[v]=[a(n[v][0]||0,i(m,d[v][p]))]}h[p]=[m]}return new s({data:h,size:[u,1]})}})),rz=$M("xor",["typed","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:a}=e,o=EC({typed:t}),s=dL({typed:t,SparseMatrix:a}),l=AC({typed:t,DenseMatrix:r}),u=RC({typed:t,matrix:n,concat:i});return t("xor",{"number, number":PC,"Complex, Complex":function(e,t){return(0!==e.re||0!==e.im)!==(0!==t.re||0!==t.im)},"bigint, bigint":PC,"BigNumber, BigNumber":function(e,t){return(!e.isZero()&&!e.isNaN())!==(!t.isZero()&&!t.isNaN())},"Unit, Unit":t.referToSelf((e=>(t,n)=>e(t.value||0,n.value||0)))},u({SS:s,DS:o,Ss:l}))})),iz=$M("add",["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],(e=>{var{typed:t,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:a,SparseMatrix:o,concat:s}=e,l=zD({typed:t}),u=LD({typed:t,equalScalar:i}),c=BD({typed:t,DenseMatrix:a}),h=RC({typed:t,matrix:n,concat:s});return t("add",{"any, any":r,"any, any, ...any":t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i}))},h({elop:r,DS:l,SS:u,Ss:c}))})),az=$M("matAlgo09xS0Sf",["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return function(e,r,i){var a=e._values,o=e._index,s=e._ptr,l=e._size,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=r._values,h=r._index,d=r._ptr,p=r._size,f=r._datatype||void 0===r._data?r._datatype:r.getDataType();if(l.length!==p.length)throw new zE(l.length,p.length);if(l[0]!==p[0]||l[1]!==p[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+p+")");var m,g=l[0],v=l[1],y=n,x=0,b=i;"string"===typeof u&&u===f&&"mixed"!==u&&(m=u,y=t.find(n,[m,m]),x=t.convert(0,m),b=t.find(i,[m,m]));var w,S,_,M,E,A=a&&c?[]:void 0,T=[],C=[],D=A?[]:void 0,N=[];for(S=0;S<v;S++){C[S]=T.length;var R=S+1;if(D)for(M=d[S],E=d[S+1],_=M;_<E;_++)N[w=h[_]]=R,D[w]=c[_];for(M=s[S],E=s[S+1],_=M;_<E;_++)if(w=o[_],D){var k=N[w]===R?D[w]:x,I=b(a[_],k);y(I,x)||(T.push(w),A.push(I))}else T.push(w)}return C[v]=T.length,e.createSparseMatrix({values:A,index:T,ptr:C,size:[g,v],datatype:u===e._datatype&&f===r._datatype?m:void 0})}})),oz="atan2",sz=$M(oz,["typed","matrix","equalScalar","BigNumber","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,BigNumber:i,DenseMatrix:a,concat:o}=e,s=zC({typed:t,equalScalar:r}),l=EC({typed:t}),u=az({typed:t,equalScalar:r}),c=UC({typed:t,equalScalar:r}),h=AC({typed:t,DenseMatrix:a}),d=RC({typed:t,matrix:n,concat:o});return t(oz,{"number, number":Math.atan2,"BigNumber, BigNumber":(e,t)=>i.atan2(e,t)},d({scalar:"number | BigNumber",SS:u,DS:l,SD:s,Ss:c,sS:h}))})),lz="bitXor",uz=$M(lz,["typed","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,matrix:n,DenseMatrix:r,concat:i,SparseMatrix:a}=e,o=EC({typed:t}),s=dL({typed:t,SparseMatrix:a}),l=AC({typed:t,DenseMatrix:r}),u=RC({typed:t,matrix:n,concat:i});return t(lz,{"number, number":mD,"BigNumber, BigNumber":lD,"bigint, bigint":(e,t)=>e^t},u({SS:s,DS:o,Ss:l}))})),cz="catalan",hz=$M(cz,["typed","addScalar","divideScalar","multiplyScalar","combinations","isNegative","isInteger"],(e=>{var{typed:t,addScalar:n,divideScalar:r,multiplyScalar:i,combinations:a,isNegative:o,isInteger:s}=e;return t(cz,{"number | BigNumber":function(e){if(!s(e)||o(e))throw new TypeError("Non-negative integer value expected in function catalan");return r(a(i(e,2),e),n(e,1))}})})),dz="compare",pz=$M(dz,["typed","config","matrix","equalScalar","BigNumber","Fraction","DenseMatrix","concat"],(e=>{var{typed:t,config:n,equalScalar:r,matrix:i,BigNumber:a,Fraction:o,DenseMatrix:s,concat:l}=e,u=EC({typed:t}),c=TC({typed:t,equalScalar:r}),h=AC({typed:t,DenseMatrix:s}),d=RC({typed:t,matrix:i,concat:l}),p=NP({typed:t});return t(dz,fz({typed:t,config:n}),{"boolean, boolean":function(e,t){return e===t?0:e>t?1:-1},"BigNumber, BigNumber":function(e,t){return DP(e,t,n.relTol,n.absTol)?new a(0):new a(e.cmp(t))},"bigint, bigint":function(e,t){return e===t?0n:e>t?1n:-1n},"Fraction, Fraction":function(e,t){return new o(e.compare(t))},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},p,d({SS:c,DS:u,Ss:h}))})),fz=$M(dz,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(dz,{"number, number":function(e,t){return vE(e,t,n.relTol,n.absTol)?0:e>t?1:-1}})})),mz="compareText",gz=["typed","matrix","concat"];OE.signature="any, any";var vz=$M(mz,gz,(e=>{var{typed:t,matrix:n,concat:r}=e,i=RC({typed:t,matrix:n,concat:r});return t(mz,OE,i({elop:OE,Ds:!0}))})),yz="deepEqual",xz=$M(yz,["typed","equal"],(e=>{var{typed:t,equal:n}=e;return t(yz,{"any, any":function(e,t){return r(e.valueOf(),t.valueOf())}});function r(e,t){if(Array.isArray(e)){if(Array.isArray(t)){var i=e.length;if(i!==t.length)return!1;for(var a=0;a<i;a++)if(!r(e[a],t[a]))return!1;return!0}return!1}return!Array.isArray(t)&&n(e,t)}})),bz="distance",wz=$M(bz,["typed","addScalar","subtractScalar","divideScalar","multiplyScalar","deepEqual","sqrt","abs"],(e=>{var{typed:t,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,deepEqual:o,sqrt:s,abs:l}=e;return t(bz,{"Array, Array, Array":function(e,t,n){if(2===e.length&&2===t.length&&2===n.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!c(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!c(n))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(o(t,n))throw new TypeError("LinePoint1 should not be same with LinePoint2");var a=r(n[1],t[1]),s=r(t[0],n[0]),l=r(i(n[0],t[1]),i(t[0],n[1]));return m(e[0],e[1],a,s,l)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object, Object":function(e,t,n){if(2===Object.keys(e).length&&2===Object.keys(t).length&&2===Object.keys(n).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of lineOnePtX and lineOnePtY should be numbers or BigNumbers");if(!c(n))throw new TypeError("Values of lineTwoPtX and lineTwoPtY should be numbers or BigNumbers");if(o(f(t),f(n)))throw new TypeError("LinePoint1 should not be same with LinePoint2");if("pointX"in e&&"pointY"in e&&"lineOnePtX"in t&&"lineOnePtY"in t&&"lineTwoPtX"in n&&"lineTwoPtY"in n){var a=r(n.lineTwoPtY,t.lineOnePtY),s=r(t.lineOnePtX,n.lineTwoPtX),l=r(i(n.lineTwoPtX,t.lineOnePtY),i(t.lineOnePtX,n.lineTwoPtY));return m(e.pointX,e.pointY,a,s,l)}throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},"Array, Array":function(e,t){if(2===e.length&&3===t.length){if(!c(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!h(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");return m(e[0],e[1],t[0],t[1],t[2])}if(3===e.length&&6===t.length){if(!h(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!p(t))throw new TypeError("Array with 6 numbers or BigNumbers expected for second argument");return g(e[0],e[1],e[2],t[0],t[1],t[2],t[3],t[4],t[5])}if(e.length===t.length&&e.length>0){if(!d(e))throw new TypeError("All values of an array should be numbers or BigNumbers");if(!d(t))throw new TypeError("All values of an array should be numbers or BigNumbers");return v(e,t)}throw new TypeError("Invalid Arguments: Try again")},"Object, Object":function(e,t){if(2===Object.keys(e).length&&3===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointX and pointY should be numbers or BigNumbers");if(!h(t))throw new TypeError("Values of xCoeffLine, yCoeffLine and constant should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"xCoeffLine"in t&&"yCoeffLine"in t&&"constant"in t)return m(e.pointX,e.pointY,t.xCoeffLine,t.yCoeffLine,t.constant);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&6===Object.keys(t).length){if(!h(e))throw new TypeError("Values of pointX, pointY and pointZ should be numbers or BigNumbers");if(!p(t))throw new TypeError("Values of x0, y0, z0, a, b and c should be numbers or BigNumbers");if("pointX"in e&&"pointY"in e&&"x0"in t&&"y0"in t&&"z0"in t&&"a"in t&&"b"in t&&"c"in t)return g(e.pointX,e.pointY,e.pointZ,t.x0,t.y0,t.z0,t.a,t.b,t.c);throw new TypeError("Key names do not match")}if(2===Object.keys(e).length&&2===Object.keys(t).length){if(!c(e))throw new TypeError("Values of pointOneX and pointOneY should be numbers or BigNumbers");if(!c(t))throw new TypeError("Values of pointTwoX and pointTwoY should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointTwoX"in t&&"pointTwoY"in t)return v([e.pointOneX,e.pointOneY],[t.pointTwoX,t.pointTwoY]);throw new TypeError("Key names do not match")}if(3===Object.keys(e).length&&3===Object.keys(t).length){if(!h(e))throw new TypeError("Values of pointOneX, pointOneY and pointOneZ should be numbers or BigNumbers");if(!h(t))throw new TypeError("Values of pointTwoX, pointTwoY and pointTwoZ should be numbers or BigNumbers");if("pointOneX"in e&&"pointOneY"in e&&"pointOneZ"in e&&"pointTwoX"in t&&"pointTwoY"in t&&"pointTwoZ"in t)return v([e.pointOneX,e.pointOneY,e.pointOneZ],[t.pointTwoX,t.pointTwoY,t.pointTwoZ]);throw new TypeError("Key names do not match")}throw new TypeError("Invalid Arguments: Try again")},Array:function(e){if(!function(e){if(2===e[0].length&&u(e[0][0])&&u(e[0][1])){if(e.some((e=>2!==e.length||!u(e[0])||!u(e[1]))))return!1}else{if(!(3===e[0].length&&u(e[0][0])&&u(e[0][1])&&u(e[0][2])))return!1;if(e.some((e=>3!==e.length||!u(e[0])||!u(e[1])||!u(e[2]))))return!1}return!0}(e))throw new TypeError("Incorrect array format entered for pairwise distance calculation");return function(e){for(var t=[],n=[],r=[],i=0;i<e.length-1;i++)for(var a=i+1;a<e.length;a++)2===e[0].length?(n=[e[i][0],e[i][1]],r=[e[a][0],e[a][1]]):3===e[0].length&&(n=[e[i][0],e[i][1],e[i][2]],r=[e[a][0],e[a][1],e[a][2]]),t.push(v(n,r));return t}(e)}});function u(e){return"number"===typeof e||oM(e)}function c(e){return e.constructor!==Array&&(e=f(e)),u(e[0])&&u(e[1])}function h(e){return e.constructor!==Array&&(e=f(e)),u(e[0])&&u(e[1])&&u(e[2])}function d(e){return Array.isArray(e)||(e=f(e)),e.every(u)}function p(e){return e.constructor!==Array&&(e=f(e)),u(e[0])&&u(e[1])&&u(e[2])&&u(e[3])&&u(e[4])&&u(e[5])}function f(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}function m(e,t,r,o,u){var c=l(n(n(i(r,e),i(o,t)),u)),h=s(n(i(r,r),i(o,o)));return a(c,h)}function g(e,t,o,l,u,c,h,d,p){var f=[r(i(r(u,t),p),i(r(c,o),d)),r(i(r(c,o),h),i(r(l,e),p)),r(i(r(l,e),d),i(r(u,t),h))];f=s(n(n(i(f[0],f[0]),i(f[1],f[1])),i(f[2],f[2])));var m=s(n(n(i(h,h),i(d,d)),i(p,p)));return a(f,m)}function v(e,t){for(var a=e.length,o=0,l=0,u=0;u<a;u++)l=r(e[u],t[u]),o=n(i(l,l),o);return s(o)}})),Sz=$M("dot",["typed","addScalar","multiplyScalar","conj","size"],(e=>{var{typed:t,addScalar:n,multiplyScalar:r,conj:i,size:a}=e;return t("dot",{"Array | DenseMatrix, Array | DenseMatrix":function(e,a){var l=o(e,a),u=pM(e)?e._data:e,c=pM(e)?e._datatype||e.getDataType():void 0,h=pM(a)?a._data:a,d=pM(a)?a._datatype||a.getDataType():void 0,p=2===s(e).length,f=2===s(a).length,m=n,g=r;if(c&&d&&c===d&&"string"===typeof c&&"mixed"!==c){var v=c;m=t.find(n,[v,v]),g=t.find(r,[v,v])}if(!p&&!f){for(var y=g(i(u[0]),h[0]),x=1;x<l;x++)y=m(y,g(i(u[x]),h[x]));return y}if(!p&&f){for(var b=g(i(u[0]),h[0][0]),w=1;w<l;w++)b=m(b,g(i(u[w]),h[w][0]));return b}if(p&&!f){for(var S=g(i(u[0][0]),h[0]),_=1;_<l;_++)S=m(S,g(i(u[_][0]),h[_]));return S}if(p&&f){for(var M=g(i(u[0][0]),h[0][0]),E=1;E<l;E++)M=m(M,g(i(u[E][0]),h[E][0]));return M}},"SparseMatrix, SparseMatrix":function(e,t){o(e,t);var i=e._index,a=e._values,s=t._index,l=t._values,u=0,c=n,h=r,d=0,p=0;for(;d<i.length&&p<s.length;){var f=i[d],m=s[p];f<m?d++:f>m?p++:f===m&&(u=c(u,h(a[d],l[p])),d++,p++)}return u}});function o(e,t){var n,r,i=s(e),a=s(t);if(1===i.length)n=i[0];else{if(2!==i.length||1!==i[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+i.join(", ")+")");n=i[0]}if(1===a.length)r=a[0];else{if(2!==a.length||1!==a[1])throw new RangeError("Expected a column vector, instead got a matrix of size ("+a.join(", ")+")");r=a[0]}if(n!==r)throw new RangeError("Vectors must have equal length ("+n+" != "+r+")");if(0===n)throw new RangeError("Cannot calculate the dot product of empty vectors");return n}function s(e){return pM(e)?e.size():a(e)}})),_z="equalText",Mz=$M(_z,["typed","compareText","isZero"],(e=>{var{typed:t,compareText:n,isZero:r}=e;return t(_z,{"any, any":function(e,t){return r(n(e,t))}})})),Ez="floor",Az=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],Tz=$M(Ez,["typed","config","round"],(e=>{var{typed:t,config:n,round:r}=e;return t(Ez,{number:function(e){return vE(e,r(e),n.relTol,n.absTol)?r(e):Math.floor(e)},"number, number":function(e,t){if(vE(e,r(e,t),n.relTol,n.absTol))return r(e,t);var[i,a]="".concat(e,"e").split("e"),o=Math.floor(Number("".concat(i,"e").concat(Number(a)+t)));return[i,a]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(a)-t))}})})),Cz=$M(Ez,Az,(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=e,l=UC({typed:t,equalScalar:a}),u=AC({typed:t,DenseMatrix:s}),c=DC({typed:t}),h=Tz({typed:t,config:n,round:r});return t("floor",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(e){return e.floor()},"Complex, number":function(e,t){return e.floor(t)},"Complex, BigNumber":function(e,t){return e.floor(t.toNumber())},BigNumber:function(e){return DP(e,r(e),n.relTol,n.absTol)?r(e):e.floor()},"BigNumber, BigNumber":function(e,t){return DP(e,r(e,t),n.relTol,n.absTol)?r(e,t):e.toDecimalPlaces(t.toNumber(),JR.ROUND_FLOOR)},Fraction:function(e){return e.floor()},"Fraction, number":function(e,t){return e.floor(t)},"Fraction, BigNumber":function(e,t){return e.floor(t.toNumber())},"Unit, number, Unit":t.referToSelf((e=>function(t,n,r){var i=t.toNumeric(r);return r.multiply(e(i,n))})),"Unit, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Array | Matrix, number | BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>dT(t,(t=>e(t,n,r)),!0))),"Array | Matrix | Unit, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>dT(t,(t=>e(t,n)),!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>c(t,n,e,!1))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>c(i(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>a(t,0)?o(n.size(),n.storage()):"dense"===n.storage()?c(n,t,e,!0):u(n,t,e,!0)))})})),Dz=$M("mod",["typed","config","round","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s,concat:l}=e,u=Cz({typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}),c=zC({typed:t,equalScalar:a}),h=EC({typed:t}),d=TC({typed:t,equalScalar:a}),p=UC({typed:t,equalScalar:a}),f=AC({typed:t,DenseMatrix:s});return t("mod",{"number, number":function(e,t){return 0===t?e:e-t*u(e/t)},"BigNumber, BigNumber":function(e,t){return t.isZero()?e:e.sub(t.mul(u(e.div(t))))},"bigint, bigint":function(e,t){if(0n===t)return e;if(e<0){var n=e%t;return 0n===n?n:n+t}return e%t},"Fraction, Fraction":function(e,t){return t.equals(0)?e:e.sub(t.mul(u(e.div(t))))}},RC({typed:t,matrix:i,concat:l})({SS:d,DS:h,SD:c,Ss:p,sS:f}))})),Nz=["typed","config","round","matrix","equalScalar","zeros","BigNumber","DenseMatrix","concat"],Rz="number | BigNumber | Fraction | Matrix | Array",kz="".concat(Rz,", ").concat(Rz,", ...").concat(Rz);function Iz(e){return!e.some((e=>Array.isArray(e)))}var Fz=$M("gcd",Nz,(e=>{var{typed:t,matrix:n,config:r,round:i,equalScalar:a,zeros:o,BigNumber:s,DenseMatrix:l,concat:u}=e,c=Dz({typed:t,config:r,round:i,matrix:n,equalScalar:a,zeros:o,DenseMatrix:l,concat:u}),h=zD({typed:t}),d=LD({typed:t,equalScalar:a}),p=BD({typed:t,DenseMatrix:l});return t("gcd",{"number, number":function(e,t){if(!tE(e)||!tE(t))throw new Error("Parameters in function gcd must be integer numbers");var n;for(;0!==t;)n=c(e,t),e=t,t=n;return e<0?-e:e},"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function gcd must be integer numbers");var n=new s(0);for(;!t.isZero();){var r=c(e,t);e=t,t=r}return e.lt(n)?e.neg():e},"Fraction, Fraction":(e,t)=>e.gcd(t)},RC({typed:t,matrix:n,concat:u})({SS:d,DS:h,Ss:p}),{[kz]:t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i})),Array:t.referToSelf((e=>t=>{if(1===t.length&&Array.isArray(t[0])&&Iz(t[0]))return e(...t[0]);if(Iz(t))return e(...t);throw new UL("gcd() supports only 1d matrices!")})),Matrix:t.referToSelf((e=>t=>e(t.toArray())))})})),Pz="hypot",Oz=$M(Pz,["typed","abs","addScalar","divideScalar","multiplyScalar","sqrt","smaller","isPositive"],(e=>{var{typed:t,abs:n,addScalar:r,divideScalar:i,multiplyScalar:a,sqrt:o,smaller:s,isPositive:l}=e;return t(Pz,{"... number | BigNumber":u,Array:u,Matrix:e=>u(nA(e.toArray()))});function u(e){for(var t=0,u=0,c=0;c<e.length;c++){if(lM(e[c]))throw new TypeError("Unexpected type of argument to hypot");var h=n(e[c]);s(u,h)?(t=a(t,a(i(u,h),i(u,h))),t=r(t,1),u=h):t=r(t,l(h)?a(i(h,u),i(h,u)):h)}return a(u,o(t))}})),Bz=$M("ImmutableDenseMatrix",["smaller","DenseMatrix"],(e=>{var{smaller:t,DenseMatrix:n}=e;function r(e,t){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(t&&!hM(t))throw new Error("Invalid datatype: "+t);if(pM(e)||dM(e)){var i=new n(e,t);this._data=i._data,this._size=i._size,this._datatype=i._datatype,this._min=null,this._max=null}else if(e&&dM(e.data)&&dM(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min="undefined"!==typeof e.min?e.min:null,this._max="undefined"!==typeof e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+XM(e)+")");this._data=[],this._size=[0],this._datatype=t,this._min=null,this._max=null}}return r.prototype=new n,r.prototype.type="ImmutableDenseMatrix",r.prototype.isImmutableDenseMatrix=!0,r.prototype.subset=function(e){switch(arguments.length){case 1:var t=n.prototype.subset.call(this,e);return pM(t)?new r({data:t._data,size:t._size,datatype:t._datatype}):t;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},r.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},r.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},r.prototype.clone=function(){return new r({data:j_(this._data),size:j_(this._size),datatype:this._datatype})},r.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.fromJSON=function(e){return new r(e)},r.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},r.prototype.min=function(){if(null===this._min){var e=null;this.forEach((function(n){(null===e||t(n,e))&&(e=n)})),this._min=null!==e?e:void 0}return this._min},r.prototype.max=function(){if(null===this._max){var e=null;this.forEach((function(n){(null===e||t(e,n))&&(e=n)})),this._max=null!==e?e:void 0}return this._max},r}),{isClass:!0}),Lz=$M("Index",["ImmutableDenseMatrix","getMatrixDataType"],(e=>{var{ImmutableDenseMatrix:t,getMatrixDataType:n}=e;function r(e){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var t=0,a=arguments.length;t<a;t++){var o=arguments[t],s=dM(o),l=pM(o),u=null;if(vM(o))this._dimensions.push(o),this._isScalar=!1;else if(s||l){var c=void 0;"boolean"===n(o)?(s&&(c=i(zz(o).valueOf())),l&&(c=i(zz(o._data).valueOf())),u=o.valueOf().length):c=i(o.valueOf()),this._dimensions.push(c);var h=c.size();1===h.length&&1===h[0]&&null===u||(this._isScalar=!1)}else if("number"===typeof o)this._dimensions.push(i([o]));else{if("string"!==typeof o)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(o)}this._sourceSize.push(u)}}function i(e){for(var n=0,r=e.length;n<r;n++)if("number"!==typeof e[n]||!tE(e[n]))throw new TypeError("Index parameters must be positive integer numbers");return new t(e)}return r.prototype.type="Index",r.prototype.isIndex=!0,r.prototype.clone=function(){var e=new r;return e._dimensions=j_(this._dimensions),e._isScalar=this._isScalar,e._sourceSize=this._sourceSize,e},r.create=function(e){var t=new r;return r.apply(t,e),t},r.prototype.size=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"===typeof r?1:r.size()[0]}return e},r.prototype.max=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"===typeof r?r:r.max()}return e},r.prototype.min=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e[t]="string"===typeof r?r:r.min()}return e},r.prototype.forEach=function(e){for(var t=0,n=this._dimensions.length;t<n;t++)e(this._dimensions[t],t,this)},r.prototype.dimension=function(e){return"number"!==typeof e?null:this._dimensions[e]||null},r.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"===typeof this._dimensions[0]},r.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},r.prototype.isScalar=function(){return this._isScalar},r.prototype.toArray=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];e.push("string"===typeof r?r:r.toArray())}return e},r.prototype.valueOf=r.prototype.toArray,r.prototype.toString=function(){for(var e=[],t=0,n=this._dimensions.length;t<n;t++){var r=this._dimensions[t];"string"===typeof r?e.push(JSON.stringify(r)):e.push(r.toString())}return"["+e.join(", ")+"]"},r.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},r.fromJSON=function(e){return r.create(e.dimensions)},r}),{isClass:!0});function zz(e){var t=[];return e.forEach(((e,n)=>{e&&t.push(n)})),t}var Uz="larger",Hz=$M(Uz,["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=e,s=EC({typed:t}),l=dL({typed:t,SparseMatrix:o}),u=AC({typed:t,DenseMatrix:i}),c=RC({typed:t,matrix:r,concat:a}),h=NP({typed:t});return t(Uz,qz({typed:t,config:n}),{"boolean, boolean":(e,t)=>e>t,"BigNumber, BigNumber":function(e,t){return e.gt(t)&&!DP(e,t,n.relTol,n.absTol)},"bigint, bigint":(e,t)=>e>t,"Fraction, Fraction":(e,t)=>1===e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:s,Ss:u}))})),qz=$M(Uz,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(Uz,{"number, number":function(e,t){return e>t&&!vE(e,t,n.relTol,n.absTol)}})})),Vz=$M("log",["config","typed","typeOf","divideScalar","Complex"],(e=>{var{typed:t,typeOf:n,config:r,divideScalar:i,Complex:a}=e;return t("log",{number:function(e){return e>=0||r.predictable?function(e,t){return t?Math.log(e)/Math.log(t):Math.log(e)}(e):new a(e,0).log()},Complex:function(e){return e.log()},BigNumber:function(e){return!e.isNegative()||r.predictable?e.ln():new a(e.toNumber(),0).log()},"any, any":t.referToSelf((e=>(t,r)=>{if("Fraction"===n(t)&&"Fraction"===n(r)){var a=t.log(r);if(null!==a)return a}return i(e(t),e(r))}))})})),jz="lsolveAll",Gz=$M(jz,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=RL({DenseMatrix:s});return t(jz,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=0;f<c;f++)for(var m=n.length,g=0;g<m;g++){for(var v=n[g],y=[],x=[],b=p[f],w=p[f+1],S=0,_=b;_<w;_++){var M=d[_];M===f?S=h[_]:M>f&&(y.push(h[_]),x.push(M))}if(o(S,0))if(o(v[f],0)){if(0===g){var E=[...v];E[f]=1;for(var A=0,T=x.length;A<T;A++){var C=x[A];E[C]=a(E[C],y[A])}n.push(E)}}else{if(0===g)return[];n.splice(g,1),g-=1,m-=1}else{v[f]=r(v[f],S);for(var D=0,N=x.length;D<N;D++){var R=x[D];v[R]=a(v[R],i(v[f],y[D]))}}}return n.map((e=>new s({data:e.map((e=>[e])),size:[u,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).map((e=>e.valueOf()))}});function u(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._data,c=e._size[0],h=e._size[1],d=0;d<h;d++)for(var p=n.length,f=0;f<p;f++){var m=n[f];if(o(u[d][d],0))if(o(m[d],0)){if(0===f){var g=[...m];g[d]=1;for(var v=d+1;v<h;v++)g[v]=a(g[v],u[v][d]);n.push(g)}}else{if(0===f)return[];n.splice(f,1),f-=1,p-=1}else{m[d]=r(m[d],u[d][d]);for(var y=d+1;y<h;y++)m[y]=a(m[y],i(m[d],u[y][d]))}}return n.map((e=>new s({data:e.map((e=>[e])),size:[c,1]})))}})),Wz="matrixFromRows",Xz=$M(Wz,["typed","matrix","flatten","size"],(e=>{var{typed:t,matrix:n,flatten:r,size:i}=e;return t(Wz,{"...Array":function(e){return a(e)},"...Matrix":function(e){return n(a(e.map((e=>e.toArray()))))}});function a(e){if(0===e.length)throw new TypeError("At least one row is needed to construct a matrix.");var t=o(e[0]),n=[];for(var i of e){var a=o(i);if(a!==t)throw new TypeError("The vectors had different length: "+(0|t)+" \u2260 "+(0|a));n.push(r(i))}return n}function o(e){var t=i(e);if(1===t.length)return t[0];if(2===t.length){if(1===t[0])return t[1];if(1===t[1])return t[0];throw new TypeError("At least one of the arguments is not a vector.")}throw new TypeError("Only one- or two-dimensional vectors are supported.")}})),Yz="multiply",$z=$M(Yz,["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],(e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:a,dot:o}=e,s=UC({typed:t,equalScalar:a}),l=DC({typed:t});function u(e,t){switch(e.length){case 1:switch(t.length){case 1:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(e[0]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+e[0]+") must match Matrix rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;case 2:switch(t.length){case 1:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+e[1]+") must match Vector length ("+t[0]+")");break;case 2:if(e[1]!==t[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+e[1]+") must match Matrix B rows ("+t[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+t.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+e.length+" dimensions)")}}function c(e,n){if("dense"!==n.storage())throw new Error("Support for SparseMatrix not implemented");return function(e,n){var a,o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._data,c=n._size,h=n._datatype||n.getDataType(),d=s[0],p=c[1],f=r,m=i;l&&h&&l===h&&"string"===typeof l&&"mixed"!==l&&(a=l,f=t.find(r,[a,a]),m=t.find(i,[a,a]));for(var g=[],v=0;v<p;v++){for(var y=m(o[0],u[0][v]),x=1;x<d;x++)y=f(y,m(o[x],u[x][v]));g[v]=y}return e.createDenseMatrix({data:g,size:[p],datatype:l===e._datatype&&h===n._datatype?a:void 0})}(e,n)}var h=t("_multiplyMatrixVector",{"DenseMatrix, any":function(e,n){var a,o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._data,c=n._datatype||n.getDataType(),h=s[0],d=s[1],p=r,f=i;l&&c&&l===c&&"string"===typeof l&&"mixed"!==l&&(a=l,p=t.find(r,[a,a]),f=t.find(i,[a,a]));for(var m=[],g=0;g<h;g++){for(var v=o[g],y=f(v[0],u[0]),x=1;x<d;x++)y=p(y,f(v[x],u[x]));m[g]=y}return e.createDenseMatrix({data:m,size:[h],datatype:l===e._datatype&&c===n._datatype?a:void 0})},"SparseMatrix, any":function(e,n){var o=e._values,s=e._index,l=e._ptr,u=e._datatype||void 0===e._data?e._datatype:e.getDataType();if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,h=n._data,d=n._datatype||n.getDataType(),p=e._size[0],f=n._size[0],m=[],g=[],v=[],y=r,x=i,b=a,w=0;u&&d&&u===d&&"string"===typeof u&&"mixed"!==u&&(c=u,y=t.find(r,[c,c]),x=t.find(i,[c,c]),b=t.find(a,[c,c]),w=t.convert(0,c));var S=[],_=[];v[0]=0;for(var M=0;M<f;M++){var E=h[M];if(!b(E,w))for(var A=l[M],T=l[M+1],C=A;C<T;C++){var D=s[C];_[D]?S[D]=y(S[D],x(E,o[C])):(_[D]=!0,g.push(D),S[D]=x(E,o[C]))}}for(var N=g.length,R=0;R<N;R++){var k=g[R];m[R]=S[k]}return v[1]=g.length,e.createSparseMatrix({values:m,index:g,ptr:v,size:[p,1],datatype:u===e._datatype&&d===n._datatype?c:void 0})}}),d=t("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":function(e,n){var a,o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._data,c=n._size,h=n._datatype||n.getDataType(),d=s[0],p=s[1],f=c[1],m=r,g=i;l&&h&&l===h&&"string"===typeof l&&"mixed"!==l&&"mixed"!==l&&(a=l,m=t.find(r,[a,a]),g=t.find(i,[a,a]));for(var v=[],y=0;y<d;y++){var x=o[y];v[y]=[];for(var b=0;b<f;b++){for(var w=g(x[0],u[0][b]),S=1;S<p;S++)w=m(w,g(x[S],u[S][b]));v[y][b]=w}}return e.createDenseMatrix({data:v,size:[d,f],datatype:l===e._datatype&&h===n._datatype?a:void 0})},"DenseMatrix, SparseMatrix":function(e,n){var o=e._data,s=e._size,l=e._datatype||e.getDataType(),u=n._values,c=n._index,h=n._ptr,d=n._size,p=n._datatype||void 0===n._data?n._datatype:n.getDataType();if(!u)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var f,m=s[0],g=d[1],v=r,y=i,x=a,b=0;l&&p&&l===p&&"string"===typeof l&&"mixed"!==l&&(f=l,v=t.find(r,[f,f]),y=t.find(i,[f,f]),x=t.find(a,[f,f]),b=t.convert(0,f));for(var w=[],S=[],_=[],M=n.createSparseMatrix({values:w,index:S,ptr:_,size:[m,g],datatype:l===e._datatype&&p===n._datatype?f:void 0}),E=0;E<g;E++){_[E]=S.length;var A=h[E],T=h[E+1];if(T>A)for(var C=0,D=0;D<m;D++){for(var N=D+1,R=void 0,k=A;k<T;k++){var I=c[k];C!==N?(R=y(o[D][I],u[k]),C=N):R=v(R,y(o[D][I],u[k]))}C!==N||x(R,b)||(S.push(D),w.push(R))}}return _[g]=S.length,M},"SparseMatrix, DenseMatrix":function(e,n){var o=e._values,s=e._index,l=e._ptr,u=e._datatype||void 0===e._data?e._datatype:e.getDataType();if(!o)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var c,h=n._data,d=n._datatype||n.getDataType(),p=e._size[0],f=n._size[0],m=n._size[1],g=r,v=i,y=a,x=0;u&&d&&u===d&&"string"===typeof u&&"mixed"!==u&&(c=u,g=t.find(r,[c,c]),v=t.find(i,[c,c]),y=t.find(a,[c,c]),x=t.convert(0,c));for(var b=[],w=[],S=[],_=e.createSparseMatrix({values:b,index:w,ptr:S,size:[p,m],datatype:u===e._datatype&&d===n._datatype?c:void 0}),M=[],E=[],A=0;A<m;A++){S[A]=w.length;for(var T=A+1,C=0;C<f;C++){var D=h[C][A];if(!y(D,x))for(var N=l[C],R=l[C+1],k=N;k<R;k++){var I=s[k];E[I]!==T?(E[I]=T,w.push(I),M[I]=v(D,o[k])):M[I]=g(M[I],v(D,o[k]))}}for(var F=S[A],P=w.length,O=F;O<P;O++){var B=w[O];b[O]=M[B]}}return S[m]=w.length,_},"SparseMatrix, SparseMatrix":function(e,n){var a,o=e._values,s=e._index,l=e._ptr,u=e._datatype||void 0===e._data?e._datatype:e.getDataType(),c=n._values,h=n._index,d=n._ptr,p=n._datatype||void 0===n._data?n._datatype:n.getDataType(),f=e._size[0],m=n._size[1],g=o&&c,v=r,y=i;u&&p&&u===p&&"string"===typeof u&&"mixed"!==u&&(a=u,v=t.find(r,[a,a]),y=t.find(i,[a,a]));for(var x,b,w,S,_,M,E,A,T=g?[]:void 0,C=[],D=[],N=e.createSparseMatrix({values:T,index:C,ptr:D,size:[f,m],datatype:u===e._datatype&&p===n._datatype?a:void 0}),R=g?[]:void 0,k=[],I=0;I<m;I++){D[I]=C.length;var F=I+1;for(_=d[I],M=d[I+1],S=_;S<M;S++)if(A=h[S],g)for(b=l[A],w=l[A+1],x=b;x<w;x++)k[E=s[x]]!==F?(k[E]=F,C.push(E),R[E]=y(c[S],o[x])):R[E]=v(R[E],y(c[S],o[x]));else for(b=l[A],w=l[A+1],x=b;x<w;x++)k[E=s[x]]!==F&&(k[E]=F,C.push(E));if(g)for(var P=D[I],O=C.length,B=P;B<O;B++){var L=C[B];T[B]=R[L]}}return D[m]=C.length,N}});return t(Yz,i,{"Array, Array":t.referTo("Matrix, Matrix",(e=>(t,r)=>{u(HE(t),HE(r));var i=e(n(t),n(r));return pM(i)?i.valueOf():i})),"Matrix, Matrix":function(e,t){var n=e.size(),r=t.size();return u(n,r),1===n.length?1===r.length?function(e,t,n){if(0===n)throw new Error("Cannot multiply two empty vectors");return o(e,t)}(e,t,n[0]):c(e,t):1===r.length?h(e,t):d(e,t)},"Matrix, Array":t.referTo("Matrix,Matrix",(e=>(t,r)=>e(t,n(r)))),"Array, Matrix":t.referToSelf((e=>(t,r)=>e(n(t,r.storage()),r))),"SparseMatrix, any":function(e,t){return s(e,t,i,!1)},"DenseMatrix, any":function(e,t){return l(e,t,i,!1)},"any, SparseMatrix":function(e,t){return s(t,e,i,!0)},"any, DenseMatrix":function(e,t){return l(t,e,i,!0)},"Array, any":function(e,t){return l(n(e),t,i,!1).valueOf()},"any, Array":function(e,t){return l(n(t),e,i,!0).valueOf()},"any, any":i,"any, any, ...any":t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i}))})})),Zz="nthRoots",Jz=$M(Zz,["config","typed","divideScalar","Complex"],(e=>{var{typed:t,config:n,divideScalar:r,Complex:i}=e,a=[function(e){return new i(e,0)},function(e){return new i(0,e)},function(e){return new i(-e,0)},function(e){return new i(0,-e)}];function o(e,t){if(t<0)throw new Error("Root must be greater than zero");if(0===t)throw new Error("Root must be non-zero");if(t%1!==0)throw new Error("Root must be an integer");if(0===e||0===e.abs())return[new i(0,0)];var n,r="number"===typeof e;(r||0===e.re||0===e.im)&&(n=r?2*+(e<0):0===e.im?2*+(e.re<0):2*+(e.im<0)+1);for(var o=e.arg(),s=e.abs(),l=[],u=Math.pow(s,1/t),c=0;c<t;c++){var h=(n+4*c)/t;h!==Math.round(h)?l.push(new i({r:u,phi:(o+2*Math.PI*c)/t})):l.push(a[h%4](u))}return l}return t(Zz,{Complex:function(e){return o(e,2)},"Complex, number":o})})),Kz="partitionSelect",Qz=$M(Kz,["typed","isNumeric","isNaN","compare"],(e=>{var{typed:t,isNumeric:n,isNaN:r,compare:i}=e,a=i,o=(e,t)=>-i(e,t);return t(Kz,{"Array | Matrix, number":function(e,t){return s(e,t,a)},"Array | Matrix, number, string":function(e,t,n){if("asc"===n)return s(e,t,a);if("desc"===n)return s(e,t,o);throw new Error('Compare string must be "asc" or "desc"')},"Array | Matrix, number, function":s});function s(e,t,n){if(!tE(t)||t<0)throw new Error("k must be a non-negative integer");if(pM(e)){if(e.size().length>1)throw new Error("Only one dimensional matrices supported");return l(e.valueOf(),t,n)}if(Array.isArray(e))return l(e,t,n)}function l(e,t,i){if(t>=e.length)throw new Error("k out of bounds");for(var a=0;a<e.length;a++)if(n(e[a])&&r(e[a]))return e[a];for(var o=0,s=e.length-1;o<s;){for(var l=o,u=s,c=e[Math.floor(Math.random()*(s-o+1))+o];l<u;)if(i(e[l],c)>=0){var h=e[u];e[u]=e[l],e[l]=h,--u}else++l;i(e[l],c)>0&&--l,t<=l?s=l:o=l+1}return e[t]}})),eU="rightLogShift",tU=$M(eU,["typed","matrix","equalScalar","zeros","DenseMatrix","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,zeros:i,DenseMatrix:a,concat:o}=e,s=zD({typed:t}),l=zC({typed:t,equalScalar:r}),u=TL({typed:t,equalScalar:r}),c=BD({typed:t,DenseMatrix:a}),h=UC({typed:t,equalScalar:r}),d=DC({typed:t}),p=RC({typed:t,matrix:n,concat:o}),f=CL({typed:t,matrix:n});return t(eU,{"number, number":yD,"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():h(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>r(n,0)?t.clone():d(t,n,e,!1))),"number | BigNumber, SparseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):c(n,t,e,!0))),"number | BigNumber, DenseMatrix":t.referToSelf((e=>(t,n)=>r(t,0)?i(n.size(),n.storage()):d(n,t,e,!0)))},f,p({SS:u,DS:s,SD:l}))}));function nU(e,t,n,r,i,a,o){var s=0;for(n[o]=e;s>=0;){var l=n[o+s],u=n[r+l];-1===u?(s--,a[t++]=l):(n[r+l]=n[i+u],n[o+ ++s]=u)}return t}function rU(e){return-e-2}var iU=$M("csAmd",["add","multiply","transpose"],(e=>{var{add:t,multiply:n,transpose:r}=e;return function(e,o){if(!o||e<=0||e>3)return null;var s=o._size,l=s[0],u=s[1],c=0,h=Math.max(16,10*Math.sqrt(u)),d=function(e,i,a,o,s){var l=r(i);if(1===e&&o===a)return t(i,l);if(2===e){for(var u=l._index,c=l._ptr,h=0,d=0;d<a;d++){var p=c[d];if(c[d]=h,!(c[d+1]-p>s))for(var f=c[d+1];p<f;p++)u[h++]=u[p]}return c[a]=h,i=r(l),n(l,i)}return n(l,i)}(e,o,l,u,h=Math.min(u-2,h));!function(e,t,n){for(var r=e._values,i=e._index,a=e._ptr,o=e._size[1],s=0,l=0;l<o;l++){var u=a[l];for(a[l]=s;u<a[l+1];u++)t(i[u],l,r?r[u]:1,n)&&(i[s]=i[u],r&&(r[s]=r[u]),s++)}a[o]=s,i.splice(s,i.length-s),r&&r.splice(s,r.length-s)}(d,a,null);for(var p,f,m,g,v,y,x,b,w,S,_,M,E,A,T,C,D=d._index,N=d._ptr,R=N[u],k=[],I=[],F=u+1,P=2*(u+1),O=3*(u+1),B=4*(u+1),L=5*(u+1),z=6*(u+1),U=7*(u+1),H=k,q=function(e,t,n,r,a,o,s,l,u,c,h,d){for(var p=0;p<e;p++)n[r+p]=t[p+1]-t[p];n[r+e]=0;for(var f=0;f<=e;f++)n[a+f]=-1,o[f]=-1,n[s+f]=-1,n[l+f]=-1,n[u+f]=1,n[c+f]=1,n[h+f]=0,n[d+f]=n[r+f];var m=i(0,0,n,c,e);return n[h+e]=-2,t[e]=-1,n[c+e]=0,m}(u,N,I,0,O,H,P,U,F,z,B,L),V=function(e,t,n,r,i,a,o,s,l,u,c){for(var h=0,d=0;d<e;d++){var p=n[r+d];if(0===p)n[i+d]=-2,h++,t[d]=-1,n[a+d]=0;else if(p>o)n[s+d]=0,n[i+d]=-1,h++,t[d]=rU(e),n[s+e]++;else{var f=n[l+p];-1!==f&&(u[f]=d),n[c+d]=n[l+p],n[l+p]=d}}return h}(u,N,I,L,B,z,h,F,O,H,P),j=0;V<u;){for(m=-1;j<u&&-1===(m=I[O+j]);j++);-1!==I[P+m]&&(H[I[P+m]]=-1),I[O+j]=I[P+m];var G=I[B+m],W=I[F+m];V+=W;var X=0;I[F+m]=-W;var Y=N[m],$=0===G?Y:R,Z=$;for(g=1;g<=G+1;g++){for(g>G?(y=m,x=Y,b=I[0+m]-G):(x=N[y=D[Y++]],b=I[0+y]),v=1;v<=b;v++)(w=I[F+(p=D[x++])])<=0||(X+=w,I[F+p]=-w,D[Z++]=p,-1!==I[P+p]&&(H[I[P+p]]=H[p]),-1!==H[p]?I[P+H[p]]=I[P+p]:I[O+I[L+p]]=I[P+p]);y!==m&&(N[y]=rU(m),I[z+y]=0)}for(0!==G&&(R=Z),I[L+m]=X,N[m]=$,I[0+m]=Z-$,I[B+m]=-2,q=i(q,c,I,z,u),S=$;S<Z;S++)if(!((_=I[B+(p=D[S])])<=0)){var J=q-(w=-I[F+p]);for(Y=N[p],M=N[p]+_-1;Y<=M;Y++)I[z+(y=D[Y])]>=q?I[z+y]-=w:0!==I[z+y]&&(I[z+y]=I[L+y]+J)}for(S=$;S<Z;S++){for(E=(M=N[p=D[S]])+I[B+p]-1,A=M,T=0,C=0,Y=M;Y<=E;Y++)if(0!==I[z+(y=D[Y])]){var K=I[z+y]-q;K>0?(C+=K,D[A++]=y,T+=y):(N[y]=rU(m),I[z+y]=0)}I[B+p]=A-M+1;var Q=A,ee=M+I[0+p];for(Y=E+1;Y<ee;Y++){var te=I[F+(f=D[Y])];te<=0||(C+=te,D[A++]=f,T+=f)}0===C?(N[p]=rU(m),X-=w=-I[F+p],W+=w,V+=w,I[F+p]=0,I[B+p]=-1):(I[L+p]=Math.min(I[L+p],C),D[A]=D[Q],D[Q]=D[M],D[M]=m,I[0+p]=A-M+1,T=(T<0?-T:T)%u,I[P+p]=I[U+T],I[U+T]=p,H[p]=T)}for(I[L+m]=X,q=i(q+(c=Math.max(c,X)),c,I,z,u),S=$;S<Z;S++)if(!(I[F+(p=D[S])]>=0))for(p=I[U+(T=H[p])],I[U+T]=-1;-1!==p&&-1!==I[P+p];p=I[P+p],q++){for(b=I[0+p],_=I[B+p],Y=N[p]+1;Y<=N[p]+b-1;Y++)I[z+D[Y]]=q;var ne=p;for(f=I[P+p];-1!==f;){var re=I[0+f]===b&&I[B+f]===_;for(Y=N[f]+1;re&&Y<=N[f]+b-1;Y++)I[z+D[Y]]!==q&&(re=0);re?(N[f]=rU(p),I[F+p]+=I[F+f],I[F+f]=0,I[B+f]=-1,f=I[P+f],I[P+ne]=f):(ne=f,f=I[P+f])}}for(Y=$,S=$;S<Z;S++)(w=-I[F+(p=D[S])])<=0||(I[F+p]=w,C=I[L+p]+X-w,-1!==I[O+(C=Math.min(C,u-V-w))]&&(H[I[O+C]]=p),I[P+p]=I[O+C],H[p]=-1,I[O+C]=p,j=Math.min(j,C),I[L+p]=C,D[Y++]=p);I[F+m]=W,0===(I[0+m]=Y-$)&&(N[m]=-1,I[z+m]=0),0!==G&&(R=Y)}for(p=0;p<u;p++)N[p]=rU(N[p]);for(f=0;f<=u;f++)I[O+f]=-1;for(f=u;f>=0;f--)I[F+f]>0||(I[P+f]=I[O+N[f]],I[O+N[f]]=f);for(y=u;y>=0;y--)I[F+y]<=0||-1!==N[y]&&(I[P+y]=I[O+N[y]],I[O+N[y]]=y);for(m=0,p=0;p<=u;p++)-1===N[p]&&(m=nU(p,m,I,O,P,k,z));return k.splice(k.length-1,1),k};function i(e,t,n,r,i){if(e<2||e+t<0){for(var a=0;a<i;a++)0!==n[r+a]&&(n[r+a]=1);e=2}return e}function a(e,t){return e!==t}}));function aU(e,t,n,r,i,a,o){var s,l,u,c=0;if(e<=t||n[r+t]<=n[i+e])return-1;n[i+e]=n[r+t];var h=n[a+e];if(n[a+e]=t,-1===h)c=1,u=e;else{for(c=2,u=h;u!==n[o+u];u=n[o+u]);for(s=h;s!==u;s=l)l=n[o+s],n[o+s]=u}return{jleaf:c,q:u}}var oU=$M("csCounts",["transpose"],(e=>{var{transpose:t}=e;return function(e,n,r,i){if(!e||!n||!r)return null;var a,o,s,l,u,c,h,d=e._size,p=d[0],f=d[1],m=4*f+(i?f+p+1:0),g=[],v=f,y=2*f,x=3*f,b=4*f,w=5*f+1;for(s=0;s<m;s++)g[s]=-1;var S=[],_=t(e),M=_._index,E=_._ptr;for(s=0;s<f;s++)for(S[o=r[s]]=-1===g[x+o]?1:0;-1!==o&&-1===g[x+o];o=n[o])g[x+o]=s;if(i){for(s=0;s<f;s++)g[r[s]]=s;for(a=0;a<p;a++){for(s=f,c=E[a],h=E[a+1],u=c;u<h;u++)s=Math.min(s,g[M[u]]);g[w+a]=g[b+s],g[b+s]=a}}for(a=0;a<f;a++)g[0+a]=a;for(s=0;s<f;s++){for(-1!==n[o=r[s]]&&S[n[o]]--,l=i?g[b+s]:o;-1!==l;l=i?g[w+l]:-1)for(u=E[l];u<E[l+1];u++){var A=aU(a=M[u],o,g,x,v,y,0);A.jleaf>=1&&S[o]++,2===A.jleaf&&S[A.q]--}-1!==n[o]&&(g[0+o]=n[o])}for(o=0;o<f;o++)-1!==n[o]&&(S[n[o]]+=S[o]);return S}})),sU=$M("csSqr",["add","multiply","transpose"],(e=>{var{add:t,multiply:n,transpose:r}=e,i=iU({add:t,multiply:n,transpose:r}),a=oU({transpose:r});return function(e,t,n){var r,o=t._ptr,s=t._size[1],l={};if(l.q=i(e,t),e&&!l.q)return null;if(n){var u=e?function(e,t,n,r){for(var i=e._values,a=e._index,o=e._ptr,s=e._size,l=e._datatype,u=s[0],c=s[1],h=r&&e._values?[]:null,d=[],p=[],f=0,m=0;m<c;m++){p[m]=f;for(var g=n?n[m]:m,v=o[g],y=o[g+1],x=v;x<y;x++){var b=t?t[a[x]]:a[x];d[f]=b,h&&(h[f]=i[x]),f++}}return p[c]=f,e.createSparseMatrix({values:h,index:d,ptr:p,size:[u,c],datatype:l})}(t,null,l.q,0):t;l.parent=function(e,t){if(!e)return null;var n,r,i=e._index,a=e._ptr,o=e._size,s=o[0],l=o[1],u=[],c=[],h=l;if(t)for(n=0;n<s;n++)c[h+n]=-1;for(var d=0;d<l;d++){u[d]=-1,c[0+d]=-1;for(var p=a[d],f=a[d+1],m=p;m<f;m++){var g=i[m];for(n=t?c[h+g]:g;-1!==n&&n<d;n=r)r=c[0+n],c[0+n]=d,-1===r&&(u[n]=d);t&&(c[h+g]=d)}}return u}(u,1);var c=function(e,t){if(!e)return null;var n,r=0,i=[],a=[],o=t,s=2*t;for(n=0;n<t;n++)a[0+n]=-1;for(n=t-1;n>=0;n--)-1!==e[n]&&(a[o+n]=a[0+e[n]],a[0+e[n]]=n);for(n=0;n<t;n++)-1===e[n]&&(r=nU(n,r,a,0,o,i,s));return i}(l.parent,s);if(l.cp=a(u,l.parent,c,1),u&&l.parent&&l.cp&&function(e,t){var n=e._ptr,r=e._index,i=e._size,a=i[0],o=i[1];t.pinv=[],t.leftmost=[];var s,l,u,c,h,d=t.parent,p=t.pinv,f=t.leftmost,m=[],g=0,v=a,y=a+o,x=a+2*o;for(l=0;l<o;l++)m[v+l]=-1,m[y+l]=-1,m[x+l]=0;for(s=0;s<a;s++)f[s]=-1;for(l=o-1;l>=0;l--)for(c=n[l],h=n[l+1],u=c;u<h;u++)f[r[u]]=l;for(s=a-1;s>=0;s--)p[s]=-1,-1!==(l=f[s])&&(0===m[x+l]++&&(m[y+l]=s),m[g+s]=m[v+l],m[v+l]=s);for(t.lnz=0,t.m2=a,l=0;l<o;l++)if(s=m[v+l],t.lnz++,s<0&&(s=t.m2++),p[s]=l,!(--x[l]<=0)){t.lnz+=m[x+l];var b=d[l];-1!==b&&(0===m[x+b]&&(m[y+b]=m[y+l]),m[g+m[y+l]]=m[v+b],m[v+b]=m[g+s],m[x+b]+=m[x+l])}for(s=0;s<a;s++)p[s]<0&&(p[s]=l++);return!0}(u,l))for(l.unz=0,r=0;r<s;r++)l.unz+=l.cp[r]}else l.unz=4*o[s]+s,l.lnz=l.unz;return l}}));function lU(e,t){return e[t]<0}function uU(e,t){e[t]=rU(e[t])}function cU(e){return e<0?rU(e):e}function hU(e,t,n,r,i){var a,o,s,l=t._index,u=t._ptr,c=t._size[1],h=0;for(r[0]=e;h>=0;){e=r[h];var d=i?i[e]:e;lU(u,e)||(uU(u,e),r[c+h]=d<0?0:cU(u[d]));var p=1;for(o=r[c+h],s=d<0?0:cU(u[d+1]);o<s;o++)if(!lU(u,a=l[o])){r[c+h]=o,r[++h]=a,p=0;break}p&&(h--,r[--n]=e)}return n}var dU=$M("csSpsolve",["divideScalar","multiply","subtract"],(e=>{var{divideScalar:t,multiply:n,subtract:r}=e;return function(e,i,a,o,s,l,u){var c,h,d,p,f=e._values,m=e._index,g=e._ptr,v=e._size[1],y=i._values,x=i._index,b=i._ptr,w=function(e,t,n,r,i){var a,o,s,l=e._ptr,u=e._size,c=t._index,h=t._ptr,d=u[1],p=d;for(o=h[n],s=h[n+1],a=o;a<s;a++){var f=c[a];lU(l,f)||(p=hU(f,e,p,r,i))}for(a=p;a<d;a++)uU(l,r[a]);return p}(e,i,a,o,l);for(c=w;c<v;c++)s[o[c]]=0;for(h=b[a],d=b[a+1],c=h;c<d;c++)s[x[c]]=y[c];for(var S=w;S<v;S++){var _=o[S],M=l?l[_]:_;if(!(M<0))for(h=g[M],d=g[M+1],s[_]=t(s[_],f[u?h:d-1]),c=u?h+1:h,p=u?d:d-1;c<p;c++){var E=m[c];s[E]=r(s[E],n(f[c],s[_]))}}return w}})),pU=$M("csLu",["abs","divideScalar","multiply","subtract","larger","largerEq","SparseMatrix"],(e=>{var{abs:t,divideScalar:n,multiply:r,subtract:i,larger:a,largerEq:o,SparseMatrix:s}=e,l=dU({divideScalar:n,multiply:r,subtract:i});return function(e,i,u){if(!e)return null;var c,h=e._size[1],d=100,p=100;i&&(c=i.q,d=i.lnz||d,p=i.unz||p);var f,m,g=[],v=[],y=[],x=new s({values:g,index:v,ptr:y,size:[h,h]}),b=[],w=[],S=[],_=new s({values:b,index:w,ptr:S,size:[h,h]}),M=[],E=[],A=[];for(f=0;f<h;f++)E[f]=0,M[f]=-1,y[f+1]=0;d=0,p=0;for(var T=0;T<h;T++){y[T]=d,S[T]=p;var C=c?c[T]:T,D=l(x,e,C,A,E,M,1),N=-1,R=-1;for(m=D;m<h;m++)if(M[f=A[m]]<0){var k=t(E[f]);a(k,R)&&(R=k,N=f)}else w[p]=M[f],b[p++]=E[f];if(-1===N||R<=0)return null;M[C]<0&&o(t(E[C]),r(R,u))&&(N=C);var I=E[N];for(w[p]=T,b[p++]=I,M[N]=T,v[d]=N,g[d++]=1,m=D;m<h;m++)M[f=A[m]]<0&&(v[d]=f,g[d++]=n(E[f],I)),E[f]=0}for(y[h]=d,S[h]=p,m=0;m<d;m++)v[m]=M[v[m]];return g.splice(d,g.length-d),v.splice(d,v.length-d),b.splice(p,b.length-p),w.splice(p,w.length-p),{L:x,U:_,pinv:M}}})),fU=$M("slu",["typed","abs","add","multiply","transpose","divideScalar","subtract","larger","largerEq","SparseMatrix"],(e=>{var{typed:t,abs:n,add:r,multiply:i,transpose:a,divideScalar:o,subtract:s,larger:l,largerEq:u,SparseMatrix:c}=e,h=sU({add:r,multiply:i,transpose:a}),d=pU({abs:n,divideScalar:o,multiply:i,subtract:s,larger:l,largerEq:u,SparseMatrix:c});return t("slu",{"SparseMatrix, number, number":function(e,t,n){if(!tE(t)||t<0||t>3)throw new Error("Symbolic Ordering and Analysis order must be an integer number in the interval [0, 3]");if(n<0||n>1)throw new Error("Partial pivoting threshold must be a number from 0 to 1");var r=h(t,e,!1),i=d(e,r,n);return{L:i.L,U:i.U,p:i.pinv,q:r.q,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\np: "+this.p.toString()+(this.q?"\nq: "+this.q.toString():"")+"\n"}}}})})),mU=$M("trace",["typed","matrix","add"],(e=>{var{typed:t,matrix:n,add:r}=e;return t("trace",{Array:function(e){return i(n(e))},SparseMatrix:function(e){var t=e._values,n=e._index,i=e._ptr,a=e._size,o=a[0],s=a[1];if(o===s){var l=0;if(t.length>0)for(var u=0;u<s;u++)for(var c=i[u],h=i[u+1],d=c;d<h;d++){var p=n[d];if(p===u){l=r(l,t[d]);break}if(p>u)break}return l}throw new RangeError("Matrix must be square (size: "+RE(a)+")")},DenseMatrix:i,any:j_});function i(e){var t=e._size,n=e._data;switch(t.length){case 1:if(1===t[0])return j_(n[0]);throw new RangeError("Matrix must be square (size: "+RE(t)+")");case 2:var i=t[0];if(i===t[1]){for(var a=0,o=0;o<i;o++)a=r(a,n[o][o]);return a}throw new RangeError("Matrix must be square (size: "+RE(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+RE(t)+")")}}})),gU="usolveAll",vU=$M(gU,["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],(e=>{var{typed:t,matrix:n,divideScalar:r,multiplyScalar:i,subtractScalar:a,equalScalar:o,DenseMatrix:s}=e,l=RL({DenseMatrix:s});return t(gU,{"SparseMatrix, Array | Matrix":function(e,t){return function(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._size[0],c=e._size[1],h=e._values,d=e._index,p=e._ptr,f=c-1;f>=0;f--)for(var m=n.length,g=0;g<m;g++){for(var v=n[g],y=[],x=[],b=p[f],w=0,S=p[f+1]-1;S>=b;S--){var _=d[S];_===f?w=h[S]:_<f&&(y.push(h[S]),x.push(_))}if(o(w,0))if(o(v[f],0)){if(0===g){var M=[...v];M[f]=1;for(var E=0,A=x.length;E<A;E++){var T=x[E];M[T]=a(M[T],y[E])}n.push(M)}}else{if(0===g)return[];n.splice(g,1),g-=1,m-=1}else{v[f]=r(v[f],w);for(var C=0,D=x.length;C<D;C++){var N=x[C];v[N]=a(v[N],i(v[f],y[C]))}}}return n.map((e=>new s({data:e.map((e=>[e])),size:[u,1]})))}(e,t)},"DenseMatrix, Array | Matrix":function(e,t){return u(e,t)},"Array, Array | Matrix":function(e,t){return u(n(e),t).map((e=>e.valueOf()))}});function u(e,t){for(var n=[l(e,t,!0)._data.map((e=>e[0]))],u=e._data,c=e._size[0],h=e._size[1]-1;h>=0;h--)for(var d=n.length,p=0;p<d;p++){var f=n[p];if(o(u[h][h],0))if(o(f[h],0)){if(0===p){var m=[...f];m[h]=1;for(var g=h-1;g>=0;g--)m[g]=a(m[g],u[g][h]);n.push(m)}}else{if(0===p)return[];n.splice(p,1),p-=1,d-=1}else{f[h]=r(f[h],u[h][h]);for(var v=h-1;v>=0;v--)f[v]=a(f[v],i(f[h],u[v][h]))}}return n.map((e=>new s({data:e.map((e=>[e])),size:[c,1]})))}})),yU="zpk2tf",xU=$M(yU,["typed","add","multiply","Complex","number"],(e=>{var{typed:t,add:n,multiply:r,Complex:i,number:a}=e;return t(yU,{"Array,Array,number":function(e,t,n){return o(e,t,n)},"Array,Array":function(e,t){return o(e,t,1)},"Matrix,Matrix,number":function(e,t,n){return o(e.valueOf(),t.valueOf(),n)},"Matrix,Matrix":function(e,t){return o(e.valueOf(),t.valueOf(),1)}});function o(e,t,n){e.some((e=>"BigNumber"===e.type))&&(e=e.map((e=>a(e)))),t.some((e=>"BigNumber"===e.type))&&(t=t.map((e=>a(e))));for(var o=[i(1,0)],l=[i(1,0)],u=0;u<e.length;u++){var c=e[u];"number"===typeof c&&(c=i(c,0)),o=s(o,[i(1,0),i(-c.re,-c.im)])}for(var h=0;h<t.length;h++){var d=t[h];"number"===typeof d&&(d=i(d,0)),l=s(l,[i(1,0),i(-d.re,-d.im)])}for(var p=0;p<o.length;p++)o[p]=r(o[p],n);return[o,l]}function s(e,t){for(var a=[],o=0;o<e.length+t.length-1;o++){a[o]=i(0,0);for(var s=0;s<e.length;s++)o-s>=0&&o-s<t.length&&(a[o]=n(a[o],r(e[s],t[o-s])))}return a}})),bU="ceil",wU=["typed","config","round","matrix","equalScalar","zeros","DenseMatrix"],SU=$M(bU,["typed","config","round"],(e=>{var{typed:t,config:n,round:r}=e;return t(bU,{number:function(e){return vE(e,r(e),n.relTol,n.absTol)?r(e):Math.ceil(e)},"number, number":function(e,t){if(vE(e,r(e,t),n.relTol,n.absTol))return r(e,t);var[i,a]="".concat(e,"e").split("e"),o=Math.ceil(Number("".concat(i,"e").concat(Number(a)+t)));return[i,a]="".concat(o,"e").split("e"),Number("".concat(i,"e").concat(Number(a)-t))}})})),_U=$M(bU,wU,(e=>{var{typed:t,config:n,round:r,matrix:i,equalScalar:a,zeros:o,DenseMatrix:s}=e,l=UC({typed:t,equalScalar:a}),u=AC({typed:t,DenseMatrix:s}),c=DC({typed:t}),h=SU({typed:t,config:n,round:r});return t("ceil",{number:h.signatures.number,"number,number":h.signatures["number,number"],Complex:function(e){return e.ceil()},"Complex, number":function(e,t){return e.ceil(t)},"Complex, BigNumber":function(e,t){return e.ceil(t.toNumber())},BigNumber:function(e){return DP(e,r(e),n.relTol,n.absTol)?r(e):e.ceil()},"BigNumber, BigNumber":function(e,t){return DP(e,r(e,t),n.relTol,n.absTol)?r(e,t):e.toDecimalPlaces(t.toNumber(),JR.ROUND_CEIL)},Fraction:function(e){return e.ceil()},"Fraction, number":function(e,t){return e.ceil(t)},"Fraction, BigNumber":function(e,t){return e.ceil(t.toNumber())},"Unit, number, Unit":t.referToSelf((e=>function(t,n,r){var i=t.toNumeric(r);return r.multiply(e(i,n))})),"Unit, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Array | Matrix, number | BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>dT(t,(t=>e(t,n,r)),!0))),"Array | Matrix | Unit, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0))),"Array, number | BigNumber":t.referToSelf((e=>(t,n)=>dT(t,(t=>e(t,n)),!0))),"SparseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>l(t,n,e,!1))),"DenseMatrix, number | BigNumber":t.referToSelf((e=>(t,n)=>c(t,n,e,!1))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>c(i(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>a(t,0)?o(n.size(),n.storage()):"dense"===n.storage()?c(n,t,e,!0):u(n,t,e,!0)))})})),MU=n(939),EU="compareNatural",AU=$M(EU,["typed","compare"],(e=>{var{typed:t,compare:n}=e,r=n.signatures["boolean,boolean"];return t(EU,{"any, any":function e(t,o){var s,l=XM(t),u=XM(o);if(("number"===l||"BigNumber"===l||"Fraction"===l)&&("number"===u||"BigNumber"===u||"Fraction"===u))return"0"!==(s=n(t,o)).toString()?s>0?1:-1:MU(l,u);var c=["Array","DenseMatrix","SparseMatrix"];if(c.includes(l)||c.includes(u))return 0!==(s=i(e,t,o))?s:MU(l,u);if(l!==u)return MU(l,u);if("Complex"===l)return function(e,t){if(e.re>t.re)return 1;if(e.re<t.re)return-1;if(e.im>t.im)return 1;if(e.im<t.im)return-1;return 0}(t,o);if("Unit"===l)return t.equalBase(o)?e(t.value,o.value):a(e,t.formatUnits(),o.formatUnits());if("boolean"===l)return r(t,o);if("string"===l)return MU(t,o);if("Object"===l)return function(e,t,n){var r=Object.keys(t),i=Object.keys(n);r.sort(MU),i.sort(MU);var o=a(e,r,i);if(0!==o)return o;for(var s=0;s<r.length;s++){var l=e(t[r[s]],n[i[s]]);if(0!==l)return l}return 0}(e,t,o);if("null"===l)return 0;if("undefined"===l)return 0;throw new TypeError('Unsupported type of value "'+l+'"')}});function i(e,t,n){return gM(t)&&gM(n)?a(e,t.toJSON().values,n.toJSON().values):gM(t)?i(e,t.toArray(),n):gM(n)?i(e,t,n.toArray()):mM(t)?i(e,t.toJSON().data,n):mM(n)?i(e,t,n.toJSON().data):Array.isArray(t)?Array.isArray(n)?a(e,t,n):i(e,t,[n]):i(e,[t],n)}function a(e,t,n){for(var r=0,i=Math.min(t.length,n.length);r<i;r++){var a=e(t[r],n[r]);if(0!==a)return a}return t.length>n.length?1:t.length<n.length?-1:0}}));var TU="composition",CU=$M(TU,["typed","addScalar","combinations","isNegative","isPositive","isInteger","larger"],(e=>{var{typed:t,addScalar:n,combinations:r,isPositive:i,isNegative:a,isInteger:o,larger:s}=e;return t(TU,{"number | BigNumber, number | BigNumber":function(e,t){if(!(o(e)&&i(e)&&o(t)&&i(t)))throw new TypeError("Positive integer value expected in function composition");if(s(t,e))throw new TypeError("k must be less than or equal to n in function composition");return r(n(e,-1),n(t,-1))}})})),DU="cross",NU=$M(DU,["typed","matrix","subtract","multiply"],(e=>{var{typed:t,matrix:n,subtract:r,multiply:i}=e;return t(DU,{"Matrix, Matrix":function(e,t){return n(a(e.toArray(),t.toArray()))},"Matrix, Array":function(e,t){return n(a(e.toArray(),t))},"Array, Matrix":function(e,t){return n(a(e,t.toArray()))},"Array, Array":a});function a(e,t){var n=Math.max(HE(e).length,HE(t).length);e=KE(e),t=KE(t);var a=HE(e),o=HE(t);if(1!==a.length||1!==o.length||3!==a[0]||3!==o[0])throw new RangeError("Vectors with length 3 expected (Size A = ["+a.join(", ")+"], B = ["+o.join(", ")+"])");var s=[r(i(e[1],t[2]),i(e[2],t[1])),r(i(e[2],t[0]),i(e[0],t[2])),r(i(e[0],t[1]),i(e[1],t[0]))];return n>1?[s]:s}})),RU=$M("det",["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],(e=>{var{typed:t,matrix:n,subtractScalar:r,multiply:i,divideScalar:a,isZero:o,unaryMinus:s}=e;return t("det",{any:function(e){return j_(e)},"Array | Matrix":function(e){var t;switch((t=pM(e)?e.size():Array.isArray(e)?(e=n(e)).size():[]).length){case 0:return j_(e);case 1:if(1===t[0])return j_(e.valueOf()[0]);if(0===t[0])return 1;throw new RangeError("Matrix must be square (size: "+RE(t)+")");case 2:var l=t[0],u=t[1];if(l===u)return function(e,t){if(1===t)return j_(e[0][0]);if(2===t)return r(i(e[0][0],e[1][1]),i(e[1][0],e[0][1]));for(var n=!1,l=new Array(t).fill(0).map(((e,t)=>t)),u=0;u<t;u++){var c=l[u];if(o(e[c][u])){var h=void 0;for(h=u+1;h<t;h++)if(!o(e[l[h]][u])){c=l[h],l[h]=l[u],l[u]=c,n=!n;break}if(h===t)return e[c][u]}for(var d=e[c][u],p=0===u?1:e[l[u-1]][u-1],f=u+1;f<t;f++)for(var m=l[f],g=u+1;g<t;g++)e[m][g]=a(r(i(e[m][g],d),i(e[m][u],e[c][g])),p)}var v=e[l[t-1]][t-1];return n?s(v):v}(e.clone().valueOf(),l);if(0===u)return 1;throw new RangeError("Matrix must be square (size: "+RE(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+RE(t)+")")}}})})),kU="dotMultiply",IU=$M(kU,["typed","matrix","equalScalar","multiplyScalar","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,multiplyScalar:i,concat:a}=e,o=zC({typed:t,equalScalar:r}),s=az({typed:t,equalScalar:r}),l=UC({typed:t,equalScalar:r}),u=RC({typed:t,matrix:n,concat:a});return t(kU,u({elop:i,SS:s,DS:o,Ss:l}))})),FU=$M("FibonacciHeap",["smaller","larger"],(e=>{var{smaller:t,larger:n}=e,r=1/Math.log((1+Math.sqrt(5))/2);function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._minimum=null,this._size=0}function a(e,t,n){t.left.right=t.right,t.right.left=t.left,n.degree--,n.child===t&&(n.child=t.right),0===n.degree&&(n.child=null),t.left=e,t.right=e.right,e.right=t,t.right.left=t,t.parent=null,t.mark=!1}function o(e,t){var n=t.parent;n&&(t.mark?(a(e,t,n),o(n)):t.mark=!0)}i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(e,n){var r={key:e,value:n,degree:0};if(this._minimum){var i=this._minimum;r.left=i,r.right=i.right,i.right=r,r.right.left=r,t(e,i.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var e=this._minimum;if(null===e)return e;for(var i=this._minimum,a=e.degree,o=e.child;a>0;){var l=o.right;o.left.right=o.right,o.right.left=o.left,o.left=i,o.right=i.right,i.right=o,o.right.left=o,o.parent=null,o=l,a--}return e.left.right=e.right,e.right.left=e.left,i=e===e.right?null:function(e,i){var a,o=Math.floor(Math.log(i)*r)+1,l=new Array(o),u=0,c=e;if(c)for(u++,c=c.right;c!==e;)u++,c=c.right;for(;u>0;){for(var h=c.degree,d=c.right;a=l[h];){if(n(c.key,a.key)){var p=a;a=c,c=p}s(a,c),l[h]=null,h++}l[h]=c,c=d,u--}e=null;for(var f=0;f<o;f++)(a=l[f])&&(e?(a.left.right=a.right,a.right.left=a.left,a.left=e,a.right=e.right,e.right=a,a.right.left=a,t(a.key,e.key)&&(e=a)):e=a);return e}(i=e.right,this._size),this._size--,this._minimum=i,e},i.prototype.remove=function(e){this._minimum=function(e,n,r){n.key=r;var i=n.parent;i&&t(n.key,i.key)&&(a(e,n,i),o(e,i));t(n.key,e.key)&&(e=n);return e}(this._minimum,e,-1),this.extractMinimum()};var s=function(e,t){e.left.right=e.right,e.right.left=e.left,e.parent=t,t.child?(e.left=t.child,e.right=t.child.right,t.child.right=e,e.right.left=e):(t.child=e,e.right=e,e.left=e),t.degree++,e.mark=!1};return i}),{isClass:!0}),PU="fix",OU=["typed","Complex","matrix","ceil","floor","equalScalar","zeros","DenseMatrix"],BU=$M(PU,["typed","ceil","floor"],(e=>{var{typed:t,ceil:n,floor:r}=e;return t(PU,{number:function(e){return e>0?r(e):n(e)},"number, number":function(e,t){return e>0?r(e,t):n(e,t)}})})),LU=$M(PU,OU,(e=>{var{typed:t,Complex:n,matrix:r,ceil:i,floor:a,equalScalar:o,zeros:s,DenseMatrix:l}=e,u=AC({typed:t,DenseMatrix:l}),c=DC({typed:t}),h=BU({typed:t,ceil:i,floor:a});return t("fix",{number:h.signatures.number,"number, number | BigNumber":h.signatures["number,number"],Complex:function(e){return new n(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im))},"Complex, number":function(e,t){return new n(e.re>0?a(e.re,t):i(e.re,t),e.im>0?a(e.im,t):i(e.im,t))},"Complex, BigNumber":function(e,t){var r=t.toNumber();return new n(e.re>0?a(e.re,r):i(e.re,r),e.im>0?a(e.im,r):i(e.im,r))},BigNumber:function(e){return e.isNegative()?i(e):a(e)},"BigNumber, number | BigNumber":function(e,t){return e.isNegative()?i(e,t):a(e,t)},Fraction:function(e){return e.s<0n?e.ceil():e.floor()},"Fraction, number | BigNumber":function(e,t){return e.s<0n?i(e,t):a(e,t)},"Unit, number, Unit":t.referToSelf((e=>function(t,n,r){var i=t.toNumeric(r);return r.multiply(e(i,n))})),"Unit, BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>e(t,n.toNumber(),r))),"Array | Matrix, number | BigNumber, Unit":t.referToSelf((e=>(t,n,r)=>dT(t,(t=>e(t,n,r)),!0))),"Array | Matrix | Unit, Unit":t.referToSelf((e=>(t,n)=>e(t,0,n))),"Array | Matrix":t.referToSelf((e=>t=>dT(t,e,!0))),"Array | Matrix, number | BigNumber":t.referToSelf((e=>(t,n)=>dT(t,(t=>e(t,n)),!0))),"number | Complex | Fraction | BigNumber, Array":t.referToSelf((e=>(t,n)=>c(r(n),t,e,!0).valueOf())),"number | Complex | Fraction | BigNumber, Matrix":t.referToSelf((e=>(t,n)=>o(t,0)?s(n.size(),n.storage()):"dense"===n.storage()?c(n,t,e,!0):u(n,t,e,!0)))})})),zU="index",UU=$M(zU,["typed","Index"],(e=>{var{typed:t,Index:n}=e;return t(zU,{"...number | string | BigNumber | Range | Array | Matrix":function(e){var t=e.map((function(e){return oM(e)?e.toNumber():dM(e)||pM(e)?e.map((function(e){return oM(e)?e.toNumber():e})):e})),r=new n;return n.apply(r,t),r}})})),HU=$M("intersect",["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],(e=>{var{typed:t,config:n,abs:r,add:i,addScalar:a,matrix:o,multiply:s,multiplyScalar:l,divideScalar:u,subtract:c,smaller:h,equalScalar:d,flatten:p,isZero:f,isNumeric:m}=e;return t("intersect",{"Array, Array, Array":g,"Array, Array, Array, Array":v,"Matrix, Matrix, Matrix":function(e,t,n){var r=g(e.valueOf(),t.valueOf(),n.valueOf());return null===r?null:o(r)},"Matrix, Matrix, Matrix, Matrix":function(e,t,n,r){var i=v(e.valueOf(),t.valueOf(),n.valueOf(),r.valueOf());return null===i?null:o(i)}});function g(e,t,n){if(e=y(e),t=y(t),n=y(n),!b(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!function(e){return 4===e.length&&m(e[0])&&m(e[1])&&m(e[2])&&m(e[3])}(n))throw new TypeError("Array with 4 numbers expected as third argument");return function(e,t,n,r,i,o,s,h,d,p){var f=l(e,s),m=l(r,s),g=l(t,h),v=l(i,h),y=l(n,d),x=l(o,d),b=c(c(c(p,f),g),y),w=c(c(c(a(a(m,v),x),f),g),y),S=u(b,w),_=a(e,l(S,c(r,e))),M=a(t,l(S,c(i,t))),E=a(n,l(S,c(o,n)));return[_,M,E]}(e[0],e[1],e[2],t[0],t[1],t[2],n[0],n[1],n[2],n[3])}function v(e,t,o,p){if(e=y(e),t=y(t),o=y(o),p=y(p),2===e.length){if(!x(e))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!x(t))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!x(o))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!x(p))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return function(e,t,o,d){var p=e,m=o,g=c(p,t),v=c(m,d),y=c(l(g[0],v[1]),l(v[0],g[1]));if(f(y))return null;if(h(r(y),n.relTol))return null;var x=l(v[0],p[1]),b=l(v[1],p[0]),w=l(v[0],m[1]),S=l(v[1],m[0]),_=u(a(c(c(x,b),w),S),y);return i(s(g,_),p)}(e,t,o,p)}if(3===e.length){if(!b(e))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(t))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(o))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(p))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return function(e,t,n,r,i,o,s,h,p,m,g,v){var y=w(e,s,m,s,t,h,g,h,n,p,v,p),x=w(m,s,r,e,g,h,i,t,v,p,o,n),b=w(e,s,r,e,t,h,i,t,n,p,o,n),S=w(m,s,m,s,g,h,g,h,v,p,v,p),_=w(r,e,r,e,i,t,i,t,o,n,o,n),M=c(l(y,x),l(b,S)),E=c(l(_,S),l(x,x));if(f(E))return null;var A=u(M,E),T=u(a(y,l(A,x)),S),C=a(e,l(A,c(r,e))),D=a(t,l(A,c(i,t))),N=a(n,l(A,c(o,n))),R=a(s,l(T,c(m,s))),k=a(h,l(T,c(g,h))),I=a(p,l(T,c(v,p)));return d(C,R)&&d(D,k)&&d(N,I)?[C,D,N]:null}(e[0],e[1],e[2],t[0],t[1],t[2],o[0],o[1],o[2],p[0],p[1],p[2])}throw new TypeError("Arrays with two or thee dimensional points expected")}function y(e){return 1===e.length?e[0]:e.length>1&&Array.isArray(e[0])&&e.every((e=>Array.isArray(e)&&1===e.length))?p(e):e}function x(e){return 2===e.length&&m(e[0])&&m(e[1])}function b(e){return 3===e.length&&m(e[0])&&m(e[1])&&m(e[2])}function w(e,t,n,r,i,o,s,u,h,d,p,f){var m=l(c(e,t),c(n,r)),g=l(c(i,o),c(s,u)),v=l(c(h,d),c(p,f));return a(a(m,g),v)}})),qU="invmod",VU=$M(qU,["typed","config","BigNumber","xgcd","equal","smaller","mod","add","isInteger"],(e=>{var{typed:t,config:n,BigNumber:r,xgcd:i,equal:a,smaller:o,mod:s,add:l,isInteger:u}=e;return t(qU,{"number, number":c,"BigNumber, BigNumber":c});function c(e,t){if(!u(e)||!u(t))throw new Error("Parameters in function invmod must be integer numbers");if(e=s(e,t),a(t,0))throw new Error("Divisor must be non zero");var n=i(e,t);n=n.valueOf();var[c,h]=n;return a(c,r(1))?(h=s(h,t),o(h,r(0))&&(h=l(h,t)),h):NaN}})),jU=$M("lcm",["typed","matrix","equalScalar","concat"],(e=>{var{typed:t,matrix:n,equalScalar:r,concat:i}=e,a=zC({typed:t,equalScalar:r}),o=HC({typed:t,equalScalar:r}),s=UC({typed:t,equalScalar:r}),l=RC({typed:t,matrix:n,concat:i}),u="number | BigNumber | Fraction | Matrix | Array",c={};return c["".concat(u,", ").concat(u,", ...").concat(u)]=t.referToSelf((e=>(t,n,r)=>{for(var i=e(t,n),a=0;a<r.length;a++)i=e(i,r[a]);return i})),t("lcm",{"number, number":bF,"BigNumber, BigNumber":function(e,t){if(!e.isInt()||!t.isInt())throw new Error("Parameters in function lcm must be integer numbers");if(e.isZero())return e;if(t.isZero())return t;var n=e.times(t);for(;!t.isZero();){var r=t;t=e.mod(r),e=r}return n.div(e).abs()},"Fraction, Fraction":(e,t)=>e.lcm(t)},l({SS:o,DS:a,Ss:s}),c)})),GU="log1p",WU=$M(GU,["typed","config","divideScalar","log","Complex"],(e=>{var{typed:t,config:n,divideScalar:r,log:i,Complex:a}=e;return t(GU,{number:function(e){return e>=-1||n.predictable?oE(e):o(new a(e,0))},Complex:o,BigNumber:function(e){var t=e.plus(1);return!t.isNegative()||n.predictable?t.ln():o(new a(e.toNumber(),0))},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e))),"any, any":t.referToSelf((e=>(t,n)=>r(e(t),i(n))))});function o(e){var t=e.re+1;return new a(Math.log(Math.sqrt(t*t+e.im*e.im)),Math.atan2(e.im,t))}})),XU="setCartesian",YU=$M(XU,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(XU,{"Array | Matrix, Array | Matrix":function(e,t){var s=[];if(0!==r(n(e),new a(0))&&0!==r(n(t),new a(0))){var l=nA(Array.isArray(e)?e:e.toArray()).sort(i),u=nA(Array.isArray(t)?t:t.toArray()).sort(i);s=[];for(var c=0;c<l.length;c++)for(var h=0;h<u.length;h++)s.push([l[c],u[h]])}return Array.isArray(e)&&Array.isArray(t)?s:new o(s)}})})),$U="setDistinct",ZU=$M($U,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t($U,{"Array | Matrix":function(e){var t;if(0===r(n(e),new a(0)))t=[];else{var s=nA(Array.isArray(e)?e:e.toArray()).sort(i);(t=[]).push(s[0]);for(var l=1;l<s.length;l++)0!==i(s[l],s[l-1])&&t.push(s[l])}return Array.isArray(e)?t:new o(t)}})})),JU="setIsSubset",KU=$M(JU,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a}=e;return t(JU,{"Array | Matrix, Array | Matrix":function(e,t){if(0===r(n(e),new a(0)))return!0;if(0===r(n(t),new a(0)))return!1;for(var o,s=sA(nA(Array.isArray(e)?e:e.toArray()).sort(i)),l=sA(nA(Array.isArray(t)?t:t.toArray()).sort(i)),u=0;u<s.length;u++){o=!1;for(var c=0;c<l.length;c++)if(0===i(s[u].value,l[c].value)&&s[u].identifier===l[c].identifier){o=!0;break}if(!1===o)return!1}return!0}})})),QU="setPowerset",eH=$M(QU,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a}=e;return t(QU,{"Array | Matrix":function(e){if(0===r(n(e),new a(0)))return[];for(var t=nA(Array.isArray(e)?e:e.toArray()).sort(i),s=[],l=0;l.toString(2).length<=t.length;)s.push(o(t,l.toString(2).split("").reverse())),l++;return function(e){for(var t=[],n=e.length-1;n>0;n--)for(var r=0;r<n;r++)e[r].length>e[r+1].length&&(t=e[r],e[r]=e[r+1],e[r+1]=t);return e}(s)}});function o(e,t){for(var n=[],r=0;r<t.length;r++)"1"===t[r]&&n.push(e[r]);return n}})),tH="smallerEq",nH=$M(tH,["typed","config","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,config:n,matrix:r,DenseMatrix:i,concat:a,SparseMatrix:o}=e,s=EC({typed:t}),l=dL({typed:t,SparseMatrix:o}),u=AC({typed:t,DenseMatrix:i}),c=RC({typed:t,matrix:r,concat:a}),h=NP({typed:t});return t(tH,rH({typed:t,config:n}),{"boolean, boolean":(e,t)=>e<=t,"BigNumber, BigNumber":function(e,t){return e.lte(t)||DP(e,t,n.relTol,n.absTol)},"bigint, bigint":(e,t)=>e<=t,"Fraction, Fraction":(e,t)=>1!==e.compare(t),"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},h,c({SS:l,DS:s,Ss:u}))})),rH=$M(tH,["typed","config"],(e=>{var{typed:t,config:n}=e;return t(tH,{"number, number":function(e,t){return e<=t||vE(e,t,n.relTol,n.absTol)}})})),iH="sort",aH=$M(iH,["typed","matrix","compare","compareNatural"],(e=>{var{typed:t,matrix:n,compare:r,compareNatural:i}=e,a=r,o=(e,t)=>-r(e,t);return t(iH,{Array:function(e){return l(e),e.sort(a)},Matrix:function(e){return u(e),n(e.toArray().sort(a),e.storage())},"Array, function":function(e,t){return l(e),e.sort(t)},"Matrix, function":function(e,t){return u(e),n(e.toArray().sort(t),e.storage())},"Array, string":function(e,t){return l(e),e.sort(s(t))},"Matrix, string":function(e,t){return u(e),n(e.toArray().sort(s(t)),e.storage())}});function s(e){if("asc"===e)return a;if("desc"===e)return o;if("natural"===e)return i;throw new Error('String "asc", "desc", or "natural" expected')}function l(e){if(1!==HE(e).length)throw new Error("One dimensional array expected")}function u(e){if(1!==e.size().length)throw new Error("One dimensional matrix expected")}})),oH="unequal",sH=$M(oH,["typed","config","equalScalar","matrix","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,config:n,equalScalar:r,matrix:i,DenseMatrix:a,concat:o,SparseMatrix:s}=e,l=EC({typed:t}),u=dL({typed:t,SparseMatrix:s}),c=AC({typed:t,DenseMatrix:a}),h=RC({typed:t,matrix:i,concat:o});return t(oH,lH({typed:t,equalScalar:r}),h({elop:function(e,t){return!r(e,t)},SS:u,DS:l,Ss:c}))})),lH=$M(oH,["typed","equalScalar"],(e=>{var{typed:t,equalScalar:n}=e;return t(oH,{"any, any":function(e,t){return null===e?null!==t:null===t?null!==e:void 0===e?void 0!==t:void 0===t?void 0!==e:!n(e,t)}})})),uH="setDifference",cH=$M(uH,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(uH,{"Array | Matrix, Array | Matrix":function(e,t){var s;if(0===r(n(e),new a(0)))s=[];else{if(0===r(n(t),new a(0)))return nA(e.toArray());var l,u=sA(nA(Array.isArray(e)?e:e.toArray()).sort(i)),c=sA(nA(Array.isArray(t)?t:t.toArray()).sort(i));s=[];for(var h=0;h<u.length;h++){l=!1;for(var d=0;d<c.length;d++)if(0===i(u[h].value,c[d].value)&&u[h].identifier===c[d].identifier){l=!0;break}l||s.push(u[h])}}return Array.isArray(e)&&Array.isArray(t)?lA(s):new o(lA(s))}})})),hH="setMultiplicity",dH=$M(hH,["typed","size","subset","compareNatural","Index"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a}=e;return t(hH,{"number | BigNumber | Fraction | Complex, Array | Matrix":function(e,t){if(0===r(n(t),new a(0)))return 0;for(var o=nA(Array.isArray(t)?t:t.toArray()),s=0,l=0;l<o.length;l++)0===i(o[l],e)&&s++;return s}})})),pH="setSymDifference",fH=$M(pH,["typed","size","concat","subset","setDifference","Index"],(e=>{var{typed:t,size:n,concat:r,subset:i,setDifference:a,Index:o}=e;return t(pH,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(n(e),new o(0)))return nA(t);if(0===i(n(t),new o(0)))return nA(e);var s=nA(e),l=nA(t);return r(a(s,l),a(l,s))}})})),mH=$M("Spa",["addScalar","equalScalar","FibonacciHeap"],(e=>{var{addScalar:t,equalScalar:n,FibonacciHeap:r}=e;function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new r}return i.prototype.type="Spa",i.prototype.isSpa=!0,i.prototype.set=function(e,t){if(this._values[e])this._values[e].value=t;else{var n=this._heap.insert(e,t);this._values[e]=n}},i.prototype.get=function(e){var t=this._values[e];return t?t.value:0},i.prototype.accumulate=function(e,n){var r=this._values[e];r?r.value=t(r.value,n):(r=this._heap.insert(e,n),this._values[e]=r)},i.prototype.forEach=function(e,t,r){var i=this._heap,a=this._values,o=[],s=i.extractMinimum();for(s&&o.push(s);s&&s.key<=t;)s.key>=e&&(n(s.value,0)||r(s.key,s.value,this)),(s=i.extractMinimum())&&o.push(s);for(var l=0;l<o.length;l++){var u=o[l];a[(s=i.insert(u.key,u.value)).key]=s}},i.prototype.swap=function(e,t){var n=this._values[e],r=this._values[t];if(!n&&r)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(n&&!r)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(n&&r){var i=n.value;n.value=r.value,r.value=i}},i}),{isClass:!0}),gH=$M("inv",["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],(e=>{var{typed:t,matrix:n,divideScalar:r,addScalar:i,multiply:a,unaryMinus:o,det:s,identity:l,abs:u}=e;return t("inv",{"Array | Matrix":function(e){var t=pM(e)?e.size():HE(e);switch(t.length){case 1:if(1===t[0])return pM(e)?n([r(1,e.valueOf()[0])]):[r(1,e[0])];throw new RangeError("Matrix must be square (size: "+RE(t)+")");case 2:var i=t[0],a=t[1];if(i===a)return pM(e)?n(c(e.valueOf(),i,a),e.storage()):c(e,i,a);throw new RangeError("Matrix must be square (size: "+RE(t)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+RE(t)+")")}},any:function(e){return r(1,e)}});function c(e,t,n){var c,h,d,p,f;if(1===t){if(0===(p=e[0][0]))throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,p)]]}if(2===t){var m=s(e);if(0===m)throw Error("Cannot calculate inverse, determinant is zero");return[[r(e[1][1],m),r(o(e[0][1]),m)],[r(o(e[1][0]),m),r(e[0][0],m)]]}var g=e.concat();for(c=0;c<t;c++)g[c]=g[c].concat();for(var v=l(t).valueOf(),y=0;y<n;y++){var x=u(g[y][y]),b=y;for(c=y+1;c<t;)u(g[c][y])>x&&(x=u(g[c][y]),b=c),c++;if(0===x)throw Error("Cannot calculate inverse, determinant is zero");(c=b)!==y&&(f=g[y],g[y]=g[c],g[c]=f,f=v[y],v[y]=v[c],v[c]=f);var w=g[y],S=v[y];for(c=0;c<t;c++){var _=g[c],M=v[c];if(c!==y){if(0!==_[y]){for(d=r(o(_[y]),w[y]),h=y;h<n;h++)_[h]=i(_[h],a(d,w[h]));for(h=0;h<n;h++)M[h]=i(M[h],a(d,S[h]))}}else{for(d=w[y],h=y;h<n;h++)_[h]=r(_[h],d);for(h=0;h<n;h++)M[h]=r(M[h],d)}}}return v}})),vH=$M("lup",["typed","matrix","abs","addScalar","divideScalar","multiplyScalar","subtractScalar","larger","equalScalar","unaryMinus","DenseMatrix","SparseMatrix","Spa"],(e=>{var{typed:t,matrix:n,abs:r,addScalar:i,divideScalar:a,multiplyScalar:o,subtractScalar:s,larger:l,equalScalar:u,unaryMinus:c,DenseMatrix:h,SparseMatrix:d,Spa:p}=e;return t("lup",{DenseMatrix:function(e){return f(e)},SparseMatrix:function(e){return m(e)},Array:function(e){var t=f(n(e));return{L:t.L.valueOf(),U:t.U.valueOf(),p:t.p}}});function f(e){var t,n,c,d=e._size[0],p=e._size[1],f=Math.min(d,p),m=j_(e._data),g=[],v=[d,f],y=[],x=[f,p],b=[];for(t=0;t<d;t++)b[t]=t;for(n=0;n<p;n++){if(n>0)for(t=0;t<d;t++){var w=Math.min(t,n),S=0;for(c=0;c<w;c++)S=i(S,o(m[t][c],m[c][n]));m[t][n]=s(m[t][n],S)}var _=n,M=0,E=0;for(t=n;t<d;t++){var A=m[t][n],T=r(A);l(T,M)&&(_=t,M=T,E=A)}if(n!==_&&(b[n]=[b[_],b[_]=b[n]][0],h._swapRows(n,_,m)),n<d)for(t=n+1;t<d;t++){var C=m[t][n];u(C,0)||(m[t][n]=a(m[t][n],E))}}for(n=0;n<p;n++)for(t=0;t<d;t++)0===n&&(t<p&&(y[t]=[]),g[t]=[]),t<n?(t<p&&(y[t][n]=m[t][n]),n<d&&(g[t][n]=0)):t!==n?(t<p&&(y[t][n]=0),n<d&&(g[t][n]=m[t][n])):(t<p&&(y[t][n]=m[t][n]),n<d&&(g[t][n]=1));var D=new h({data:g,size:v}),N=new h({data:y,size:x}),R=[];for(t=0,f=b.length;t<f;t++)R[b[t]]=t;return{L:D,U:N,p:R,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}function m(e){var t,n,i,s=e._size[0],h=e._size[1],f=Math.min(s,h),m=e._values,g=e._index,v=e._ptr,y=[],x=[],b=[],w=[s,f],S=[],_=[],M=[],E=[f,h],A=[],T=[];for(t=0;t<s;t++)A[t]=t,T[t]=t;var C=function(){var e=new p;n<s&&(b.push(y.length),y.push(1),x.push(n)),M.push(S.length);var h=v[n],f=v[n+1];for(i=h;i<f;i++)t=g[i],e.set(A[t],m[i]);n>0&&e.forEach(0,n-1,(function(t,n){d._forEachRow(t,y,x,b,(function(r,i){r>t&&e.accumulate(r,c(o(i,n)))}))}));var C=n,D=e.get(n),N=r(D);e.forEach(n+1,s-1,(function(e,t){var n=r(t);l(n,N)&&(C=e,N=n,D=t)})),n!==C&&(d._swapRows(n,C,w[1],y,x,b),d._swapRows(n,C,E[1],S,_,M),e.swap(n,C),function(e,t){var n=T[e],r=T[t];A[n]=t,A[r]=e,T[e]=r,T[t]=n}(n,C)),e.forEach(0,s-1,(function(e,t){e<=n?(S.push(t),_.push(e)):(t=a(t,D),u(t,0)||(y.push(t),x.push(e)))}))};for(n=0;n<h;n++)C();return M.push(S.length),b.push(y.length),{L:new d({values:y,index:x,ptr:b,size:w}),U:new d({values:S,index:_,ptr:M,size:E}),p:A,toString:function(){return"L: "+this.L.toString()+"\nU: "+this.U.toString()+"\nP: "+this.p}}}})),yH="pinv",xH=$M(yH,["typed","matrix","inv","deepEqual","equal","dotDivide","dot","ctranspose","divideScalar","multiply","add","Complex"],(e=>{var{typed:t,matrix:n,inv:r,deepEqual:i,equal:a,dotDivide:o,dot:s,ctranspose:l,divideScalar:u,multiply:c,add:h,Complex:d}=e;return t(yH,{"Array | Matrix":function(e){var t=pM(e)?e.size():HE(e);switch(t.length){case 1:return m(e)?l(e):1===t[0]?r(e):o(l(e),s(e,e));case 2:if(m(e))return l(e);var i=t[0],a=t[1];if(i===a)try{return r(e)}catch(u){if(!(u instanceof Error&&u.message.match(/Cannot calculate inverse, determinant is zero/)))throw u}return pM(e)?n(p(e.valueOf(),i,a),e.storage()):p(e,i,a);default:throw new RangeError("Matrix must be two dimensional (size: "+RE(t)+")")}},any:function(e){return a(e,0)?j_(e):u(1,e)}});function p(e,t,n){var{C:i,F:a}=function(e,t,n){var r=function(e,t,n){for(var r=j_(e),i=0,a=0;a<t;a++){if(n<=i)return r;for(var s=a;f(r[s][i]);)if(t===++s&&(s=a,n===++i))return r;[r[s],r[a]]=[r[a],r[s]];for(var l=r[a][i],u=0;u<n;u++)r[a][u]=o(r[a][u],l);for(var d=0;d<t;d++)if(d!==a){l=r[d][i];for(var p=0;p<n;p++)r[d][p]=h(r[d][p],c(-1,c(l,r[a][p])))}i++}return r}(e,t,n),i=e.map(((e,n)=>e.filter(((e,n)=>n<t&&!f(s(r[n],r[n])))))),a=r.filter(((e,t)=>!f(s(r[t],r[t]))));return{C:i,F:a}}(e,t,n),u=c(r(c(l(i),i)),l(i)),d=c(l(a),r(c(a,l(a))));return c(d,u)}function f(e){return a(h(e,d(1,1)),h(0,d(1,1)))}function m(e){return i(h(e,d(1,1)),h(c(e,0),d(1,1)))}})),bH=$M("pow",["typed","config","identity","multiply","matrix","inv","fraction","number","Complex"],(e=>{var{typed:t,config:n,identity:r,multiply:i,matrix:a,inv:o,number:s,fraction:l,Complex:u}=e;return t("pow",{"number, number":c,"Complex, Complex":function(e,t){return e.pow(t)},"BigNumber, BigNumber":function(e,t){return t.isInteger()||e>=0||n.predictable?e.pow(t):new u(e.toNumber(),0).pow(t.toNumber(),0)},"bigint, bigint":(e,t)=>e**t,"Fraction, Fraction":function(e,t){var r=e.pow(t);if(null!=r)return r;if(n.predictable)throw new Error("Result of pow is non-rational and cannot be expressed as a fraction");return c(e.valueOf(),t.valueOf())},"Array, number":h,"Array, BigNumber":function(e,t){return h(e,t.toNumber())},"Matrix, number":d,"Matrix, BigNumber":function(e,t){return d(e,t.toNumber())},"Unit, number | BigNumber":function(e,t){return e.pow(t)}});function c(e,t){if(n.predictable&&!tE(t)&&e<0)try{var r=l(t),i=s(r);if((t===i||Math.abs((t-i)/t)<1e-14)&&r.d%2n===1n)return(r.n%2n===0n?1:-1)*Math.pow(-e,t)}catch(a){}return n.predictable&&(e<-1&&t===1/0||e>-1&&e<0&&t===-1/0)?NaN:tE(t)||e>=0||n.predictable?TF(e,t):e*e<1&&t===1/0||e*e>1&&t===-1/0?0:new u(e,0).pow(t,0)}function h(e,t){if(!tE(t))throw new TypeError("For A^b, b must be an integer (value is "+t+")");var n=HE(e);if(2!==n.length)throw new Error("For A^b, A must be 2 dimensional (A has "+n.length+" dimensions)");if(n[0]!==n[1])throw new Error("For A^b, A must be square (size is "+n[0]+"x"+n[1]+")");if(t<0)try{return h(o(e),-t)}catch(Fw){if("Cannot calculate inverse, determinant is zero"===Fw.message)throw new TypeError("For A^b, when A is not invertible, b must be a positive integer (value is "+t+")");throw Fw}for(var a=r(n[0]).valueOf(),s=e;t>=1;)1===(1&t)&&(a=i(s,a)),t>>=1,s=i(s,s);return a}function d(e,t){return a(h(e.valueOf(),t))}})),wH="setIntersect",SH=$M(wH,["typed","size","subset","compareNatural","Index","DenseMatrix"],(e=>{var{typed:t,size:n,subset:r,compareNatural:i,Index:a,DenseMatrix:o}=e;return t(wH,{"Array | Matrix, Array | Matrix":function(e,t){var s;if(0===r(n(e),new a(0))||0===r(n(t),new a(0)))s=[];else{var l=sA(nA(Array.isArray(e)?e:e.toArray()).sort(i)),u=sA(nA(Array.isArray(t)?t:t.toArray()).sort(i));s=[];for(var c=0;c<l.length;c++)for(var h=0;h<u.length;h++)if(0===i(l[c].value,u[h].value)&&l[c].identifier===u[h].identifier){s.push(l[c]);break}}return Array.isArray(e)&&Array.isArray(t)?lA(s):new o(lA(s))}})})),_H="setUnion",MH=$M(_H,["typed","size","concat","subset","setIntersect","setSymDifference","Index"],(e=>{var{typed:t,size:n,concat:r,subset:i,setIntersect:a,setSymDifference:o,Index:s}=e;return t(_H,{"Array | Matrix, Array | Matrix":function(e,t){if(0===i(n(e),new s(0)))return nA(t);if(0===i(n(t),new s(0)))return nA(e);var l=nA(e),u=nA(t);return r(o(l,u),a(l,u))}})})),EH="sqrtm",AH=$M(EH,["typed","abs","add","multiply","map","sqrt","subtract","inv","size","max","identity"],(e=>{var{typed:t,abs:n,add:r,multiply:i,map:a,sqrt:o,subtract:s,inv:l,size:u,max:c,identity:h}=e,d=1e-6;function p(e){var t,a=0,o=e,p=h(u(e));do{var f=o;if(o=i(.5,r(f,l(p))),p=i(.5,r(p,l(f))),(t=c(n(s(o,f))))>d&&++a>1e3)throw new Error("computing square root of matrix: iterative method could not converge")}while(t>d);return o}return t(EH,{"Array | Matrix":function(e){var t=pM(e)?e.size():HE(e);switch(t.length){case 1:if(1===t[0])return a(e,o);throw new RangeError("Matrix must be square (size: "+RE(t)+")");case 2:if(t[0]===t[1])return p(e);throw new RangeError("Matrix must be square (size: "+RE(t)+")");default:throw new RangeError("Matrix must be at most two dimensional (size: "+RE(t)+")")}}})}));function TH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TH(Object(n),!0).forEach((function(t){eE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var DH=$M("Unit",["?on","config","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","abs","fix","round","equal","isNumeric","format","number","Complex","BigNumber","Fraction"],(e=>{var t,n,r,{on:i,config:a,addScalar:o,subtractScalar:s,multiplyScalar:l,divideScalar:u,pow:c,abs:h,fix:d,round:p,equal:f,isNumeric:m,format:g,number:v,Complex:y,BigNumber:x,Fraction:b}=e,w=v;function S(e,t){if(!(this instanceof S))throw new Error("Constructor must be called with the new operator");if(null!==e&&void 0!==e&&!m(e)&&!lM(e))throw new TypeError("First parameter in Unit constructor must be number, BigNumber, Fraction, Complex, or undefined");if(this.fixPrefix=!1,this.skipAutomaticSimplification=!0,void 0===t)this.units=[],this.dimensions=I.map((e=>0));else if("string"===typeof t){var n=S.parse(t);this.units=n.units,this.dimensions=n.dimensions}else{if(!cM(t)||null!==t.value)throw new TypeError("Second parameter in Unit constructor must be a string or valueless Unit");this.fixPrefix=t.fixPrefix,this.skipAutomaticSimplification=t.skipAutomaticSimplification,this.dimensions=t.dimensions.slice(0),this.units=t.units.map((e=>Gw({},e)))}this.value=this._normalize(e)}function _(){for(;" "===r||"\t"===r;)E()}function M(e){return e>="0"&&e<="9"}function E(){n++,r=t.charAt(n)}function A(e){n=e,r=t.charAt(n)}function T(){var e="",t=n;if("+"===r?E():"-"===r&&(e+=r,E()),!function(e){return e>="0"&&e<="9"||"."===e}(r))return A(t),null;if("."===r){if(e+=r,E(),!M(r))return A(t),null}else{for(;M(r);)e+=r,E();"."===r&&(e+=r,E())}for(;M(r);)e+=r,E();if("E"===r||"e"===r){var i="",a=n;if(i+=r,E(),"+"!==r&&"-"!==r||(i+=r,E()),!M(r))return A(a),e;for(e+=i;M(r);)e+=r,E()}return e}function C(){for(var e="";M(r)||S.isValidAlpha(r);)e+=r,E();var t=e.charAt(0);return S.isValidAlpha(t)?e:null}function D(e){return r===e?(E(),e):null}Object.defineProperty(S,"name",{value:"Unit"}),S.prototype.constructor=S,S.prototype.type="Unit",S.prototype.isUnit=!0,S.parse=function(e,i){if(i=i||{},n=-1,r="","string"!==typeof(t=e))throw new TypeError("Invalid argument in Unit.parse, string expected");var o=new S;o.units=[];var s=1,l=!1;E(),_();var u=T(),c=null;if(u){if("BigNumber"===a.number)c=new x(u);else if("Fraction"===a.number)try{c=new b(u)}catch(M){c=parseFloat(u)}else c=parseFloat(u);_(),D("*")?(s=1,l=!0):D("/")&&(s=-1,l=!0)}for(var h=[],d=1;;){for(_();"("===r;)h.push(s),d*=s,s=1,E(),_();var p=void 0;if(!r)break;var f=r;if(null===(p=C()))throw new SyntaxError('Unexpected "'+f+'" in "'+t+'" at index '+n.toString());var m=N(p);if(null===m)throw new SyntaxError('Unit "'+p+'" not found.');var g=s*d;if(_(),D("^")){_();var v=T();if(null===v)throw new SyntaxError('In "'+e+'", "^" must be followed by a floating-point number');g*=v}o.units.push({unit:m.unit,prefix:m.prefix,power:g});for(var y=0;y<I.length;y++)o.dimensions[y]+=(m.unit.dimensions[y]||0)*g;for(_();")"===r;){if(0===h.length)throw new SyntaxError('Unmatched ")" in "'+t+'" at index '+n.toString());d/=h.pop(),E(),_()}if(l=!1,D("*")?(s=1,l=!0):D("/")?(s=-1,l=!0):s=1,m.unit.base){var w=m.unit.base.key;U.auto[w]={unit:m.unit,prefix:m.prefix}}}if(_(),r)throw new SyntaxError('Could not parse: "'+e+'"');if(l)throw new SyntaxError('Trailing characters: "'+e+'"');if(0!==h.length)throw new SyntaxError('Unmatched "(" in "'+t+'"');if(0===o.units.length&&!i.allowNoUnits)throw new SyntaxError('"'+e+'" contains no units');return o.value=void 0!==c?o._normalize(c):null,o},S.prototype.clone=function(){var e=new S;e.fixPrefix=this.fixPrefix,e.skipAutomaticSimplification=this.skipAutomaticSimplification,e.value=j_(this.value),e.dimensions=this.dimensions.slice(0),e.units=[];for(var t=0;t<this.units.length;t++)for(var n in e.units[t]={},this.units[t])X_(this.units[t],n)&&(e.units[t][n]=this.units[t][n]);return e},S.prototype.valueType=function(){return XM(this.value)},S.prototype._isDerived=function(){return 0!==this.units.length&&(this.units.length>1||Math.abs(this.units[0].power-1)>1e-15)},S.prototype._normalize=function(e){if(null===e||void 0===e||0===this.units.length)return e;for(var t=e,n=S._getNumberConverter(XM(e)),r=0;r<this.units.length;r++){var i=n(this.units[r].unit.value),a=n(this.units[r].prefix.value),o=n(this.units[r].power);t=l(t,c(l(i,a),o))}return t},S.prototype._denormalize=function(e,t){if(null===e||void 0===e||0===this.units.length)return e;for(var n=e,r=S._getNumberConverter(XM(e)),i=0;i<this.units.length;i++){var a=r(this.units[i].unit.value),o=r(this.units[i].prefix.value),s=r(this.units[i].power);n=u(n,c(l(a,o),s))}return n};var N=uk((e=>{if(X_(B,e)){var t=B[e];return{unit:t,prefix:t.prefixes[""]}}for(var n in B)if(X_(B,n)&&NE(e,n)){var r=B[n],i=e.length-n.length,a=e.substring(0,i),o=X_(r.prefixes,a)?r.prefixes[a]:void 0;if(void 0!==o)return{unit:r,prefix:o}}return null}),{hasher:e=>e[0],limit:100});function R(e){return e.equalBase(F.NONE)&&null!==e.value&&!a.predictable?e.value:e}S.isValuelessUnit=function(e){return null!==N(e)},S.prototype.hasBase=function(e){if("string"===typeof e&&(e=F[e]),!e)return!1;for(var t=0;t<I.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},S.prototype.equalBase=function(e){for(var t=0;t<I.length;t++)if(Math.abs((this.dimensions[t]||0)-(e.dimensions[t]||0))>1e-12)return!1;return!0},S.prototype.equals=function(e){return this.equalBase(e)&&f(this.value,e.value)},S.prototype.multiply=function(e){for(var t=this.clone(),n=cM(e)?e:new S(e),r=0;r<I.length;r++)t.dimensions[r]=(this.dimensions[r]||0)+(n.dimensions[r]||0);for(var i=0;i<n.units.length;i++){var a=CH({},n.units[i]);t.units.push(a)}if(null!==this.value||null!==n.value){var o=null===this.value?this._normalize(1):this.value,s=null===n.value?n._normalize(1):n.value;t.value=l(o,s)}else t.value=null;return cM(e)&&(t.skipAutomaticSimplification=!1),R(t)},S.prototype.divideInto=function(e){return new S(e).divide(this)},S.prototype.divide=function(e){for(var t=this.clone(),n=cM(e)?e:new S(e),r=0;r<I.length;r++)t.dimensions[r]=(this.dimensions[r]||0)-(n.dimensions[r]||0);for(var i=0;i<n.units.length;i++){var a=CH(CH({},n.units[i]),{},{power:-n.units[i].power});t.units.push(a)}if(null!==this.value||null!==n.value){var o=null===this.value?this._normalize(1):this.value,s=null===n.value?n._normalize(1):n.value;t.value=u(o,s)}else t.value=null;return cM(e)&&(t.skipAutomaticSimplification=!1),R(t)},S.prototype.pow=function(e){for(var t=this.clone(),n=0;n<I.length;n++)t.dimensions[n]=(this.dimensions[n]||0)*e;for(var r=0;r<t.units.length;r++)t.units[r].power*=e;return null!==t.value?t.value=c(t.value,e):t.value=null,t.skipAutomaticSimplification=!1,R(t)},S.prototype.abs=function(){var e=this.clone();if(null!==e.value)if(e._isDerived()||0===e.units.length||0===e.units[0].unit.offset)e.value=h(e.value);else{var t=e._numberConverter(),n=t(e.units[0].unit.value),r=t(e.units[0].unit.offset),i=l(n,r);e.value=s(h(o(e.value,i)),i)}for(var a in e.units)"VA"!==e.units[a].unit.name&&"VAR"!==e.units[a].unit.name||(e.units[a].unit=B.W);return e},S.prototype.to=function(e){var t,n=null===this.value?this._normalize(1):this.value;if("string"===typeof e)t=S.parse(e);else{if(!cM(e))throw new Error("String or Unit expected as parameter");t=e.clone()}if(!this.equalBase(t))throw new Error("Units do not match ('".concat(t.toString(),"' != '").concat(this.toString(),"')"));if(null!==t.value)throw new Error("Cannot convert to a unit with a value");if(null===this.value||this._isDerived()||0===this.units.length||0===t.units.length||this.units[0].unit.offset===t.units[0].unit.offset)t.value=j_(n);else{var r=S._getNumberConverter(XM(n)),i=this.units[0].unit.value,a=this.units[0].unit.offset,u=l(i,a),c=t.units[0].unit.value,h=t.units[0].unit.offset,d=l(c,h);t.value=o(n,r(s(u,d)))}return t.fixPrefix=!0,t.skipAutomaticSimplification=!0,t},S.prototype.toNumber=function(e){return w(this.toNumeric(e))},S.prototype.toNumeric=function(e){var t;return(t=e?this.to(e):this.clone())._isDerived()||0===t.units.length?t._denormalize(t.value):t._denormalize(t.value,t.units[0].prefix.value)},S.prototype.toString=function(){return this.format()},S.prototype.toJSON=function(){return{mathjs:"Unit",value:this._denormalize(this.value),unit:this.units.length>0?this.formatUnits():null,fixPrefix:this.fixPrefix}},S.fromJSON=function(e){var t,n=new S(e.value,null!==(t=e.unit)&&void 0!==t?t:void 0);return n.fixPrefix=e.fixPrefix||!1,n},S.prototype.valueOf=S.prototype.toString,S.prototype.simplify=function(){var e,t,n=this.clone(),r=[];for(var i in H)if(X_(H,i)&&n.hasBase(F[i])){e=i;break}if("NONE"===e)n.units=[];else if(e&&X_(H,e)&&(t=H[e]),t)n.units=[{unit:t.unit,prefix:t.prefix,power:1}];else{for(var a=!1,o=0;o<I.length;o++){var s=I[o];Math.abs(n.dimensions[o]||0)>1e-12&&(X_(H,s)?r.push({unit:H[s].unit,prefix:H[s].prefix,power:n.dimensions[o]||0}):a=!0)}r.length<n.units.length&&!a&&(n.units=r)}return n},S.prototype.toSI=function(){for(var e=this.clone(),t=[],n=0;n<I.length;n++){var r=I[n];if(Math.abs(e.dimensions[n]||0)>1e-12){if(!X_(U.si,r))throw new Error("Cannot express custom unit "+r+" in SI units");t.push({unit:U.si[r].unit,prefix:U.si[r].prefix,power:e.dimensions[n]||0})}}return e.units=t,e.fixPrefix=!0,e.skipAutomaticSimplification=!0,null!==this.value?(e.value=null,this.to(e)):e},S.prototype.formatUnits=function(){for(var e="",t="",n=0,r=0,i=0;i<this.units.length;i++)this.units[i].power>0?(n++,e+=" "+this.units[i].prefix.name+this.units[i].unit.name,Math.abs(this.units[i].power-1)>1e-15&&(e+="^"+this.units[i].power)):this.units[i].power<0&&r++;if(r>0)for(var a=0;a<this.units.length;a++)this.units[a].power<0&&(n>0?(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,Math.abs(this.units[a].power+1)>1e-15&&(t+="^"+-this.units[a].power)):(t+=" "+this.units[a].prefix.name+this.units[a].unit.name,t+="^"+this.units[a].power));e=e.substr(1),t=t.substr(1),n>1&&r>0&&(e="("+e+")"),r>1&&n>0&&(t="("+t+")");var o=e;return n>0&&r>0&&(o+=" / "),o+=t},S.prototype.format=function(e){var t=this.skipAutomaticSimplification||null===this.value?this.clone():this.simplify(),n=!1;for(var r in"undefined"!==typeof t.value&&null!==t.value&&lM(t.value)&&(n=Math.abs(t.value.re)<1e-14),t.units)X_(t.units,r)&&t.units[r].unit&&("VA"===t.units[r].unit.name&&n?t.units[r].unit=B.VAR:"VAR"!==t.units[r].unit.name||n||(t.units[r].unit=B.VA));1!==t.units.length||t.fixPrefix||Math.abs(t.units[0].power-Math.round(t.units[0].power))<1e-14&&(t.units[0].prefix=t._bestPrefix());var i=t._denormalize(t.value),a=null!==t.value?g(i,e||{}):"",o=t.formatUnits();return t.value&&lM(t.value)&&(a="("+a+")"),o.length>0&&a.length>0&&(a+=" "),a+=o},S.prototype._bestPrefix=function(){if(1!==this.units.length)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");if(Math.abs(this.units[0].power-Math.round(this.units[0].power))>=1e-14)throw new Error("Can only compute the best prefix for single units with integer powers, like kg, s^2, N^-1, and so forth!");var e=null!==this.value?h(this.value):0,t=h(this.units[0].unit.value),n=this.units[0].prefix;if(0===e)return n;var r=this.units[0].power,i=Math.log(e/Math.pow(n.value*t,r))/Math.LN10-1.2;if(i>-2.200001&&i<1.800001)return n;i=Math.abs(i);var a=this.units[0].unit.prefixes;for(var o in a)if(X_(a,o)){var s=a[o];if(s.scientific){var l=Math.abs(Math.log(e/Math.pow(s.value*t,r))/Math.LN10-1.2);(l<i||l===i&&s.name.length<n.name.length)&&(n=s,i=l)}}return n},S.prototype.splitUnit=function(e){for(var t=this.clone(),n=[],r=0;r<e.length&&(t=t.to(e[r]),r!==e.length-1);r++){var i=t.toNumeric(),a=p(i),l=new S(f(a,i)?a:d(t.toNumeric()),e[r].toString());n.push(l),t=s(t,l)}for(var u=0,c=0;c<n.length;c++)u=o(u,n[c].value);return f(u,this.value)&&(t.value=0),n.push(t),n};var k={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},R:{name:"R",value:1e27,scientific:!0},Q:{name:"Q",value:1e30,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0},r:{name:"r",value:1e-27,scientific:!0},q:{name:"q",value:1e-30,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},ronna:{name:"ronna",value:1e27,scientific:!0},quetta:{name:"quetta",value:1e30,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0},ronto:{name:"ronto",value:1e-27,scientific:!0},quecto:{name:"quecto",value:1e-30,scientific:!0}},SQUARED:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:100,scientific:!1},h:{name:"h",value:1e4,scientific:!1},k:{name:"k",value:1e6,scientific:!0},M:{name:"M",value:1e12,scientific:!0},G:{name:"G",value:1e18,scientific:!0},T:{name:"T",value:1e24,scientific:!0},P:{name:"P",value:1e30,scientific:!0},E:{name:"E",value:1e36,scientific:!0},Z:{name:"Z",value:1e42,scientific:!0},Y:{name:"Y",value:1e48,scientific:!0},R:{name:"R",value:1e54,scientific:!0},Q:{name:"Q",value:1e60,scientific:!0},d:{name:"d",value:.01,scientific:!1},c:{name:"c",value:1e-4,scientific:!1},m:{name:"m",value:1e-6,scientific:!0},u:{name:"u",value:1e-12,scientific:!0},n:{name:"n",value:1e-18,scientific:!0},p:{name:"p",value:1e-24,scientific:!0},f:{name:"f",value:1e-30,scientific:!0},a:{name:"a",value:1e-36,scientific:!0},z:{name:"z",value:1e-42,scientific:!0},y:{name:"y",value:1e-48,scientific:!0},r:{name:"r",value:1e-54,scientific:!0},q:{name:"q",value:1e-60,scientific:!0}},CUBIC:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:1e3,scientific:!1},h:{name:"h",value:1e6,scientific:!1},k:{name:"k",value:1e9,scientific:!0},M:{name:"M",value:1e18,scientific:!0},G:{name:"G",value:1e27,scientific:!0},T:{name:"T",value:1e36,scientific:!0},P:{name:"P",value:1e45,scientific:!0},E:{name:"E",value:1e54,scientific:!0},Z:{name:"Z",value:1e63,scientific:!0},Y:{name:"Y",value:1e72,scientific:!0},R:{name:"R",value:1e81,scientific:!0},Q:{name:"Q",value:1e90,scientific:!0},d:{name:"d",value:.001,scientific:!1},c:{name:"c",value:1e-6,scientific:!1},m:{name:"m",value:1e-9,scientific:!0},u:{name:"u",value:1e-18,scientific:!0},n:{name:"n",value:1e-27,scientific:!0},p:{name:"p",value:1e-36,scientific:!0},f:{name:"f",value:1e-45,scientific:!0},a:{name:"a",value:1e-54,scientific:!0},z:{name:"z",value:1e-63,scientific:!0},y:{name:"y",value:1e-72,scientific:!0},r:{name:"r",value:1e-81,scientific:!0},q:{name:"q",value:1e-90,scientific:!0}},BINARY_SHORT_SI:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0}},BINARY_SHORT_IEC:{"":{name:"",value:1,scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG_SI:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0}},BINARY_LONG_IEC:{"":{name:"",value:1,scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}},BTU:{"":{name:"",value:1,scientific:!0},MM:{name:"MM",value:1e6,scientific:!0}}};k.SHORTLONG=Gw({},k.SHORT,k.LONG),k.BINARY_SHORT=Gw({},k.BINARY_SHORT_SI,k.BINARY_SHORT_IEC),k.BINARY_LONG=Gw({},k.BINARY_LONG_SI,k.BINARY_LONG_IEC);var I=["MASS","LENGTH","TIME","CURRENT","TEMPERATURE","LUMINOUS_INTENSITY","AMOUNT_OF_SUBSTANCE","ANGLE","BIT"],F={NONE:{dimensions:[0,0,0,0,0,0,0,0,0]},MASS:{dimensions:[1,0,0,0,0,0,0,0,0]},LENGTH:{dimensions:[0,1,0,0,0,0,0,0,0]},TIME:{dimensions:[0,0,1,0,0,0,0,0,0]},CURRENT:{dimensions:[0,0,0,1,0,0,0,0,0]},TEMPERATURE:{dimensions:[0,0,0,0,1,0,0,0,0]},LUMINOUS_INTENSITY:{dimensions:[0,0,0,0,0,1,0,0,0]},AMOUNT_OF_SUBSTANCE:{dimensions:[0,0,0,0,0,0,1,0,0]},FORCE:{dimensions:[1,1,-2,0,0,0,0,0,0]},SURFACE:{dimensions:[0,2,0,0,0,0,0,0,0]},VOLUME:{dimensions:[0,3,0,0,0,0,0,0,0]},ENERGY:{dimensions:[1,2,-2,0,0,0,0,0,0]},POWER:{dimensions:[1,2,-3,0,0,0,0,0,0]},PRESSURE:{dimensions:[1,-1,-2,0,0,0,0,0,0]},ELECTRIC_CHARGE:{dimensions:[0,0,1,1,0,0,0,0,0]},ELECTRIC_CAPACITANCE:{dimensions:[-1,-2,4,2,0,0,0,0,0]},ELECTRIC_POTENTIAL:{dimensions:[1,2,-3,-1,0,0,0,0,0]},ELECTRIC_RESISTANCE:{dimensions:[1,2,-3,-2,0,0,0,0,0]},ELECTRIC_INDUCTANCE:{dimensions:[1,2,-2,-2,0,0,0,0,0]},ELECTRIC_CONDUCTANCE:{dimensions:[-1,-2,3,2,0,0,0,0,0]},MAGNETIC_FLUX:{dimensions:[1,2,-2,-1,0,0,0,0,0]},MAGNETIC_FLUX_DENSITY:{dimensions:[1,0,-2,-1,0,0,0,0,0]},FREQUENCY:{dimensions:[0,0,-1,0,0,0,0,0,0]},ANGLE:{dimensions:[0,0,0,0,0,0,0,1,0]},BIT:{dimensions:[0,0,0,0,0,0,0,0,1]}};for(var P in F)X_(F,P)&&(F[P].key=P);var O={name:"",base:{},value:1,offset:0,dimensions:I.map((e=>0))},B={meter:{name:"meter",base:F.LENGTH,prefixes:k.LONG,value:1,offset:0},inch:{name:"inch",base:F.LENGTH,prefixes:k.NONE,value:.0254,offset:0},foot:{name:"foot",base:F.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yard:{name:"yard",base:F.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mile:{name:"mile",base:F.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},link:{name:"link",base:F.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rod:{name:"rod",base:F.LENGTH,prefixes:k.NONE,value:5.0292,offset:0},chain:{name:"chain",base:F.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},angstrom:{name:"angstrom",base:F.LENGTH,prefixes:k.NONE,value:1e-10,offset:0},m:{name:"m",base:F.LENGTH,prefixes:k.SHORT,value:1,offset:0},in:{name:"in",base:F.LENGTH,prefixes:k.NONE,value:.0254,offset:0},ft:{name:"ft",base:F.LENGTH,prefixes:k.NONE,value:.3048,offset:0},yd:{name:"yd",base:F.LENGTH,prefixes:k.NONE,value:.9144,offset:0},mi:{name:"mi",base:F.LENGTH,prefixes:k.NONE,value:1609.344,offset:0},li:{name:"li",base:F.LENGTH,prefixes:k.NONE,value:.201168,offset:0},rd:{name:"rd",base:F.LENGTH,prefixes:k.NONE,value:5.02921,offset:0},ch:{name:"ch",base:F.LENGTH,prefixes:k.NONE,value:20.1168,offset:0},mil:{name:"mil",base:F.LENGTH,prefixes:k.NONE,value:254e-7,offset:0},m2:{name:"m2",base:F.SURFACE,prefixes:k.SQUARED,value:1,offset:0},sqin:{name:"sqin",base:F.SURFACE,prefixes:k.NONE,value:64516e-8,offset:0},sqft:{name:"sqft",base:F.SURFACE,prefixes:k.NONE,value:.09290304,offset:0},sqyd:{name:"sqyd",base:F.SURFACE,prefixes:k.NONE,value:.83612736,offset:0},sqmi:{name:"sqmi",base:F.SURFACE,prefixes:k.NONE,value:2589988.110336,offset:0},sqrd:{name:"sqrd",base:F.SURFACE,prefixes:k.NONE,value:25.29295,offset:0},sqch:{name:"sqch",base:F.SURFACE,prefixes:k.NONE,value:404.6873,offset:0},sqmil:{name:"sqmil",base:F.SURFACE,prefixes:k.NONE,value:6.4516e-10,offset:0},acre:{name:"acre",base:F.SURFACE,prefixes:k.NONE,value:4046.86,offset:0},hectare:{name:"hectare",base:F.SURFACE,prefixes:k.NONE,value:1e4,offset:0},m3:{name:"m3",base:F.VOLUME,prefixes:k.CUBIC,value:1,offset:0},L:{name:"L",base:F.VOLUME,prefixes:k.SHORT,value:.001,offset:0},l:{name:"l",base:F.VOLUME,prefixes:k.SHORT,value:.001,offset:0},litre:{name:"litre",base:F.VOLUME,prefixes:k.LONG,value:.001,offset:0},cuin:{name:"cuin",base:F.VOLUME,prefixes:k.NONE,value:16387064e-12,offset:0},cuft:{name:"cuft",base:F.VOLUME,prefixes:k.NONE,value:.028316846592,offset:0},cuyd:{name:"cuyd",base:F.VOLUME,prefixes:k.NONE,value:.764554857984,offset:0},teaspoon:{name:"teaspoon",base:F.VOLUME,prefixes:k.NONE,value:5e-6,offset:0},tablespoon:{name:"tablespoon",base:F.VOLUME,prefixes:k.NONE,value:15e-6,offset:0},drop:{name:"drop",base:F.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},gtt:{name:"gtt",base:F.VOLUME,prefixes:k.NONE,value:5e-8,offset:0},minim:{name:"minim",base:F.VOLUME,prefixes:k.NONE,value:6.1611519921875e-8,offset:0},fluiddram:{name:"fluiddram",base:F.VOLUME,prefixes:k.NONE,value:36966911953125e-19,offset:0},fluidounce:{name:"fluidounce",base:F.VOLUME,prefixes:k.NONE,value:295735295625e-16,offset:0},gill:{name:"gill",base:F.VOLUME,prefixes:k.NONE,value:.00011829411825,offset:0},cc:{name:"cc",base:F.VOLUME,prefixes:k.NONE,value:1e-6,offset:0},cup:{name:"cup",base:F.VOLUME,prefixes:k.NONE,value:.0002365882365,offset:0},pint:{name:"pint",base:F.VOLUME,prefixes:k.NONE,value:.000473176473,offset:0},quart:{name:"quart",base:F.VOLUME,prefixes:k.NONE,value:.000946352946,offset:0},gallon:{name:"gallon",base:F.VOLUME,prefixes:k.NONE,value:.003785411784,offset:0},beerbarrel:{name:"beerbarrel",base:F.VOLUME,prefixes:k.NONE,value:.117347765304,offset:0},oilbarrel:{name:"oilbarrel",base:F.VOLUME,prefixes:k.NONE,value:.158987294928,offset:0},hogshead:{name:"hogshead",base:F.VOLUME,prefixes:k.NONE,value:.238480942392,offset:0},g:{name:"g",base:F.MASS,prefixes:k.SHORT,value:.001,offset:0},gram:{name:"gram",base:F.MASS,prefixes:k.LONG,value:.001,offset:0},ton:{name:"ton",base:F.MASS,prefixes:k.SHORT,value:907.18474,offset:0},t:{name:"t",base:F.MASS,prefixes:k.SHORT,value:1e3,offset:0},tonne:{name:"tonne",base:F.MASS,prefixes:k.LONG,value:1e3,offset:0},grain:{name:"grain",base:F.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dram:{name:"dram",base:F.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},ounce:{name:"ounce",base:F.MASS,prefixes:k.NONE,value:.028349523125,offset:0},poundmass:{name:"poundmass",base:F.MASS,prefixes:k.NONE,value:.45359237,offset:0},hundredweight:{name:"hundredweight",base:F.MASS,prefixes:k.NONE,value:45.359237,offset:0},stick:{name:"stick",base:F.MASS,prefixes:k.NONE,value:.115,offset:0},stone:{name:"stone",base:F.MASS,prefixes:k.NONE,value:6.35029318,offset:0},gr:{name:"gr",base:F.MASS,prefixes:k.NONE,value:6479891e-11,offset:0},dr:{name:"dr",base:F.MASS,prefixes:k.NONE,value:.0017718451953125,offset:0},oz:{name:"oz",base:F.MASS,prefixes:k.NONE,value:.028349523125,offset:0},lbm:{name:"lbm",base:F.MASS,prefixes:k.NONE,value:.45359237,offset:0},cwt:{name:"cwt",base:F.MASS,prefixes:k.NONE,value:45.359237,offset:0},s:{name:"s",base:F.TIME,prefixes:k.SHORT,value:1,offset:0},min:{name:"min",base:F.TIME,prefixes:k.NONE,value:60,offset:0},h:{name:"h",base:F.TIME,prefixes:k.NONE,value:3600,offset:0},second:{name:"second",base:F.TIME,prefixes:k.LONG,value:1,offset:0},sec:{name:"sec",base:F.TIME,prefixes:k.LONG,value:1,offset:0},minute:{name:"minute",base:F.TIME,prefixes:k.NONE,value:60,offset:0},hour:{name:"hour",base:F.TIME,prefixes:k.NONE,value:3600,offset:0},day:{name:"day",base:F.TIME,prefixes:k.NONE,value:86400,offset:0},week:{name:"week",base:F.TIME,prefixes:k.NONE,value:604800,offset:0},month:{name:"month",base:F.TIME,prefixes:k.NONE,value:2629800,offset:0},year:{name:"year",base:F.TIME,prefixes:k.NONE,value:31557600,offset:0},decade:{name:"decade",base:F.TIME,prefixes:k.NONE,value:315576e3,offset:0},century:{name:"century",base:F.TIME,prefixes:k.NONE,value:315576e4,offset:0},millennium:{name:"millennium",base:F.TIME,prefixes:k.NONE,value:315576e5,offset:0},hertz:{name:"Hertz",base:F.FREQUENCY,prefixes:k.LONG,value:1,offset:0,reciprocal:!0},Hz:{name:"Hz",base:F.FREQUENCY,prefixes:k.SHORT,value:1,offset:0,reciprocal:!0},rad:{name:"rad",base:F.ANGLE,prefixes:k.SHORT,value:1,offset:0},radian:{name:"radian",base:F.ANGLE,prefixes:k.LONG,value:1,offset:0},deg:{name:"deg",base:F.ANGLE,prefixes:k.SHORT,value:null,offset:0},degree:{name:"degree",base:F.ANGLE,prefixes:k.LONG,value:null,offset:0},grad:{name:"grad",base:F.ANGLE,prefixes:k.SHORT,value:null,offset:0},gradian:{name:"gradian",base:F.ANGLE,prefixes:k.LONG,value:null,offset:0},cycle:{name:"cycle",base:F.ANGLE,prefixes:k.NONE,value:null,offset:0},arcsec:{name:"arcsec",base:F.ANGLE,prefixes:k.NONE,value:null,offset:0},arcmin:{name:"arcmin",base:F.ANGLE,prefixes:k.NONE,value:null,offset:0},A:{name:"A",base:F.CURRENT,prefixes:k.SHORT,value:1,offset:0},ampere:{name:"ampere",base:F.CURRENT,prefixes:k.LONG,value:1,offset:0},K:{name:"K",base:F.TEMPERATURE,prefixes:k.SHORT,value:1,offset:0},degC:{name:"degC",base:F.TEMPERATURE,prefixes:k.SHORT,value:1,offset:273.15},degF:{name:"degF",base:F.TEMPERATURE,prefixes:k.SHORT,value:new b(5,9),offset:459.67},degR:{name:"degR",base:F.TEMPERATURE,prefixes:k.SHORT,value:new b(5,9),offset:0},kelvin:{name:"kelvin",base:F.TEMPERATURE,prefixes:k.LONG,value:1,offset:0},celsius:{name:"celsius",base:F.TEMPERATURE,prefixes:k.LONG,value:1,offset:273.15},fahrenheit:{name:"fahrenheit",base:F.TEMPERATURE,prefixes:k.LONG,value:new b(5,9),offset:459.67},rankine:{name:"rankine",base:F.TEMPERATURE,prefixes:k.LONG,value:new b(5,9),offset:0},mol:{name:"mol",base:F.AMOUNT_OF_SUBSTANCE,prefixes:k.SHORT,value:1,offset:0},mole:{name:"mole",base:F.AMOUNT_OF_SUBSTANCE,prefixes:k.LONG,value:1,offset:0},cd:{name:"cd",base:F.LUMINOUS_INTENSITY,prefixes:k.SHORT,value:1,offset:0},candela:{name:"candela",base:F.LUMINOUS_INTENSITY,prefixes:k.LONG,value:1,offset:0},N:{name:"N",base:F.FORCE,prefixes:k.SHORT,value:1,offset:0},newton:{name:"newton",base:F.FORCE,prefixes:k.LONG,value:1,offset:0},dyn:{name:"dyn",base:F.FORCE,prefixes:k.SHORT,value:1e-5,offset:0},dyne:{name:"dyne",base:F.FORCE,prefixes:k.LONG,value:1e-5,offset:0},lbf:{name:"lbf",base:F.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},poundforce:{name:"poundforce",base:F.FORCE,prefixes:k.NONE,value:4.4482216152605,offset:0},kip:{name:"kip",base:F.FORCE,prefixes:k.LONG,value:4448.2216,offset:0},kilogramforce:{name:"kilogramforce",base:F.FORCE,prefixes:k.NONE,value:9.80665,offset:0},J:{name:"J",base:F.ENERGY,prefixes:k.SHORT,value:1,offset:0},joule:{name:"joule",base:F.ENERGY,prefixes:k.LONG,value:1,offset:0},erg:{name:"erg",base:F.ENERGY,prefixes:k.SHORTLONG,value:1e-7,offset:0},Wh:{name:"Wh",base:F.ENERGY,prefixes:k.SHORT,value:3600,offset:0},BTU:{name:"BTU",base:F.ENERGY,prefixes:k.BTU,value:1055.05585262,offset:0},eV:{name:"eV",base:F.ENERGY,prefixes:k.SHORT,value:1602176565e-28,offset:0},electronvolt:{name:"electronvolt",base:F.ENERGY,prefixes:k.LONG,value:1602176565e-28,offset:0},W:{name:"W",base:F.POWER,prefixes:k.SHORT,value:1,offset:0},watt:{name:"watt",base:F.POWER,prefixes:k.LONG,value:1,offset:0},hp:{name:"hp",base:F.POWER,prefixes:k.NONE,value:745.6998715386,offset:0},VAR:{name:"VAR",base:F.POWER,prefixes:k.SHORT,value:y.I,offset:0},VA:{name:"VA",base:F.POWER,prefixes:k.SHORT,value:1,offset:0},Pa:{name:"Pa",base:F.PRESSURE,prefixes:k.SHORT,value:1,offset:0},psi:{name:"psi",base:F.PRESSURE,prefixes:k.NONE,value:6894.75729276459,offset:0},atm:{name:"atm",base:F.PRESSURE,prefixes:k.NONE,value:101325,offset:0},bar:{name:"bar",base:F.PRESSURE,prefixes:k.SHORTLONG,value:1e5,offset:0},torr:{name:"torr",base:F.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmHg:{name:"mmHg",base:F.PRESSURE,prefixes:k.NONE,value:133.322,offset:0},mmH2O:{name:"mmH2O",base:F.PRESSURE,prefixes:k.NONE,value:9.80665,offset:0},cmH2O:{name:"cmH2O",base:F.PRESSURE,prefixes:k.NONE,value:98.0665,offset:0},coulomb:{name:"coulomb",base:F.ELECTRIC_CHARGE,prefixes:k.LONG,value:1,offset:0},C:{name:"C",base:F.ELECTRIC_CHARGE,prefixes:k.SHORT,value:1,offset:0},farad:{name:"farad",base:F.ELECTRIC_CAPACITANCE,prefixes:k.LONG,value:1,offset:0},F:{name:"F",base:F.ELECTRIC_CAPACITANCE,prefixes:k.SHORT,value:1,offset:0},volt:{name:"volt",base:F.ELECTRIC_POTENTIAL,prefixes:k.LONG,value:1,offset:0},V:{name:"V",base:F.ELECTRIC_POTENTIAL,prefixes:k.SHORT,value:1,offset:0},ohm:{name:"ohm",base:F.ELECTRIC_RESISTANCE,prefixes:k.SHORTLONG,value:1,offset:0},henry:{name:"henry",base:F.ELECTRIC_INDUCTANCE,prefixes:k.LONG,value:1,offset:0},H:{name:"H",base:F.ELECTRIC_INDUCTANCE,prefixes:k.SHORT,value:1,offset:0},siemens:{name:"siemens",base:F.ELECTRIC_CONDUCTANCE,prefixes:k.LONG,value:1,offset:0},S:{name:"S",base:F.ELECTRIC_CONDUCTANCE,prefixes:k.SHORT,value:1,offset:0},weber:{name:"weber",base:F.MAGNETIC_FLUX,prefixes:k.LONG,value:1,offset:0},Wb:{name:"Wb",base:F.MAGNETIC_FLUX,prefixes:k.SHORT,value:1,offset:0},tesla:{name:"tesla",base:F.MAGNETIC_FLUX_DENSITY,prefixes:k.LONG,value:1,offset:0},T:{name:"T",base:F.MAGNETIC_FLUX_DENSITY,prefixes:k.SHORT,value:1,offset:0},b:{name:"b",base:F.BIT,prefixes:k.BINARY_SHORT,value:1,offset:0},bits:{name:"bits",base:F.BIT,prefixes:k.BINARY_LONG,value:1,offset:0},B:{name:"B",base:F.BIT,prefixes:k.BINARY_SHORT,value:8,offset:0},bytes:{name:"bytes",base:F.BIT,prefixes:k.BINARY_LONG,value:8,offset:0}},L={meters:"meter",inches:"inch",feet:"foot",yards:"yard",miles:"mile",links:"link",rods:"rod",chains:"chain",angstroms:"angstrom",lt:"l",litres:"litre",liter:"litre",liters:"litre",teaspoons:"teaspoon",tablespoons:"tablespoon",minims:"minim",fldr:"fluiddram",fluiddrams:"fluiddram",floz:"fluidounce",fluidounces:"fluidounce",gi:"gill",gills:"gill",cp:"cup",cups:"cup",pt:"pint",pints:"pint",qt:"quart",quarts:"quart",gal:"gallon",gallons:"gallon",bbl:"beerbarrel",beerbarrels:"beerbarrel",obl:"oilbarrel",oilbarrels:"oilbarrel",hogsheads:"hogshead",gtts:"gtt",grams:"gram",tons:"ton",tonnes:"tonne",grains:"grain",drams:"dram",ounces:"ounce",poundmasses:"poundmass",hundredweights:"hundredweight",sticks:"stick",lb:"lbm",lbs:"lbm",kips:"kip",kgf:"kilogramforce",acres:"acre",hectares:"hectare",sqfeet:"sqft",sqyard:"sqyd",sqmile:"sqmi",sqmiles:"sqmi",mmhg:"mmHg",mmh2o:"mmH2O",cmh2o:"cmH2O",seconds:"second",secs:"second",minutes:"minute",mins:"minute",hours:"hour",hr:"hour",hrs:"hour",days:"day",weeks:"week",months:"month",years:"year",decades:"decade",centuries:"century",millennia:"millennium",hertz:"hertz",radians:"radian",degrees:"degree",gradians:"gradian",cycles:"cycle",arcsecond:"arcsec",arcseconds:"arcsec",arcminute:"arcmin",arcminutes:"arcmin",BTUs:"BTU",watts:"watt",joules:"joule",amperes:"ampere",amps:"ampere",amp:"ampere",coulombs:"coulomb",volts:"volt",ohms:"ohm",farads:"farad",webers:"weber",teslas:"tesla",electronvolts:"electronvolt",moles:"mole",bit:"bits",byte:"bytes"};function z(e){if("BigNumber"===e.number){var t=dk(x);B.rad.value=new x(1),B.deg.value=t.div(180),B.grad.value=t.div(200),B.cycle.value=t.times(2),B.arcsec.value=t.div(648e3),B.arcmin.value=t.div(10800)}else B.rad.value=1,B.deg.value=Math.PI/180,B.grad.value=Math.PI/200,B.cycle.value=2*Math.PI,B.arcsec.value=Math.PI/648e3,B.arcmin.value=Math.PI/10800;B.radian.value=B.rad.value,B.degree.value=B.deg.value,B.gradian.value=B.grad.value}z(a),i&&i("config",(function(e,t){e.number!==t.number&&z(e)}));var U={si:{NONE:{unit:O,prefix:k.NONE[""]},LENGTH:{unit:B.m,prefix:k.SHORT[""]},MASS:{unit:B.g,prefix:k.SHORT.k},TIME:{unit:B.s,prefix:k.SHORT[""]},CURRENT:{unit:B.A,prefix:k.SHORT[""]},TEMPERATURE:{unit:B.K,prefix:k.SHORT[""]},LUMINOUS_INTENSITY:{unit:B.cd,prefix:k.SHORT[""]},AMOUNT_OF_SUBSTANCE:{unit:B.mol,prefix:k.SHORT[""]},ANGLE:{unit:B.rad,prefix:k.SHORT[""]},BIT:{unit:B.bits,prefix:k.SHORT[""]},FORCE:{unit:B.N,prefix:k.SHORT[""]},ENERGY:{unit:B.J,prefix:k.SHORT[""]},POWER:{unit:B.W,prefix:k.SHORT[""]},PRESSURE:{unit:B.Pa,prefix:k.SHORT[""]},ELECTRIC_CHARGE:{unit:B.C,prefix:k.SHORT[""]},ELECTRIC_CAPACITANCE:{unit:B.F,prefix:k.SHORT[""]},ELECTRIC_POTENTIAL:{unit:B.V,prefix:k.SHORT[""]},ELECTRIC_RESISTANCE:{unit:B.ohm,prefix:k.SHORT[""]},ELECTRIC_INDUCTANCE:{unit:B.H,prefix:k.SHORT[""]},ELECTRIC_CONDUCTANCE:{unit:B.S,prefix:k.SHORT[""]},MAGNETIC_FLUX:{unit:B.Wb,prefix:k.SHORT[""]},MAGNETIC_FLUX_DENSITY:{unit:B.T,prefix:k.SHORT[""]},FREQUENCY:{unit:B.Hz,prefix:k.SHORT[""]}}};U.cgs=JSON.parse(JSON.stringify(U.si)),U.cgs.LENGTH={unit:B.m,prefix:k.SHORT.c},U.cgs.MASS={unit:B.g,prefix:k.SHORT[""]},U.cgs.FORCE={unit:B.dyn,prefix:k.SHORT[""]},U.cgs.ENERGY={unit:B.erg,prefix:k.NONE[""]},U.us=JSON.parse(JSON.stringify(U.si)),U.us.LENGTH={unit:B.ft,prefix:k.NONE[""]},U.us.MASS={unit:B.lbm,prefix:k.NONE[""]},U.us.TEMPERATURE={unit:B.degF,prefix:k.NONE[""]},U.us.FORCE={unit:B.lbf,prefix:k.NONE[""]},U.us.ENERGY={unit:B.BTU,prefix:k.BTU[""]},U.us.POWER={unit:B.hp,prefix:k.NONE[""]},U.us.PRESSURE={unit:B.psi,prefix:k.NONE[""]},U.auto=JSON.parse(JSON.stringify(U.si));var H=U.auto;for(var q in S.setUnitSystem=function(e){if(!X_(U,e))throw new Error("Unit system "+e+" does not exist. Choices are: "+Object.keys(U).join(", "));H=U[e]},S.getUnitSystem=function(){for(var e in U)if(X_(U,e)&&U[e]===H)return e},S.typeConverters={BigNumber:function(e){return null!==e&&void 0!==e&&e.isFraction?new x(String(e.n)).div(String(e.d)).times(String(e.s)):new x(e+"")},Fraction:function(e){return new b(e)},Complex:function(e){return e},number:function(e){return null!==e&&void 0!==e&&e.isFraction?v(e):e}},S.prototype._numberConverter=function(){var e=S.typeConverters[this.valueType()];if(e)return e;throw new TypeError('Unsupported Unit value type "'+this.valueType()+'"')},S._getNumberConverter=function(e){if(!S.typeConverters[e])throw new TypeError('Unsupported type "'+e+'"');return S.typeConverters[e]},B)if(X_(B,q)){var V=B[q];V.dimensions=V.base.dimensions}for(var j in L)if(X_(L,j)){var G=B[L[j]],W={};for(var X in G)X_(G,X)&&(W[X]=G[X]);W.name=j,B[j]=W}return S.isValidAlpha=function(e){return/^[a-zA-Z]$/.test(e)},S.createUnit=function(e,t){if("object"!==typeof e)throw new TypeError("createUnit expects first parameter to be of type 'Object'");if(t&&t.override)for(var n in e)if(X_(e,n)&&S.deleteUnit(n),e[n].aliases)for(var r=0;r<e[n].aliases.length;r++)S.deleteUnit(e[n].aliases[r]);var i;for(var a in e)X_(e,a)&&(i=S.createUnitSingle(a,e[a]));return i},S.createUnitSingle=function(e,t){if("undefined"!==typeof t&&null!==t||(t={}),"string"!==typeof e)throw new TypeError("createUnitSingle expects first parameter to be of type 'string'");if(X_(B,e))throw new Error('Cannot create unit "'+e+'": a unit with that name already exists');!function(e){for(var t=0;t<e.length;t++){if(r=e.charAt(t),0===t&&!S.isValidAlpha(r))throw new Error('Invalid unit name (must begin with alpha character): "'+e+'"');if(t>0&&!S.isValidAlpha(r)&&!M(r))throw new Error('Invalid unit name (only alphanumeric characters are allowed): "'+e+'"')}}(e);var n,i,a,o=null,s=[],l=0;if(t&&"Unit"===t.type)o=t.clone();else if("string"===typeof t)""!==t&&(n=t);else{if("object"!==typeof t)throw new TypeError('Cannot create unit "'+e+'" from "'+t.toString()+'": expecting "string" or "Unit" or "Object"');n=t.definition,i=t.prefixes,l=t.offset,a=t.baseName,t.aliases&&(s=t.aliases.valueOf())}if(s)for(var u=0;u<s.length;u++)if(X_(B,s[u]))throw new Error('Cannot create alias "'+s[u]+'": a unit with that name already exists');if(n&&"string"===typeof n&&!o)try{o=S.parse(n,{allowNoUnits:!0})}catch(E){throw E.message='Could not create unit "'+e+'" from "'+n+'": '+E.message,E}else n&&"Unit"===n.type&&(o=n.clone());s=s||[],l=l||0,i=i&&i.toUpperCase&&k[i.toUpperCase()]||k.NONE;var c={};if(o){c={name:e,value:o.value,dimensions:o.dimensions.slice(0),prefixes:i,offset:l};var h=!1;for(var d in F)if(X_(F,d)){for(var p=!0,f=0;f<I.length;f++)if(Math.abs((c.dimensions[f]||0)-(F[d].dimensions[f]||0))>1e-12){p=!1;break}if(p){h=!0,c.base=F[d];break}}if(!h){a=a||e+"_STUFF";var m={dimensions:o.dimensions.slice(0)};m.key=a,F[a]=m,H[a]={unit:c,prefix:k.NONE[""]},c.base=F[a]}}else{if(a=a||e+"_STUFF",I.indexOf(a)>=0)throw new Error('Cannot create new base unit "'+e+'": a base unit with that name already exists (and cannot be overridden)');for(var g in I.push(a),F)X_(F,g)&&(F[g].dimensions[I.length-1]=0);for(var v={dimensions:[]},y=0;y<I.length;y++)v.dimensions[y]=0;v.dimensions[I.length-1]=1,v.key=a,F[a]=v,c={name:e,value:1,dimensions:F[a].dimensions.slice(0),prefixes:i,offset:l,base:F[a]},H[a]={unit:c,prefix:k.NONE[""]}}S.UNITS[e]=c;for(var x=0;x<s.length;x++){var b=s[x],w={};for(var _ in c)X_(c,_)&&(w[_]=c[_]);w.name=b,S.UNITS[b]=w}return delete N.cache,new S(null,e)},S.deleteUnit=function(e){delete S.UNITS[e],delete N.cache},S.PREFIXES=k,S.BASE_DIMENSIONS=I,S.BASE_UNITS=F,S.UNIT_SYSTEMS=U,S.UNITS=B,S}),{isClass:!0}),NH="dotPow",RH=$M(NH,["typed","equalScalar","matrix","pow","DenseMatrix","concat","SparseMatrix"],(e=>{var{typed:t,equalScalar:n,matrix:r,pow:i,DenseMatrix:a,concat:o,SparseMatrix:s}=e,l=EC({typed:t}),u=dL({typed:t,SparseMatrix:s}),c=UC({typed:t,equalScalar:n}),h=AC({typed:t,DenseMatrix:a}),d=RC({typed:t,matrix:r,concat:o}),p={};for(var f in i.signatures)Object.prototype.hasOwnProperty.call(i.signatures,f)&&(f.includes("Matrix")||f.includes("Array")||(p[f]=i.signatures[f]));var m=t(p);return t(NH,d({elop:m,SS:u,DS:l,Ss:c,sS:h}))})),kH="expm",IH=$M(kH,["typed","abs","add","identity","inv","multiply"],(e=>{var{typed:t,abs:n,add:r,identity:i,inv:a,multiply:o}=e;return t(kH,{Matrix:function(e){var t=e.size();if(2!==t.length||t[0]!==t[1])throw new RangeError("Matrix must be square (size: "+RE(t)+")");for(var l=t[0],u=function(e){for(var t=e.size()[0],r=0,i=0;i<t;i++){for(var a=0,o=0;o<t;o++)a+=n(e.get([i,o]));r=Math.max(a,r)}return r}(e),c=function(e,t){for(var n=30,r=0;r<n;r++)for(var i=0;i<=r;i++){var a=r-i;if(s(e,i,a)<t)return{q:i,j:a}}throw new Error("Could not find acceptable parameters to compute the matrix exponential (try increasing maxSearchSize in expm.js)")}(u,1e-15),h=c.q,d=c.j,p=o(e,Math.pow(2,-d)),f=i(l),m=i(l),g=1,v=p,y=-1,x=1;x<=h;x++)x>1&&(v=o(v,p),y=-y),f=r(f,o(g=g*(h-x+1)/((2*h-x+1)*x),v)),m=r(m,o(g*y,v));for(var b=o(a(m),f),w=0;w<d;w++)b=o(b,b);return gM(e)?e.createSparseMatrix(b):b}});function s(e,t,n){for(var r=1,i=2;i<=t;i++)r*=i;for(var a=r,o=t+1;o<=2*t;o++)a*=o;var s=a*(2*t+1);return 8*Math.pow(e/Math.pow(2,n),2*t)*r*r/(a*s)}})),FH=$M("fft",["typed","matrix","addScalar","multiplyScalar","divideScalar","exp","tau","i","dotDivide","conj","pow","ceil","log2"],(e=>{var{typed:t,matrix:n,addScalar:r,multiplyScalar:i,divideScalar:a,exp:o,tau:s,i:l,dotDivide:u,conj:c,pow:h,ceil:d,log2:p}=e;return t("fft",{Array:f,Matrix:function(e){return e.create(f(e.valueOf()),e.datatype())}});function f(e){var t=HE(e);return 1===t.length?g(e,t[0]):m(e.map((e=>f(e,t.slice(1)))),0)}function m(e,t){var n=HE(e);if(0!==t)return new Array(n[0]).fill(0).map(((n,r)=>m(e[r],t-1)));if(1===n.length)return g(e);function r(e){var t=HE(e);return new Array(t[1]).fill(0).map(((n,r)=>new Array(t[0]).fill(0).map(((t,n)=>e[n][r]))))}return r(m(r(e),1))}function g(e){var t=e.length;if(1===t)return[e[0]];if(t%2===0){for(var n=[...g(e.filter(((e,t)=>t%2===0))),...g(e.filter(((e,t)=>t%2===1)))],m=0;m<t/2;m++){var v=n[m],y=i(n[m+t/2],o(i(i(s,l),a(-m,t))));n[m]=r(v,y),n[m+t/2]=r(v,i(-1,y))}return n}return function(e){for(var t=e.length,n=o(a(i(-1,i(l,s)),t)),r=[],m=1-t;m<t;m++)r.push(h(n,a(h(m,2),2)));for(var v=h(2,d(p(t+t-1))),y=[...new Array(t).fill(0).map(((n,a)=>i(e[a],r[t-1+a]))),...new Array(v-t).fill(0)],x=[...new Array(t+t-1).fill(0).map(((e,t)=>a(1,r[t]))),...new Array(v-(t+t-1)).fill(0)],b=g(y),w=g(x),S=new Array(v).fill(0).map(((e,t)=>i(b[t],w[t]))),_=u(c(f(c(S))),v),M=[],E=t-1;E<t+t-1;E++)M.push(i(_[E],r[E]));return M}(e)}})),PH="gamma",OH=$M(PH,["typed","config","multiplyScalar","pow","BigNumber","Complex"],(e=>{var{typed:t,config:n,multiplyScalar:r,pow:i,BigNumber:a,Complex:o}=e;return t(PH,{number:lO,Complex:function e(t){if(0===t.im)return lO(t.re);if(t.re<.5){var n=new o(1-t.re,-t.im),r=new o(Math.PI*t.re,Math.PI*t.im);return new o(Math.PI).div(r.sin()).div(e(n))}t=new o(t.re-1,t.im);for(var i=new o(cO[0],0),a=1;a<cO.length;++a){var s=new o(cO[a],0);i=i.add(s.div(t.add(a)))}var l=new o(t.re+uO+.5,t.im),u=Math.sqrt(2*Math.PI),c=l.pow(t.add(.5)),h=l.neg().exp();return i.mul(u).mul(c).mul(h)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new a(1/0):s(e.minus(1));if(!e.isFinite())return new a(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")}});function s(e){if(e<8)return new a([1,1,2,6,24,120,720,5040][e]);var t=n.precision+(0|Math.log(e.toNumber())),r=a.clone({precision:t});if(e%2===1)return e.times(s(new a(e-1)));for(var i=e,o=new r(e),l=e.toNumber();i>2;)l+=i-=2,o=o.times(l);return new a(o.toPrecision(a.precision))}})),BH="ifft",LH=$M(BH,["typed","fft","dotDivide","conj"],(e=>{var{typed:t,fft:n,dotDivide:r,conj:i}=e;return t(BH,{"Array | Matrix":function(e){var t=pM(e)?e.size():HE(e);return r(i(n(i(e))),t.reduce(((e,t)=>e*t),1))}})})),zH="createUnit",UH=$M(zH,["typed","Unit"],(e=>{var{typed:t,Unit:n}=e;return t(zH,{"Object, Object":function(e,t){return n.createUnit(e,t)},Object:function(e){return n.createUnit(e,{})},"string, Unit | string | Object, Object":function(e,t,r){var i={};return i[e]=t,n.createUnit(i,r)},"string, Unit | string | Object":function(e,t){var r={};return r[e]=t,n.createUnit(r,{})},string:function(e){var t={};return t[e]={},n.createUnit(t,{})}})})),HH=$M("divide",["typed","matrix","multiply","equalScalar","divideScalar","inv"],(e=>{var{typed:t,matrix:n,multiply:r,equalScalar:i,divideScalar:a,inv:o}=e,s=UC({typed:t,equalScalar:i}),l=DC({typed:t});return t("divide",G_({"Array | Matrix, Array | Matrix":function(e,t){return r(e,o(t))},"DenseMatrix, any":function(e,t){return l(e,t,a,!1)},"SparseMatrix, any":function(e,t){return s(e,t,a,!1)},"Array, any":function(e,t){return l(n(e),t,a,!1).valueOf()},"any, Array | Matrix":function(e,t){return r(e,o(t))}},a.signatures))})),qH="factorial",VH=$M(qH,["typed","gamma"],(e=>{var{typed:t,gamma:n}=e;return t(qH,{number:function(e){if(e<0)throw new Error("Value must be non-negative");return n(e+1)},BigNumber:function(e){if(e.isNegative())throw new Error("Value must be non-negative");return n(e.plus(1))},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})}));function jH(e,t){var n,r=t.length,i=[];if(e)for(n=0;n<r;n++)i[e[n]]=t[n];else for(n=0;n<r;n++)i[n]=t[n];return i}var GH="lusolve",WH=$M(GH,["typed","matrix","lup","slu","usolve","lsolve","DenseMatrix"],(e=>{var{typed:t,matrix:n,lup:r,slu:i,usolve:a,lsolve:o,DenseMatrix:s}=e,l=RL({DenseMatrix:s});return t(GH,{"Array, Array | Matrix":function(e,t){e=n(e);var i=r(e);return c(i.L,i.U,i.p,null,t).valueOf()},"DenseMatrix, Array | Matrix":function(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix":function(e,t){var n=r(e);return c(n.L,n.U,n.p,null,t)},"SparseMatrix, Array | Matrix, number, number":function(e,t,n,r){var a=i(e,n,r);return c(a.L,a.U,a.p,a.q,t)},"Object, Array | Matrix":function(e,t){return c(e.L,e.U,e.p,e.q,t)}});function u(e){if(pM(e))return e;if(dM(e))return n(e);throw new TypeError("Invalid Matrix LU decomposition")}function c(e,t,n,r,i){e=u(e),t=u(t),n&&((i=l(e,i,!0))._data=jH(n,i._data));var s=o(e,i),c=a(t,s);return r&&(c._data=jH(r,c._data)),c}})),XH="multinomial",YH=$M(XH,["typed","add","divide","multiply","factorial","isInteger","isPositive"],(e=>{var{typed:t,add:n,divide:r,multiply:i,factorial:a,isInteger:o,isPositive:s}=e;return t(XH,{"Array | Matrix":function(e){var t=0,l=1;return hT(e,(function(e){if(!o(e)||!s(e))throw new TypeError("Positive integer value expected in function multinomial");t=n(t,e),l=i(l,a(e))})),r(a(t),l)}})})),$H="permutations",ZH=$M($H,["typed","factorial"],(e=>{var{typed:t,factorial:n}=e;return t($H,{"number | BigNumber":n,"number, number":function(e,t){if(!tE(e)||e<0)throw new TypeError("Positive integer value expected in function permutations");if(!tE(t)||t<0)throw new TypeError("Positive integer value expected in function permutations");if(t>e)throw new TypeError("second argument k must be less than or equal to first argument n");return mP(e-t+1,e)},"BigNumber, BigNumber":function(e,t){var n,r;if(!JH(e)||!JH(t))throw new TypeError("Positive integer value expected in function permutations");if(t.gt(e))throw new TypeError("second argument k must be less than or equal to first argument n");for(n=e.mul(0).add(1),r=e.minus(t).plus(1);r.lte(e);r=r.plus(1))n=n.times(r);return n}})}));function JH(e){return e.isInteger()&&e.gte(0)}var KH="polynomialRoot",QH=$M(KH,["typed","isZero","equalScalar","add","subtract","multiply","divide","sqrt","unaryMinus","cbrt","typeOf","im","re"],(e=>{var{typed:t,isZero:n,equalScalar:r,add:i,subtract:a,multiply:o,divide:s,sqrt:l,unaryMinus:u,cbrt:c,typeOf:h,im:d,re:p}=e;return t(KH,{"number|Complex, ...number|Complex":(e,t)=>{for(var f=[e,...t];f.length>0&&n(f[f.length-1]);)f.pop();if(f.length<2)throw new RangeError("Polynomial [".concat(e,", ").concat(t,"] must have a non-zero non-constant coefficient"));switch(f.length){case 2:return[u(s(f[0],f[1]))];case 3:var[m,g,v]=f,y=o(2,v),x=o(g,g),b=o(4,v,m);if(r(x,b))return[s(u(g),y)];var w=l(a(x,b));return[s(a(w,g),y),s(a(u(w),g),y)];case 4:var[S,_,M,E]=f,A=u(o(3,E)),T=o(M,M),C=o(3,E,_),D=i(o(2,M,M,M),o(27,E,E,S)),N=o(9,E,M,_);if(r(T,C)&&r(D,N))return[s(M,A)];var R,k=a(T,C),I=a(D,N),F=i(o(18,E,M,_,S),o(M,M,_,_)),P=i(o(4,M,M,M,S),o(4,E,_,_,_),o(27,E,E,S,S));if(r(F,P))return[s(a(o(4,E,M,_),i(o(9,E,E,S),o(M,M,M))),o(E,k)),s(a(o(9,E,S),o(M,_)),o(2,k))];R=r(T,C)?I:s(i(I,l(a(o(I,I),o(4,k,k,k)))),2);return c(R,!0).toArray().map((e=>s(i(M,e,s(k,e)),A))).map((e=>"Complex"===h(e)&&r(p(e),p(e)+d(e))?p(e):e));default:throw new RangeError("only implemented for cubic or lower-order polynomials, not ".concat(f))}}})})),eq="setSize",tq=$M(eq,["typed","compareNatural"],(e=>{var{typed:t,compareNatural:n}=e;return t(eq,{"Array | Matrix":function(e){return Array.isArray(e)?nA(e).length:nA(e.toArray()).length},"Array | Matrix, boolean":function(e,t){if(!1===t||0===e.length)return Array.isArray(e)?nA(e).length:nA(e.toArray()).length;for(var r=nA(Array.isArray(e)?e:e.toArray()).sort(n),i=1,a=1;a<r.length;a++)0!==n(r[a],r[a-1])&&i++;return i}})}));function nq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rq=$M("solveODE",["typed","add","subtract","multiply","divide","max","map","abs","isPositive","isNegative","larger","smaller","matrix","bignumber","unaryMinus"],(e=>{var{typed:t,add:n,subtract:r,multiply:i,divide:a,max:o,map:s,abs:l,isPositive:u,isNegative:c,larger:h,smaller:d,matrix:p,bignumber:f,unaryMinus:m}=e;function g(e){return function(t,p,g,v){if(!(2===p.length&&(p.every(b)||p.every(cM))))throw new Error('"tspan" must be an Array of two numeric values or two units [tStart, tEnd]');var y=p[0],x=p[1],w=h(x,y),S=v.firstStep;if(void 0!==S&&!u(S))throw new Error('"firstStep" must be positive');var _=v.maxStep;if(void 0!==_&&!u(_))throw new Error('"maxStep" must be positive');var M=v.minStep;if(M&&c(M))throw new Error('"minStep" must be positive or zero');var E=[y,x,S,M,_].filter((e=>void 0!==e));if(!E.every(b)&&!E.every(cM))throw new Error('Inconsistent type of "t" dependant variables');for(var A=v.tol?v.tol:1e-4,T=v.minDelta?v.minDelta:.2,C=v.maxDelta?v.maxDelta:5,D=v.maxIter?v.maxIter:1e4,N=[y,x,...g,_,M].some(oM),[R,k,I,F]=N?[f(e.a),f(e.c),f(e.b),f(e.bp)]:[e.a,e.c,e.b,e.bp],P=S?w?S:m(S):a(r(x,y),1),O=[y],B=[g],L=r(I,F),z=0,U=0,H=function(e){return e?d:h}(w),q=function(e){var t=e?h:d;return function(e,i,a){var o=n(e,a);return t(o,i)?r(i,e):a}}(w);H(O[z],x);){var V=[];P=q(O[z],x,P),V.push(t(O[z],B[z]));for(var j=1;j<k.length;++j)V.push(t(n(O[z],i(k[j],P)),n(B[z],i(P,R[j],V))));var G=o(l(s(i(L,V),(e=>cM(e)?e.value:e))));G<A&&A/G>1/4&&(O.push(n(O[z],P)),B.push(n(B[z],i(P,I,V))),z++);var W=.84*(A/G)**.2;if(d(W,T)?W=T:h(W,C)&&(W=C),W=N?f(W):W,P=i(P,W),_&&h(l(P),_)?P=w?_:m(_):M&&d(l(P),M)&&(P=w?M:m(M)),++U>D)throw new Error("Maximum number of iterations reached, try changing options")}return{t:O,y:B}}}function v(e,t,n,r){return g({a:[[],[.5],[0,3/4],[2/9,1/3,4/9]],c:[null,.5,3/4,1],b:[2/9,1/3,4/9,0],bp:[7/24,1/4,1/3,1/8]})(e,t,n,r)}function y(e,t,n,r){return g({a:[[],[.2],[3/40,9/40],[44/45,-56/15,32/9],[19372/6561,-25360/2187,64448/6561,-212/729],[9017/3168,-355/33,46732/5247,49/176,-5103/18656],[35/384,0,500/1113,125/192,-2187/6784,11/84]],c:[null,.2,.3,.8,8/9,1,1],b:[35/384,0,500/1113,125/192,-2187/6784,11/84,0],bp:[5179/57600,0,7571/16695,393/640,-92097/339200,187/2100,1/40]})(e,t,n,r)}function x(e,t,n,r){var i=r.method?r.method:"RK45",a={RK23:v,RK45:y};if(i.toUpperCase()in a){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nq(Object(n),!0).forEach((function(t){eE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r);return delete o.method,a[i.toUpperCase()](e,t,n,o)}var s=Object.keys(a).map((e=>'"'.concat(e,'"'))),l="".concat(s.slice(0,-1).join(", ")," and ").concat(s.slice(-1));throw new Error('Unavailable method "'.concat(i,'". Available methods are ').concat(l))}function b(e){return oM(e)||aM(e)}function w(e,t,n,r){var i=x(e,t.toArray(),n.toArray(),r);return{t:p(i.t),y:p(i.y)}}return t("solveODE",{"function, Array, Array, Object":x,"function, Matrix, Matrix, Object":w,"function, Array, Array":(e,t,n)=>x(e,t,n,{}),"function, Matrix, Matrix":(e,t,n)=>w(e,t,n,{}),"function, Array, number | BigNumber | Unit":(e,t,n)=>{var r=x(e,t,[n],{});return{t:r.t,y:r.y.map((e=>e[0]))}},"function, Matrix, number | BigNumber | Unit":(e,t,n)=>{var r=x(e,t.toArray(),[n],{});return{t:p(r.t),y:p(r.y.map((e=>e[0])))}},"function, Array, number | BigNumber | Unit, Object":(e,t,n,r)=>{var i=x(e,t,[n],r);return{t:i.t,y:i.y.map((e=>e[0]))}},"function, Matrix, number | BigNumber | Unit, Object":(e,t,n,r)=>{var i=x(e,t.toArray(),[n],r);return{t:p(i.t),y:p(i.y.map((e=>e[0])))}}})})),iq="stirlingS2",aq=$M(iq,["typed","addScalar","subtractScalar","multiplyScalar","divideScalar","pow","factorial","combinations","isNegative","isInteger","number","?bignumber","larger"],(e=>{var{typed:t,addScalar:n,subtractScalar:r,multiplyScalar:i,divideScalar:a,pow:o,factorial:s,combinations:l,isNegative:u,isInteger:c,number:h,bignumber:d,larger:p}=e,f=[],m=[];return t(iq,{"number | BigNumber, number | BigNumber":function(e,t){if(!c(e)||u(e)||!c(t)||u(t))throw new TypeError("Non-negative integer value expected in function stirlingS2");if(p(t,e))throw new TypeError("k must be less than or equal to n in function stirlingS2");var r=!(aM(e)&&aM(t)),a=r?m:f,o=r?d:h,s=h(e),l=h(t);if(a[s]&&a[s].length>l)return a[s][l];for(var g=0;g<=s;++g)if(a[g]||(a[g]=[o(0===g?1:0)]),0!==g)for(var v=a[g],y=a[g-1],x=v.length;x<=g&&x<=l;++x)v[x]=x===g?1:n(i(o(x),y[x]),y[x-1]);return a[s][l]}})})),oq="unit",sq=$M(oq,["typed","Unit"],(e=>{var{typed:t,Unit:n}=e;return t(oq,{Unit:function(e){return e.clone()},string:function(e){return n.isValuelessUnit(e)?new n(null,e):n.parse(e,{allowNoUnits:!0})},"number | BigNumber | Fraction | Complex, string | Unit":function(e,t){return new n(e,t)},"number | BigNumber | Fraction":function(e){return new n(e)},"Array | Matrix":t.referToSelf((e=>t=>dT(t,e)))})})),lq="bellNumbers",uq=$M(lq,["typed","addScalar","isNegative","isInteger","stirlingS2"],(e=>{var{typed:t,addScalar:n,isNegative:r,isInteger:i,stirlingS2:a}=e;return t(lq,{"number | BigNumber":function(e){if(!i(e)||r(e))throw new TypeError("Non-negative integer value expected in function bellNumbers");for(var t=0,o=0;o<=e;o++)t=n(t,a(e,o));return t}})}));function cq(e){var{addScalar:t,subtract:n,flatten:r,multiply:i,multiplyScalar:a,divideScalar:o,sqrt:s,abs:l,bignumber:u,diag:c,size:h,reshape:d,inv:p,qr:f,usolve:m,usolveAll:g,equal:v,complex:y,larger:x,smaller:b,matrixFromColumns:w,dot:S}=e;function _(e,r,i,o){var l=t(e,o),u=n(a(e,o),a(r,i)),c=a(l,.5),h=a(s(n(a(l,l),a(4,u))),.5);return[t(c,h),n(c,h)]}function M(e,t,r,i,a,o,s,c){var h="BigNumber"===c,d="Complex"===c,p=h?u(0):d?y(0):0,f=h?u(1):d?y(1):1;if(b(l(r),s))return[[f,p],[p,f]];if(x(l(n(a,o)),s))return[[n(a,i),n(o,i)],[r,r]];var m=n(e,a),g=n(i,a);return b(l(t),s)&&b(l(g),s)?[[m,f],[r,p]]:[[t,p],[g,f]]}function E(e,t){for(var n=0;n<e.length;n++)e[n].push(...Array(t-e[n].length).fill(0));for(var r=e.length;r<t;r++)e.push(Array(t).fill(0)),e[r][r]=1;return e}function A(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return r;return-1}function T(e,t,n,r,i){for(var a,o="BigNumber"===i?u(1e3):1e3,s=0;s<5;++s){a=C(t,n,i);try{a=m(e,a)}catch(c){continue}if(x(N(a),o))break}if(s>=5)return null;for(s=0;;){var l=m(e,a);if(b(N(D(a,[l])),r))break;if(++s>=10)return null;a=R(l)}return a}function C(e,t,n){var r="BigNumber"===n,i="Complex"===n,a=Array(e).fill(0).map((e=>2*Math.random()-1));return r&&(a=a.map((e=>u(e)))),i&&(a=a.map((e=>y(e)))),R(a=D(a,t),n)}function D(e,t){var r=h(e);for(var a of t)a=d(a,r),e=n(e,i(o(S(a,e),S(a,a)),a));return e}function N(e){return l(s(S(e,e)))}function R(e,t){var n="Complex"===t,r="BigNumber"===t?u(1):n?y(1):1;return i(o(r,N(e)),e)}return function(e,s,h,d){var m=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],w=function(e,n,r,i,s){var h,d="BigNumber"===i,p="Complex"===i,f=d?u(0):0,m=d?u(1):p?y(1):1,g=d?u(1):1,w=d?u(10):2,S=a(w,w);s&&(h=Array(n).fill(m));var _=!1;for(;!_;){_=!0;for(var M=0;M<n;M++){for(var E=f,A=f,T=0;T<n;T++)M!==T&&(E=t(E,l(e[T][M])),A=t(A,l(e[M][T])));if(!v(E,0)&&!v(A,0)){for(var C=g,D=E,N=o(A,w),R=a(A,w);b(D,N);)D=a(D,S),C=a(C,w);for(;x(D,R);)D=o(D,S),C=o(C,w);if(b(o(t(D,A),C),a(t(E,A),.95))){_=!1;for(var k=o(1,C),I=0;I<n;I++)M!==I&&(e[M][I]=a(e[M][I],k),e[I][M]=a(e[I][M],C));s&&(h[M]=a(h[M],k))}}}}return s?c(h):null}(e,s,0,d,m);!function(e,r,i,s,c,h){var d="BigNumber"===s,p="Complex"===s,f=d?u(0):p?y(0):0;d&&(i=u(i));for(var m=0;m<r-2;m++){for(var g=0,v=f,x=m+1;x<r;x++){var w=e[x][m];b(l(v),l(w))&&(v=w,g=x)}if(!b(l(v),i)){if(g!==m+1){var S=e[g];e[g]=e[m+1],e[m+1]=S;for(var _=0;_<r;_++){var M=e[_][g];e[_][g]=e[_][m+1],e[_][m+1]=M}if(c){var E=h[g];h[g]=h[m+1],h[m+1]=E}}for(var A=m+2;A<r;A++){var T=o(e[A][m],v);if(0!==T){for(var C=0;C<r;C++)e[A][C]=n(e[A][C],a(T,e[m+1][C]));for(var D=0;D<r;D++)e[D][m+1]=t(e[D][m+1],a(T,e[D][A]));if(c)for(var N=0;N<r;N++)h[A][N]=n(h[A][N],a(T,h[m+1][N]))}}}}}(e,s,h,d,m,w);var{values:S,C:C}=function(e,r,a,o,s){var h="BigNumber"===o,d="Complex"===o,p=h?u(1):d?y(1):1;h&&(a=u(a));var m=j_(e),g=[],v=r,x=[],w=s?c(Array(r).fill(p)):void 0,S=s?c(Array(v).fill(p)):void 0,A=0;for(;A<=100;){A+=1;for(var T=m[v-1][v-1],C=0;C<v;C++)m[C][C]=n(m[C][C],T);var{Q:D,R:N}=f(m);m=i(N,D);for(var R=0;R<v;R++)m[R][R]=t(m[R][R],T);if(s&&(S=i(S,D)),1===v||b(l(m[v-1][v-2]),a)){A=0,g.push(m[v-1][v-1]),s&&(x.unshift([[1]]),E(S,r),w=i(w,S),v>1&&(S=c(Array(v-1).fill(p)))),v-=1,m.pop();for(var k=0;k<v;k++)m[k].pop()}else if(2===v||b(l(m[v-2][v-3]),a)){A=0;var I=_(m[v-2][v-2],m[v-2][v-1],m[v-1][v-2],m[v-1][v-1]);g.push(...I),s&&(x.unshift(M(m[v-2][v-2],m[v-2][v-1],m[v-1][v-2],m[v-1][v-1],I[0],I[1],a,o)),E(S,r),w=i(w,S),v>2&&(S=c(Array(v-2).fill(p)))),v-=2,m.pop(),m.pop();for(var F=0;F<v;F++)m[F].pop(),m[F].pop()}if(0===v)break}if(g.sort(((e,t)=>+n(l(e),l(t)))),A>100){var P=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+g.join(", "));throw P.values=g,P.vectors=[],P}var O=s?i(w,function(e,t){for(var n=[],r=0;r<t;r++)n[r]=Array(t).fill(0);var i=0;for(var a of e){for(var o=a.length,s=0;s<o;s++)for(var l=0;l<o;l++)n[i+s][i+l]=a[s][l];i+=o}return n}(x,r)):void 0;return{values:g,C:O}}(e,s,h,d,m);if(m){var D=function(e,t,a,o,s,l,h){var d=p(a),f=i(d,e,a),m="BigNumber"===h,x="Complex"===h,b=m?u(0):x?y(0):0,w=m?u(1):x?y(1):1,S=[],_=[];for(var M of s){var E=A(S,M,v);-1===E?(S.push(M),_.push(1)):_[E]+=1}for(var C=[],D=S.length,N=Array(t).fill(b),R=c(Array(t).fill(w)),k=function(){var e=S[I],s=n(f,i(e,R)),u=g(s,N);for(u.shift();u.length<_[I];){var c=T(s,t,u,l,h);if(null===c)break;u.push(c)}var d=i(p(o),a);u=u.map((e=>i(d,e))),C.push(...u.map((t=>({value:e,vector:r(t)}))))},I=0;I<D;I++)k();return C}(e,s,C,w,S,h,d);return{values:S,eigenvectors:D}}return{values:S}}}function hq(e){var{config:t,addScalar:n,subtract:r,abs:i,atan:a,cos:o,sin:s,multiplyScalar:l,inv:u,bignumber:c,multiply:h,add:d}=e;function p(e,n,r){var i=n-e;return Math.abs(i)<=t.relTol?Math.PI/4:.5*Math.atan(2*r/(n-e))}function f(e,n,o){var s=r(n,e);return i(s)<=t.relTol?c(-1).acos().div(4):l(.5,a(h(2,o,u(s))))}function m(e,t,n,r){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),s=Array(i).fill(0),l=Array(i).fill(0),u=0;u<i;u++)s[u]=a*e[u][n]-o*e[u][r],l[u]=o*e[u][n]+a*e[u][r];for(var c=0;c<i;c++)e[c][n]=s[c],e[c][r]=l[c];return e}function g(e,t,i,a){for(var u=e.length,h=o(t),d=s(t),p=Array(u).fill(c(0)),f=Array(u).fill(c(0)),m=0;m<u;m++)p[m]=r(l(h,e[m][i]),l(d,e[m][a])),f[m]=n(l(d,e[m][i]),l(h,e[m][a]));for(var g=0;g<u;g++)e[g][i]=p[g],e[g][a]=f[g];return e}function v(e,t,i,a){for(var u=e.length,p=c(o(t)),f=c(s(t)),m=l(p,p),g=l(f,f),v=Array(u).fill(c(0)),y=Array(u).fill(c(0)),x=h(c(2),p,f,e[i][a]),b=n(r(l(m,e[i][i]),x),l(g,e[a][a])),w=d(l(g,e[i][i]),x,l(m,e[a][a])),S=0;S<u;S++)v[S]=r(l(p,e[i][S]),l(f,e[a][S])),y[S]=n(l(f,e[i][S]),l(p,e[a][S]));e[i][i]=b,e[a][a]=w,e[i][a]=c(0),e[a][i]=c(0);for(var _=0;_<u;_++)_!==i&&_!==a&&(e[i][_]=v[_],e[_][i]=v[_],e[a][_]=y[_],e[_][a]=y[_]);return e}function y(e,t,n,r){for(var i=e.length,a=Math.cos(t),o=Math.sin(t),s=a*a,l=o*o,u=Array(i).fill(0),c=Array(i).fill(0),h=s*e[n][n]-2*a*o*e[n][r]+l*e[r][r],d=l*e[n][n]+2*a*o*e[n][r]+s*e[r][r],p=0;p<i;p++)u[p]=a*e[n][p]-o*e[r][p],c[p]=o*e[n][p]+a*e[r][p];e[n][n]=h,e[r][r]=d,e[n][r]=0,e[r][n]=0;for(var f=0;f<i;f++)f!==n&&f!==r&&(e[n][f]=u[f],e[f][n]=u[f],e[r][f]=c[f],e[f][r]=c[f]);return e}function x(e){for(var t=e.length,n=0,r=[0,1],i=0;i<t;i++)for(var a=i+1;a<t;a++)Math.abs(n)<Math.abs(e[i][a])&&(n=Math.abs(e[i][a]),r=[i,a]);return[r,n]}function b(e){for(var t=e.length,n=0,r=[0,1],a=0;a<t;a++)for(var o=a+1;o<t;o++)i(n)<i(e[a][o])&&(n=i(e[a][o]),r=[a,o]);return[r,n]}function w(e,t,n){var r,a=e.length,o=Array(a);if(n){r=Array(a);for(var s=0;s<a;s++)r[s]=Array(a)}for(var l=0;l<a;l++){for(var u=0,c=e[0],h=0;h<e.length;h++)i(e[h])<i(c)&&(c=e[u=h]);if(o[l]=e.splice(u,1)[0],n)for(var d=0;d<a;d++)r[l][d]=t[d][u],t[d].splice(u,1)}if(!n)return{values:o};var p=r.map(((e,t)=>({value:o[t],vector:e})));return{values:o,eigenvectors:p}}return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.relTol,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;if("number"===a)return function(e,t,n){var r,i,a=e.length,o=Math.abs(t/a);if(n){i=new Array(a);for(var s=0;s<a;s++)i[s]=Array(a).fill(0),i[s][s]=1}var l=x(e);for(;Math.abs(l[1])>=Math.abs(o);){var u=l[0][0],c=l[0][1];e=y(e,r=p(e[u][u],e[c][c],e[u][c]),u,c),n&&(i=m(i,r,u,c)),l=x(e)}for(var h=Array(a).fill(0),d=0;d<a;d++)h[d]=e[d][d];return w(j_(h),i,n)}(e,r,o);if("BigNumber"===a)return function(e,t,n){var r,a,o=e.length,s=i(t/o);if(n){a=new Array(o);for(var l=0;l<o;l++)a[l]=Array(o).fill(0),a[l][l]=1}var u=b(e);for(;i(u[1])>=i(s);){var c=u[0][0],h=u[0][1];e=v(e,r=f(e[c][c],e[h][h],e[c][h]),c,h),n&&(a=g(a,r,c,h)),u=b(e)}for(var d=Array(o).fill(0),p=0;p<o;p++)d[p]=e[p][p];return w(j_(d),a,n)}(e,r,o);throw TypeError("Unsupported data type: "+a)}}var dq=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],pq=$M("eigs",dq,(e=>{var{config:t,typed:n,matrix:r,addScalar:i,subtract:a,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:h,divideScalar:d,inv:p,bignumber:f,multiply:m,add:g,larger:v,column:y,flatten:x,number:b,complex:w,sqrt:S,diag:_,size:M,reshape:E,qr:A,usolve:T,usolveAll:C,im:D,re:N,smaller:R,matrixFromColumns:k,dot:I}=e,F=hq({config:t,addScalar:i,subtract:a,column:y,flatten:x,equal:o,abs:s,atan:l,cos:u,sin:c,multiplyScalar:h,inv:p,bignumber:f,complex:w,multiply:m,add:g}),P=cq({config:t,addScalar:i,subtract:a,multiply:m,multiplyScalar:h,flatten:x,divideScalar:d,sqrt:S,abs:s,bignumber:f,diag:_,size:M,reshape:E,qr:A,inv:p,usolve:T,usolveAll:C,equal:o,complex:w,larger:v,smaller:R,matrixFromColumns:k,dot:I});return n("eigs",{Array:function(e){return O(r(e))},"Array, number|BigNumber":function(e,t){return O(r(e),{precision:t})},"Array, Object":(e,t)=>O(r(e),t),Matrix:function(e){return O(e,{matricize:!0})},"Matrix, number|BigNumber":function(e,t){return O(e,{precision:t,matricize:!0})},"Matrix, Object":function(e,t){var n={matricize:!0};return Gw(n,t),O(e,n)}});function O(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!("eigenvectors"in i)||i.eigenvectors,l=function(e,t,n){var r=e.toArray(),i=e.size();if(2!==i.length||i[0]!==i[1])throw new RangeError("Matrix must be square (size: ".concat(RE(i),")"));var o=i[0];if(function(e,t,n){for(var r=0;r<t;r++)for(var i=0;i<t;i++)if(v(f(s(D(e[r][i]))),n))return!1;return!0}(r,o,t)&&(function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)e[n][r]=N(e[n][r])}(r,o),function(e,t,n){for(var r=0;r<t;r++)for(var i=r;i<t;i++)if(v(f(s(a(e[r][i],e[i][r]))),n))return!1;return!0}(r,o,t))){var l=B(e,r,o);return F(r,o,t,l,n)}var u=B(e,r,o);return P(r,o,t,u,n)}(e,null!==(n=i.precision)&&void 0!==n?n:t.relTol,o);return i.matricize&&(l.values=r(l.values),o&&(l.eigenvectors=l.eigenvectors.map((e=>{var{value:t,vector:n}=e;return{value:t,vector:r(n)}})))),o&&Object.defineProperty(l,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),l}function B(e,t,n){var r=e.datatype();if("number"===r||"BigNumber"===r||"Complex"===r)return r;for(var i=!1,a=!1,o=!1,s=0;s<n;s++)for(var l=0;l<n;l++){var u=t[s][l];if(aM(u)||uM(u))i=!0;else if(oM(u))a=!0;else{if(!lM(u))throw TypeError("Unsupported type in Matrix: "+XM(u));o=!0}}if(a&&o&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),o){for(var c=0;c<n;c++)for(var h=0;h<n;h++)t[c][h]=w(t[c][h]);return"Complex"}if(a){for(var d=0;d<n;d++)for(var p=0;p<n;p++)t[d][p]=f(t[d][p]);return"BigNumber"}if(i){for(var m=0;m<n;m++)for(var g=0;g<n;g++)t[m][g]=b(t[m][g]);return"number"}throw TypeError("Matrix contains unsupported types only.")}})),fq="kldivergence",mq=["typed","matrix","divide","sum","multiply","map","dotDivide","log","isNumeric"],gq=$M(fq,mq,(e=>{var{typed:t,matrix:n,divide:r,sum:i,multiply:a,map:o,dotDivide:s,log:l,isNumeric:u}=e;return t(fq,{"Array, Array":function(e,t){return c(n(e),n(t))},"Matrix, Array":function(e,t){return c(e,n(t))},"Array, Matrix":function(e,t){return c(n(e),t)},"Matrix, Matrix":function(e,t){return c(e,t)}});function c(e,t){var n=t.size().length,c=e.size().length;if(n>1)throw new Error("first object must be one dimensional");if(c>1)throw new Error("second object must be one dimensional");if(n!==c)throw new Error("Length of two vectors must be equal");if(0===i(e))throw new Error("Sum of elements in first object must be non zero");if(0===i(t))throw new Error("Sum of elements in second object must be non zero");var h=r(e,i(e)),d=r(t,i(t)),p=i(a(h,o(s(h,d),(e=>l(e)))));return u(p)?p:Number.NaN}})),vq="median",yq=["typed","add","divide","compare","partitionSelect"],xq=$M(vq,yq,(e=>{var{typed:t,add:n,divide:r,compare:i,partitionSelect:a}=e;function o(e){try{var t=(e=nA(e.valueOf())).length;if(0===t)throw new Error("Cannot calculate median of an empty array");if(t%2===0){for(var n=t/2-1,r=a(e,n+1),o=e[n],u=0;u<n;++u)i(e[u],o)>0&&(o=e[u]);return l(o,r)}var c=a(e,(t-1)/2);return s(c)}catch(h){throw XC(h,"median")}}var s=t({"number | BigNumber | Complex | Unit":function(e){return e}}),l=t({"number | BigNumber | Complex | Unit, number | BigNumber | Complex | Unit":function(e,t){return r(n(e,t),2)}});return t(vq,{"Array | Matrix":o,"Array | Matrix, number | BigNumber":function(e,t){throw new Error("median(A, dim) is not yet supported")},"...":function(e){if(cT(e))throw new TypeError("Scalar values expected in function median");return o(e)}})})),bq="corr",wq=["typed","matrix","mean","sqrt","sum","add","subtract","multiply","pow","divide"],Sq=$M(bq,wq,(e=>{var{typed:t,matrix:n,sqrt:r,sum:i,add:a,subtract:o,multiply:s,pow:l,divide:u}=e;return t(bq,{"Array, Array":function(e,t){return c(e,t)},"Matrix, Matrix":function(e,t){var r=c(e.toArray(),t.toArray());return Array.isArray(r)?n(r):r}});function c(e,t){var n=[];if(Array.isArray(e[0])&&Array.isArray(t[0])){if(e.length!==t.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same length.");for(var r=0;r<e.length;r++){if(e[r].length!==t[r].length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");n.push(h(e[r],t[r]))}return n}if(e.length!==t.length)throw new SyntaxError("Dimension mismatch. Array A and B must have the same number of elements.");return h(e,t)}function h(e,t){var n=e.length,c=i(e),h=i(t),d=e.reduce(((e,n,r)=>a(e,s(n,t[r]))),0),p=i(e.map((e=>l(e,2)))),f=i(t.map((e=>l(e,2)))),m=o(s(n,d),s(c,h)),g=r(s(o(s(n,p),l(c,2)),o(s(n,f),l(h,2))));return u(m,g)}})),_q="freqz",Mq=["typed","add","multiply","Complex","divide","matrix"],Eq=$M(_q,Mq,(e=>{var{typed:t,add:n,multiply:r,Complex:i,divide:a,matrix:o}=e;return t(_q,{"Array, Array":function(e,t){return s(e,t,l(512))},"Array, Array, Array":function(e,t,n){return s(e,t,n)},"Array, Array, number":function(e,t,n){if(n<0)throw new Error("w must be a positive number");return s(e,t,l(n))},"Matrix, Matrix":function(e,t){var n=l(512),{w:r,h:i}=s(e.valueOf(),t.valueOf(),n);return{w:o(r),h:o(i)}},"Matrix, Matrix, Matrix":function(e,t,n){var{h:r}=s(e.valueOf(),t.valueOf(),n.valueOf());return{h:o(r),w:o(n)}},"Matrix, Matrix, number":function(e,t,n){if(n<0)throw new Error("w must be a positive number");var r=l(n),{h:i}=s(e.valueOf(),t.valueOf(),r);return{h:o(i),w:o(r)}}});function s(e,t,o){for(var s=[],l=[],u=0;u<o.length;u++){for(var c=i(0,0),h=i(0,0),d=0;d<e.length;d++)c=n(c,r(e[d],i(Math.cos(-d*o[u]),Math.sin(-d*o[u]))));for(var p=0;p<t.length;p++)h=n(h,r(t[p],i(Math.cos(-p*o[u]),Math.sin(-p*o[u]))));s.push(c),l.push(h)}for(var f=[],m=0;m<s.length;m++)f.push(a(s[m],l[m]));return{h:f,w:o}}function l(e){for(var t=[],n=0;n<e;n++)t.push(n/e*Math.PI);return t}})),Aq=["typed","abs","map","median","subtract"],Tq=$M("mad",Aq,(e=>{var{typed:t,abs:n,map:r,median:i,subtract:a}=e;return t("mad",{"Array | Matrix":o,"...":function(e){return o(e)}});function o(e){if(0===(e=nA(e.valueOf())).length)throw new Error("Cannot calculate median absolute deviation (mad) of an empty array");try{var t=i(e);return i(r(e,(function(e){return n(a(e,t))})))}catch(o){throw o instanceof TypeError&&o.message.includes("median")?new TypeError(o.message.replace("median","mad")):XC(o,"mad")}}})),Cq="zeta",Dq=["typed","config","multiply","pow","divide","factorial","equal","smallerEq","isNegative","gamma","sin","subtract","add","?Complex","?BigNumber","pi"],Nq=$M(Cq,Dq,(e=>{var{typed:t,config:n,multiply:r,pow:i,divide:a,factorial:o,equal:s,smallerEq:l,isNegative:u,gamma:c,sin:h,subtract:d,add:p,Complex:f,BigNumber:m,pi:g}=e;return t(Cq,{number:e=>v(e,(e=>e),(()=>20)),BigNumber:e=>v(e,(e=>new m(e)),(()=>Math.abs(Math.log10(n.relTol)))),Complex:function(e){if(0===e.re&&0===e.im)return new f(-.5);if(1===e.re)return new f(NaN,NaN);if(e.re===1/0&&0===e.im)return new f(1);if(e.im===1/0||e.re===-1/0)return new f(NaN,NaN);return y(e,(e=>e),(e=>Math.round(19.5+.9*Math.abs(e.im))),(e=>e.re))}});function v(e,t,n){return s(e,0)?t(-.5):s(e,1)?t(NaN):isFinite(e)?y(e,t,n,(e=>e)):u(e)?t(NaN):t(1)}function y(e,t,n,o){var s=n(e);if(o(e)>-(s-1)/2)return function(e,t,n){for(var o=a(1,r(x(n(0),t),d(1,i(2,d(1,e))))),s=n(0),u=n(1);l(u,t);u=p(u,1))s=p(s,a(r((-1)**(u-1),x(u,t)),i(u,e)));return r(o,s)}(e,t(s),t);var u=r(i(2,e),i(t(g),d(e,1)));return u=r(u,h(r(a(t(g),2),e))),u=r(u,c(d(1,e))),r(u,y(d(1,e),t,n,o))}function x(e,t){for(var n=e,s=e;l(s,t);s=p(s,1)){var u=a(r(o(p(t,d(s,1))),i(4,s)),r(o(d(t,s)),o(r(2,s))));n=p(n,u)}return r(t,n)}})),Rq="norm",kq=["typed","abs","add","pow","conj","sqrt","multiply","equalScalar","larger","smaller","matrix","ctranspose","eigs"],Iq=$M(Rq,kq,(e=>{var{typed:t,abs:n,add:r,pow:i,conj:a,sqrt:o,multiply:s,equalScalar:l,larger:u,smaller:c,matrix:h,ctranspose:d,eigs:p}=e;return t(Rq,{number:Math.abs,Complex:function(e){return e.abs()},BigNumber:function(e){return e.abs()},boolean:function(e){return Math.abs(e)},Array:function(e){return g(h(e),2)},Matrix:function(e){return g(e,2)},"Array, number | BigNumber | string":function(e,t){return g(h(e),t)},"Matrix, number | BigNumber | string":function(e,t){return g(e,t)}});function f(e,t){if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=0;return e.forEach((function(e){var r=n(e);u(r,t)&&(t=r)}),!0),t}(e);if(t===Number.NEGATIVE_INFINITY||"-inf"===t)return function(e){var t;return e.forEach((function(e){var r=n(e);t&&!c(r,t)||(t=r)}),!0),t||0}(e);if("fro"===t)return g(e,2);if("number"===typeof t&&!isNaN(t)){if(!l(t,0)){var a=0;return e.forEach((function(e){a=r(i(n(e),t),a)}),!0),i(a,1/t)}return Number.POSITIVE_INFINITY}throw new Error("Unsupported parameter value")}function m(e,t){if(1===t)return function(e){var t=[],i=0;return e.forEach((function(e,a){var o=a[1],s=r(t[o]||0,n(e));u(s,i)&&(i=s),t[o]=s}),!0),i}(e);if(t===Number.POSITIVE_INFINITY||"inf"===t)return function(e){var t=[],i=0;return e.forEach((function(e,a){var o=a[0],s=r(t[o]||0,n(e));u(s,i)&&(i=s),t[o]=s}),!0),i}(e);if("fro"===t)return function(e){var t=0;return e.forEach((function(e,n){t=r(t,s(e,a(e)))})),n(o(t))}(e);if(2===t)return function(e){var t=e.size();if(t[0]!==t[1])throw new RangeError("Invalid matrix dimensions");var r=d(e),i=s(r,e),a=p(i).values.toArray(),l=a[a.length-1];return n(o(l))}(e);throw new Error("Unsupported parameter value "+t)}function g(e,t){var n=e.size();if(1===n.length)return f(e,t);if(2===n.length){if(n[0]&&n[1])return m(e,t);throw new RangeError("Invalid matrix dimensions")}}})),Fq="rotationMatrix",Pq=["typed","config","multiplyScalar","addScalar","unaryMinus","norm","matrix","BigNumber","DenseMatrix","SparseMatrix","cos","sin"],Oq=$M(Fq,Pq,(e=>{var{typed:t,config:n,multiplyScalar:r,addScalar:i,unaryMinus:a,norm:o,BigNumber:s,matrix:l,DenseMatrix:u,SparseMatrix:c,cos:h,sin:d}=e;return t(Fq,{"":function(){return"Matrix"===n.matrix?l([]):[]},string:function(e){return l(e)},"number | BigNumber | Complex | Unit":function(e){return p(e,"Matrix"===n.matrix?"dense":void 0)},"number | BigNumber | Complex | Unit, string":function(e,t){return p(e,t)},"number | BigNumber | Complex | Unit, Array":function(e,t){var n=l(t);return f(n),v(e,n,void 0)},"number | BigNumber | Complex | Unit, Matrix":function(e,t){f(t);var r=t.storage()||("Matrix"===n.matrix?"dense":void 0);return v(e,t,r)},"number | BigNumber | Complex | Unit, Array, string":function(e,t,n){var r=l(t);return f(r),v(e,r,n)},"number | BigNumber | Complex | Unit, Matrix, string":function(e,t,n){return f(t),v(e,t,n)}});function p(e,t){var n=oM(e)?new s(-1):-1,i=h(e),a=d(e);return g([[i,r(n,a)],[a,i]],t)}function f(e){var t=e.size();if(t.length<1||3!==t[0])throw new RangeError("Vector must be of dimensions 1x3")}function m(e){return e.reduce(((e,t)=>r(e,t)))}function g(e,t){if(t){if("sparse"===t)return new c(e);if("dense"===t)return new u(e);throw new TypeError('Unknown matrix type "'.concat(t,'"'))}return e}function v(e,t,n){var r=o(t);if(0===r)throw new RangeError("Rotation around zero vector");var l=oM(e)?s:null,u=l?new l(1):1,c=l?new l(-1):-1,p=l?new l(t.get([0])/r):t.get([0])/r,f=l?new l(t.get([1])/r):t.get([1])/r,v=l?new l(t.get([2])/r):t.get([2])/r,y=h(e),x=i(u,a(y)),b=d(e);return g([[i(y,m([p,p,x])),i(m([p,f,x]),m([c,v,b])),i(m([p,v,x]),m([f,b]))],[i(m([p,f,x]),m([v,b])),i(y,m([f,f,x])),i(m([f,v,x]),m([c,p,b]))],[i(m([p,v,x]),m([c,f,b])),i(m([f,v,x]),m([p,b])),i(y,m([v,v,x]))]],n)}})),Bq="schur",Lq=["typed","matrix","identity","multiply","qr","norm","subtract"],zq=$M(Bq,Lq,(e=>{var{typed:t,matrix:n,identity:r,multiply:i,qr:a,norm:o,subtract:s}=e;return t(Bq,{Array:function(e){var t=l(n(e));return{U:t.U.valueOf(),T:t.T.valueOf()}},Matrix:function(e){return l(e)}});function l(e){var t,n=e.size()[0],l=e,u=r(n),c=0;do{t=l;var h=a(l),d=h.Q,p=h.R;if(l=i(p,d),u=i(u,d),c++>100)break}while(o(s(l,t))>1e-4);return{U:u,T:l}}})),Uq="rotate",Hq=["typed","multiply","rotationMatrix"],qq=$M(Uq,Hq,(e=>{var{typed:t,multiply:n,rotationMatrix:r}=e;return t(Uq,{"Array , number | BigNumber | Complex | Unit":function(e,t){return i(e,2),n(r(t),e).toArray()},"Matrix , number | BigNumber | Complex | Unit":function(e,t){return i(e,2),n(r(t),e)},"Array, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,a){return i(e,3),n(r(t,a),e)},"Matrix, number | BigNumber | Complex | Unit, Array | Matrix":function(e,t,a){return i(e,3),n(r(t,a),e)}});function i(e,t){var n=Array.isArray(e)?HE(e):e.size();if(n.length>2)throw new RangeError("Vector must be of dimensions 1x".concat(t));if(2===n.length&&1!==n[1])throw new RangeError("Vector must be of dimensions 1x".concat(t));if(n[0]!==t)throw new RangeError("Vector must be of dimensions 1x".concat(t))}})),Vq="sylvester",jq=["typed","schur","matrixFromColumns","matrix","multiply","range","concat","transpose","index","subset","add","subtract","identity","lusolve","abs"],Gq=$M(Vq,jq,(e=>{var{typed:t,schur:n,matrixFromColumns:r,matrix:i,multiply:a,range:o,concat:s,transpose:l,index:u,subset:c,add:h,subtract:d,identity:p,lusolve:f,abs:m}=e;return t(Vq,{"Matrix, Matrix, Matrix":g,"Array, Matrix, Matrix":function(e,t,n){return g(i(e),t,n)},"Array, Array, Matrix":function(e,t,n){return g(i(e),i(t),n)},"Array, Matrix, Array":function(e,t,n){return g(i(e),t,i(n))},"Matrix, Array, Matrix":function(e,t,n){return g(e,i(t),n)},"Matrix, Array, Array":function(e,t,n){return g(e,i(t),i(n))},"Matrix, Matrix, Array":function(e,t,n){return g(e,t,i(n))},"Array, Array, Array":function(e,t,n){return g(i(e),i(t),i(n)).toArray()}});function g(e,t,g){for(var v=t.size()[0],y=e.size()[0],x=n(e),b=x.T,w=x.U,S=n(a(-1,t)),_=S.T,M=S.U,E=a(a(l(w),g),M),A=o(0,y),T=[],C=(e,t)=>s(e,t,1),D=(e,t)=>s(e,t,0),N=0;N<v;N++)if(N<v-1&&m(c(_,u(N+1,N)))>1e-5){for(var R=D(c(E,u(A,N)),c(E,u(A,N+1))),k=0;k<N;k++)R=h(R,D(a(T[k],c(_,u(k,N))),a(T[k],c(_,u(k,N+1)))));var I=a(p(y),a(-1,c(_,u(N,N)))),F=a(p(y),a(-1,c(_,u(N+1,N)))),P=a(p(y),a(-1,c(_,u(N,N+1)))),O=a(p(y),a(-1,c(_,u(N+1,N+1)))),B=D(C(h(b,I),F),C(P,h(b,O))),L=f(B,R);T[N]=L.subset(u(o(0,y),0)),T[N+1]=L.subset(u(o(y,2*y),0)),N++}else{for(var z=c(E,u(A,N)),U=0;U<N;U++)z=h(z,a(T[U],c(_,u(U,N))));var H=c(_,u(N,N)),q=d(b,a(H,p(y)));T[N]=f(q,z)}var V=i(r(...T));return a(w,a(V,l(M)))}})),Wq="lyap",Xq=["typed","matrix","sylvester","multiply","transpose"],Yq=$M(Wq,Xq,(e=>{var{typed:t,matrix:n,sylvester:r,multiply:i,transpose:a}=e;return t(Wq,{"Matrix, Matrix":function(e,t){return r(e,a(e),i(-1,t))},"Array, Matrix":function(e,t){return r(n(e),a(n(e)),i(-1,t))},"Matrix, Array":function(e,t){return r(e,a(n(e)),n(i(-1,t)))},"Array, Array":function(e,t){return r(n(e),a(n(e)),n(i(-1,t))).toArray()}})})),$q=KR({config:V_}),Zq=sk({}),Jq=Ek({BigNumber:$q,config:V_}),Kq=xk({}),Qq=tI({BigNumber:$q,config:V_}),eV=JI({}),tV=Ik({Complex:Zq}),nV=wk({BigNumber:$q,config:V_}),rV=Ck({BigNumber:$q,config:V_}),iV=Nk({BigNumber:$q,config:V_}),aV=KI({}),oV=Sk({BigNumber:$q,config:V_}),sV=bk({}),lV=Ak({BigNumber:$q,config:V_}),uV=QI({}),cV=eF({}),hV=Rk({BigNumber:$q,config:V_}),dV=bI({BigNumber:$q,config:V_}),pV=Mk({BigNumber:$q,config:V_}),fV=yk({}),mV=Fk({}),gV=tF({Matrix:aV}),vV=cI({BigNumber:$q,config:V_}),yV=Tk({BigNumber:$q,config:V_}),xV=_k({BigNumber:$q,config:V_}),bV=nF({}),wV=kk({BigNumber:$q,config:V_}),SV=iF({BigNumber:$q,Complex:Zq,DenseMatrix:gV,Fraction:eV}),_V=uI({BigNumber:$q,config:V_}),MV=DF({typed:SV}),EV=RF({Complex:Zq,config:V_,typed:SV}),AV=ZF({BigNumber:$q,typed:SV}),TV=KF({BigNumber:$q,Complex:Zq,config:V_,typed:SV}),CV=eP({typed:SV}),DV=tP({typed:SV}),NV=rP({BigNumber:$q,Complex:Zq,config:V_,typed:SV}),RV=iP({typed:SV}),kV=aP({typed:SV}),IV=sP({Complex:Zq,config:V_,typed:SV}),FV=lP({typed:SV}),PV=cP({typed:SV}),OV=dP({typed:SV}),BV=fP({typed:SV}),LV=yP({typed:SV}),zV=bP({Complex:Zq,typed:SV}),UV=SP({typed:SV}),HV=MP({typed:SV}),qV=EP({BigNumber:$q,typed:SV}),VV=AP({BigNumber:$q,typed:SV}),jV=CP({typed:SV}),GV=kP({config:V_,typed:SV}),WV=IP({typed:SV}),XV=zP({typed:SV}),YV=HP({Complex:Zq,typed:SV}),$V=sC({typed:SV}),ZV=VP({typed:SV}),JV=mC({typed:SV}),KV=GP({typed:SV}),QV=XP({typed:SV}),ej=YP({format:KV,typed:SV}),tj=$P({typed:SV}),nj=JP({typed:SV}),rj=rO({config:V_,typed:SV}),ij=aO({config:V_,typed:SV}),aj=sO({equalScalar:GV,typed:SV}),oj=Dk({BigNumber:$q,config:V_}),sj=mO({Complex:Zq,typed:SV}),lj=vO({Complex:Zq,config:V_,typed:SV}),uj=xO({Complex:Zq,config:V_,typed:SV}),cj=xC({typed:SV}),hj=bO({typed:SV}),dj=wO({typed:SV}),pj=SO({typed:SV}),fj=_O({format:KV,typed:SV}),mj=CO({config:V_,typed:SV}),gj=QC({typed:SV}),vj=RO({config:V_,typed:SV}),yj=kO({typed:SV}),xj=IO({BigNumber:$q,typed:SV}),bj=PO({BigNumber:$q,Fraction:eV,complex:zV,typed:SV}),wj=OO({typed:SV}),Sj=BO({Matrix:aV,equalScalar:GV,typed:SV}),_j=zO({typed:SV}),Mj=HO({typed:SV}),Ej=VO({typed:SV}),Aj=GO({typed:SV}),Tj=WO({typed:SV}),Cj=YO({typed:SV}),Dj=ZO({Complex:Zq,config:V_,typed:SV}),Nj=KO({BigNumber:$q,typed:SV}),Rj=SC({isInteger:nj,typed:SV}),kj=eB({BigNumber:$q,Complex:Zq,config:V_,typed:SV}),Ij=tB({BigNumber:$q,typed:SV}),Fj=rB({typed:SV}),Pj=oB({typed:SV}),Oj=lB({BigNumber:$q,typed:SV}),Bj=cB({typed:SV}),Lj=dB({typed:SV}),zj=fB({config:V_,typed:SV}),Uj=gB({BigNumber:$q,typed:SV}),Hj=yB({typed:SV}),qj=bB({SparseMatrix:Sj,typed:SV}),Vj=wB({Complex:Zq,config:V_,typed:SV}),jj=_B({typed:SV}),Gj=MB({typed:SV}),Wj=AB({typed:SV}),Xj=CB({BigNumber:$q,Complex:Zq,config:V_,typed:SV}),Yj=DB({format:KV,typed:SV}),$j=RB({BigNumber:$q,typed:SV}),Zj=kB({Fraction:eV,typed:SV}),Jj=FB({typed:SV}),Kj=OB({DenseMatrix:gV,Matrix:aV,SparseMatrix:Sj,typed:SV}),Qj=LB({isZero:aj,matrix:Kj,typed:SV}),eG=UB({isNaN:Bj,isNumeric:Jj,typed:SV}),tG=HB({bignumber:Ij,fraction:Zj,number:pj}),nG=VB({config:V_,multiplyScalar:hj,numeric:tG,typed:SV}),rG=GB({isInteger:nj,matrix:Kj,typed:SV}),iG=XB({matrix:Kj,config:V_,typed:SV}),aG=$B({matrix:Kj,typed:SV}),oG=JB({BigNumber:$q,config:V_,matrix:Kj,typed:SV}),sG=QB({BigNumber:$q,config:V_,matrix:Kj,typed:SV}),lG=tL({Complex:Zq,config:V_,typed:SV}),uG=rL({BigNumber:$q,Complex:Zq,Fraction:eV,config:V_,isNegative:rj,matrix:Kj,typed:SV,unaryMinus:Wj}),cG=GC({isInteger:nj,matrix:Kj,typed:SV}),hG=aL({prod:nG,size:iG,typed:SV}),dG=sL({conj:UV,transpose:aG,typed:SV}),pG=uL({DenseMatrix:gV,SparseMatrix:Sj,matrix:Kj,typed:SV}),fG=hL({numeric:tG,typed:SV}),mG=fL({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,divideScalar:fG,equalScalar:GV,matrix:Kj,typed:SV}),gG=gL({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),vG=xL({isNumeric:Jj,typed:SV}),yG=wL({BigNumber:$q,DenseMatrix:gV,SparseMatrix:Sj,config:V_,matrix:Kj,typed:SV}),xG=_L({matrix:Kj,multiplyScalar:hj,typed:SV}),bG=EL({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,config:V_,matrix:Kj,typed:SV}),wG=NL({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV,zeros:sG}),SG=IL({DenseMatrix:gV,divideScalar:fG,equalScalar:GV,matrix:Kj,multiplyScalar:hj,subtractScalar:Aj,typed:SV}),_G=PL({flatten:ZV,matrix:Kj,size:iG,typed:SV}),MG=BL({BigNumber:$q,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),EG=LL({BigNumber:$q,config:V_,matrix:Kj,typed:SV}),AG=zL({addScalar:CV,complex:zV,conj:UV,divideScalar:fG,equal:gG,identity:yG,isZero:aj,matrix:Kj,multiplyScalar:hj,sign:bj,sqrt:Vj,subtractScalar:Aj,typed:SV,unaryMinus:Wj,zeros:sG}),TG=HL({config:V_,matrix:Kj}),CG=VL({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV,zeros:sG}),DG=WL({BigNumber:$q,DenseMatrix:gV,config:V_,equalScalar:GV,matrix:Kj,typed:SV,zeros:sG}),NG=YL({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,config:V_,matrix:Kj,typed:SV}),RG=JL({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,subtractScalar:Aj,typed:SV,unaryMinus:Wj}),kG=KL({concat:cG,matrix:Kj,typed:SV}),IG=ez({config:V_,numeric:tG,typed:SV}),FG=nz({DenseMatrix:gV,divideScalar:fG,equalScalar:GV,matrix:Kj,multiplyScalar:hj,subtractScalar:Aj,typed:SV}),PG=rz({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,matrix:Kj,typed:SV}),OG=iz({DenseMatrix:gV,SparseMatrix:Sj,addScalar:CV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),BG=sz({BigNumber:$q,DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),LG=bD({concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),zG=HD({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),UG=uz({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,matrix:Kj,typed:SV}),HG=hz({addScalar:CV,combinations:LV,divideScalar:fG,isInteger:nj,isNegative:rj,multiplyScalar:hj,typed:SV}),qG=pz({BigNumber:$q,DenseMatrix:gV,Fraction:eV,concat:cG,config:V_,equalScalar:GV,matrix:Kj,typed:SV}),VG=vz({concat:cG,matrix:Kj,typed:SV}),jG=jD({add:OG,typed:SV,unaryPlus:IG}),GG=xz({equal:gG,typed:SV}),WG=_D({matrix:Kj,number:pj,subtract:RG,typed:SV}),XG=wz({abs:MV,addScalar:CV,deepEqual:GG,divideScalar:fG,multiplyScalar:hj,sqrt:Vj,subtractScalar:Aj,typed:SV}),YG=Sz({addScalar:CV,conj:UV,multiplyScalar:hj,size:iG,typed:SV}),$G=Mz({compareText:VG,isZero:aj,typed:SV}),ZG=Cz({DenseMatrix:gV,config:V_,equalScalar:GV,matrix:Kj,round:DG,typed:SV,zeros:sG}),JG=Fz({BigNumber:$q,DenseMatrix:gV,concat:cG,config:V_,equalScalar:GV,matrix:Kj,round:DG,typed:SV,zeros:sG}),KG=Oz({abs:MV,addScalar:CV,divideScalar:fG,isPositive:ij,multiplyScalar:hj,smaller:NG,sqrt:Vj,typed:SV}),QG=Bz({DenseMatrix:gV,smaller:NG}),eW=Lz({ImmutableDenseMatrix:QG,getMatrixDataType:QV}),tW=Hz({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,config:V_,matrix:Kj,typed:SV}),nW=Vz({Complex:Zq,config:V_,divideScalar:fG,typeOf:Cj,typed:SV}),rW=Gz({DenseMatrix:gV,divideScalar:fG,equalScalar:GV,matrix:Kj,multiplyScalar:hj,subtractScalar:Aj,typed:SV}),iW=Xz({flatten:ZV,matrix:Kj,size:iG,typed:SV}),aW=AD({config:V_,numeric:tG,smaller:NG,typed:SV}),oW=Dz({DenseMatrix:gV,concat:cG,config:V_,equalScalar:GV,matrix:Kj,round:DG,typed:SV,zeros:sG}),sW=$z({addScalar:CV,dot:YG,equalScalar:GV,matrix:Kj,multiplyScalar:hj,typed:SV}),lW=Jz({Complex:Zq,config:V_,divideScalar:fG,typed:SV}),uW=BC({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),cW=Qz({compare:qG,isNaN:Bj,isNumeric:Jj,typed:SV}),hW=tU({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV,zeros:sG}),dW=fU({SparseMatrix:Sj,abs:MV,add:OG,divideScalar:fG,larger:tW,largerEq:bG,multiply:sW,subtract:RG,transpose:aG,typed:SV}),pW=DD({add:OG,matrix:Kj,typed:SV,zeros:sG}),fW=YD({add:OG,config:V_,numeric:tG,typed:SV}),mW=mU({add:OG,matrix:Kj,typed:SV}),gW=vU({DenseMatrix:gV,divideScalar:fG,equalScalar:GV,matrix:Kj,multiplyScalar:hj,subtractScalar:Aj,typed:SV}),vW=xU({Complex:Zq,add:OG,multiply:sW,number:pj,typed:SV}),yW=_U({DenseMatrix:gV,config:V_,equalScalar:GV,matrix:Kj,round:DG,typed:SV,zeros:sG}),xW=AU({compare:qG,typed:SV}),bW=CU({addScalar:CV,combinations:LV,isInteger:nj,isNegative:rj,isPositive:ij,larger:tW,typed:SV}),wW=NU({matrix:Kj,multiply:sW,subtract:RG,typed:SV}),SW=RU({divideScalar:fG,isZero:aj,matrix:Kj,multiply:sW,subtractScalar:Aj,typed:SV,unaryMinus:Wj}),_W=IU({concat:cG,equalScalar:GV,matrix:Kj,multiplyScalar:hj,typed:SV}),MW=FU({larger:tW,smaller:NG}),EW=LU({Complex:Zq,DenseMatrix:gV,ceil:yW,equalScalar:GV,floor:ZG,matrix:Kj,typed:SV,zeros:sG}),AW=UU({Index:eW,typed:SV}),TW=HU({abs:MV,add:OG,addScalar:CV,config:V_,divideScalar:fG,equalScalar:GV,flatten:ZV,isNumeric:Jj,isZero:aj,matrix:Kj,multiply:sW,multiplyScalar:hj,smaller:NG,subtract:RG,typed:SV}),CW=VU({BigNumber:$q,add:OG,config:V_,equal:gG,isInteger:nj,mod:oW,smaller:NG,typed:SV,xgcd:oG}),DW=jU({concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),NW=WU({Complex:Zq,config:V_,divideScalar:fG,log:nW,typed:SV}),RW=YC({config:V_,larger:tW,numeric:tG,typed:SV}),kW=YU({DenseMatrix:gV,Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),IW=ZU({DenseMatrix:gV,Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),FW=KU({Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),PW=eH({Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),OW=nH({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,config:V_,matrix:Kj,typed:SV}),BW=aH({compare:qG,compareNatural:xW,matrix:Kj,typed:SV}),LW=sH({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,config:V_,equalScalar:GV,matrix:Kj,typed:SV}),zW=qC({concat:cG,equalScalar:GV,matrix:Kj,not:dj,typed:SV,zeros:sG}),UW=JD({bignumber:Ij,matrix:Kj,add:OG,config:V_,isPositive:ij,larger:tW,largerEq:bG,smaller:NG,smallerEq:OW,typed:SV}),HW=QD({Index:eW,matrix:Kj,range:UW,typed:SV}),qW=cH({DenseMatrix:gV,Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),VW=dH({Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),jW=fH({Index:eW,concat:cG,setDifference:qW,size:iG,subset:pW,typed:SV}),GW=mH({FibonacciHeap:MW,addScalar:CV,equalScalar:GV}),WW=nN({Index:eW,matrix:Kj,range:UW,typed:SV}),XW=gH({abs:MV,addScalar:CV,det:SW,divideScalar:fG,identity:yG,matrix:Kj,multiply:sW,typed:SV,unaryMinus:Wj}),YW=vH({DenseMatrix:gV,Spa:GW,SparseMatrix:Sj,abs:MV,addScalar:CV,divideScalar:fG,equalScalar:GV,larger:tW,matrix:Kj,multiplyScalar:hj,subtractScalar:Aj,typed:SV,unaryMinus:Wj}),$W=xH({Complex:Zq,add:OG,ctranspose:dG,deepEqual:GG,divideScalar:fG,dot:YG,dotDivide:mG,equal:gG,inv:XW,matrix:Kj,multiply:sW,typed:SV}),ZW=bH({Complex:Zq,config:V_,fraction:Zj,identity:yG,inv:XW,matrix:Kj,multiply:sW,number:pj,typed:SV}),JW=SH({DenseMatrix:gV,Index:eW,compareNatural:xW,size:iG,subset:pW,typed:SV}),KW=MH({Index:eW,concat:cG,setIntersect:JW,setSymDifference:jW,size:iG,subset:pW,typed:SV}),QW=AH({abs:MV,add:OG,identity:yG,inv:XW,map:cj,max:RW,multiply:sW,size:iG,sqrt:Vj,subtract:RG,typed:SV}),eX=DH({BigNumber:$q,Complex:Zq,Fraction:eV,abs:MV,addScalar:CV,config:V_,divideScalar:fG,equal:gG,fix:EW,format:KV,isNumeric:Jj,multiplyScalar:hj,number:pj,pow:ZW,round:DG,subtractScalar:Aj}),tX=qk({BigNumber:$q,Unit:eX,config:V_}),nX=_I({BigNumber:$q,Unit:eX,config:V_}),rX=hI({BigNumber:$q,Unit:eX,config:V_}),iX=Gk({BigNumber:$q,Unit:eX,config:V_}),aX=pI({BigNumber:$q,Unit:eX,config:V_}),oX=Wk({BigNumber:$q,Unit:eX,config:V_}),sX=Vk({BigNumber:$q,Unit:eX,config:V_}),lX=iI({BigNumber:$q,Unit:eX,config:V_}),uX=RH({DenseMatrix:gV,SparseMatrix:Sj,concat:cG,equalScalar:GV,matrix:Kj,pow:ZW,typed:SV}),cX=Hk({BigNumber:$q,Unit:eX,config:V_}),hX=jk({BigNumber:$q,Unit:eX,config:V_}),dX=IH({abs:MV,add:OG,identity:yG,inv:XW,multiply:sW,typed:SV}),pX=fI({BigNumber:$q,Unit:eX,config:V_}),fX=FH({addScalar:CV,ceil:yW,conj:UV,divideScalar:fG,dotDivide:mG,exp:XV,i:tV,log2:uj,matrix:Kj,multiplyScalar:hj,pow:ZW,tau:pV,typed:SV}),mX=OH({BigNumber:$q,Complex:Zq,config:V_,multiplyScalar:hj,pow:ZW,typed:SV}),gX=Bk({BigNumber:$q,Unit:eX,config:V_}),vX=nI({BigNumber:$q,Unit:eX,config:V_}),yX=LH({conj:UV,dotDivide:mG,fft:fX,typed:SV}),xX=Zk({BigNumber:$q,Unit:eX,config:V_}),bX=gI({BigNumber:$q,Unit:eX,config:V_}),wX=Uk({BigNumber:$q,Unit:eX,config:V_}),SX=MI({BigNumber:$q,Unit:eX,config:V_}),_X=yI({BigNumber:$q,Unit:eX,config:V_}),MX=aI({BigNumber:$q,Unit:eX,config:V_}),EX=$k({BigNumber:$q,Unit:eX,config:V_}),AX=NI({BigNumber:$q,Unit:eX,config:V_}),TX=TI({BigNumber:$q,Unit:eX,config:V_}),CX=RI({BigNumber:$q,Unit:eX,config:V_}),DX=rI({BigNumber:$q,Unit:eX,config:V_}),NX=oI({BigNumber:$q,Unit:eX,config:V_}),RX=zk({BigNumber:$q,Unit:eX,config:V_}),kX=sI({BigNumber:$q,Unit:eX,config:V_}),IX=wI({BigNumber:$q,Unit:eX,config:V_}),FX=Ok({BigNumber:$q,Unit:eX,config:V_}),PX=SI({BigNumber:$q,Unit:eX,config:V_}),OX=lI({BigNumber:$q,Unit:eX,config:V_}),BX=dI({BigNumber:$q,Unit:eX,config:V_}),LX=Jk({BigNumber:$q,Unit:eX,config:V_}),zX=UH({Unit:eX,typed:SV}),UX=HH({divideScalar:fG,equalScalar:GV,inv:XW,matrix:Kj,multiply:sW,typed:SV}),HX=Qk({BigNumber:$q,Unit:eX,config:V_}),qX=VH({gamma:mX,typed:SV}),VX=mI({BigNumber:$q,Unit:eX,config:V_}),jX=AI({BigNumber:$q,Unit:eX,config:V_}),GX=Xk({BigNumber:$q,Unit:eX,config:V_}),WX=WH({DenseMatrix:gV,lsolve:SG,lup:YW,matrix:Kj,slu:dW,typed:SV,usolve:FG}),XX=Yk({BigNumber:$q,Unit:eX,config:V_}),YX=EI({BigNumber:$q,Unit:eX,config:V_}),$X=YH({add:OG,divide:UX,factorial:qX,isInteger:nj,isPositive:ij,multiply:sW,typed:SV}),ZX=ZH({factorial:qX,typed:SV}),JX=CI({BigNumber:$q,Unit:eX,config:V_}),KX=QH({add:OG,cbrt:uG,divide:UX,equalScalar:GV,im:tj,isZero:aj,multiply:sW,re:yj,sqrt:Vj,subtract:RG,typeOf:Cj,typed:SV,unaryMinus:Wj}),QX=tq({compareNatural:xW,typed:SV}),eY=rq({abs:MV,add:OG,bignumber:Ij,divide:UX,isNegative:rj,isPositive:ij,larger:tW,map:cj,matrix:Kj,max:RW,multiply:sW,smaller:NG,subtract:RG,typed:SV,unaryMinus:Wj}),tY=aq({bignumber:Ij,addScalar:CV,combinations:LV,divideScalar:fG,factorial:qX,isInteger:nj,isNegative:rj,larger:tW,multiplyScalar:hj,number:pj,pow:ZW,subtractScalar:Aj,typed:SV}),nY=sq({Unit:eX,typed:SV}),rY=uq({addScalar:CV,isInteger:nj,isNegative:rj,stirlingS2:tY,typed:SV}),iY=pq({abs:MV,add:OG,addScalar:CV,atan:kV,bignumber:Ij,column:WW,complex:zV,config:V_,cos:HV,diag:pG,divideScalar:fG,dot:YG,equal:gG,flatten:ZV,im:tj,inv:XW,larger:tW,matrix:Kj,matrixFromColumns:_G,multiply:sW,multiplyScalar:hj,number:pj,qr:AG,re:yj,reshape:rG,sin:wj,size:iG,smaller:NG,sqrt:Vj,subtract:RG,typed:SV,usolve:FG,usolveAll:gW}),aY=eI({BigNumber:$q,Unit:eX,config:V_}),oY=vI({BigNumber:$q,Unit:eX,config:V_}),sY=gq({divide:UX,dotDivide:mG,isNumeric:Jj,log:nW,map:cj,matrix:Kj,multiply:sW,sum:fW,typed:SV}),lY=aN({add:OG,divide:UX,typed:SV}),uY=xI({BigNumber:$q,Unit:eX,config:V_}),cY=Lk({BigNumber:$q,Unit:eX,config:V_}),hY=lN({bignumber:Ij,add:OG,compare:qG,divide:UX,isInteger:nj,larger:tW,multiply:sW,partitionSelect:cW,smaller:NG,smallerEq:OW,subtract:RG,typed:SV}),dY=dN({add:OG,apply:Rj,divide:UX,isNaN:Bj,multiply:sW,subtract:RG,typed:SV}),pY=Kk({BigNumber:$q,Unit:eX,config:V_}),fY=xq({add:OG,compare:qG,divide:UX,partitionSelect:cW,typed:SV}),mY=Sq({add:OG,divide:UX,matrix:Kj,mean:lY,multiply:sW,pow:ZW,sqrt:Vj,subtract:RG,sum:fW,typed:SV}),gY=Eq({Complex:Zq,add:OG,divide:UX,matrix:Kj,multiply:sW,typed:SV}),vY=Tq({abs:MV,map:cj,median:fY,subtract:RG,typed:SV}),yY=mN({map:cj,sqrt:Vj,typed:SV,variance:dY}),xY=Nq({BigNumber:$q,Complex:Zq,add:OG,config:V_,divide:UX,equal:gG,factorial:qX,gamma:mX,isNegative:rj,multiply:sW,pi:xV,pow:ZW,sin:wj,smallerEq:OW,subtract:RG,typed:SV}),bY=Iq({abs:MV,add:OG,conj:UV,ctranspose:dG,eigs:iY,equalScalar:GV,larger:tW,matrix:Kj,multiply:sW,pow:ZW,smaller:NG,sqrt:Vj,typed:SV}),wY=Oq({BigNumber:$q,DenseMatrix:gV,SparseMatrix:Sj,addScalar:CV,config:V_,cos:HV,matrix:Kj,multiplyScalar:hj,norm:bY,sin:wj,typed:SV,unaryMinus:Wj}),SY=DI({BigNumber:$q,Unit:eX,config:V_}),_Y=zq({identity:yG,matrix:Kj,multiply:sW,norm:bY,qr:AG,subtract:RG,typed:SV}),MY=qq({multiply:sW,rotationMatrix:wY,typed:SV}),EY=Gq({abs:MV,add:OG,concat:cG,identity:yG,index:AW,lusolve:WX,matrix:Kj,matrixFromColumns:_G,multiply:sW,range:UW,schur:_Y,subset:pW,subtract:RG,transpose:aG,typed:SV}),AY=Yq({matrix:Kj,multiply:sW,sylvester:EY,transpose:aG,typed:SV}),TY={},CY={},DY={},NY=JM({mathWithTransform:CY}),RY=LE({Node:NY}),kY=RA({Node:NY}),IY=IA({Node:NY}),FY=PA({Node:NY}),PY=BA({Node:NY}),OY=zA({Node:NY,ResultSet:cV}),BY=HA({Node:NY}),LY=VA({Node:NY}),zY=GA({Node:NY}),UY=WA({classes:DY}),HY=XA({math:TY,typed:SV}),qY=$A({Node:NY,typed:SV}),VY=JA({Chain:HY,typed:SV}),jY=QA({Node:NY,size:iG}),GY=rT({Node:NY,subset:pW}),WY=aT({matrix:Kj,Node:NY,subset:pW}),XY=oT({Unit:eX,Node:NY,math:TY}),YY=lT({Node:NY,SymbolNode:XY,math:TY}),$Y=vT({AccessorNode:GY,ArrayNode:PY,AssignmentNode:WY,BlockNode:OY,ConditionalNode:BY,ConstantNode:LY,FunctionAssignmentNode:qY,FunctionNode:YY,IndexNode:jY,ObjectNode:RY,OperatorNode:kY,ParenthesisNode:IY,RangeNode:zY,RelationalNode:FY,SymbolNode:XY,config:V_,numeric:tG,typed:SV}),ZY=yT({ConstantNode:LY,FunctionNode:YY,OperatorNode:kY,ParenthesisNode:IY,parse:$Y,typed:SV}),JY=ET({bignumber:Ij,fraction:Zj,AccessorNode:GY,ArrayNode:PY,ConstantNode:LY,FunctionNode:YY,IndexNode:jY,ObjectNode:RY,OperatorNode:kY,SymbolNode:XY,config:V_,mathWithTransform:CY,matrix:Kj,typed:SV}),KY=TT({parse:$Y,typed:SV}),QY=DT({AccessorNode:GY,ArrayNode:PY,ConstantNode:LY,FunctionNode:YY,IndexNode:jY,ObjectNode:RY,OperatorNode:kY,ParenthesisNode:IY,SymbolNode:XY,add:OG,divide:UX,equal:gG,isZero:aj,multiply:sW,parse:$Y,pow:ZW,subtract:RG,typed:SV}),e$=RT({parse:$Y,typed:SV}),t$=kT({evaluate:e$}),n$=IT({evaluate:e$,parse:$Y}),r$=BT({AccessorNode:GY,ArrayNode:PY,ConstantNode:LY,FunctionNode:YY,IndexNode:jY,ObjectNode:RY,OperatorNode:kY,ParenthesisNode:IY,SymbolNode:XY,equal:gG,parse:$Y,replacer:bV,resolve:ZY,simplifyConstant:JY,simplifyCore:QY,typed:SV}),i$=UT({OperatorNode:kY,parse:$Y,simplify:r$,typed:SV}),a$=VT({parse:$Y,typed:SV}),o$=WT({Parser:n$,typed:SV}),s$=$T({bignumber:Ij,fraction:Zj,AccessorNode:GY,ArrayNode:PY,ConstantNode:LY,FunctionNode:YY,IndexNode:jY,ObjectNode:RY,OperatorNode:kY,ParenthesisNode:IY,SymbolNode:XY,add:OG,config:V_,divide:UX,equal:gG,isZero:aj,mathWithTransform:CY,matrix:Kj,multiply:sW,parse:$Y,pow:ZW,simplify:r$,simplifyConstant:JY,simplifyCore:QY,subtract:RG,typed:SV}),l$=KT({ConstantNode:LY,FunctionNode:YY,OperatorNode:kY,ParenthesisNode:IY,SymbolNode:XY,config:V_,equal:gG,isZero:aj,numeric:tG,parse:$Y,simplify:r$,typed:SV}),u$=rC({Help:t$,mathWithTransform:CY,typed:SV});Gw(TY,{e:Jq,false:Kq,fineStructure:Qq,i:tV,Infinity:nV,LN10:rV,LOG10E:iV,NaN:oV,null:sV,phi:lV,SQRT1_2:hV,sackurTetrode:dV,tau:pV,true:fV,E:Jq,version:mV,efimovFactor:vV,LN2:yV,pi:xV,replacer:bV,reviver:UY,SQRT2:wV,typed:SV,PI:xV,weakMixingAngle:_V,abs:MV,acos:EV,acot:AV,acsc:TV,addScalar:CV,arg:DV,asech:NV,asinh:RV,atan:kV,atanh:IV,bigint:FV,bitNot:PV,boolean:OV,clone:BV,combinations:LV,complex:zV,conj:UV,cos:HV,cot:qV,csc:VV,cube:jV,equalScalar:GV,erf:WV,exp:XV,expm1:YV,filter:$V,flatten:ZV,forEach:JV,format:KV,getMatrixDataType:QV,hex:ej,im:tj,isInteger:nj,isNegative:rj,isPositive:ij,isZero:aj,LOG2E:oj,lgamma:sj,log10:lj,log2:uj,map:cj,multiplyScalar:hj,not:dj,number:pj,oct:fj,pickRandom:mj,print:gj,random:vj,re:yj,sec:xj,sign:bj,sin:wj,splitUnit:_j,square:Mj,string:Ej,subtractScalar:Aj,tan:Tj,typeOf:Cj,acosh:Dj,acsch:Nj,apply:Rj,asec:kj,bignumber:Ij,chain:VY,combinationsWithRep:Fj,cosh:Pj,csch:Oj,isNaN:Bj,isPrime:Lj,randomInt:zj,sech:Uj,sinh:Hj,sparse:qj,sqrt:Vj,squeeze:jj,tanh:Gj,unaryMinus:Wj,acoth:Xj,bin:Yj,coth:$j,fraction:Zj,isNumeric:Jj,matrix:Kj,matrixFromFunction:Qj,mode:eG,numeric:tG,prod:nG,reshape:rG,size:iG,transpose:aG,xgcd:oG,zeros:sG,asin:lG,cbrt:uG,concat:cG,count:hG,ctranspose:dG,diag:pG,divideScalar:fG,dotDivide:mG,equal:gG,hasNumericValue:vG,identity:yG,kron:xG,largerEq:bG,leftShift:wG,lsolve:SG,matrixFromColumns:_G,nthRoot:MG,ones:EG,qr:AG,resize:TG,rightArithShift:CG,round:DG,smaller:NG,subtract:RG,to:kG,unaryPlus:IG,usolve:FG,xor:PG,add:OG,atan2:BG,bitAnd:LG,bitOr:zG,bitXor:UG,catalan:HG,compare:qG,compareText:VG,cumsum:jG,deepEqual:GG,diff:WG,distance:XG,dot:YG,equalText:$G,floor:ZG,gcd:JG,hypot:KG,larger:tW,log:nW,lsolveAll:rW,matrixFromRows:iW,min:aW,mod:oW,multiply:sW,nthRoots:lW,or:uW,partitionSelect:cW,rightLogShift:hW,slu:dW,subset:pW,sum:fW,trace:mW,usolveAll:gW,zpk2tf:vW,ceil:yW,compareNatural:xW,composition:bW,cross:wW,det:SW,dotMultiply:_W,fix:EW,index:AW,intersect:TW,invmod:CW,lcm:DW,log1p:NW,max:RW,setCartesian:kW,setDistinct:IW,setIsSubset:FW,setPowerset:PW,smallerEq:OW,sort:BW,unequal:LW,and:zW,range:UW,row:HW,setDifference:qW,setMultiplicity:VW,setSymDifference:jW,column:WW,inv:XW,lup:YW,pinv:$W,pow:ZW,setIntersect:JW,setUnion:KW,sqrtm:QW,vacuumImpedance:tX,wienDisplacement:nX,atomicMass:rX,bohrMagneton:iX,boltzmann:aX,conductanceQuantum:oX,coulomb:sX,deuteronMass:lX,dotPow:uX,electricConstant:cX,elementaryCharge:hX,expm:dX,faraday:pX,fft:fX,gamma:mX,gravitationConstant:gX,hartreeEnergy:vX,ifft:yX,klitzing:xX,loschmidt:bX,magneticConstant:wX,molarMass:SX,molarPlanckConstant:_X,neutronMass:MX,nuclearMagneton:EX,planckCharge:AX,planckLength:TX,planckTemperature:CX,protonMass:DX,quantumOfCirculation:NX,reducedPlanckConstant:RX,rydberg:kX,secondRadiation:IX,speedOfLight:FX,stefanBoltzmann:PX,thomsonCrossSection:OX,avogadro:BX,bohrRadius:LX,createUnit:zX,divide:UX,electronMass:HX,factorial:qX,firstRadiation:VX,gravity:jX,inverseConductanceQuantum:GX,lusolve:WX,magneticFluxQuantum:XX,molarMassC12:YX,multinomial:$X,parse:$Y,permutations:ZX,planckMass:JX,polynomialRoot:KX,resolve:ZY,setSize:QX,simplifyConstant:JY,solveODE:eY,stirlingS2:tY,unit:nY,bellNumbers:rY,compile:KY,eigs:iY,fermiCoupling:aY,gasConstant:oY,kldivergence:sY,mean:lY,molarVolume:uY,planckConstant:cY,quantileSeq:hY,simplifyCore:QY,variance:dY,classicalElectronRadius:pY,evaluate:e$,median:fY,simplify:r$,symbolicEqual:i$,corr:mY,freqz:gY,leafCount:a$,mad:vY,parser:o$,rationalize:s$,std:yY,zeta:xY,derivative:l$,norm:bY,rotationMatrix:wY,help:u$,planckTime:SY,schur:_Y,rotate:MY,sylvester:EY,lyap:AY,config:V_}),Gw(CY,TY,{filter:pC({typed:SV}),forEach:vC({typed:SV}),map:bC({typed:SV}),apply:MC({isInteger:nj,typed:SV}),or:LC({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),and:VC({add:OG,concat:cG,equalScalar:GV,matrix:Kj,not:dj,typed:SV,zeros:sG}),concat:WC({isInteger:nj,matrix:Kj,typed:SV}),max:ZC({config:V_,larger:tW,numeric:tG,typed:SV}),print:nD({add:OG,matrix:Kj,typed:SV,zeros:sG}),bitAnd:wD({add:OG,concat:cG,equalScalar:GV,matrix:Kj,not:dj,typed:SV,zeros:sG}),diff:ED({bignumber:Ij,matrix:Kj,number:pj,subtract:RG,typed:SV}),min:TD({config:V_,numeric:tG,smaller:NG,typed:SV}),subset:OD({add:OG,matrix:Kj,typed:SV,zeros:sG}),bitOr:qD({DenseMatrix:gV,concat:cG,equalScalar:GV,matrix:Kj,typed:SV}),cumsum:WD({add:OG,typed:SV,unaryPlus:IG}),index:XD({Index:eW,getMatrixDataType:QV}),sum:$D({add:OG,config:V_,numeric:tG,typed:SV}),range:KD({bignumber:Ij,matrix:Kj,add:OG,config:V_,isPositive:ij,larger:tW,largerEq:bG,smaller:NG,smallerEq:OW,typed:SV}),row:eN({Index:eW,matrix:Kj,range:UW,typed:SV}),column:rN({Index:eW,matrix:Kj,range:UW,typed:SV}),mean:oN({add:OG,divide:UX,typed:SV}),quantileSeq:uN({add:OG,bignumber:Ij,compare:qG,divide:UX,isInteger:nj,larger:tW,multiply:sW,partitionSelect:cW,smaller:NG,smallerEq:OW,subtract:RG,typed:SV}),variance:fN({add:OG,apply:Rj,divide:UX,isNaN:Bj,multiply:sW,subtract:RG,typed:SV}),std:gN({map:cj,sqrt:Vj,typed:SV,variance:dY})}),Gw(DY,{BigNumber:$q,Complex:Zq,Fraction:eV,Matrix:aV,Node:NY,ObjectNode:RY,OperatorNode:kY,ParenthesisNode:IY,Range:uV,RelationalNode:FY,ResultSet:cV,ArrayNode:PY,BlockNode:OY,ConditionalNode:BY,ConstantNode:LY,DenseMatrix:gV,RangeNode:zY,Chain:HY,FunctionAssignmentNode:qY,SparseMatrix:Sj,IndexNode:jY,ImmutableDenseMatrix:QG,Index:eW,AccessorNode:GY,AssignmentNode:WY,FibonacciHeap:MW,Spa:GW,Unit:eX,SymbolNode:XY,FunctionNode:YY,Help:t$,Parser:n$}),HY.createProxy(TY);var c$=Object.defineProperty,h$=(e,t,n)=>(((e,t,n)=>{t in e?c$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const d$=new nu,p$=new Jh,f$=Math.cos(Math.PI/180*70),m$=(e,t)=>(e%t+t)%t;class g$ extends Ls{constructor(e,t){super(),h$(this,"object"),h$(this,"domElement"),h$(this,"enabled",!0),h$(this,"target",new Tl),h$(this,"minDistance",0),h$(this,"maxDistance",1/0),h$(this,"minZoom",0),h$(this,"maxZoom",1/0),h$(this,"minPolarAngle",0),h$(this,"maxPolarAngle",Math.PI),h$(this,"minAzimuthAngle",-1/0),h$(this,"maxAzimuthAngle",1/0),h$(this,"enableDamping",!1),h$(this,"dampingFactor",.05),h$(this,"enableZoom",!0),h$(this,"zoomSpeed",1),h$(this,"enableRotate",!0),h$(this,"rotateSpeed",1),h$(this,"enablePan",!0),h$(this,"panSpeed",1),h$(this,"screenSpacePanning",!0),h$(this,"keyPanSpeed",7),h$(this,"zoomToCursor",!1),h$(this,"autoRotate",!1),h$(this,"autoRotateSpeed",2),h$(this,"reverseOrbit",!1),h$(this,"reverseHorizontalOrbit",!1),h$(this,"reverseVerticalOrbit",!1),h$(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),h$(this,"mouseButtons",{LEFT:ti.ROTATE,MIDDLE:ti.DOLLY,RIGHT:ti.PAN}),h$(this,"touches",{ONE:ni.ROTATE,TWO:ni.DOLLY_PAN}),h$(this,"target0"),h$(this,"position0"),h$(this,"zoom0"),h$(this,"_domElementKeyEvents",null),h$(this,"getPolarAngle"),h$(this,"getAzimuthalAngle"),h$(this,"setPolarAngle"),h$(this,"setAzimuthalAngle"),h$(this,"getDistance"),h$(this,"getZoomScale"),h$(this,"listenToKeyEvents"),h$(this,"stopListenToKeyEvents"),h$(this,"saveState"),h$(this,"reset"),h$(this,"update"),h$(this,"connect"),h$(this,"dispose"),h$(this,"dollyIn"),h$(this,"dollyOut"),h$(this,"getScale"),h$(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=e=>{let t=m$(e,2*Math.PI),r=u.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),c.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=m$(e,2*Math.PI),r=u.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),c.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Z),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Z),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=o.NONE},this.update=(()=>{const t=new Tl,i=new Tl(0,1,0),a=(new Al).setFromUnitVectors(e.up,i),p=a.clone().invert(),f=new Tl,m=new Al,g=2*Math.PI;return function(){const v=n.object.position;a.setFromUnitVectors(e.up,i),p.copy(a).invert(),t.copy(v).sub(n.target),t.applyQuaternion(a),u.setFromVector3(t),n.autoRotate&&s===o.NONE&&C(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=c.theta*n.dampingFactor,u.phi+=c.phi*n.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let y=n.minAzimuthAngle,x=n.maxAzimuthAngle;isFinite(y)&&isFinite(x)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),x<-Math.PI?x+=g:x>Math.PI&&(x-=g),u.theta=y<=x?Math.max(y,Math.min(x,u.theta)):u.theta>(y+x)/2?Math.max(y,u.theta):Math.min(x,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&M||n.object.isOrthographicCamera?u.radius=B(u.radius):u.radius=B(u.radius*h),t.setFromSpherical(u),t.applyQuaternion(p),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),d.set(0,0,0));let b=!1;if(n.zoomToCursor&&M){let r=null;if(n.object instanceof Yc&&n.object.isPerspectiveCamera){const e=t.length();r=B(e*h);const i=e-r;n.object.position.addScaledVector(S,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new Tl(_.x,_.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),b=!0;const i=new Tl(_.x,_.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(d$.origin.copy(n.object.position),d$.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(d$.direction))<f$?e.lookAt(n.target):(p$.setFromNormalAndCoplanarPoint(n.object.up,n.target),d$.intersectPlane(p$,n.target))))}else n.object instanceof _m&&n.object.isOrthographicCamera&&(b=1!==h,b&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,M=!1,!!(b||f.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),b=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",W),n.domElement.addEventListener("pointercancel",Y),n.domElement.addEventListener("wheel",$)},this.dispose=()=>{var e,t,r,i,a,o;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",J),null==(t=n.domElement)||t.removeEventListener("pointerdown",W),null==(r=n.domElement)||r.removeEventListener("pointercancel",Y),null==(i=n.domElement)||i.removeEventListener("wheel",$),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointermove",X),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointerup",Y),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Z)};const n=this,r={type:"change"},i={type:"start"},a={type:"end"},o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const l=1e-6,u=new Cg,c=new Cg;let h=1;const d=new Tl,p=new Zs,f=new Zs,m=new Zs,g=new Zs,v=new Zs,y=new Zs,x=new Zs,b=new Zs,w=new Zs,S=new Tl,_=new Zs;let M=!1;const E=[],A={};function T(){return Math.pow(.95,n.zoomSpeed)}function C(e){n.reverseOrbit||n.reverseHorizontalOrbit?c.theta+=e:c.theta-=e}function D(e){n.reverseOrbit||n.reverseVerticalOrbit?c.phi+=e:c.phi-=e}const N=(()=>{const e=new Tl;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}})(),R=(()=>{const e=new Tl;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}})(),k=(()=>{const e=new Tl;return function(t,r){const i=n.domElement;if(i&&n.object instanceof Yc&&n.object.isPerspectiveCamera){const a=n.object.position;e.copy(a).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),N(2*t*o/i.clientHeight,n.object.matrix),R(2*r*o/i.clientHeight,n.object.matrix)}else i&&n.object instanceof _m&&n.object.isOrthographicCamera?(N(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),R(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function I(e){n.object instanceof Yc&&n.object.isPerspectiveCamera||n.object instanceof _m&&n.object.isOrthographicCamera?h=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function F(e){I(h/e)}function P(e){I(h*e)}function O(e){if(!n.zoomToCursor||!n.domElement)return;M=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,a=t.width,o=t.height;_.x=r/a*2-1,_.y=-i/o*2+1,S.set(_.x,_.y,1).unproject(n.object).sub(n.object.position).normalize()}function B(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function L(e){p.set(e.clientX,e.clientY)}function z(e){g.set(e.clientX,e.clientY)}function U(){if(1==E.length)p.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);p.set(e,t)}}function H(){if(1==E.length)g.set(E[0].pageX,E[0].pageY);else{const e=.5*(E[0].pageX+E[1].pageX),t=.5*(E[0].pageY+E[1].pageY);g.set(e,t)}}function q(){const e=E[0].pageX-E[1].pageX,t=E[0].pageY-E[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function V(e){if(1==E.length)f.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(C(2*Math.PI*m.x/t.clientHeight),D(2*Math.PI*m.y/t.clientHeight)),p.copy(f)}function j(e){if(1==E.length)v.set(e.pageX,e.pageY);else{const t=Q(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),k(y.x,y.y),g.copy(v)}function G(e){const t=Q(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);b.set(0,a),w.set(0,Math.pow(b.y/x.y,n.zoomSpeed)),F(w.y),x.copy(b)}function W(e){var t,r;!1!==n.enabled&&(0===E.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",X),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",Y)),function(e){E.push(e)}(e),"touch"===e.pointerType?function(e){switch(K(e),E.length){case 1:switch(n.touches.ONE){case ni.ROTATE:if(!1===n.enableRotate)return;U(),s=o.TOUCH_ROTATE;break;case ni.PAN:if(!1===n.enablePan)return;H(),s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(n.touches.TWO){case ni.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&q(),n.enablePan&&H(),s=o.TOUCH_DOLLY_PAN;break;case ni.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&q(),n.enableRotate&&U(),s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case ti.DOLLY:if(!1===n.enableZoom)return;!function(e){O(e),x.set(e.clientX,e.clientY)}(e),s=o.DOLLY;break;case ti.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;z(e),s=o.PAN}else{if(!1===n.enableRotate)return;L(e),s=o.ROTATE}break;case ti.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),s=o.ROTATE}else{if(!1===n.enablePan)return;z(e),s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&n.dispatchEvent(i)}(e))}function X(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(K(e),s){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;V(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&G(e),n.enablePan&&j(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&G(e),n.enableRotate&&V(e)}(e),n.update();break;default:s=o.NONE}}(e):function(e){if(!1===n.enabled)return;switch(s){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(C(2*Math.PI*m.x/t.clientHeight),D(2*Math.PI*m.y/t.clientHeight)),p.copy(f),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){b.set(e.clientX,e.clientY),w.subVectors(b,x),w.y>0?F(T()):w.y<0&&P(T()),x.copy(b),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),k(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function Y(e){var t,r,i;!function(e){delete A[e.pointerId];for(let t=0;t<E.length;t++)if(E[t].pointerId==e.pointerId)return void E.splice(t,1)}(e),0===E.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",X),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",Y)),n.dispatchEvent(a),s=o.NONE}function $(e){!1===n.enabled||!1===n.enableZoom||s!==o.NONE&&s!==o.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){O(e),e.deltaY<0?P(T()):e.deltaY>0&&F(T()),n.update()}(e),n.dispatchEvent(a))}function Z(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:k(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:k(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:k(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:k(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function J(e){!1!==n.enabled&&e.preventDefault()}function K(e){let t=A[e.pointerId];void 0===t&&(t=new Zs,A[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Q(e){const t=e.pointerId===E[0].pointerId?E[1]:E[0];return A[t.pointerId]}this.dollyIn=function(){P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()),n.update()},this.dollyOut=function(){F(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()),n.update()},this.getScale=()=>h,this.setScale=e=>{I(e),n.update()},this.getZoomScale=()=>T(),void 0!==t&&this.connect(t),this.update()}}const v$=t.forwardRef(((e,n)=>{let{makeDefault:r,camera:i,regress:a,domElement:o,enableDamping:s=!0,keyEvents:l=!1,onChange:u,onStart:c,onEnd:h,...d}=e;const p=iw((e=>e.invalidate)),f=iw((e=>e.camera)),m=iw((e=>e.gl)),g=iw((e=>e.events)),v=iw((e=>e.setEvents)),y=iw((e=>e.set)),x=iw((e=>e.get)),b=iw((e=>e.performance)),w=i||f,S=o||g.connected||m.domElement,_=t.useMemo((()=>new g$(w)),[w]);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=rw(),r=n.getState().internal.subscribe,i=bb(e);xb((()=>r(i,t,n)),[t,r,n])}((()=>{_.enabled&&_.update()}),-1),t.useEffect((()=>(l&&_.connect(!0===l?S:l),_.connect(S),()=>{_.dispose()})),[l,S,a,_,p]),t.useEffect((()=>{const e=e=>{p(),a&&b.regress(),u&&u(e)},t=e=>{c&&c(e)},n=e=>{h&&h(e)};return _.addEventListener("change",e),_.addEventListener("start",t),_.addEventListener("end",n),()=>{_.removeEventListener("start",t),_.removeEventListener("end",n),_.removeEventListener("change",e)}}),[u,c,h,_,p,v]),t.useEffect((()=>{if(r){const e=x().controls;return y({controls:_}),()=>y({controls:e})}}),[r,_]),t.createElement("primitive",Gw({ref:n,object:_,enableDamping:s},d))})),y$=()=>(0,ub.jsxs)(ub.Fragment,{children:[(0,ub.jsx)(gS,{points:[[-15,0,0],[15,0,0]],color:"#99e550",lineWidth:2}),(0,ub.jsx)(z_,{position:[16,0,0],fontSize:1,color:"#99e550",anchorX:"center",anchorY:"middle",children:"Y"}),(0,ub.jsx)(gS,{points:[[0,-15,0],[0,15,0]],color:"#639bff",lineWidth:2}),(0,ub.jsx)(z_,{position:[0,16,0],fontSize:1,color:"#639bff",anchorX:"center",anchorY:"middle",children:"Z"}),(0,ub.jsx)(gS,{points:[[0,0,-10],[0,0,50]],color:"#d95763",lineWidth:2})]}),x$=e=>{let{color:t,formula:n,axis:r,label:i,l:a,phaseT:o,phaseX:s}=e;const l=[],u="x"===r?[10,4,0]:[10,2,0];for(let c=0;c<=a;c+=.1){let e=0;try{e=e$(`${n}`,{z:s,t:o,x:c})}catch(vk){console.error("Error evaluando f\xf3rmula:",vk)}"x"===r?l.push([e,0,c]):"y"===r&&l.push([0,e,c])}return(0,ub.jsxs)(ub.Fragment,{children:[(0,ub.jsx)(gS,{points:l,color:t,lineWidth:2}),(0,ub.jsx)(z_,{position:u,fontSize:1,color:t,anchorX:"middle",anchorY:"middle",children:i})]})},b$=e=>{let{position:t,color:n}=e;return(0,ub.jsxs)("mesh",{position:t,children:[(0,ub.jsx)("planeGeometry",{args:[15,15]}),(0,ub.jsx)("meshBasicMaterial",{color:n,opacity:.3,transparent:!0,side:2})]})},w$={container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f0f0f0",padding:"10px",margin:"10px"},controls:{marginBottom:"20px",textAlign:"center"},canvasContainer:{border:"2px solid #000",borderRadius:"10px",width:"80%",height:"70vh",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#fff"}},S$=e=>{let{formulas:n,cavityLenght:r,harmonicNumber:i,closedData:a}=e;const[o,s]=t.useState(0),[l,u]=t.useState(0);t.useEffect((()=>{const e=setInterval((()=>{u((e=>e+.1)),s((e=>e+.1))}),50);return()=>clearInterval(e)}),[]);const c=n.electric,h=n.magnetic;return(0,ub.jsx)(ub.Fragment,{children:(0,ub.jsxs)("div",{style:w$.container,children:[(0,ub.jsx)("p",{children:"La vista tiene navegaci\xf3n"}),(0,ub.jsx)("div",{style:w$.canvasContainer,children:(0,ub.jsxs)(jw,{camera:{position:[12,8,30],rotateY:50,fov:60},children:[(0,ub.jsx)("ambientLight",{intensity:.1}),(0,ub.jsx)("pointLight",{position:[10,10,10]}),(0,ub.jsx)(y$,{}),(0,ub.jsx)(x$,{color:"#df7126",formula:c,axis:"x",label:"Campo El\xe9ctrico (E)",l:r,phaseT:l,phaseX:o}),(0,ub.jsx)(x$,{color:"#632c78",formula:h,axis:"y",label:"Campo Magn\xe9tico (B)",l:r,phaseT:l,phaseX:o}),"abierta-cerrada"===a&&(0,ub.jsx)(b$,{position:[0,0,r],color:"green"}),"cerrada-cerrada"===a&&(0,ub.jsxs)(ub.Fragment,{children:[(0,ub.jsx)(b$,{position:[0,0,r],color:"green"}),(0,ub.jsx)(b$,{position:[0,0,0],color:"red"})]}),(0,ub.jsx)(v$,{})]})})]})})},_$=()=>{let e,n,r,i;const[a,o]=(0,t.useState)("cerrada-cerrada"),s={"cerrada-cerrada":{factor:2,E:(e,t,n)=>`E(x,t) = ${2*n} \xb7 Sin(${e.toFixed(2)} \xb7 x) \xb7 Cos(${t.toFixed(2)} \xb7 t)`,B:(e,t,n)=>`B(x,t) = ${2*n} \xb7 Sin(${t.toFixed(2)} \xb7 t) \xb7 Cos(${e.toFixed(2)} \xb7 x)`},"abierta-abierta":{factor:2,E:(e,t,n)=>`E(x,t) = ${2*n} \xb7 Cos(${e.toFixed(2)} \xb7 x) \xb7 Cos(${t.toFixed(2)} \xb7 t)`,B:(e,t,n)=>`B(x,t) = ${2*n} \xb7 Sin(${e.toFixed(2)} \xb7 x) \xb7 Sin(${t.toFixed(2)} \xb7 t)`},"abierta-cerrada":{factor:1,E:(e,t,n)=>`E(x,t) = ${n} \xb7 Cos(${e.toFixed(2)} \xb7 x) \xb7 Cos(${t.toFixed(2)} \xb7 t)`,B:(e,t,n)=>`B(x,t) = ${n} \xb7 Sin(${e.toFixed(2)} \xb7 x) \xb7 Cos(${t.toFixed(2)} \xb7 t)`}},[l,u]=(0,t.useState)({L:"10",v:"10",amplitude:"",nodes:"1",E0:""}),c=(e,t,n,r,i)=>{const a=s[e];return{electric:a.E(t,n,r).replace(/E\(x,t\) = /,"").replace(/Sin/g,"sin").replace(/Cos/g,"cos").replace(/\xb7/g,"*"),magnetic:a.B(t,n,i).replace(/B\(x,t\) = /,"").replace(/Sin/g,"sin").replace(/Cos/g,"cos").replace(/\xb7/g,"*")}},[h,d]=(0,t.useState)([]);(0,t.useEffect)((()=>{(()=>{const{L:t,v:o,nodes:s,E0:u}=l,h=[];let p="",f="";for(let l=1;l<=s;l++){switch(a){case"cerrada-cerrada":case"abierta-abierta":e=Math.PI*l/t;break;case"abierta-cerrada":e=(2*l-1)*Math.PI/(2*t);break;default:e=0}n=e*o,r=2*t/l,i=u/o;const d=c(a,e,n,u,i);l===s&&(p=d.electric,f=d.magnetic),h.push({n:l,k:e,w:n,lambda:r,E0:u,B0:i})}v({E:p,B:f}),d(h)})()}),[l,a]);const p=e=>{const{name:t,value:n}=e.target;u({...l,[t]:""===n?"":Number(n)})},f=e=>{o(e.target.value)},m=e=>Qr(e,{throwOnError:!1}),[g,v]=(0,t.useState)({E:"cola",B:"bola"});return(0,ub.jsx)("div",{className:"container mx-auto p-4",children:(0,ub.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 space-y-6",children:[(0,ub.jsx)(S$,{formulas:{electric:g.E,magnetic:g.B},cavityLenght:l.L,harmonicNumber:l.nodes,closedData:a}),(0,ub.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Par\xe1metros Iniciales"}),(0,ub.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ub.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ub.jsxs)("label",{htmlFor:"E0",className:"block font-semibold w-1/3",children:["Amplitud (",(0,ub.jsxs)("span",{className:"italic",children:["E",(0,ub.jsx)("sub",{children:"0"})]}),"):"]}),(0,ub.jsx)("input",{type:"number",name:"E0",onChange:p,className:"border rounded px-2 py-1 w-2/3 text-sm"}),(0,ub.jsx)("span",{className:"ml-2",children:"V/m"})]}),(0,ub.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ub.jsx)("label",{htmlFor:"L",className:"block font-semibold w-1/3",children:"Longitud de la Cavidad:"}),(0,ub.jsx)("input",{type:"number",name:"L",value:l.L,onChange:p,className:"border rounded px-2 py-1 w-2/3 text-sm"}),(0,ub.jsx)("span",{className:"ml-2",children:"m"})]}),(0,ub.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ub.jsx)("label",{htmlFor:"v",className:"block font-semibold w-1/3",children:"Velocidad:"}),(0,ub.jsx)("input",{type:"number",name:"v",value:l.v,onChange:p,className:"border rounded px-2 py-1 w-2/3 text-sm"}),(0,ub.jsx)("span",{className:"ml-2",children:"m/s"})]}),(0,ub.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ub.jsx)("label",{htmlFor:"nodes",className:"block font-semibold w-1/3",children:"Armonicos a calcular:"}),(0,ub.jsx)("input",{type:"number",name:"nodes",value:l.nodes,onChange:p,className:"border rounded px-2 py-1 w-2/3 text-sm"})]})]}),(0,ub.jsxs)("div",{className:"mt-4",children:[(0,ub.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Condiciones de Frontera"}),(0,ub.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ub.jsxs)("label",{children:[(0,ub.jsx)("input",{type:"radio",name:"boundary",value:"cerrada-cerrada",checked:"cerrada-cerrada"===a,onChange:f}),"Cerrada-Cerrada"]}),(0,ub.jsxs)("label",{children:[(0,ub.jsx)("input",{type:"radio",name:"boundary",value:"abierta-abierta",checked:"abierta-abierta"===a,onChange:f}),"Abierta-Abierta"]}),(0,ub.jsxs)("label",{children:[(0,ub.jsx)("input",{type:"radio",name:"boundary",value:"abierta-cerrada",checked:"abierta-cerrada"===a,onChange:f}),"Abierta-Cerrada"]})]})]}),(0,ub.jsxs)("div",{className:"mt-4",children:[(0,ub.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Datos"}),(0,ub.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((e=>{let{n:t,k:n,w:r,lambda:i,E0:o,B0:l}=e;return(0,ub.jsxs)("div",{className:"text-sm font-mono bg-gray-50 p-4 rounded-lg shadow-sm",children:[(0,ub.jsxs)("p",{children:["n = ",t]}),(0,ub.jsxs)("p",{children:["\u03bb = ",i.toFixed(2),"m"]}),(0,ub.jsx)("p",{dangerouslySetInnerHTML:{__html:m(s[a].E(n,r,o))}}),(0,ub.jsx)("p",{dangerouslySetInnerHTML:{__html:m(s[a].B(n,r,l))}})]},t)}))})]})]})})},M$=()=>{const[e,n]=(0,t.useState)("comparison");return(0,ub.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,ub.jsx)("header",{className:"w-full bg-white border-b border-gray-200",children:(0,ub.jsx)("div",{className:"container mx-auto px-4 py-6 text-center",children:(0,ub.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Simulaci\xf3n de Ondas Electromagn\xe9ticas"})})}),(0,ub.jsx)("main",{className:"container mx-auto px-4 py-6",children:(0,ub.jsx)("div",{className:"max-w-3xl mx-auto mb-6",children:(0,ub.jsx)(_$,{})})}),(0,ub.jsx)("footer",{className:"w-full bg-white border-t border-gray-200 mt-12",children:(0,ub.jsx)("div",{className:"container mx-auto px-4 py-6 text-center",children:(0,ub.jsxs)("div",{className:"text-gray-600 text-sm",children:[(0,ub.jsx)("p",{className:"mb-2",children:"\xa9 2024 Simulaci\xf3n de Ondas Electromagn\xe9ticas"}),(0,ub.jsx)("p",{children:"Desarrollado para visualizaci\xf3n y an\xe1lisis de fen\xf3menos ondulatorios"}),(0,ub.jsx)("p",{children:"Desarrollado por: Alejandro Cardenas, Paulo C. Chamorro, Jesus G. Parra y Elkin A. Morillo"})]})})})]})},E$=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:a,getTTFB:o}=t;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,ub.jsx)(t.StrictMode,{children:(0,ub.jsx)(M$,{})})),E$()})()})();
//# sourceMappingURL=main.badfd8fd.js.map